<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Call Analytics Viewer</title><style>

body{
background:#e0e5ec;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
margin:0;
padding:15px;
color:#2d3436;
}

.app{
max-width:900px;
margin:auto;
}

.title{
text-align:center;
margin-bottom:20px;
font-weight:600;
}


/* Neumorphic */

.neu{
background:#e0e5ec;
border-radius:20px;
box-shadow:
8px 8px 16px #a3b1c6,
-8px -8px 16px #ffffff;
}

.neu-inset{
background:#e0e5ec;
border-radius:12px;
box-shadow:
inset 4px 4px 8px #a3b1c6,
inset -4px -4px 8px #ffffff;
}

.hidden{
display:none;
}


/* Inputs */

.load{
padding:20px;
margin-bottom:20px;
}

input, textarea{
width:100%;
border:none;
outline:none;
padding:12px;
margin-top:8px;
border-radius:12px;
background:#e0e5ec;
box-shadow:
inset 4px 4px 8px #a3b1c6,
inset -4px -4px 8px #ffffff;
font-size:14px;
}

textarea{
height:120px;
resize:none;
}

button{
margin-top:10px;
padding:10px;
border:none;
border-radius:12px;
cursor:pointer;
background:#e0e5ec;
box-shadow:
4px 4px 8px #a3b1c6,
-4px -4px 8px #ffffff;
}

button:active{
box-shadow:
inset 4px 4px 8px #a3b1c6,
inset -4px -4px 8px #ffffff;
}


/* Stats */

.stats{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
gap:15px;
margin-bottom:20px;
}

.stat{
padding:15px;
text-align:center;
}

.stat-value{
font-size:22px;
font-weight:bold;
}


/* Call Log */

.section-label{
margin:20px 0 10px 5px;
font-weight:bold;
opacity:0.7;
}

.call{
padding:12px;
margin-bottom:10px;
border-radius:15px;
}

.call-row{
display:flex;
justify-content:space-between;
}

.call-name{
font-weight:600;
}

.call-meta{
font-size:13px;
opacity:0.7;
}

.call-type{
font-size:13px;
margin-top:3px;
}

.incoming{color:#2ecc71;}
.outgoing{color:#3498db;}
.missed{color:#e74c3c;}
.rejected{color:#e67e22;}
.blocked{color:#7f8c8d;}

@media(max-width:600px){
.title{font-size:20px;}
}

</style></head>
<body><div class="app"><h2 class="title">Call Analytics Viewer</h2><div id="loadSection" class="load neu"><label>Load from Link</label>
<input id="linkInput"
value="https://raw.githubusercontent.com/MOFO-UG/ControlTheWorld/main/SM-E156B/Example/18-02-2026/example.json">
<button onclick="loadFromLink()">Load</button>

<br><br>

<label>Paste JSON</label>

<textarea id="pasteInput"></textarea><button onclick="loadFromPaste()">Load</button>

<br><br>

<label>Select File</label>
<input type="file" id="fileInput" accept=".json">

</div><div id="dashboard" class="hidden"><div class="stats"><div class="stat neu">
<div id="contacts" class="stat-value">0</div>
Contacts
</div><div class="stat neu">
<div id="calls" class="stat-value">0</div>
Calls
</div><div class="stat neu">
<div id="duration" class="stat-value">0</div>
Duration
</div></div><div id="callLog"></div></div></div><script>

let DATA=[];

const TYPE_MAP={
1:{name:"Incoming",class:"incoming"},
2:{name:"Outgoing",class:"outgoing"},
3:{name:"Missed",class:"missed"},
5:{name:"Rejected",class:"rejected"},
6:{name:"Blocked",class:"blocked"}
};


function formatDuration(sec){

if(sec===0) return "";

let m=Math.floor(sec/60);
let s=sec%60;

return m>0?`${m}m ${s}s`:`${s}s`;

}


function formatTime(ts){

let d=new Date(ts);

return d.toLocaleTimeString([],{
hour:"2-digit",
minute:"2-digit"
});

}

function formatDate(ts){

let d=new Date(ts);

return d.toLocaleDateString([],{
day:"numeric",
month:"short",
year:"numeric"
});

}


function getRelativeLabel(ts){

let now=new Date();

let date=new Date(ts);

let diff=(now-date)/(1000*60*60*24);

if(diff<1 && now.getDate()===date.getDate())
return "Today";

if(diff<2 && now.getDate()-date.getDate()===1)
return "Yesterday";

if(diff<=7)
return "Last 7 Days";

if(diff<=30)
return "Last 30 Days";

return "Older";

}


async function loadFromLink(){

let url=linkInput.value;

let res=await fetch(url);

let text=await res.text();

process(text);

}


function loadFromPaste(){

process(pasteInput.value);

}


fileInput.onchange=e=>{

let reader=new FileReader();

reader.onload=x=>process(x.target.result);

reader.readAsText(e.target.files[0]);

};


function process(json){

DATA=JSON.parse(json);

loadSection.style.display="none";

dashboard.classList.remove("hidden");

renderStats();

renderLogs();

}


function renderStats(){

let contacts=DATA.length;
let calls=0;
let duration=0;

DATA.forEach(c=>{

c.calls.forEach(call=>{

calls++;
duration+=call.duration;

});

});

document.getElementById("contacts").innerText=contacts;
document.getElementById("calls").innerText=calls;
document.getElementById("duration").innerText=formatDuration(duration);

}


function renderLogs(){

let allCalls=[];

DATA.forEach(contact=>{

contact.calls.forEach(call=>{

allCalls.push({
name:contact.name||"Unknown",
number:contact.number,
type:call.type,
date:call.date,
duration:call.duration
});

});

});


allCalls.sort((a,b)=>b.date-a.date);

let html="";
let lastLabel="";

allCalls.forEach(call=>{

let label=getRelativeLabel(call.date);

if(label!==lastLabel){

html+=`<div class="section-label">${label}</div>`;
lastLabel=label;

}

let typeInfo=TYPE_MAP[call.type]||{name:"Unknown",class:""};

html+=`

<div class="call neu">

<div class="call-row">

<div>
<div class="call-name">${call.name}</div>
<div class="call-meta">${call.number}</div>
<div class="call-type ${typeInfo.class}">
${typeInfo.name}
${call.duration?`â€¢ ${formatDuration(call.duration)}`:""}
</div>
</div>

<div class="call-meta">
${formatTime(call.date)}
</div>

</div>

</div>

`;

});

callLog.innerHTML=html;

}

</script></body>
</html>
