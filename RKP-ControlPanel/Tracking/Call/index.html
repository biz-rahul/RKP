<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Call Analytics Viewer</title><style>

body{
background:#e0e5ec;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
margin:0;
padding:15px;
color:#2d3436;
}

.app{
max-width:900px;
margin:auto;
}

.title{
text-align:center;
margin-bottom:10px;
font-weight:600;
}

/* Neumorphic */

.neu{
background:#e0e5ec;
border-radius:20px;
box-shadow:
8px 8px 16px #a3b1c6,
-8px -8px 16px #ffffff;
}

.hidden{
display:none;
}

/* Load */

.load{
padding:20px;
margin-bottom:20px;
}

input, textarea{
width:100%;
border:none;
outline:none;
padding:12px;
margin-top:8px;
border-radius:12px;
background:#e0e5ec;
box-shadow:
inset 4px 4px 8px #a3b1c6,
inset -4px -4px 8px #ffffff;
font-size:14px;
}

textarea{
height:120px;
}

button{
margin-top:10px;
padding:10px;
border:none;
border-radius:12px;
cursor:pointer;
background:#e0e5ec;
box-shadow:
4px 4px 8px #a3b1c6,
-4px -4px 8px #ffffff;
}

/* Stats */

.stats{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
gap:15px;
margin-bottom:20px;
}

.stat{
padding:15px;
text-align:center;
}

/* Toggle container */

.toggle-container{
display:flex;
align-items:center;
justify-content:center;
flex-direction:column;
margin-bottom:20px;
}

/* Call log */

.section-label{
margin:20px 0 10px 5px;
font-weight:bold;
opacity:0.7;
}

.call{
padding:12px;
margin-bottom:10px;
border-radius:15px;
}

.call-row{
display:flex;
justify-content:space-between;
}

.call-name{
font-weight:600;
}

.call-meta{
font-size:13px;
opacity:0.7;
}

.call-type{
font-size:13px;
margin-top:3px;
}

.incoming{color:#2ecc71;}
.outgoing{color:#3498db;}
.missed{color:#e74c3c;}
.rejected{color:#e67e22;}
.blocked{color:#7f8c8d;}


/* YOUR SWITCH EXACT CODE */

.container {
display:flex;
align-items:center;
justify-content:center;
--hue:220deg;
--width:15rem;
--accent-hue:22deg;
--duration:0.6s;
--easing:cubic-bezier(1,0,1,1);
}

.togglesw {
display:none;
}

.switch {
--shadow-offset:calc(var(--width)/20);
position:relative;
cursor:pointer;
display:flex;
align-items:center;
width:var(--width);
height:calc(var(--width)/2.5);
border-radius:var(--width);
box-shadow:inset 10px 10px 10px hsl(var(--hue) 20% 80%),
inset -10px -10px 10px hsl(var(--hue) 20% 93%);
}

.indicator {
position:absolute;
width:40%;
height:60%;
transition:all var(--duration) var(--easing);
}

.indicator.left {
left:10%;
border-radius:100px 0 0 100px;
background:linear-gradient(180deg,#ffd89b,#ff8c00);
}

.indicator.right {
right:10%;
border-radius:0 100px 100px 0;
background:#ccc;
}

.button {
position:absolute;
z-index:1;
width:55%;
height:80%;
left:5%;
border-radius:100px;
background:#e0e5ec;
transition:all var(--duration) var(--easing);
}


.togglesw:checked ~ .button {
left:40%;
}

</style></head>
<body><div class="app"><h2 class="title">Call Analytics Viewer</h2><div id="loadSection" class="load neu"><label>Load from Link</label>
<input id="linkInput"
value="https://raw.githubusercontent.com/MOFO-UG/ControlTheWorld/main/SM-E156B/Example/18-02-2026/example.json">
<button onclick="loadFromLink()">Load</button>

<br><br>

<label>Paste JSON</label>

<textarea id="pasteInput"></textarea><button onclick="loadFromPaste()">Load</button>

<br><br>

<label>Select File</label>
<input type="file" id="fileInput" accept=".json">

</div><div id="dashboard" class="hidden"><div class="toggle-container"><label>Hide Number</label>

<div class="container">
<label class="switch">
<input id="hideToggle" class="togglesw" type="checkbox" checked>
<div class="indicator left"></div>
<div class="indicator right"></div>
<div class="button"></div>
</label>

</div></div>
  
<div class="neu" style="padding:15px;margin-bottom:15px;">
<input
id="searchInput"
type="text"
placeholder="Search by name or number"
style="margin-bottom:10px;"
>
<button onclick="searchCallLogs()">Search</button>
<button onclick="clearSearch()" style="margin-left:10px;">
Clear
</button>
</div>


  <!-- FILTER BUTTONS -->
<div class="neu" style="padding:15px;margin-bottom:15px;">

<button onclick="filterNewest()">Newest</button>

<button onclick="filterOldest()">Oldest</button>

<button onclick="filterMostCalled()">Most Called (Top 10)</button>

<button onclick="filterHighestDuration()">Highest Duration (Top 100)</button>

<button onclick="filterLowestDuration()">Lowest Duration (Top 100)</button>

<button onclick="resetFilters()">Reset</button>

</div>


  
  <div class="stats"><div class="stat neu">
<div id="contacts">0</div>
Contacts
</div><div class="stat neu">
<div id="calls">0</div>
Calls
</div><div class="stat neu">
<div id="duration">0</div>
Duration
</div></div><div id="callLog"></div></div></div><script>

let DATA=[];

const TYPE_MAP={
1:{name:"Incoming",class:"incoming"},
2:{name:"Outgoing",class:"outgoing"},
3:{name:"Missed",class:"missed"},
5:{name:"Rejected",class:"rejected"},
6:{name:"Blocked",class:"blocked"}
};


/* MASK NUMBER */

function maskNumber(num){

num=num.replace(/\D/g,'');

if(num.length<=4) return "***";

let first=num.slice(0,2);
let middle=num.slice(2,-2).replace(/./g,"*");
let last=num.slice(-2);

return first+middle+last;

}


/* DATE */

function formatDate(ts){

return new Date(ts).toLocaleDateString([],{
day:"numeric",
month:"short",
year:"numeric"
});

}


/* TIME */

function formatTime(ts){

return new Date(ts).toLocaleTimeString([],{
hour:"2-digit",
minute:"2-digit"
});

}



function getAllCalls(){

let all=[];

DATA.forEach(contact=>{

contact.calls.forEach(call=>{

all.push({

name:contact.name||"Unknown",
number:contact.number,
...call

});

});

});

return all;

}



function renderFromCallArray(callArray){

let hide=hideToggle.checked;

let html="";
let last="";

callArray.forEach(call=>{

let label=getRelativeLabel(call.date);

if(label!==last){

html+=`<div class="section-label">${label}</div>`;

last=label;

}

let t=TYPE_MAP[call.type]||{name:"Unknown",class:""};

let number=hide?maskNumber(call.number):call.number;

html+=`

<div class="call neu">

<div class="call-row">

<div>

<div class="call-name">${call.name}</div>

<div class="call-meta">${number}</div>

<div class="call-type ${t.class}">
${t.name}
${call.duration?` • ${formatDuration(call.duration)}`:""}
</div>

<div class="call-meta">${formatDate(call.date)}</div>

</div>

<div class="call-meta">
${formatTime(call.date)}
</div>

</div>

</div>

`;

});

callLog.innerHTML=html;

}



function filterNewest(){

let calls=getAllCalls();

calls.sort((a,b)=>b.date-a.date);

renderFromCallArray(calls);

}



function filterOldest(){

let calls=getAllCalls();

calls.sort((a,b)=>a.date-b.date);

renderFromCallArray(calls);

}



function filterHighestDuration(){

let calls=getAllCalls();

calls.sort((a,b)=>b.duration-a.duration);

calls=calls.slice(0,100);

renderFromCallArray(calls);

}



function filterLowestDuration(){

let calls=getAllCalls();

calls.sort((a,b)=>a.duration-b.duration);

calls=calls.slice(0,100);

renderFromCallArray(calls);

}



function filterMostCalled(){

let map={};

DATA.forEach(contact=>{

map[contact.number]={

name:contact.name,
number:contact.number,
count:contact.calls.length

};

});

let arr=Object.values(map);

arr.sort((a,b)=>b.count-a.count);

arr=arr.slice(0,10);

let hide=hideToggle.checked;

let html="<div class='section-label'>Top 10 Most Called</div>";

arr.forEach(item=>{

let number=hide?maskNumber(item.number):item.number;

html+=`

<div class="call neu">

<div class="call-row">

<div>

<div class="call-name">${item.name}</div>

<div class="call-meta">${number}</div>

<div class="call-type">

Total Calls: ${item.count}

</div>

</div>

</div>

</div>

`;

});

callLog.innerHTML=html;

}



function resetFilters(){

renderLogs();

}


  
/* DURATION */

function formatDuration(sec){

if(sec===0) return "";

let m=Math.floor(sec/60);
let s=sec%60;

return m>0?`${m}m ${s}s`:`${s}s`;

}


/* GROUP */

function getRelativeLabel(ts){

let now=new Date();
let d=new Date(ts);

let diff=(now-d)/(1000*60*60*24);

if(diff<1 && now.getDate()===d.getDate()) return "Today";
if(diff<2 && now.getDate()-d.getDate()===1) return "Yesterday";
if(diff<=7) return "Last 7 Days";
if(diff<=30) return "Last 30 Days";

return "Older";

}


/* LOAD */

async function loadFromLink(){

let res=await fetch(linkInput.value);
process(await res.text());

}

function loadFromPaste(){

process(pasteInput.value);

}

fileInput.onchange=e=>{

let r=new FileReader();

r.onload=x=>process(x.target.result);

r.readAsText(e.target.files[0]);

};


function process(json){

DATA=JSON.parse(json);

loadSection.style.display="none";

dashboard.classList.remove("hidden");

renderStats();

renderLogs();

}


/* STATS */

function renderStats(){

let totalCalls = 0;
let totalDuration = 0;

DATA.forEach(contact => {
contact.calls.forEach(call => {
totalCalls++;
totalDuration += call.duration;
});
});

document.getElementById("contacts").innerText = DATA.length;

document.getElementById("calls").innerText = totalCalls;

document.getElementById("duration").innerText =
formatDuration(totalDuration);

}



/* LOGS */

hideToggle.onchange=renderLogs;

function renderLogs(){

let hide=hideToggle.checked;

let all=[];

DATA.forEach(c=>c.calls.forEach(call=>{
all.push({
name:c.name||"Unknown",
number:c.number,
...call
});
}));

all.sort((a,b)=>b.date-a.date);

let html="",last="";

all.forEach(call=>{

let label=getRelativeLabel(call.date);

if(label!==last){
html+=`<div class="section-label">${label}</div>`;
last=label;
}

let t=TYPE_MAP[call.type]||{name:"Unknown",class:""};

let number=hide?maskNumber(call.number):call.number;

html+=`

<div class="call neu">

<div class="call-row">

<div>

<div class="call-name">${call.name}</div>

<div class="call-meta">${number}</div>

<div class="call-type ${t.class}">
${t.name}
${call.duration?` • ${formatDuration(call.duration)}`:""}
</div>

<div class="call-meta">${formatDate(call.date)}</div>

</div>

<div class="call-meta">

${formatTime(call.date)}

</div>

</div>

</div>

`;

});

callLog.innerHTML=html;

}


function searchCallLogs(){

let query =
document.getElementById("searchInput")
.value
.trim()
.toLowerCase();

if(!query){

renderLogs();
return;

}

let filtered = [];

DATA.forEach(contact => {

let nameMatch =
(contact.name || "")
.toLowerCase()
.includes(query);

let numberMatch =
(contact.number || "")
.includes(query);

if(nameMatch || numberMatch){

filtered.push(contact);

}

});

renderLogsFromFiltered(filtered);

}


function clearSearch(){

document.getElementById("searchInput").value="";

renderLogs();

}


function renderLogsFromFiltered(filteredDATA){

let hide = hideToggle.checked;

let all=[];

filteredDATA.forEach(c=>c.calls.forEach(call=>{

all.push({
name:c.name||"Unknown",
number:c.number,
...call
});

}));

all.sort((a,b)=>b.date-a.date);

let html="",last="";

all.forEach(call=>{

let label=getRelativeLabel(call.date);

if(label!==last){
html+=`<div class="section-label">${label}</div>`;
last=label;
}

let t=TYPE_MAP[call.type]||{name:"Unknown",class:""};

let number=hide?maskNumber(call.number):call.number;

html+=`

<div class="call neu">

<div class="call-row">

<div>

<div class="call-name">${call.name}</div>

<div class="call-meta">${number}</div>

<div class="call-type ${t.class}">
${t.name}
${call.duration?` • ${formatDuration(call.duration)}`:""}
</div>

<div class="call-meta">${formatDate(call.date)}</div>

</div>

<div class="call-meta">
${formatTime(call.date)}
</div>

</div>

</div>

`;

});

callLog.innerHTML=html;

}

</script></body>
</html>
