<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apps Analytics Viewer</title>

<style>

/* =========================
   NEUMORPHIC BASE
========================= */

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
background:#e6ebf2;
color:#2d3748;
}

.container{

width:100%;
max-width:1400px;
margin:auto;
padding:20px;

}

/* Desktop grid layout */

.dashboard{

display:grid;

/* Maximum 2 cards per row */
grid-template-columns:repeat(2, minmax(0, 1fr));

gap:20px;

}

/* Tablet: 1 card per row */
@media (max-width: 900px){

.dashboard{

grid-template-columns:1fr;

}

}


/* Full height support */

body{

min-height:100vh;

}


.title{
text-align:center;
font-size:28px;
font-weight:600;
margin-bottom:25px;
}

/* PREMIUM BRIGHTNESS VISUAL */

.brightness-container{

display:flex;
align-items:center;
gap:15px;

}

.brightness-ring{

width:60px;
height:60px;
border-radius:50%;

display:flex;
align-items:center;
justify-content:center;

background:
conic-gradient(
#00f2fe var(--percent),
#d1d9e6 var(--percent)
);

box-shadow:
inset 4px 4px 10px #c5cad1,
inset -4px -4px 10px #ffffff;

}

.brightness-inner{

width:45px;
height:45px;
border-radius:50%;
background:#e6ebf2;

display:flex;
align-items:center;
justify-content:center;

font-weight:bold;

}

/* =========================
   NEUMORPHIC CARD
========================= */

.neo-card{
background:#e6ebf2;
border-radius:20px;
padding:20px;
margin-bottom:20px;

box-shadow:
8px 8px 16px #c5cad1,
-8px -8px 16px #ffffff;
}

/* =========================
   INPUTS
========================= */

.neo-input{
width:100%;
padding:15px;
border-radius:15px;
border:none;
outline:none;

background:#e6ebf2;

box-shadow:
inset 6px 6px 12px #c5cad1,
inset -6px -6px 12px #ffffff;

margin-bottom:15px;

font-size:16px;
}

.neo-textarea{
height:120px;
resize:none;
}

/* =========================
   BUTTON
========================= */

.neo-btn{

padding:12px 20px;
border-radius:12px;
border:none;

background:#e6ebf2;

box-shadow:
6px 6px 12px #c5cad1,
-6px -6px 12px #ffffff;

font-size:16px;
cursor:pointer;
}

.neo-btn:active{

box-shadow:
inset 6px 6px 12px #c5cad1,
inset -6px -6px 12px #ffffff;

}

/* =========================
   HIDDEN
========================= */

.hidden{
display:none;
}

/* =========================
   DASHBOARD
========================= */

/* =========================
   VISUAL LEVEL BARS
========================= */

.level-container{
display:flex;
align-items:center;
gap:10px;
}

.level-bar{
flex:1;
height:12px;
border-radius:10px;
background:#d1d9e6;
box-shadow:
inset 4px 4px 8px #c5cad1,
inset -4px -4px 8px #ffffff;
overflow:hidden;
}

.level-fill{

height:100%;
border-radius:10px;
background:linear-gradient(90deg,#4facfe,#00f2fe);

}

.level-text{
min-width:40px;
text-align:right;
font-weight:600;
}

/* =========================
   BATTERY VISUAL
========================= */

.battery-box{

width:60px;
height:28px;
border-radius:6px;
border:2px solid #2d3748;
position:relative;

}

.battery-fill{

height:100%;
background:linear-gradient(90deg,#00ff87,#60efff);

}

.battery-cap{

width:4px;
height:12px;
background:#2d3748;
position:absolute;
right:-6px;
top:6px;
border-radius:2px;

}

/* =========================
   ICON STYLE
========================= */

.icon{
width:22px;
height:22px;
vertical-align:middle;
margin-left:6px;
}

.dashboard{
margin-top:20px;
}

.data-card{

background:#e6ebf2;
border-radius:15px;
padding:15px;
margin-bottom:15px;

box-shadow:
6px 6px 12px #c5cad1,
-6px -6px 12px #ffffff;

transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.data-card:hover{

transform:translateY(-4px);

box-shadow:
10px 10px 20px #c5cad1,
-10px -10px 20px #ffffff;

}

}

.data-title{
font-weight:600;
margin-bottom:10px;
}

.data-row{

display:grid;

grid-template-columns: 180px 1fr;

gap:10px;

padding:6px 0;

border-bottom:1px solid rgba(0,0,0,0.05);

align-items:center;

}

.data-row div{

word-break:break-word;

overflow-wrap:anywhere;

}



.data-row:last-child{
border-bottom:none;
}

/* =========================
   MOBILE OPTIMIZATION
========================= */

@media(max-width:480px){

.title{
font-size:24px;
}

}

/* =========================
NEUMORPHIC CALENDAR CORE
========================= */

.calendar-container{

margin-top:30px;
padding:25px;

border-radius:20px;

background:#e6ebf2;

box-shadow:
10px 10px 20px #c5cad1,
-10px -10px 20px #ffffff;

}

/* Header */

.calendar-header{

display:flex;
align-items:center;
justify-content:space-between;
margin-bottom:15px;

}

.calendar-title{

font-size:22px;
font-weight:bold;

padding:10px 20px;

border-radius:15px;

box-shadow:
inset 5px 5px 10px #c5cad1,
inset -5px -5px 10px #ffffff;

}

/* Search */

.calendar-search{

padding:10px;

border:none;
outline:none;

border-radius:12px;

background:#e6ebf2;

box-shadow:
inset 5px 5px 10px #c5cad1,
inset -5px -5px 10px #ffffff;

}

/* Grid */

.calendar-grid{

display:grid;

grid-template-columns:repeat(7,1fr);

gap:12px;

}

/* Cell */

.calendar-cell{

height:110px;

padding:8px;

border-radius:15px;

background:#e6ebf2;

box-shadow:
6px 6px 12px #c5cad1,
-6px -6px 12px #ffffff;

cursor:pointer;

transition:0.2s;

}

.calendar-cell:hover{

transform:translateY(-3px);

}

/* Date number */

.calendar-date{

font-weight:bold;
margin-bottom:5px;

}

/* Today circle */

.today{

display:inline-block;

padding:4px 9px;

border-radius:50%;

box-shadow:
inset 3px 3px 6px #c5cad1,
inset -3px -3px 6px #ffffff;

}

/* Event pill */

.event-pill{

padding:3px 6px;
margin-top:3px;

border-radius:8px;

font-size:11px;

background:#e6ebf2;

box-shadow:
inset 3px 3px 6px #c5cad1,
inset -3px -3px 6px #ffffff;

}

/* Popup */

.popup{

position:fixed;
top:50%;
left:50%;

transform:translate(-50%,-50%);

padding:25px;

width:350px;
max-height:400px;

overflow:auto;

border-radius:20px;

background:#e6ebf2;

box-shadow:
15px 15px 30px #c5cad1,
-15px -15px 30px #ffffff;

z-index:1000;

}

.popup-close{

float:right;
cursor:pointer;
font-weight:bold;
font-size:18px;

padding:5px 10px;

border-radius:10px;

box-shadow:
5px 5px 10px #c5cad1,
-5px -5px 10px #ffffff;

}
</style>

</head>
<body>

<div class="container">

<div id="loaderUI">

<div class="title">Apps Analytics Viewer</div>

<div class="neo-card">

<div>Load from Link</div>

<input
class="neo-input"
id="linkInput"
value="https://raw.githubusercontent.com/MOFO-UG/ControlTheWorld/main/SM-E156B/Example/18-02-2026/example.json"
/>

<button class="neo-btn" onclick="loadFromLink()">Load</button>

<br><br>

<div>Paste JSON</div>

<textarea
class="neo-input neo-textarea"
id="pasteInput"
></textarea>

<button class="neo-btn" onclick="loadFromPaste()">Load</button>

<br><br>

<div>Select File</div>

<input
type="file"
class="neo-input"
id="fileInput"
/>

</div>

</div>

<div id="dashboard" class="dashboard hidden"></div>
<div id="calendar" class="calendar-container hidden">

<div class="calendar-header">

<div id="menuBtn">☰</div>

<div id="prevBtn">◀</div>

<div id="monthTitle" class="calendar-title"></div>

<div id="nextBtn">▶</div>

<input type="text" id="searchBox" class="calendar-search" placeholder="Search events...">

</div>

<div id="calendarGrid" class="calendar-grid"></div>

</div>

<div id="popup" class="popup hidden"></div>

<div id="menuPanel" class="popup hidden">

<div class="popup-close" onclick="closeMenu()">X</div>

<h3>Filter Events</h3>

<div class="event-pill" onclick="setFilter('all')">All Events</div>

<div class="event-pill" onclick="setFilter('birthday')">Birthdays</div>

<div class="event-pill" onclick="setFilter('holiday')">Holidays</div>

<div class="event-pill" onclick="setFilter('observance')">Observances</div>

<div class="event-pill" onclick="setFilter('custom')">Custom</div>

</div>
</div>

<script>
/* =========================
   KEYBOARD DETECTION LIST
========================= */

const KEYBOARD_MAP = {

"com.google.android.inputmethod.latin": "Gboard",

"com.samsung.android.honeyboard": "Samsung Keyboard",

"com.swiftkey": "Microsoft SwiftKey",

"com.touchtype.swiftkey": "Microsoft SwiftKey",

"com.emoji.keyboard.touchpal": "TouchPal Keyboard",

"com.touchpal.keyboard": "TouchPal Keyboard",

"com.grammarly.android.keyboard": "Grammarly Keyboard",

"com.fleksy.keyboard": "Fleksy Keyboard",

"com.kikaoem.kikakeyboard": "Kika Keyboard",

"com.facemoji.lite.xiaomi": "Facemoji Keyboard",

"com.facemoji.unicode.keyboard": "Facemoji Keyboard",

"com.jb.emoji.gokeyboard": "GO Keyboard",

"com.baidu.input": "Baidu Keyboard",

"com.iflytek.inputmethod": "iFly Keyboard",

"com.typany.ime": "Typany Keyboard",

"com.ai.type": "ai.type Keyboard",

"com.minuum.keyboard": "Minuum Keyboard",

"com.chrooma.keyboard": "Chrooma Keyboard",

"com.blackberry.keyboard": "BlackBerry Keyboard",

"com.htc.sense.ime": "HTC Sense Keyboard",

"com.lge.ime": "LG Keyboard",

"com.sonyericsson.textinput.uxp": "Sony Keyboard",

"com.huawei.ime": "Huawei Keyboard",

"com.miui.inputmethod": "MIUI Keyboard",

"com.oppo.keyboard": "OPPO Keyboard"

};

function detectKeyboardName(rawValue){

if(!rawValue) return "Unknown";

for(const pkg in KEYBOARD_MAP){

if(rawValue.includes(pkg)){

return KEYBOARD_MAP[pkg];

}

}

return rawValue; // fallback to original

}

/* =========================
   CORE LOAD FUNCTIONS
========================= */

function hideLoader(){

document.getElementById("loaderUI").classList.add("hidden");

document.getElementById("dashboard").classList.remove("hidden");

}

async function loadFromLink(){

const url=document.getElementById("linkInput").value;

const res=await fetch(url);

const json=await res.json();

hideLoader();

render(json);

}

function loadFromPaste(){

const text=document.getElementById("pasteInput").value;

const json=JSON.parse(text);

hideLoader();

render(json);

}

document.getElementById("fileInput").addEventListener("change",function(){

const reader=new FileReader();

reader.onload=function(){

const json=JSON.parse(reader.result);

hideLoader();

render(json);

};

reader.readAsText(this.files[0]);

});

function createLevelBar(value,max=100){

return `
<div class="level-container">

<div class="level-bar">
<div class="level-fill" style="width:${(value/max)*100}%"></div>
</div>

<div class="level-text">${value}</div>

</div>
`;

}


/* =========================
NEUMORPHIC CALENDAR ENGINE
========================= */

let eventsData=[];
let currentMonth=new Date().getMonth();
let currentYear=new Date().getFullYear();

function initCalendar(events){

/* Step A: expand recurring events ±10 years */

const expanded = expandRecurringEvents(events);

/* Step B: merge duplicates safely */

eventsData = mergeEvents(expanded);

/* show calendar */

document.getElementById("calendar").classList.remove("hidden");

renderCalendar();

}

/* =========================
EXPAND EVENTS ±10 YEARS
========================= */

function expandRecurringEvents(events){

const result=[];

const currentYear=new Date().getFullYear();

const startYear=currentYear-10;
const endYear=currentYear+10;

events.forEach(event=>{

const originalDate=new Date(event.start);

const month=originalDate.getMonth();
const day=originalDate.getDate();

for(let year=startYear;year<=endYear;year++){

const newStart=new Date(year,month,day).getTime();

const newEnd = event.end
? new Date(year,month,day).getTime()
: null;

/* create new event clone */

const clone={

...event,

start:newStart,

end:newEnd,

};

result.push(clone);

}

});

/* also include original events */

return [...events,...result];

}

/* MERGE DUPLICATES */

function mergeEvents(events){

const map=new Map();

events.forEach(e=>{

const d=new Date(e.start);

const key=
e.title+"_"+d.getFullYear()+"_"+d.getMonth()+"_"+d.getDate();

if(!map.has(key)){

map.set(key,e);

}

});

return Array.from(map.values());

}

/* SEARCH */

document.getElementById("searchBox").oninput=function(){

const query=this.value.trim().toLowerCase();

/* If empty → return to normal calendar view */

if(query.length===0){

renderCalendar();

return;

}

/* Search across ALL eventsData (all years, all months) */

const results=eventsData.filter(e=>{

return (
(e.title && e.title.toLowerCase().includes(query)) ||

(e.description && e.description.toLowerCase().includes(query)) ||

(e.calendar && e.calendar.toLowerCase().includes(query))

);

});

/* Show results in same Neumorphic popup */

const popup=document.getElementById("popup");

if(results.length===0){

popup.innerHTML=`
<div class="popup-close" onclick="closePopup()">X</div>
<h3>No results found</h3>
`;

popup.classList.remove("hidden");

return;

}

let html=`
<div class="popup-close" onclick="closePopup()">X</div>
<h3>Search Results (${results.length})</h3>
`;

results.forEach(e=>{

html+=`
<div class="event-pill">

<b>${e.title}</b><br>

Calendar: ${e.calendar || "Unknown"}<br>

Start: ${new Date(e.start).toLocaleString()}<br>

End: ${new Date(e.end).toLocaleString()}<br>

${e.description || ""}

</div>
`;

});

popup.innerHTML=html;

popup.classList.remove("hidden");

};

/* =========================
GLOBAL SEARCH ENGINE
========================= */

function showSearchResults(query){

const popup=document.getElementById("popup");

const results=eventsData.filter(e=>

e.title.toLowerCase().includes(query) ||
(e.description && e.description.toLowerCase().includes(query)) ||
(e.calendar && e.calendar.toLowerCase().includes(query))

);

if(results.length===0){

popup.innerHTML="<div class='popup-close' onclick='closePopup()'>X</div>No results";

popup.classList.remove("hidden");

return;

}

let html="<div class='popup-close' onclick='closePopup()'>X</div>";

html+="<h3>Search Results ("+results.length+")</h3>";

results.forEach(e=>{

html+=`

<div class="event-pill">

<b>${e.title}</b><br>

Calendar: ${e.calendar}<br>

Start: ${new Date(e.start).toLocaleString()}<br>

End: ${new Date(e.end).toLocaleString()}<br>

${e.description || ""}

</div>

`;

});

popup.innerHTML=html;

popup.classList.remove("hidden");

}

/* RENDER */

function renderCalendar(filter=""){

const grid=document.getElementById("calendarGrid");

grid.innerHTML="";

const monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];

document.getElementById("monthTitle").innerText=monthNames[currentMonth]+" "+currentYear;

const firstDay=new Date(currentYear,currentMonth,1).getDay();

const days=new Date(currentYear,currentMonth+1,0).getDate();

let date=1;

for(let i=0;i<35;i++){

const cell=document.createElement("div");

cell.className="calendar-cell";

if(i>=firstDay && date<=days){

const d=date;

const dateDiv=document.createElement("div");

dateDiv.className="calendar-date";

const today=new Date();

if(d===today.getDate() &&
currentMonth===today.getMonth() &&
currentYear===today.getFullYear()){

dateDiv.innerHTML=`<span class="today">${d}</span>`;

}else{

dateDiv.innerText=d;

}

cell.appendChild(dateDiv);

const dayEvents=getEvents(d,filter);

dayEvents.forEach(ev=>{

const pill=document.createElement("div");

pill.className="event-pill";

pill.innerText=ev.title;

cell.appendChild(pill);

});

cell.onclick=()=>showPopup(d);

date++;

}

grid.appendChild(cell);

}

}

/* GET EVENTS */

function getEvents(date,filter){

return eventsData.filter(e=>{

const d=new Date(e.start);

const matchDate =
d.getDate()===date &&
d.getMonth()===currentMonth &&
d.getFullYear()===currentYear;

if(!matchDate) return false;

if(activeFilter==="all") return true;

if(activeFilter==="birthday")
return e.title.toLowerCase().includes("birthday");

if(activeFilter==="holiday")
return e.calendar.toLowerCase().includes("holiday");

if(activeFilter==="observance")
return e.description && e.description.toLowerCase().includes("observance");

return true;

});
}

/* =========================
HAMBURGER MENU SYSTEM
========================= */

let activeFilter="all";

menuBtn.onclick=function(){

document.getElementById("menuPanel").classList.remove("hidden");

};

function closeMenu(){

document.getElementById("menuPanel").classList.add("hidden");

}

function setFilter(filter){

activeFilter=filter;

closeMenu();

renderCalendar();

}

/* POPUP */

function showPopup(date){

const popup=document.getElementById("popup");

const dayEvents=getEvents(date,"");

if(dayEvents.length===0){

popup.innerHTML="<div class='popup-close' onclick='closePopup()'>X</div>No events";

popup.classList.remove("hidden");

return;

}

let html="<div class='popup-close' onclick='closePopup()'>X</div>";

html+="<h3>"+date+"</h3>";

dayEvents.forEach(e=>{

html+=`
<div class="event-pill">
<b>${e.title}</b><br>
Calendar: ${e.calendar}<br>
Start: ${new Date(e.start).toLocaleString()}<br>
End: ${new Date(e.end).toLocaleString()}
</div>
`;

});

popup.innerHTML=html;

popup.classList.remove("hidden");

}

function closePopup(){

document.getElementById("popup").classList.add("hidden");

}

/* NAVIGATION */

prevBtn.onclick=()=>{

currentMonth--;

if(currentMonth<0){

currentMonth=11;
currentYear--;

}

renderCalendar();

};

nextBtn.onclick=()=>{

currentMonth++;

if(currentMonth>11){

currentMonth=0;
currentYear++;

}

renderCalendar();

};

document.getElementById("nextMonth").onclick=()=>{

currentMonth++;

if(currentMonth>11){

currentMonth=0;
currentYear++;

}

renderCalendar();

};

function createBrightnessRing(value,max=255){

const percent=(value/max)*100;

return `

<div class="brightness-container">

<div class="brightness-ring" style="--percent:${percent}%">

<div class="brightness-inner">

${value}

</div>

</div>

<div>

Brightness Level

</div>

</div>

`;

}

/* =========================
   RENDER ENGINE
========================= */

function render(data){

const dash=document.getElementById("dashboard");

dash.innerHTML="";

createCard("Device",data.device);
createCard("System",data.system);
createCard("CPU",data.cpu);
createBatteryCard(data.battery);
createNetworkCard(data.network);
createConnectivityCard(data.connectivity);
createDisplayCard(data.display);
createAudioCard(data.audio);

if(data.widgets){

createArrayCard("Widgets ("+data.widgets.length+")",data.widgets);

}

if(data.calendar_snapshot){

initCalendar(data.calendar_snapshot);

}

}

/* =========================
   CARD BUILDERS
========================= */

function createCard(title,obj){

const dash=document.getElementById("dashboard");

let html=`
<div class="data-card">
<div class="data-title">${title}</div>
`;

for(let k in obj){

let value = obj[k];

// keyboard detection fix
if(k === "default_keyboard"){
value = detectKeyboardName(obj[k]);
}

html+=`
<div class="data-row">
<div>${k}</div>
<div>${value}</div>
</div>
`;

}


html+="</div>";

dash.innerHTML+=html;

}

function createArrayCard(title,arr){

const dash=document.getElementById("dashboard");

let html=`
<div class="data-card">
<div class="data-title">${title}</div>
`;

arr.forEach(item=>{

for(let k in item){

html+=`
<div class="data-row">
<div>${k}</div>
<div>${item[k]}</div>
</div>
`;

}

html+="<hr>";

});

html+="</div>";

dash.innerHTML+=html;

}

function createBatteryCard(battery){

const dash=document.getElementById("dashboard");

const icon =
battery.status==="charging"
? "icons/phone.png"
: "icons/charge.png";

let html=`

<div class="data-card">

<div class="data-title">Battery</div>

<div style="display:flex;align-items:center;gap:15px">

<div class="battery-box">
<div class="battery-fill" style="width:${battery.level_percent}%"></div>
<div class="battery-cap"></div>
</div>

<div>
${battery.level_percent}%
<img src="${icon}" class="icon">
</div>

</div>

<div class="data-row">
<div>Status</div>
<div>${battery.status}</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

function createDisplayCard(display){

const dash=document.getElementById("dashboard");

let html=`

<div class="data-card">

<div class="data-title">Display</div>

<div class="data-row">
<div>Brightness</div>
<div>
${createBrightnessRing(display.brightness_level)}
</div>
</div>


<div class="data-row">
<div>Resolution</div>
<div>${display.resolution}</div>
</div>

<div class="data-row">
<div>Density DPI</div>
<div>${display.density_dpi}</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

function createNetworkCard(network){

const dash=document.getElementById("dashboard");

let html=`

<div class="data-card">

<div class="data-title">Network</div>

<div class="data-row">
<div>Private IPv4</div>
<div>${network.private_ipv4 || "Unknown"}</div>
</div>

<div class="data-row">
<div>Private IPv6</div>
<div>${network.private_ipv6 || "Unknown"}</div>
</div>

<div class="data-row">
<div>Public IPv4</div>
<div>${network.public_ipv4 || "Unknown"}</div>
</div>

<div class="data-row">
<div>Public IPv6</div>
<div>${network.public_ipv6 || "Unknown"}</div>
</div>

<div class="data-row">
<div>VPN Active</div>
<div>${network.vpn_active}</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

function createCalendarCard(events){

const dash=document.getElementById("dashboard");

let html=`

<div class="data-card">

<div class="data-title">Calendar (${events.length})</div>

`;

events.forEach(event=>{

html+=`

<div class="data-row">
<div>Title</div>
<div>${event.title}</div>
</div>

<div class="data-row">
<div>Start</div>
<div>${new Date(event.start).toLocaleString()}</div>
</div>

<div class="data-row">
<div>End</div>
<div>${new Date(event.end).toLocaleString()}</div>
</div>

<div class="data-row">
<div>Calendar</div>
<div>${event.calendar}</div>
</div>

<hr>
`;

});

html+="</div>";

dash.innerHTML+=html;

}

function createAudioCard(audio){

const dash=document.getElementById("dashboard");

const ringerIcon={
ringing:"icons/bell.png",
vibrate:"icons/vibration.png",
silent:"icons/silent.png"
}[audio.ringer_mode] || "";

let html=`

<div class="data-card">

<div class="data-title">Audio</div>

<div class="data-row">
<div>Music Volume</div>
<div>${createLevelBar(audio.music_volume_percent ?? 0,100)}</div>
</div>

<div class="data-row">
<div>Ring Volume</div>
<div>${createLevelBar(audio.ring_volume_percent ?? 0,100)}</div>
</div>

<div class="data-row">
<div>Alarm Volume</div>
<div>${createLevelBar(audio.alarm_volume_percent ?? 0,100)}</div>
</div>

<div class="data-row">
<div>Ringer Mode</div>
<div>
${audio.ringer_mode}
<img src="${ringerIcon}" class="icon">
</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

function createConnectivityCard(conn){

const dash=document.getElementById("dashboard");

const wifiIcon = conn.wifi_connected
? "icons/wifi.png"
: "icons/no-wifi.png";

const mobileIcon = conn.mobile_connected
? "icons/mobile-data.png"
: "icons/no-data.png";

let html=`

<div class="data-card">

<div class="data-title">Connectivity</div>

<div class="data-row">
<div>WiFi</div>
<div>
${conn.wifi_connected}
<img src="${wifiIcon}" class="icon">
</div>
</div>

<div class="data-row">
<div>Mobile Data</div>
<div>
${conn.mobile_connected}
<img src="${mobileIcon}" class="icon">
</div>
</div>

<div class="data-row">
<div>Bluetooth</div>
<div>${conn.bluetooth_on}</div>
</div>

<div class="data-row">
<div>Headphones</div>
<div>${conn.headphones_connected}</div>
</div>

<div class="data-row">
<div>DND Mode</div>
<div>${conn.dnd_on}</div>
</div>

<div class="data-row">
<div>Hotspot</div>
<div>${conn.hotspot_on}</div>
</div>

<div class="data-row">
<div>Torch</div>
<div>${conn.torch_on}</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

/* =========================
   AUTO LOAD FROM URL PARAMETER
========================= */

async function autoLoadFromParameter(){

const params = new URLSearchParams(window.location.search);

const url = params.get("url");

if(!url) return;

// put link into input box (optional)
const input = document.getElementById("linkInput");

if(input){
input.value = url;
}

try{

const res = await fetch(url);

const json = await res.json();

// hide loader UI
hideLoader();

// render dashboard
render(json);

}
catch(err){

console.error("Parameter auto-load failed:", err);

}

}

autoLoadFromParameter();
</script>

</body>
</html>
