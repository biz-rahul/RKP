<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apps Analytics Viewer</title>

<style>

/* =========================
   NEUMORPHIC BASE
========================= */

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
background:#e6ebf2;
color:#2d3748;
}

.container{

width:100%;
max-width:1400px;
margin:auto;
padding:20px;

}

/* Desktop grid layout */

.dashboard{

display:grid;

/* Maximum 2 cards per row */
grid-template-columns:repeat(2, minmax(0, 1fr));

gap:20px;

}

/* Tablet: 1 card per row */
@media (max-width: 900px){

.dashboard{

grid-template-columns:1fr;

}

}


/* Full height support */

body{

min-height:100vh;

}


.title{
text-align:center;
font-size:28px;
font-weight:600;
margin-bottom:25px;
}

/* PREMIUM BRIGHTNESS VISUAL */

.brightness-container{

display:flex;
align-items:center;
gap:15px;

}

.brightness-ring{

width:60px;
height:60px;
border-radius:50%;

display:flex;
align-items:center;
justify-content:center;

background:
conic-gradient(
#00f2fe var(--percent),
#d1d9e6 var(--percent)
);

box-shadow:
inset 4px 4px 10px #c5cad1,
inset -4px -4px 10px #ffffff;

}

.brightness-inner{

width:45px;
height:45px;
border-radius:50%;
background:#e6ebf2;

display:flex;
align-items:center;
justify-content:center;

font-weight:bold;

}

/* =========================
   NEUMORPHIC CARD
========================= */

.neo-card{
background:#e6ebf2;
border-radius:20px;
padding:20px;
margin-bottom:20px;

box-shadow:
8px 8px 16px #c5cad1,
-8px -8px 16px #ffffff;
}

/* =========================
   INPUTS
========================= */

.neo-input{
width:100%;
padding:15px;
border-radius:15px;
border:none;
outline:none;

background:#e6ebf2;

box-shadow:
inset 6px 6px 12px #c5cad1,
inset -6px -6px 12px #ffffff;

margin-bottom:15px;

font-size:16px;
}

.neo-textarea{
height:120px;
resize:none;
}

/* =========================
   BUTTON
========================= */

.neo-btn{

padding:12px 20px;
border-radius:12px;
border:none;

background:#e6ebf2;

box-shadow:
6px 6px 12px #c5cad1,
-6px -6px 12px #ffffff;

font-size:16px;
cursor:pointer;
}

.neo-btn:active{

box-shadow:
inset 6px 6px 12px #c5cad1,
inset -6px -6px 12px #ffffff;

}

/* =========================
   HIDDEN
========================= */

.hidden{
display:none;
}

/* =========================
   DASHBOARD
========================= */

/* =========================
   VISUAL LEVEL BARS
========================= */

.level-container{
display:flex;
align-items:center;
gap:10px;
}

.level-bar{
flex:1;
height:12px;
border-radius:10px;
background:#d1d9e6;
box-shadow:
inset 4px 4px 8px #c5cad1,
inset -4px -4px 8px #ffffff;
overflow:hidden;
}

.level-fill{

height:100%;
border-radius:10px;
background:linear-gradient(90deg,#4facfe,#00f2fe);

}

.level-text{
min-width:40px;
text-align:right;
font-weight:600;
}

/* =========================
   BATTERY VISUAL
========================= */

.battery-box{

width:60px;
height:28px;
border-radius:6px;
border:2px solid #2d3748;
position:relative;

}

.battery-fill{

height:100%;
background:linear-gradient(90deg,#00ff87,#60efff);

}

.battery-cap{

width:4px;
height:12px;
background:#2d3748;
position:absolute;
right:-6px;
top:6px;
border-radius:2px;

}

/* =========================
   ICON STYLE
========================= */

.icon{
width:22px;
height:22px;
vertical-align:middle;
margin-left:6px;
}

.dashboard{
margin-top:20px;
}

.data-card{

background:#e6ebf2;
border-radius:15px;
padding:15px;
margin-bottom:15px;

box-shadow:
6px 6px 12px #c5cad1,
-6px -6px 12px #ffffff;

transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.data-card:hover{

transform:translateY(-4px);

box-shadow:
10px 10px 20px #c5cad1,
-10px -10px 20px #ffffff;

}

}

.data-title{
font-weight:600;
margin-bottom:10px;
}

.data-row{

display:grid;

grid-template-columns: 180px 1fr;

gap:10px;

padding:6px 0;

border-bottom:1px solid rgba(0,0,0,0.05);

align-items:center;

}

.data-row div{

word-break:break-word;

overflow-wrap:anywhere;

}



.data-row:last-child{
border-bottom:none;
}

/* =========================
   MOBILE OPTIMIZATION
========================= */

@media(max-width:480px){

.title{
font-size:24px;
}

}

</style>

</head>
<body>

<div class="container">

<div id="loaderUI">

<div class="title">Apps Analytics Viewer</div>

<div class="neo-card">

<div>Load from Link</div>

<input
class="neo-input"
id="linkInput"
value="https://raw.githubusercontent.com/MOFO-UG/ControlTheWorld/main/SM-E156B/Example/18-02-2026/example.json"
/>

<button class="neo-btn" onclick="loadFromLink()">Load</button>

<br><br>

<div>Paste JSON</div>

<textarea
class="neo-input neo-textarea"
id="pasteInput"
></textarea>

<button class="neo-btn" onclick="loadFromPaste()">Load</button>

<br><br>

<div>Select File</div>

<input
type="file"
class="neo-input"
id="fileInput"
/>

</div>

</div>

<div id="dashboard" class="dashboard hidden"></div>

</div>

<script>
/* =========================
   KEYBOARD DETECTION LIST
========================= */

const KEYBOARD_MAP = {

"com.google.android.inputmethod.latin": "Gboard",

"com.samsung.android.honeyboard": "Samsung Keyboard",

"com.swiftkey": "Microsoft SwiftKey",

"com.touchtype.swiftkey": "Microsoft SwiftKey",

"com.emoji.keyboard.touchpal": "TouchPal Keyboard",

"com.touchpal.keyboard": "TouchPal Keyboard",

"com.grammarly.android.keyboard": "Grammarly Keyboard",

"com.fleksy.keyboard": "Fleksy Keyboard",

"com.kikaoem.kikakeyboard": "Kika Keyboard",

"com.facemoji.lite.xiaomi": "Facemoji Keyboard",

"com.facemoji.unicode.keyboard": "Facemoji Keyboard",

"com.jb.emoji.gokeyboard": "GO Keyboard",

"com.baidu.input": "Baidu Keyboard",

"com.iflytek.inputmethod": "iFly Keyboard",

"com.typany.ime": "Typany Keyboard",

"com.ai.type": "ai.type Keyboard",

"com.minuum.keyboard": "Minuum Keyboard",

"com.chrooma.keyboard": "Chrooma Keyboard",

"com.blackberry.keyboard": "BlackBerry Keyboard",

"com.htc.sense.ime": "HTC Sense Keyboard",

"com.lge.ime": "LG Keyboard",

"com.sonyericsson.textinput.uxp": "Sony Keyboard",

"com.huawei.ime": "Huawei Keyboard",

"com.miui.inputmethod": "MIUI Keyboard",

"com.oppo.keyboard": "OPPO Keyboard"

};

function detectKeyboardName(rawValue){

if(!rawValue) return "Unknown";

for(const pkg in KEYBOARD_MAP){

if(rawValue.includes(pkg)){

return KEYBOARD_MAP[pkg];

}

}

return rawValue; // fallback to original

}

/* =========================
   CORE LOAD FUNCTIONS
========================= */

function hideLoader(){

document.getElementById("loaderUI").classList.add("hidden");

document.getElementById("dashboard").classList.remove("hidden");

}

async function loadFromLink(){

const url=document.getElementById("linkInput").value;

const res=await fetch(url);

const json=await res.json();

hideLoader();

render(json);

}

function loadFromPaste(){

const text=document.getElementById("pasteInput").value;

const json=JSON.parse(text);

hideLoader();

render(json);

}

document.getElementById("fileInput").addEventListener("change",function(){

const reader=new FileReader();

reader.onload=function(){

const json=JSON.parse(reader.result);

hideLoader();

render(json);

};

reader.readAsText(this.files[0]);

});

function createLevelBar(value,max=100){

return `
<div class="level-container">

<div class="level-bar">
<div class="level-fill" style="width:${(value/max)*100}%"></div>
</div>

<div class="level-text">${value}</div>

</div>
`;

}

function createBrightnessRing(value,max=255){

const percent=(value/max)*100;

return `

<div class="brightness-container">

<div class="brightness-ring" style="--percent:${percent}%">

<div class="brightness-inner">

${value}

</div>

</div>

<div>

Brightness Level

</div>

</div>

`;

}

/* =========================
   RENDER ENGINE
========================= */

function render(data){

const dash=document.getElementById("dashboard");

dash.innerHTML="";

createCard("Device",data.device);
createCard("System",data.system);
createCard("CPU",data.cpu);
createBatteryCard(data.battery);
createCard("Network",data.network);
createConnectivityCard(data.connectivity);
createDisplayCard(data.display);
createAudioCard(data.audio);

if(data.widgets){

createArrayCard("Widgets ("+data.widgets.length+")",data.widgets);

}

if(data.calendar_snapshot){

const formatted=data.calendar_snapshot.map(e=>({

title:e.title,
date:new Date(e.start).toLocaleString()

}));

createArrayCard("Calendar",formatted);

}

}

/* =========================
   CARD BUILDERS
========================= */

function createCard(title,obj){

const dash=document.getElementById("dashboard");

let html=`
<div class="data-card">
<div class="data-title">${title}</div>
`;

for(let k in obj){

let value = obj[k];

// keyboard detection fix
if(k === "default_keyboard"){
value = detectKeyboardName(obj[k]);
}

html+=`
<div class="data-row">
<div>${k}</div>
<div>${value}</div>
</div>
`;

}


html+="</div>";

dash.innerHTML+=html;

}

function createArrayCard(title,arr){

const dash=document.getElementById("dashboard");

let html=`
<div class="data-card">
<div class="data-title">${title}</div>
`;

arr.forEach(item=>{

for(let k in item){

html+=`
<div class="data-row">
<div>${k}</div>
<div>${item[k]}</div>
</div>
`;

}

html+="<hr>";

});

html+="</div>";

dash.innerHTML+=html;

}

function createBatteryCard(battery){

const dash=document.getElementById("dashboard");

const icon =
battery.status==="charging"
? "icons/phone.png"
: "icons/charge.png";

let html=`

<div class="data-card">

<div class="data-title">Battery</div>

<div style="display:flex;align-items:center;gap:15px">

<div class="battery-box">
<div class="battery-fill" style="width:${battery.level_percent}%"></div>
<div class="battery-cap"></div>
</div>

<div>
${battery.level_percent}%
<img src="${icon}" class="icon">
</div>

</div>

<div class="data-row">
<div>Status</div>
<div>${battery.status}</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

function createDisplayCard(display){

const dash=document.getElementById("dashboard");

let html=`

<div class="data-card">

<div class="data-title">Display</div>

<div class="data-row">
<div>Brightness</div>
<div>
${createBrightnessRing(display.brightness_level)}
</div>
</div>


<div class="data-row">
<div>Resolution</div>
<div>${display.resolution}</div>
</div>

<div class="data-row">
<div>Density DPI</div>
<div>${display.density_dpi}</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

function createAudioCard(audio){

const dash=document.getElementById("dashboard");

const ringerIcon={
ringing:"icons/bell.png",
vibrate:"icons/vibration.png",
silent:"icons/silent.png"
}[audio.ringer_mode] || "";

let html=`

<div class="data-card">

<div class="data-title">Audio</div>

<div class="data-row">
<div>Music Volume</div>
<div>${createLevelBar(audio.music_volume,15)}</div>
</div>

<div class="data-row">
<div>Ring Volume</div>
<div>${createLevelBar(audio.ring_volume,15)}</div>
</div>

<div class="data-row">
<div>Alarm Volume</div>
<div>${createLevelBar(audio.alarm_volume,15)}</div>
</div>

<div class="data-row">
<div>Ringer Mode</div>
<div>
${audio.ringer_mode}
<img src="${ringerIcon}" class="icon">
</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

function createConnectivityCard(conn){

const dash=document.getElementById("dashboard");

const wifiIcon = conn.wifi_connected
? "icons/wifi.png"
: "icons/no-wifi.png";

const mobileIcon = conn.mobile_connected
? "icons/mobile-data.png"
: "icons/no-data.png";

let html=`

<div class="data-card">

<div class="data-title">Connectivity</div>

<div class="data-row">
<div>WiFi</div>
<div>
${conn.wifi_connected}
<img src="${wifiIcon}" class="icon">
</div>
</div>

<div class="data-row">
<div>Mobile Data</div>
<div>
${conn.mobile_connected}
<img src="${mobileIcon}" class="icon">
</div>
</div>

</div>
`;

dash.innerHTML+=html;

}

/* =========================
   AUTO LOAD FROM URL PARAMETER
========================= */

async function autoLoadFromParameter(){

const params = new URLSearchParams(window.location.search);

const url = params.get("url");

if(!url) return;

// put link into input box (optional)
const input = document.getElementById("linkInput");

if(input){
input.value = url;
}

try{

const res = await fetch(url);

const json = await res.json();

// hide loader UI
hideLoader();

// render dashboard
render(json);

}
catch(err){

console.error("Parameter auto-load failed:", err);

}

}

autoLoadFromParameter();
</script>

</body>
</html>
