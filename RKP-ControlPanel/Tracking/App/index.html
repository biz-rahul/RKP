<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apps Analytics Viewer</title>

<style>

/* =========================
   GLOBAL NEUMORPHIC SYSTEM
========================= */

:root{
--bg:#e9eef5;
--light:#ffffff;
--dark:#c5ccd6;
--text:#2c3e50;
--accent:#4a90e2;
}

*{
box-sizing:border-box;
}

body{

margin:0;
background:var(--bg);
font-family:Segoe UI,system-ui;
color:var(--text);

}


/* =========================
   CENTER TITLE
========================= */

.pageTitle{

text-align:center;
font-size:28px;
font-weight:600;
margin-top:30px;
margin-bottom:20px;

}

/* =========================
   MAIN PANEL (matches your screenshot)
========================= */

.panel{

width:90%;
max-width:900px;
margin:auto;

padding:25px;

border-radius:20px;

background:var(--bg);

box-shadow:

12px 12px 24px var(--dark),
-12px -12px 24px var(--light);

}


/* =========================
   INPUT SECTIONS
========================= */

.section{

margin-bottom:25px;

}

.label{

margin-bottom:8px;
font-weight:500;

}

.input{

width:100%;

padding:14px;

border-radius:12px;

border:none;
outline:none;

font-size:15px;

background:var(--bg);

box-shadow:

inset 6px 6px 12px var(--dark),
inset -6px -6px 12px var(--light);

}

textarea.input{
height:140px;
resize:none;
}


/* =========================
   BUTTON
========================= */

.button{

margin-top:10px;

padding:10px 18px;

border:none;

border-radius:12px;

background:var(--bg);

font-weight:500;

cursor:pointer;

box-shadow:

6px 6px 12px var(--dark),
-6px -6px 12px var(--light);

}

.button:active{

box-shadow:

inset 4px 4px 8px var(--dark),
inset -4px -4px 8px var(--light);

}


/* =========================
   FILTER BAR
========================= */

.filterBar{

width:95%;
margin:30px auto;

display:grid;

grid-template-columns:repeat(auto-fit,minmax(160px,1fr));

gap:15px;

}

.filterBtn{

padding:14px;

border-radius:14px;

border:none;

background:var(--bg);

font-weight:500;

cursor:pointer;

box-shadow:

6px 6px 12px var(--dark),
-6px -6px 12px var(--light);

}

.filterBtn:active{

box-shadow:

inset 4px 4px 8px var(--dark),
inset -4px -4px 8px var(--light);

}


/* =========================
   APPS LIST FULL WIDTH DESKTOP
========================= */

.appsContainer{

width:95%;
margin:auto;

}


/* GRID FOR DESKTOP */

.appsGrid{

display:grid;

grid-template-columns:repeat(auto-fill,minmax(320px,1fr));

gap:20px;

}


/* APP CARD */

.appCard{

padding:18px;

border-radius:16px;

background:var(--bg);

cursor:pointer;

box-shadow:

6px 6px 12px var(--dark),
-6px -6px 12px var(--light);

}

.appCard:active{

box-shadow:

inset 4px 4px 8px var(--dark),
inset -4px -4px 8px var(--light);

}

.appName{

font-size:17px;
font-weight:600;

}

.package{

font-size:13px;
color:#666;

}

.version{

font-size:13px;
color:var(--accent);

margin-top:4px;

}

.details{

margin-top:10px;

font-size:14px;

color:#555;

display:none;

line-height:1.5;

}


/* =========================
   HIDDEN
========================= */

.hidden{
display:none;
}

</style>

</head>
<body>

<div class="pageTitle">Apps Analytics Viewer</div>

<!-- INPUT PANEL -->

<div id="inputPanel" class="panel">

<div class="section">

<div class="label">Load from Link</div>

<input id="linkInput" class="input">

<button class="button" onclick="loadLink()">Load</button>

</div>

<div class="section">

<div class="label">Paste JSON</div>

<textarea id="textInput" class="input"></textarea>

<button class="button" onclick="loadText()">Load</button>

</div>

<div class="section">

<div class="label">Select File</div>

<input type="file" id="fileInput" class="input">

</div>

</div>

<!-- FILTERS -->

<div id="filterSection" class="hidden">

<div class="filterBar">

<input id="searchInput" class="input" placeholder="üîç Search Apps">

<button class="filterBtn" onclick="sortNewest()">‚è±Ô∏è Newest Installed</button> 

<button class="filterBtn" onclick="sortOldest()">‚è≥ Oldest Installed</button>

<button class="filterBtn" onclick="sortSizeHigh()">üíæ Largest Size</button> 

<button class="filterBtn" onclick="sortUsageHigh()">üî• Most Used</button> 

<button class="filterBtn" id="btnAll" onclick="showAllApps()">
üì¶ All Applications (0)
</button>

<button class="filterBtn" id="btnUser" onclick="showUserApps()">
üë§ User Applications (0)
</button>

<button class="filterBtn" id="btnSystem" onclick="showSystemApps()">
‚öôÔ∏è System Applications (0)
</button>



<button class="filterBtn" onclick="resetApps()">üßπ Clear</button>

</div>

</div>

<!-- APPS LIST -->

<div class="appsContainer">

<div id="appsGrid" class="appsGrid"></div>

</div>

<script>

let apps=[];
let filtered=[];
let systemApps=[];
let userApps=[];



/* LOAD METHODS */

async function loadLink(){

let res=await fetch(linkInput.value);
process(await res.json());

}

function loadText(){

process(JSON.parse(textInput.value));

}

fileInput.onchange=function(){

let reader=new FileReader();

reader.onload=()=>process(JSON.parse(reader.result));

reader.readAsText(this.files[0]);

};


/* PROCESS */

function process(data){

apps=data;
filtered=[...apps];
// classify apps

// classify apps

systemApps = apps.filter(app =>
app.package_name.startsWith("com.android") ||
app.package_name.startsWith("com.google.android") ||
app.package_name.startsWith("com.samsung") ||
app.package_name.startsWith("android")
);

userApps = apps.filter(app => !systemApps.includes(app));


// update button labels with counts

document.getElementById("btnAll").innerText =
`üì¶ All Applications (${apps.length})`;

document.getElementById("btnUser").innerText =
`üë§ User Applications (${userApps.length})`;

document.getElementById("btnSystem").innerText =
`‚öôÔ∏è System Applications (${systemApps.length})`;



inputPanel.style.display="none";
filterSection.classList.remove("hidden");

render();

}



function showAllApps(){

filtered = [...apps];
render();

}

function showUserApps(){

filtered = [...userApps];
render();

}

function showSystemApps(){

filtered = [...systemApps];
render();

}


/* RENDER */

function render(){

appsGrid.innerHTML="";

filtered.forEach(app=>{

let card=document.createElement("div");

card.className="appCard";

card.onclick=function(){

let d=this.querySelector(".details");

d.style.display=d.style.display=="block"?"none":"block";

};

card.innerHTML=`

<div class="appName">${app.app_name}</div>

<div class="package">${app.package_name}</div>

<div class="version">Version: ${app.version_name}</div>

<div class="details">

Version Code: ${app.version_code}<br>
Installed: ${date(app.installed_date)}<br>
Last Used: ${date(app.last_used)}<br>
Size: ${size(app.app_size_bytes)}<br>
Usage Time: ${time(app.usage_time_ms)}

</div>

`;

appsGrid.appendChild(card);

});

}


/* SEARCH */

searchInput.oninput=function(){

let s=this.value.toLowerCase();

filtered=apps.filter(a=>
a.app_name.toLowerCase().includes(s) ||
a.package_name.toLowerCase().includes(s)
);

render();

};


/* SORT */

function sortNewest(){filtered.sort((a,b)=>b.installed_date-a.installed_date);render();}
function sortOldest(){filtered.sort((a,b)=>a.installed_date-b.installed_date);render();}
function sortSizeHigh(){filtered.sort((a,b)=>b.app_size_bytes-a.app_size_bytes);render();}
function sortSizeLow(){filtered.sort((a,b)=>a.app_size_bytes-b.app_size_bytes);render();}
function sortUsageHigh(){filtered.sort((a,b)=>b.usage_time_ms-a.usage_time_ms);render();}
function sortUsageLow(){filtered.sort((a,b)=>a.usage_time_ms-b.usage_time_ms);render();}
function resetApps(){filtered=[...apps];render();}


/* FORMAT */

function size(b){return (b/1048576).toFixed(2)+" MB";}
function date(t){if(!t)return"Never";return new Date(t).toLocaleString();}
function time(ms){let m=Math.floor(ms/60000);let h=Math.floor(m/60);return h+"h "+(m%60)+"m";}

</script>

</body>
</html>
