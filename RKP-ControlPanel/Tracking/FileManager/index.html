<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apps Analytics Viewer</title><style>

/* =========================
GLOBAL
========================= */

*{
box-sizing:border-box;
}

body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
background:#e6edf5;
color:#2d3748;
}

/* =========================
NEUMORPHIC BASE
========================= */

.neu-card{
background:#e6edf5;
border-radius:20px;
box-shadow:
8px 8px 16px #c5ccd3,
-8px -8px 16px #ffffff;
}

.neu-inset{
background:#e6edf5;
border-radius:15px;
box-shadow:
inset 4px 4px 8px #c5ccd3,
inset -4px -4px 8px #ffffff;
}

.neu-button{
border:none;
padding:12px 20px;
border-radius:12px;
background:#e6edf5;
box-shadow:
4px 4px 8px #c5ccd3,
-4px -4px 8px #ffffff;
font-weight:600;
cursor:pointer;
}

.neu-button:active{
box-shadow:
inset 4px 4px 8px #c5ccd3,
inset -4px -4px 8px #ffffff;
}

/* =========================
HEADER
========================= */

.header{
text-align:center;
padding:25px 10px;
font-size:28px;
font-weight:700;
}

/* =========================
INPUT PANEL
========================= */

#inputPanel{
margin:15px;
padding:20px;
}

.label{
font-weight:600;
margin-top:15px;
margin-bottom:8px;
}

input[type=text], textarea, input[type=file]{

width:100%;
padding:15px;
border:none;
outline:none;
font-size:16px;
}

textarea{
height:120px;
resize:none;
}

/* =========================
FILE VIEWER
========================= */

#viewer{
display:none;
padding:10px;
}

.file-card{

margin:10px;
padding:15px;

}

.file-row{

display:flex;
justify-content:space-between;
padding:10px;
margin:5px 0;
border-radius:12px;

}

.folder{
color:#2563eb;
font-weight:600;
}

.file{
color:#059669;
}

.path{
font-size:12px;
color:#64748b;
}

/* =========================
MOBILE OPTIMIZATION
========================= */

@media(max-width:600px){

.header{
font-size:22px;
}

}

</style></head>
<body><div class="header">
Apps Analytics Viewer
</div><div id="inputPanel" class="neu-card"><div class="label">Load from Link</div><input class="neu-inset" type="text" id="linkInput"
value="https://raw.githubusercontent.com/MOFO-UG/ControlTheWorld/main/SM-E156B/Example/18-02-2026/example.json">

<button class="neu-button" onclick="loadFromLink()">Load</button>

<div class="label">Paste JSON</div><textarea class="neu-inset" id="pasteInput"></textarea><button class="neu-button" onclick="loadFromPaste()">Load</button>

<div class="label">Select File</div><input class="neu-inset" type="file" id="fileInput"></div><div id="viewer"></div><script>

/* =========================
STATE
========================= */

let fileIndex = {};
let childrenMap = {};
let currentPath = "";

/* =========================
AUTO LOAD FILE SELECT
========================= */

document.getElementById("fileInput").addEventListener("change", function(){

const file = this.files[0];

if(!file) return;

const reader = new FileReader();

reader.onload = function(e){

processJSON(e.target.result);

};

reader.readAsText(file);

});

/* =========================
LOAD FROM LINK
========================= */

function loadFromLink(){

const url = document.getElementById("linkInput").value;

fetch(url)
.then(res=>res.text())
.then(processJSON)
.catch(()=>alert("Failed to load JSON"));

}

/* =========================
LOAD FROM PASTE
========================= */

function loadFromPaste(){

const text = document.getElementById("pasteInput").value;

processJSON(text);

}

/* =========================
PROCESS JSON
========================= */

function processJSON(text){

let data;

try{

data = JSON.parse(text);

}catch{

alert("Invalid JSON");

return;

}

buildIndex(data);

hideInputShowViewer();

renderDirectory(getRoot());

}

/* =========================
HIDE INPUT SHOW VIEWER
========================= */

function hideInputShowViewer(){

document.getElementById("inputPanel").style.display="none";

document.getElementById("viewer").style.display="block";

}

/* =========================
BUILD INDEX
========================= */

function buildIndex(data){

fileIndex={};
childrenMap={};

data.forEach(item=>{

fileIndex[item.path]=item;

const parent = getParent(item.path);

if(!childrenMap[parent])
childrenMap[parent]=[];

childrenMap[parent].push(item);

});

}

/* =========================
GET ROOT
========================= */

function getRoot(){

const first = Object.values(fileIndex)[0];

return getParent(first.path);

}

/* =========================
GET PARENT
========================= */

function getParent(path){

const parts = path.split("/");

parts.pop();

return parts.join("/") || "/";

}

/* =========================
RENDER DIRECTORY
========================= */

function renderDirectory(path){

currentPath = path;

const viewer = document.getElementById("viewer");

viewer.innerHTML="";

const card = document.createElement("div");

card.className="file-card neu-card";

const list = childrenMap[path] || [];

list.sort((a,b)=>b.directory-a.directory);

list.forEach(item=>{

const row = document.createElement("div");

row.className="file-row neu-inset";

row.innerHTML=`

<div>

<div class="${item.directory?'folder':'file'}">

${item.directory?'üìÅ':'üìÑ'} ${item.name}

</div>

<div class="path">${item.path}</div>

</div>

<div>

${formatSize(item.size)}

</div>

`;

if(item.directory){

row.onclick = ()=>renderDirectory(item.path);

}

card.appendChild(row);

});

viewer.appendChild(card);

}

/* =========================
SIZE FORMAT
========================= */

function formatSize(size){

if(size>1e9) return (size/1e9).toFixed(2)+" GB";

if(size>1e6) return (size/1e6).toFixed(2)+" MB";

if(size>1e3) return (size/1e3).toFixed(2)+" KB";

return size+" B";

}

</script></body>
</html>
