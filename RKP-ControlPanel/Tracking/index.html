<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ControlTheWorld // Hacker File Manager</title><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet"><style>

/* =========================
GLOBAL HACKER THEME
========================= */

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    background: radial-gradient(circle at center, #020617, #000000);
    color: #00ff9c;
    font-family: 'Share Tech Mono', monospace;
    height: 100vh;
    overflow: hidden;
}

/* =========================
FULL SCREEN LAYOUT
========================= */

.app {
    display: flex;
    flex-direction: column;
    height: 100vh;
}

/* =========================
HEADER
========================= */

.header {
    padding: 12px;
    border-bottom: 1px solid #00ff9c33;
    background: #000000aa;
    backdrop-filter: blur(6px);
}

.title {
    font-size: 18px;
    letter-spacing: 2px;
}

.subtitle {
    font-size: 11px;
    color: #00ff9c88;
}

/* =========================
PATH BAR
========================= */

.path-bar {
    padding: 8px 12px;
    font-size: 12px;
    border-bottom: 1px solid #00ff9c22;
    color: #00ff9ccc;
    white-space: nowrap;
    overflow-x: auto;
}

/* =========================
FILE LIST FULL SCREEN
========================= */

.file-container {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
}

.file-item {
    display: flex;
    align-items: center;
    padding: 12px;
    margin-bottom: 6px;
    border-radius: 8px;
    background: #001a12;
    border: 1px solid #00ff9c22;
    cursor: pointer;
    transition: 0.2s;
}

.file-item:hover {
    background: #003322;
    transform: translateX(4px);
    border-color: #00ff9c;
}

.file-icon {
    width: 30px;
    font-size: 18px;
}

.file-name {
    flex: 1;
    font-size: 14px;
}

.file-arrow {
    color: #00ff9c55;
}

/* =========================
VIEWER BUTTON PANEL
========================= */

.viewer-panel {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: #000000ee;
    border-top: 1px solid #00ff9c33;
    padding: 10px;
    display: none;
}

.viewer-btn {
    width: 100%;
    padding: 14px;
    margin-bottom: 6px;
    border-radius: 8px;
    border: 1px solid #00ff9c55;
    background: black;
    color: #00ff9c;
    font-family: inherit;
    cursor: pointer;
}

.viewer-btn:hover {
    background: #003322;
}

/* =========================
SCROLLBAR
========================= */

::-webkit-scrollbar {
    width: 6px;
}

::-webkit-scrollbar-thumb {
    background: #00ff9c55;
}

</style></head>
<body><div class="app"><div class="header">
<div class="title">CONTROLTHEWORLD</div>
<div class="subtitle">GitHub Remote File Manager</div>
</div><div class="path-bar" id="pathBar">/</div><div class="file-container" id="fileList"></div></div><div class="viewer-panel" id="viewerPanel"></div><!-- REGULAR JSON VIEWER MODAL --><div id="jsonModal" style="
position:fixed;
top:0;
left:0;
right:0;
bottom:0;
background:black;
display:none;
flex-direction:column;
z-index:9999;"><div style="padding:10px;border-bottom:1px solid #00ff9c55;display:flex;justify-content:space-between;align-items:center;">
<span>REGULAR JSON VIEWER</span>
<button onclick="closeJSONViewer()" style="background:black;color:#00ff9c;border:1px solid #00ff9c;padding:6px 12px;">CLOSE</button>
</div><pre id="jsonContent" style="
flex:1;
overflow:auto;
padding:15px;
color:#00ff9c;
white-space:pre-wrap;
"></pre></div><script>

/* =========================
CONFIG
========================= */

const owner = "MOFO-UG";
const repo = "ControlTheWorld";

const BASE =
"https://rahulpuri.fun/RKP-ControlPanel/Tracking/";

let branch = "main";
let currentPath = "";
let selectedFile = "";

/* =========================
INIT
========================= */

init();

async function init()
{
    const repoData = await fetch(
        `https://api.github.com/repos/${owner}/${repo}`
    ).then(r=>r.json());

    branch = repoData.default_branch;

    loadDir("");
}

/* =========================
LOAD DIRECTORY
========================= */

async function loadDir(path)
{
    currentPath = path;

    document.getElementById("pathBar").innerText = "/" + path;

    const data = await fetch(
    `https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`
    ).then(r=>r.json());

    const list = document.getElementById("fileList");

    list.innerHTML = "";

    if(path !== "")
    {
        const back = createItem("..","folder",()=>{
            const parts = path.split("/");
            parts.pop();
            loadDir(parts.join("/"));
        });

        list.appendChild(back);
    }

    data.forEach(item=>{

        const type = item.type;

        const click = type === "dir"
        ? ()=> loadDir(item.path)
        : ()=> selectFile(item.path,item.name);

        list.appendChild(
            createItem(item.name,type,click)
        );

    });
}

/* =========================
CREATE FILE ITEM
========================= */

function createItem(name,type,click)
{
    const div = document.createElement("div");

    div.className = "file-item";

    div.onclick = click;

    const icon = document.createElement("div");
    icon.className = "file-icon";

    if(type === "dir")
    icon.innerHTML = '<i class="fa fa-folder"></i>';

    else
    icon.innerHTML = '<i class="fa fa-file-code"></i>';

    const fname = document.createElement("div");
    fname.className = "file-name";
    fname.innerText = name;

    const arrow = document.createElement("div");
    arrow.className = "file-arrow";
    arrow.innerHTML = '<i class="fa fa-chevron-right"></i>';

    div.append(icon,fname,arrow);

    return div;
}

/* =========================
SELECT FILE
========================= */

function selectFile(path,name)
{
    selectedFile = path;

    const detected = detect(name);

    if(detected)
    {
        // AUTO REDIRECT instantly if detected
        redirect(detected);
        return;
    }

    // if not detected, show manual panel
    showViewerPanel(name);
}

/* =========================
VIEWER PANEL
========================= */

function showViewerPanel(filename)
{
    const panel = document.getElementById("viewerPanel");

    panel.innerHTML = "";

    panel.style.display = "block";

    const detected = detect(filename);

    if(detected)
    {
        const auto = viewerBtn(detected);
        auto.innerText = "AUTO DETECTED â†’ OPEN " + detected.toUpperCase();
        panel.appendChild(auto);
    }

    // ADD REGULAR VIEWER FIRST
    panel.appendChild(regularViewerBtn());

    [
        "Sms",
        "Call",
        "Contact",
        "Device",
        "App",
        "Notification",
        "FileManager"
    ].forEach(v=>{

        panel.appendChild(viewerBtn(v));

    });
}

/* =========================
VIEWER BUTTON
========================= */

function viewerBtn(type)
{
    const btn = document.createElement("button");

    btn.className = "viewer-btn";

    btn.innerText = "OPEN " + type.toUpperCase();

    btn.onclick = ()=> redirect(type);

    return btn;
}

/* =========================
REGULAR VIEWER BUTTON
========================= */

function regularViewerBtn()
{
    const btn = document.createElement("button");

    btn.className = "viewer-btn";

    btn.innerText = "OPEN REGULAR JSON VIEWER";

    btn.onclick = ()=> openRegularViewer();

    return btn;
}

/* =========================
DETECT TYPE
========================= */

function detect(name)
{
    name = name.toLowerCase();

    if(name.startsWith("sms")) return "Sms";

    if(name.startsWith("call")) return "Call";

    if(name.startsWith("contact")) return "Contact";

    if(name.startsWith("device")) return "Device";

    if(name.startsWith("app")) return "App";

    if(name.startsWith("notification")) return "Notification";

    if(name.startsWith("file")) return "FileManager";

    return null;
}

/* =========================
REDIRECT
========================= */

function redirect(type)
{

    const raw =
    `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${selectedFile}`;

    let param = "url";

    if(type === "App"
    || type === "Contact"
    || type === "Call")

    param = "github";


    const url =
    `${BASE}${type}?${param}=${encodeURIComponent(raw)}`;

    location.href = url;
}

/* =========================
REGULAR JSON VIEWER
========================= */

async function openRegularViewer()
{

    const raw =
    `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${selectedFile}`;

    try
    {

        const text = await fetch(raw).then(r=>r.text());

        const json = JSON.parse(text);

        document.getElementById("jsonContent").textContent =
        JSON.stringify(json,null,4);

        document.getElementById("jsonModal").style.display = "flex";

    }
    catch
    {
        alert("Invalid JSON");
    }

}

function closeJSONViewer()
{
    document.getElementById("jsonModal").style.display = "none";
}

</script></body>
</html>
