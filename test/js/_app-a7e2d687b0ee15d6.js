try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a1b42a3f-15c8-4f96-8a3e-5e449ef4c179",e._sentryDebugIdIdentifier="sentry-dbid-a1b42a3f-15c8-4f96-8a3e-5e449ef4c179")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{46880:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),a=e.getVersionPrecision(n),s=Math.max(i,a),o=0,l=e.map([t,n],function(t){var n=s-e.getVersionPrecision(t),r=t+Array(n+1).join(".0");return e.map(r.split("."),function(e){return Array(20-e.length).join("0")+e}).reverse()});for(r&&(o=s-Math.min(i,a)),s-=1;s>=o;){if(l[0][s]>l[1][s])return 1;if(l[0][s]===l[1][s]){if(s===o)return 0;s-=1}else if(l[0][s]<l[1][s])return -1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));for(t=0,n=i.length;t<n;t+=1)(function(){var n=i[t];"object"==typeof n&&null!==n&&Object.keys(n).forEach(function(t){e[t]=n[t]})})();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},a=n(18),s=function(){function e(){}return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e,[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}]),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=l(n(92)),i=l(n(93)),a=l(n(94)),s=l(n(95)),o=l(n(17));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=o.default.find(r.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=o.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find(a.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=o.default.find(s.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return o.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},a=0;if(Object.keys(e).forEach(function(t){var s=e[t];"string"==typeof s?(i[t]=s,a+=1):"object"==typeof s&&(n[t]=s,r+=1)}),r>0){var s=Object.keys(n),l=o.default.find(s,function(e){return t.isOS(e)});if(l){var u=this.satisfies(n[l]);if(void 0!==u)return u}var c=o.default.find(s,function(e){return t.isPlatform(e)});if(c){var d=this.satisfies(n[c]);if(void 0!==d)return d}}if(a>0){var h=Object.keys(i),p=o.default.find(h,function(e){return t.isBrowser(e,!0)});if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=o.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(o.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}();t.default=u,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:a.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:a.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:a.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:a.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:a.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:a.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:a.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:a.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:a.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:a.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:a.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:a.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:a.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=s,e.exports=t.default}})},e.exports=t()},83673:e=>{e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}},18424:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(48039)}])},76759:(e,t,n)=>{"use strict";n.d(t,{RJ:()=>s,ZY:()=>l,gi:()=>o});var r=n(56335),i=n(19791),a=n(88753);let s=e=>(null==e?void 0:e._type)==="looks",o=e=>"store"in e,l=async e=>{if(s(e)){let t=(0,a.A)(e.looks.flatMap(e=>e.products.map(e=>{var t;return null===(t=e.store)||void 0===t?void 0:t.gid}))),n=await (0,i.ob)(t);return{...e,looks:e.looks.map(e=>({...e,products:e.products.map(e=>n.find(t=>t.id===e.store.gid)||e)}))}}{let t=await (0,i.X_)(null==e?void 0:e.store.slug.current);return{_type:e._type,_id:e._id,title:t.title,slug:{current:t.handle},looks:(0,r.D)(t.products).map(e=>{var t;return{_id:e.id,title:e.title,_type:"product",image:null===(t=e.featuredImage)||void 0===t?void 0:t.url,slug:{current:e.handle},products:[e]}})}}}},19791:(e,t,n)=>{"use strict";n.d(t,{qw:()=>_,X_:()=>g,ob:()=>v});var r=n(50467);class i extends Error{constructor(e,t){let n=Array.isArray(e)?e.map(e=>(null==e?void 0:e.message)||"").join("\n"):"";n||(n="GraphQL error"),super(n),(0,r._)(this,"errors",[]),(0,r._)(this,"data",void 0),this.errors=e,this.data=t}}function a(e,t){let n=t.map(e=>e.request);1===n.length&&(n=n[0]),(()=>{try{return e.fetcher(n)}catch(e){return Promise.reject(e)}})().then(e=>{if(1!==t.length||Array.isArray(e)){if(e.length!==t.length)throw Error("response length did not match query length")}else{if(e.errors&&e.errors.length){t[0].reject(new i(e.errors,e.data));return}t[0].resolve(e);return}for(let n=0;n<t.length;n++)e[n].errors&&e[n].errors.length?t[n].reject(new i(e[n].errors,e[n].data)):t[n].resolve(e[n])}).catch(e=>{for(let n=0;n<t.length;n++)t[n].reject(e)})}function s(e,t){let n=e._queue,r=t.maxBatchSize||0;if(e._queue=[],r>0&&r<n.length)for(let t=0;t<n.length/r;t++)a(e,n.slice(t*r,(t+1)*r));else a(e,n)}class o{fetch(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={query:e},a=Object.assign({},this._options,r);return t&&(i.variables=t),n&&(i.operationName=n),new Promise((e,t)=>{this._queue.push({request:i,resolve:e,reject:t}),1===this._queue.length&&(a.shouldBatch?setTimeout(()=>s(this,a),a.batchInterval):s(this,a))})}forceFetch(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={query:e},a=Object.assign({},this._options,r,{shouldBatch:!1});return t&&(i.variables=t),n&&(i.operationName=n),new Promise((e,t)=>{let n=new o(this.fetcher,this._options);n._queue=[{request:i,resolve:e,reject:t}],s(n,a)})}constructor(e,{batchInterval:t=6,shouldBatch:n=!0,maxBatchSize:i=0}={}){(0,r._)(this,"fetcher",void 0),(0,r._)(this,"_options",void 0),(0,r._)(this,"_queue",void 0),this.fetcher=e,this._options={batchInterval:t,shouldBatch:n,maxBatchSize:i},this._queue=[]}}let l={maxBatchSize:10,batchInterval:40},u=e=>{let{url:t,headers:n={},fetcher:r,fetch:a,batch:s=!1,...u}=e;if(!t&&!r)throw Error("url or fetcher is required");if(r=r||(async e=>{let r="function"==typeof n?await n():n;if(r=r||{},"undefined"==typeof fetch&&!a)throw Error("Global `fetch` function is not available, pass a fetch polyfill to Genql `createClient`");let i=a||fetch,s=await i(t,{headers:{"Content-Type":"application/json",...r},method:"POST",body:JSON.stringify(e),...u});if(!s.ok)throw Error("".concat(s.statusText,": ").concat(await s.text()));return await s.json()}),!s)return async e=>{var t;let n=await r(e);if(Array.isArray(n))return n.map(e=>{var t;if(null==e?void 0:null===(t=e.errors)||void 0===t?void 0:t.length)throw new i(e.errors||[],e.data);return e.data});if(null==n?void 0:null===(t=n.errors)||void 0===t?void 0:t.length)throw new i(n.errors||[],n.data);return n.data};let c=new o(async e=>await r(e),!0===s?l:s);return async e=>{let{query:t,variables:n}=e,r=await c.fetch(t,n);if(null==r?void 0:r.data)return r.data;throw Error("Genql batch fetcher returned unexpected result "+JSON.stringify(r))}},c=(e,t,n)=>{if("object"==typeof e&&"__args"in e){let r=e.__args,i={...e};delete i.__args;let a=Object.keys(r);if(0===a.length)return c(i,t,n);let s=h(t.root,n),o=a.map(e=>{t.varCounter++;let i="v".concat(t.varCounter),a=s.args&&s.args[e];if(!a)throw Error("no typing defined for argument `".concat(e,"` in path `").concat(n.join("."),"`"));return t.variables[i]={value:r[e],typing:a},"".concat(e,":$").concat(i)});return"(".concat(o,")").concat(c(i,t,n))}if("object"!=typeof e||!(Object.keys(e).length>0))return"";{let r;let i=Object.keys(e).filter(t=>!!e[t]);if(0===i.length)throw Error("field selection should not be empty: ".concat(n.join(".")));let a=n.length>0?h(t.root,n).type:t.root,s=a.scalar;if(i.includes("__scalar")){let n=new Set(Object.keys(e).filter(t=>!e[t]));(null==s?void 0:s.length)&&(t.fragmentCounter++,r="f".concat(t.fragmentCounter),t.fragments.push("fragment ".concat(r," on ").concat(a.name,"{").concat(s.filter(e=>!n.has(e)).join(","),"}")))}let o=i.filter(e=>!["__scalar","__name"].includes(e)).map(r=>{let i=c(e[r],t,[...n,r]);if(!r.startsWith("on_"))return"".concat(r).concat(i);{t.fragmentCounter++;let e="f".concat(t.fragmentCounter),n=r.match(/^on_(.+)/);if(!n||!n[1])throw Error("match failed");return t.fragments.push("fragment ".concat(e," on ").concat(n[1]).concat(i)),"...".concat(e)}}).concat(r?["...".concat(r)]:[]).join(",");return"{".concat(o,"}")}},d=(e,t,n)=>{let r={root:t,varCounter:0,variables:{},fragmentCounter:0,fragments:[]},i=c(n,r,[]),a=Object.keys(r.variables),s=a.length>0?"(".concat(a.map(e=>{let t=r.variables[e].typing[1];return"$".concat(e,":").concat(t)}),")"):"",o=(null==n?void 0:n.__name)||"";return{query:["".concat(e," ").concat(o).concat(s).concat(i),...r.fragments].join(","),variables:Object.keys(r.variables).reduce((e,t)=>(e[t]=r.variables[t].value,e),{}),...o?{operationName:o.toString()}:{}}},h=(e,t)=>{let n;if(!e)throw Error("root type is not provided");if(0===t.length)throw Error("path is empty");return t.forEach(t=>{let r=n?n.type:e;if(!r.fields)throw Error("type `".concat(r.name,"` does not have fields"));let i=Object.keys(r.fields).filter(e=>e.startsWith("on_")).reduce((e,t)=>{let n=r.fields&&r.fields[t];return n&&e.push(n.type),e},[r]),a=null;if(i.forEach(e=>{let n=e.fields&&e.fields[t];n&&(a=n)}),!a)throw Error("type `".concat(r.name,"` does not have a field `").concat(t,"`"));n=a}),n},p=e=>(Object.keys(e).forEach(t=>{let n=e[t];if(!n.fields)return;let r=n.fields;Object.keys(r).forEach(t=>{let n=r[t];if(n.args){let t=n.args;Object.keys(t).forEach(n=>{let r=t[n];if(r){let[t]=r;"string"==typeof t&&(e[t]||(e[t]={name:t}),r[0]=e[t])}})}let i=n.type;"string"==typeof i&&(e[i]||(e[i]={name:i}),n.type=e[i])})}),e),f=(e=>{let t=Object.assign({},...Object.keys(e.types).map((e,t)=>({[t]:e})));return p(Object.assign({},...Object.keys(e.types||{}).map(n=>{let r=e.types[n]||{};return{[n]:{name:n,scalar:Object.keys(r).filter(t=>{var n;let[i]=r[t]||[];return!(!(i&&e.scalars.includes(i))||Object.values((null===(n=r[t])||void 0===n?void 0:n[1])||{}).map(e=>null==e?void 0:e[1]).filter(Boolean).some(e=>e&&e.endsWith("!")))}),fields:Object.assign({},...Object.keys(r).map(e=>{let[n,i]=r[e]||[];return null==n?{}:{[e]:{type:t[n],args:Object.assign({},...Object.keys(i||{}).map(e=>{if(!i||!i[e])return;let[n,r]=i[e];return{[e]:[t[n],r||t[n]]}}))}}}))}}})))})({scalars:[8,18,19,24,34,56,66,106,111,112,122,125,127,128,130,147,155,156,159,160,161,164,167,168,174,175,177,185,188,189,192,197,198,200,206,215,217,220,224,227,235,250,253,254,258,263,266,268,269,274,278,279,284,285,292,300,305,306,307,308,319,330,339,341,348,372,376,380,389,391,392,393,394,400,404],types:{ApiVersion:{displayName:[376],handle:[376],supported:[19],__typename:[376]},ApplePayWalletContentInput:{billingAddress:[210],data:[376],header:[2],lastDigits:[376],signature:[376],version:[376],__typename:[376]},ApplePayWalletHeaderInput:{applicationData:[376],ephemeralPublicKey:[376],publicKeyHash:[376],transactionId:[376],__typename:[376]},AppliedGiftCard:{amountUsed:[245],amountUsedV2:[245],balance:[245],balanceV2:[245],id:[188],lastCharacters:[376],presentmentAmountUsed:[245],__typename:[376]},Article:{author:[5],authorV2:[5],blog:[15],comments:[115,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],content:[376,{truncateAt:[197]}],contentHtml:[185],excerpt:[376,{truncateAt:[197]}],excerptHtml:[185],handle:[376],id:[188],image:[190],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[389],publishedAt:[155],seo:[298],tags:[376],title:[376],trackingParameters:[376],__typename:[376]},ArticleAuthor:{bio:[376],email:[376],firstName:[376],lastName:[376],name:[376],__typename:[376]},ArticleConnection:{edges:[7],nodes:[4],pageInfo:[262],__typename:[376]},ArticleEdge:{cursor:[376],node:[4],__typename:[376]},ArticleSortKeys:{},Attribute:{key:[376],value:[376],__typename:[376]},AttributeInput:{key:[376],value:[376],__typename:[376]},AutomaticDiscountApplication:{allocationMethod:[164],targetSelection:[167],targetType:[168],title:[376],value:[272],__typename:[376]},BaseCartLine:{attribute:[9,{key:[376,"String!"]}],attributes:[9],cost:[74],discountAllocations:[62],estimatedCost:[75],id:[188],merchandise:[225],quantity:[197],sellingPlanAllocation:[312],on_CartLine:[73],on_ComponentizableCartLine:[123],__typename:[376]},BaseCartLineConnection:{edges:[14],nodes:[12],pageInfo:[262],__typename:[376]},BaseCartLineEdge:{cursor:[376],node:[12],__typename:[376]},Blog:{articleByHandle:[4,{handle:[376,"String!"]}],articles:[6,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[8],query:[376]}],authors:[5],handle:[376],id:[188],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[389],seo:[298],title:[376],__typename:[376]},BlogConnection:{edges:[17],nodes:[15],pageInfo:[262],__typename:[376]},BlogEdge:{cursor:[376],node:[15],__typename:[376]},BlogSortKeys:{},Boolean:{},Brand:{colors:[22],coverImage:[218],logo:[218],shortDescription:[376],slogan:[376],squareLogo:[218],__typename:[376]},BrandColorGroup:{background:[112],foreground:[112],__typename:[376]},BrandColors:{primary:[21],secondary:[21],__typename:[376]},BuyerInput:{customerAccessToken:[376],companyLocationId:[188],__typename:[376]},CardBrand:{},Cart:{appliedGiftCards:[3],attribute:[9,{key:[376,"String!"]}],attributes:[9],buyerIdentity:[31],checkoutUrl:[389],cost:[42],createdAt:[155],delivery:[45],deliveryGroups:[54,{first:[197],after:[376],last:[197],before:[376],reverse:[19],withCarrierRates:[19]}],discountAllocations:[62],discountCodes:[64],estimatedCost:[67],id:[188],lines:[13,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],note:[376],totalQuantity:[197],updatedAt:[155],__typename:[376]},CartAddress:{on_CartDeliveryAddress:[46],__typename:[376]},CartAddressInput:{deliveryAddress:[47],copyFromCustomerAddressId:[188],__typename:[376]},CartAttributesUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartAutomaticDiscountAllocation:{discountApplication:[63],discountedAmount:[245],targetType:[168],title:[376],__typename:[376]},CartBillingAddressUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartBuyerIdentity:{countryCode:[127],customer:[131],deliveryAddressPreferences:[157],email:[376],phone:[376],preferences:[89],purchasingCompany:[293],__typename:[376]},CartBuyerIdentityInput:{email:[376],phone:[376],companyLocationId:[188],countryCode:[127],customerAccessToken:[376],preferences:[90],__typename:[376]},CartBuyerIdentityUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartCardSource:{},CartCodeDiscountAllocation:{code:[376],discountApplication:[63],discountedAmount:[245],targetType:[168],__typename:[376]},CartCompletionAction:{on_CompletePaymentChallenge:[120],__typename:[376]},CartCompletionActionRequired:{action:[36],id:[376],__typename:[376]},CartCompletionAttemptResult:{on_CartCompletionActionRequired:[37],on_CartCompletionFailed:[39],on_CartCompletionProcessing:[40],on_CartCompletionSuccess:[41],__typename:[376]},CartCompletionFailed:{errors:[121],id:[376],__typename:[376]},CartCompletionProcessing:{id:[376],pollDelay:[197],__typename:[376]},CartCompletionSuccess:{completedAt:[155],id:[376],orderId:[188],orderUrl:[389],__typename:[376]},CartCost:{checkoutChargeAmount:[245],subtotalAmount:[245],subtotalAmountEstimated:[19],totalAmount:[245],totalAmountEstimated:[19],totalDutyAmount:[245],totalDutyAmountEstimated:[19],totalTaxAmount:[245],totalTaxAmountEstimated:[19],__typename:[376]},CartCreatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartCustomDiscountAllocation:{discountApplication:[63],discountedAmount:[245],targetType:[168],title:[376],__typename:[376]},CartDelivery:{addresses:[93,{selected:[19]}],__typename:[376]},CartDeliveryAddress:{address1:[376],address2:[376],city:[376],company:[376],countryCode:[376],firstName:[376],formatted:[376,{withName:[19],withCompany:[19]}],formattedArea:[376],lastName:[376],latitude:[177],longitude:[177],name:[376],phone:[376],provinceCode:[376],zip:[376],__typename:[376]},CartDeliveryAddressInput:{address1:[376],address2:[376],city:[376],company:[376],countryCode:[127],firstName:[376],lastName:[376],phone:[376],provinceCode:[376],zip:[376],__typename:[376]},CartDeliveryAddressesAddPayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartDeliveryAddressesRemovePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartDeliveryAddressesUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartDeliveryCoordinatesPreference:{countryCode:[127],latitude:[177],longitude:[177],__typename:[376]},CartDeliveryCoordinatesPreferenceInput:{latitude:[177],longitude:[177],countryCode:[127],__typename:[376]},CartDeliveryGroup:{cartLines:[13,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],deliveryAddress:[207],deliveryOptions:[58],groupType:[56],id:[188],selectedDeliveryOption:[58],__typename:[376]},CartDeliveryGroupConnection:{edges:[55],nodes:[53],pageInfo:[262],__typename:[376]},CartDeliveryGroupEdge:{cursor:[376],node:[53],__typename:[376]},CartDeliveryGroupType:{},CartDeliveryInput:{addresses:[94],__typename:[376]},CartDeliveryOption:{code:[376],deliveryMethodType:[160],description:[376],estimatedCost:[245],handle:[376],title:[376],__typename:[376]},CartDeliveryPreference:{coordinates:[51],deliveryMethod:[269],pickupHandle:[376],__typename:[376]},CartDeliveryPreferenceInput:{deliveryMethod:[269],pickupHandle:[376],coordinates:[52],__typename:[376]},CartDirectPaymentMethodInput:{billingAddress:[210],sessionId:[376],cardSource:[34],acceptedSubscriptionTerms:[19],__typename:[376]},CartDiscountAllocation:{discountApplication:[63],discountedAmount:[245],targetType:[168],on_CartAutomaticDiscountAllocation:[29],on_CartCodeDiscountAllocation:[35],on_CartCustomDiscountAllocation:[44],__typename:[376]},CartDiscountApplication:{allocationMethod:[164],targetSelection:[167],targetType:[168],value:[272],__typename:[376]},CartDiscountCode:{applicable:[19],code:[376],__typename:[376]},CartDiscountCodesUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartErrorCode:{},CartEstimatedCost:{checkoutChargeAmount:[245],subtotalAmount:[245],totalAmount:[245],totalDutyAmount:[245],totalTaxAmount:[245],__typename:[376]},CartFreePaymentMethodInput:{billingAddress:[210],__typename:[376]},CartGiftCardCodesRemovePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartGiftCardCodesUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartInput:{attributes:[10],lines:[76],discountCodes:[376],giftCardCodes:[376],note:[376],buyerIdentity:[32],delivery:[57],metafields:[72],__typename:[376]},CartInputMetafieldInput:{key:[376],value:[376],type:[376],__typename:[376]},CartLine:{attribute:[9,{key:[376,"String!"]}],attributes:[9],cost:[74],discountAllocations:[62],estimatedCost:[75],id:[188],merchandise:[225],quantity:[197],sellingPlanAllocation:[312],__typename:[376]},CartLineCost:{amountPerQuantity:[245],compareAtAmountPerQuantity:[245],subtotalAmount:[245],totalAmount:[245],__typename:[376]},CartLineEstimatedCost:{amount:[245],compareAtAmount:[245],subtotalAmount:[245],totalAmount:[245],__typename:[376]},CartLineInput:{attributes:[10],quantity:[197],merchandiseId:[188],sellingPlanId:[188],__typename:[376]},CartLineUpdateInput:{id:[188],quantity:[197],merchandiseId:[188],attributes:[10],sellingPlanId:[188],__typename:[376]},CartLinesAddPayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartLinesRemovePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartLinesUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartMetafieldDeleteInput:{ownerId:[188],key:[376],__typename:[376]},CartMetafieldDeletePayload:{deletedId:[188],userErrors:[228],__typename:[376]},CartMetafieldsSetInput:{ownerId:[188],key:[376],value:[376],type:[376],__typename:[376]},CartMetafieldsSetPayload:{metafields:[226],userErrors:[234],__typename:[376]},CartNoteUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartOperationError:{code:[376],message:[376],__typename:[376]},CartPaymentInput:{amount:[244],sourceIdentifier:[376],freePaymentMethod:[68],directPaymentMethod:[61],walletPaymentMethod:[104],__typename:[376]},CartPaymentUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartPreferences:{delivery:[59],wallet:[376],__typename:[376]},CartPreferencesInput:{delivery:[60],wallet:[376],__typename:[376]},CartPrepareForCompletionPayload:{result:[92],userErrors:[103],__typename:[376]},CartPrepareForCompletionResult:{on_CartStatusNotReady:[98],on_CartStatusReady:[99],on_CartThrottled:[102],__typename:[376]},CartSelectableAddress:{address:[26],id:[188],oneTimeUse:[19],selected:[19],__typename:[376]},CartSelectableAddressInput:{address:[27],selected:[19],oneTimeUse:[19],validationStrategy:[159],__typename:[376]},CartSelectableAddressUpdateInput:{id:[188],address:[27],selected:[19],oneTimeUse:[19],validationStrategy:[159],__typename:[376]},CartSelectedDeliveryOptionInput:{deliveryGroupId:[188],deliveryOptionHandle:[376],__typename:[376]},CartSelectedDeliveryOptionsUpdatePayload:{cart:[25],userErrors:[103],warnings:[105],__typename:[376]},CartStatusNotReady:{cart:[25],errors:[86],__typename:[376]},CartStatusReady:{cart:[25],__typename:[376]},CartSubmitForCompletionPayload:{result:[101],userErrors:[103],__typename:[376]},CartSubmitForCompletionResult:{on_SubmitAlreadyAccepted:[381],on_SubmitFailed:[382],on_SubmitSuccess:[383],on_SubmitThrottled:[384],__typename:[376]},CartThrottled:{pollAfter:[155],__typename:[376]},CartUserError:{code:[66],field:[376],message:[376],__typename:[376]},CartWalletPaymentMethodInput:{applePayWalletContent:[1],shopPayWalletContent:[364],__typename:[376]},CartWarning:{code:[106],message:[376],target:[188],__typename:[376]},CartWarningCode:{},CategoryFilter:{id:[376],__typename:[376]},Collection:{description:[376,{truncateAt:[197]}],descriptionHtml:[185],handle:[376],id:[188],image:[190],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[389],products:[275,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[274],filters:[277,"[ProductFilter!]"]}],seo:[298],title:[376],trackingParameters:[376],updatedAt:[155],__typename:[376]},CollectionConnection:{edges:[110],nodes:[108],pageInfo:[262],totalCount:[394],__typename:[376]},CollectionEdge:{cursor:[376],node:[108],__typename:[376]},CollectionSortKeys:{},Color:{},Comment:{author:[114],content:[376,{truncateAt:[197]}],contentHtml:[185],id:[188],__typename:[376]},CommentAuthor:{email:[376],name:[376],__typename:[376]},CommentConnection:{edges:[116],nodes:[113],pageInfo:[262],__typename:[376]},CommentEdge:{cursor:[376],node:[113],__typename:[376]},Company:{createdAt:[155],externalId:[376],id:[188],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],name:[376],updatedAt:[155],__typename:[376]},CompanyContact:{createdAt:[155],id:[188],locale:[376],title:[376],updatedAt:[155],__typename:[376]},CompanyLocation:{createdAt:[155],externalId:[376],id:[188],locale:[376],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],name:[376],updatedAt:[155],__typename:[376]},CompletePaymentChallenge:{redirectUrl:[389],__typename:[376]},CompletionError:{code:[122],message:[376],__typename:[376]},CompletionErrorCode:{},ComponentizableCartLine:{attribute:[9,{key:[376,"String!"]}],attributes:[9],cost:[74],discountAllocations:[62],estimatedCost:[75],id:[188],lineComponents:[73],merchandise:[225],quantity:[197],sellingPlanAllocation:[312],__typename:[376]},Count:{count:[197],precision:[125],__typename:[376]},CountPrecision:{},Country:{availableLanguages:[199],currency:[129],isoCode:[127],market:[212],name:[376],unitSystem:[393],__typename:[376]},CountryCode:{},CropRegion:{},Currency:{isoCode:[130],name:[376],symbol:[376],__typename:[376]},CurrencyCode:{},Customer:{acceptsMarketing:[19],addresses:[208,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],createdAt:[155],defaultAddress:[207],displayName:[376],email:[376],firstName:[376],id:[188],lastName:[376],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],numberOfOrders:[394],orders:[251,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[258],query:[376]}],phone:[376],tags:[376],updatedAt:[155],__typename:[376]},CustomerAccessToken:{accessToken:[376],expiresAt:[155],__typename:[376]},CustomerAccessTokenCreateInput:{email:[376],password:[376],__typename:[376]},CustomerAccessTokenCreatePayload:{customerAccessToken:[132],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerAccessTokenCreateWithMultipassPayload:{customerAccessToken:[132],customerUserErrors:[154],__typename:[376]},CustomerAccessTokenDeletePayload:{deletedAccessToken:[376],deletedCustomerAccessTokenId:[376],userErrors:[398],__typename:[376]},CustomerAccessTokenRenewPayload:{customerAccessToken:[132],userErrors:[398],__typename:[376]},CustomerActivateByUrlPayload:{customer:[131],customerAccessToken:[132],customerUserErrors:[154],__typename:[376]},CustomerActivateInput:{activationToken:[376],password:[376],__typename:[376]},CustomerActivatePayload:{customer:[131],customerAccessToken:[132],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerAddressCreatePayload:{customerAddress:[207],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerAddressDeletePayload:{customerUserErrors:[154],deletedCustomerAddressId:[376],userErrors:[398],__typename:[376]},CustomerAddressUpdatePayload:{customerAddress:[207],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerCreateInput:{firstName:[376],lastName:[376],email:[376],phone:[376],password:[376],acceptsMarketing:[19],__typename:[376]},CustomerCreatePayload:{customer:[131],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerDefaultAddressUpdatePayload:{customer:[131],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerErrorCode:{},CustomerRecoverPayload:{customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerResetByUrlPayload:{customer:[131],customerAccessToken:[132],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerResetInput:{resetToken:[376],password:[376],__typename:[376]},CustomerResetPayload:{customer:[131],customerAccessToken:[132],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerUpdateInput:{firstName:[376],lastName:[376],email:[376],phone:[376],password:[376],acceptsMarketing:[19],__typename:[376]},CustomerUpdatePayload:{customer:[131],customerAccessToken:[132],customerUserErrors:[154],userErrors:[398],__typename:[376]},CustomerUserError:{code:[147],field:[376],message:[376],__typename:[376]},DateTime:{},Decimal:{},DeliveryAddress:{on_MailingAddress:[207],on_Node:[247],__typename:[376]},DeliveryAddressInput:{deliveryAddress:[210],oneTimeUse:[19],deliveryAddressValidationStrategy:[159],customerAddressId:[188],__typename:[376]},DeliveryAddressValidationStrategy:{},DeliveryMethodType:{},DigitalWallet:{},DiscountAllocation:{allocatedAmount:[245],discountApplication:[163],__typename:[376]},DiscountApplication:{allocationMethod:[164],targetSelection:[167],targetType:[168],value:[272],on_AutomaticDiscountApplication:[11],on_DiscountCodeApplication:[169],on_ManualDiscountApplication:[211],on_ScriptDiscountApplication:[299],__typename:[376]},DiscountApplicationAllocationMethod:{},DiscountApplicationConnection:{edges:[166],nodes:[163],pageInfo:[262],__typename:[376]},DiscountApplicationEdge:{cursor:[376],node:[163],__typename:[376]},DiscountApplicationTargetSelection:{},DiscountApplicationTargetType:{},DiscountCodeApplication:{allocationMethod:[164],applicable:[19],code:[376],targetSelection:[167],targetType:[168],value:[272],__typename:[376]},DisplayableError:{field:[376],message:[376],on_CartUserError:[103],on_CustomerUserError:[154],on_MetafieldDeleteUserError:[228],on_MetafieldsSetUserError:[234],on_UserError:[398],on_UserErrorsShopPayPaymentRequestSessionUserErrors:[399],__typename:[376]},Domain:{host:[376],sslEnabled:[19],url:[389],__typename:[376]},ExternalVideo:{alt:[376],embedUrl:[389],embeddedUrl:[389],host:[217],id:[188],mediaContentType:[215],originUrl:[389],presentation:[219],previewImage:[190],__typename:[376]},Filter:{id:[376],label:[376],presentation:[174],type:[175],values:[176],__typename:[376]},FilterPresentation:{},FilterType:{},FilterValue:{count:[197],id:[376],image:[218],input:[198],label:[376],swatch:[385],__typename:[376]},Float:{},Fulfillment:{fulfillmentLineItems:[180,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],trackingCompany:[376],trackingInfo:[182,{first:[197]}],__typename:[376]},FulfillmentLineItem:{lineItem:[255],quantity:[197],__typename:[376]},FulfillmentLineItemConnection:{edges:[181],nodes:[179],pageInfo:[262],__typename:[376]},FulfillmentLineItemEdge:{cursor:[376],node:[179],__typename:[376]},FulfillmentTrackingInfo:{number:[376],url:[389],__typename:[376]},GenericFile:{alt:[376],id:[188],mimeType:[376],originalFileSize:[197],previewImage:[190],url:[389],__typename:[376]},GeoCoordinateInput:{latitude:[177],longitude:[177],__typename:[376]},HTML:{},HasMetafields:{metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],on_Article:[4],on_Blog:[15],on_Cart:[25],on_Collection:[108],on_Company:[117],on_CompanyLocation:[119],on_Customer:[131],on_Location:[202],on_Market:[212],on_Order:[249],on_Page:[259],on_Product:[273],on_ProductVariant:[286],on_SellingPlan:[311],on_Shop:[337],__typename:[376]},HasMetafieldsIdentifier:{namespace:[376],key:[376],__typename:[376]},ID:{},ISO8601DateTime:{},Image:{altText:[376],height:[197],id:[188],originalSrc:[389],src:[389],transformedSrc:[389,{maxWidth:[197],maxHeight:[197],crop:[128],scale:[197],preferredContentType:[192]}],url:[389,{transform:[194]}],width:[197],__typename:[376]},ImageConnection:{edges:[193],nodes:[190],pageInfo:[262],__typename:[376]},ImageContentType:{},ImageEdge:{cursor:[376],node:[190],__typename:[376]},ImageTransformInput:{crop:[128],maxWidth:[197],maxHeight:[197],scale:[197],preferredContentType:[192],__typename:[376]},InContextAnnotation:{description:[376],type:[196],__typename:[376]},InContextAnnotationType:{kind:[376],name:[376],__typename:[376]},Int:{},JSON:{},Language:{endonymName:[376],isoCode:[200],name:[376],__typename:[376]},LanguageCode:{},Localization:{availableCountries:[126],availableLanguages:[199],country:[126],language:[199],market:[212],__typename:[376]},Location:{address:[203],id:[188],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],name:[376],__typename:[376]},LocationAddress:{address1:[376],address2:[376],city:[376],country:[376],countryCode:[376],formatted:[376],latitude:[177],longitude:[177],phone:[376],province:[376],provinceCode:[376],zip:[376],__typename:[376]},LocationConnection:{edges:[205],nodes:[202],pageInfo:[262],__typename:[376]},LocationEdge:{cursor:[376],node:[202],__typename:[376]},LocationSortKeys:{},MailingAddress:{address1:[376],address2:[376],city:[376],company:[376],country:[376],countryCode:[376],countryCodeV2:[127],firstName:[376],formatted:[376,{withName:[19],withCompany:[19]}],formattedArea:[376],id:[188],lastName:[376],latitude:[177],longitude:[177],name:[376],phone:[376],province:[376],provinceCode:[376],zip:[376],__typename:[376]},MailingAddressConnection:{edges:[209],nodes:[207],pageInfo:[262],__typename:[376]},MailingAddressEdge:{cursor:[376],node:[207],__typename:[376]},MailingAddressInput:{address1:[376],address2:[376],city:[376],company:[376],country:[376],firstName:[376],lastName:[376],phone:[376],province:[376],zip:[376],__typename:[376]},ManualDiscountApplication:{allocationMethod:[164],description:[376],targetSelection:[167],targetType:[168],title:[376],value:[272],__typename:[376]},Market:{handle:[376],id:[188],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],__typename:[376]},Media:{alt:[376],id:[188],mediaContentType:[215],presentation:[219],previewImage:[190],on_ExternalVideo:[172],on_MediaImage:[218],on_Model3d:[242],on_Video:[402],__typename:[376]},MediaConnection:{edges:[216],nodes:[213],pageInfo:[262],__typename:[376]},MediaContentType:{},MediaEdge:{cursor:[376],node:[213],__typename:[376]},MediaHost:{},MediaImage:{alt:[376],id:[188],image:[190],mediaContentType:[215],presentation:[219],previewImage:[190],__typename:[376]},MediaPresentation:{asJson:[198,{format:[220,"MediaPresentationFormat!"]}],id:[188],__typename:[376]},MediaPresentationFormat:{},Menu:{handle:[376],id:[188],items:[222],itemsCount:[197],title:[376],__typename:[376]},MenuItem:{id:[188],items:[222],resource:[223],resourceId:[188],tags:[376],title:[376],type:[224],url:[389],__typename:[376]},MenuItemResource:{on_Article:[4],on_Blog:[15],on_Collection:[108],on_Metaobject:[236],on_Page:[259],on_Product:[273],on_ShopPolicy:[365],on_HasMetafields:[186],on_Node:[247],on_OnlineStorePublishable:[248],on_Trackable:[388],__typename:[376]},MenuItemType:{},Merchandise:{on_ProductVariant:[286],on_HasMetafields:[186],on_Node:[247],__typename:[376]},Metafield:{createdAt:[155],description:[376],id:[188],key:[376],namespace:[376],parentResource:[230],reference:[231],references:[232,{first:[197],after:[376],last:[197],before:[376]}],type:[376],updatedAt:[155],value:[376],__typename:[376]},MetafieldDeleteErrorCode:{},MetafieldDeleteUserError:{code:[227],field:[376],message:[376],__typename:[376]},MetafieldFilter:{namespace:[376],key:[376],value:[376],__typename:[376]},MetafieldParentResource:{on_Article:[4],on_Blog:[15],on_Cart:[25],on_Collection:[108],on_Company:[117],on_CompanyLocation:[119],on_Customer:[131],on_Location:[202],on_Market:[212],on_Order:[249],on_Page:[259],on_Product:[273],on_ProductVariant:[286],on_SellingPlan:[311],on_Shop:[337],on_HasMetafields:[186],on_Node:[247],on_OnlineStorePublishable:[248],on_Trackable:[388],__typename:[376]},MetafieldReference:{on_Collection:[108],on_GenericFile:[183],on_MediaImage:[218],on_Metaobject:[236],on_Model3d:[242],on_Page:[259],on_Product:[273],on_ProductVariant:[286],on_Video:[402],on_HasMetafields:[186],on_Node:[247],on_OnlineStorePublishable:[248],on_Trackable:[388],on_Media:[213],__typename:[376]},MetafieldReferenceConnection:{edges:[233],nodes:[231],pageInfo:[262],__typename:[376]},MetafieldReferenceEdge:{cursor:[376],node:[231],__typename:[376]},MetafieldsSetUserError:{code:[235],elementIndex:[197],field:[376],message:[376],__typename:[376]},MetafieldsSetUserErrorCode:{},Metaobject:{field:[239,{key:[376,"String!"]}],fields:[239],handle:[376],id:[188],onlineStoreUrl:[389],seo:[241],type:[376],updatedAt:[155],__typename:[376]},MetaobjectConnection:{edges:[238],nodes:[236],pageInfo:[262],__typename:[376]},MetaobjectEdge:{cursor:[376],node:[236],__typename:[376]},MetaobjectField:{key:[376],reference:[231],references:[232,{first:[197],after:[376],last:[197],before:[376]}],type:[376],value:[376],__typename:[376]},MetaobjectHandleInput:{handle:[376],type:[376],__typename:[376]},MetaobjectSEO:{description:[239],title:[239],__typename:[376]},Model3d:{alt:[376],id:[188],mediaContentType:[215],presentation:[219],previewImage:[190],sources:[243],__typename:[376]},Model3dSource:{filesize:[197],format:[376],mimeType:[376],url:[376],__typename:[376]},MoneyInput:{amount:[156],currencyCode:[130],__typename:[376]},MoneyV2:{amount:[156],currencyCode:[130],__typename:[376]},Mutation:{cartAttributesUpdate:[28,{attributes:[10,"[AttributeInput!]!"],cartId:[188,"ID!"]}],cartBillingAddressUpdate:[30,{cartId:[188,"ID!"],billingAddress:[210]}],cartBuyerIdentityUpdate:[33,{cartId:[188,"ID!"],buyerIdentity:[32,"CartBuyerIdentityInput!"]}],cartCreate:[43,{input:[71]}],cartDeliveryAddressesAdd:[48,{cartId:[188,"ID!"],addresses:[94,"[CartSelectableAddressInput!]!"]}],cartDeliveryAddressesRemove:[49,{cartId:[188,"ID!"],addressIds:[188,"[ID!]!"]}],cartDeliveryAddressesUpdate:[50,{cartId:[188,"ID!"],addresses:[95,"[CartSelectableAddressUpdateInput!]!"]}],cartDiscountCodesUpdate:[65,{cartId:[188,"ID!"],discountCodes:[376,"[String!]"]}],cartGiftCardCodesRemove:[69,{cartId:[188,"ID!"],appliedGiftCardIds:[188,"[ID!]!"]}],cartGiftCardCodesUpdate:[70,{cartId:[188,"ID!"],giftCardCodes:[376,"[String!]!"]}],cartLinesAdd:[78,{cartId:[188,"ID!"],lines:[76,"[CartLineInput!]!"]}],cartLinesRemove:[79,{cartId:[188,"ID!"],lineIds:[188,"[ID!]!"]}],cartLinesUpdate:[80,{cartId:[188,"ID!"],lines:[77,"[CartLineUpdateInput!]!"]}],cartMetafieldDelete:[82,{input:[81,"CartMetafieldDeleteInput!"]}],cartMetafieldsSet:[84,{metafields:[83,"[CartMetafieldsSetInput!]!"]}],cartNoteUpdate:[85,{cartId:[188,"ID!"],note:[376,"String!"]}],cartPaymentUpdate:[88,{cartId:[188,"ID!"],payment:[87,"CartPaymentInput!"]}],cartPrepareForCompletion:[91,{cartId:[188,"ID!"]}],cartSelectedDeliveryOptionsUpdate:[97,{cartId:[188,"ID!"],selectedDeliveryOptions:[96,"[CartSelectedDeliveryOptionInput!]!"]}],cartSubmitForCompletion:[100,{cartId:[188,"ID!"],attemptToken:[376,"String!"]}],customerAccessTokenCreate:[134,{input:[133,"CustomerAccessTokenCreateInput!"]}],customerAccessTokenCreateWithMultipass:[135,{multipassToken:[376,"String!"]}],customerAccessTokenDelete:[136,{customerAccessToken:[376,"String!"]}],customerAccessTokenRenew:[137,{customerAccessToken:[376,"String!"]}],customerActivate:[140,{id:[188,"ID!"],input:[139,"CustomerActivateInput!"]}],customerActivateByUrl:[138,{activationUrl:[389,"URL!"],password:[376,"String!"]}],customerAddressCreate:[141,{customerAccessToken:[376,"String!"],address:[210,"MailingAddressInput!"]}],customerAddressDelete:[142,{id:[188,"ID!"],customerAccessToken:[376,"String!"]}],customerAddressUpdate:[143,{customerAccessToken:[376,"String!"],id:[188,"ID!"],address:[210,"MailingAddressInput!"]}],customerCreate:[145,{input:[144,"CustomerCreateInput!"]}],customerDefaultAddressUpdate:[146,{customerAccessToken:[376,"String!"],addressId:[188,"ID!"]}],customerRecover:[148,{email:[376,"String!"]}],customerReset:[151,{id:[188,"ID!"],input:[150,"CustomerResetInput!"]}],customerResetByUrl:[149,{resetUrl:[389,"URL!"],password:[376,"String!"]}],customerUpdate:[153,{customerAccessToken:[376,"String!"],customer:[152,"CustomerUpdateInput!"]}],shopPayPaymentRequestSessionCreate:[358,{sourceIdentifier:[376,"String!"],paymentRequest:[353,"ShopPayPaymentRequestInput!"]}],shopPayPaymentRequestSessionSubmit:[359,{token:[376,"String!"],paymentRequest:[353,"ShopPayPaymentRequestInput!"],idempotencyKey:[376,"String!"],orderName:[376]}],__typename:[376]},Node:{id:[188],on_AppliedGiftCard:[3],on_Article:[4],on_Blog:[15],on_Cart:[25],on_CartLine:[73],on_Collection:[108],on_Comment:[113],on_Company:[117],on_CompanyContact:[118],on_CompanyLocation:[119],on_ComponentizableCartLine:[123],on_ExternalVideo:[172],on_GenericFile:[183],on_Location:[202],on_MailingAddress:[207],on_Market:[212],on_MediaImage:[218],on_MediaPresentation:[219],on_Menu:[221],on_MenuItem:[222],on_Metafield:[226],on_Metaobject:[236],on_Model3d:[242],on_Order:[249],on_Page:[259],on_Product:[273],on_ProductOption:[280],on_ProductOptionValue:[281],on_ProductVariant:[286],on_Shop:[337],on_ShopPayInstallmentsFinancingPlan:[338],on_ShopPayInstallmentsFinancingPlanTerm:[340],on_ShopPayInstallmentsProductVariantPricing:[343],on_ShopPolicy:[365],on_TaxonomyCategory:[386],on_UrlRedirect:[395],on_Video:[402],__typename:[376]},OnlineStorePublishable:{onlineStoreUrl:[389],on_Article:[4],on_Blog:[15],on_Collection:[108],on_Metaobject:[236],on_Page:[259],on_Product:[273],__typename:[376]},Order:{billingAddress:[207],cancelReason:[250],canceledAt:[155],currencyCode:[130],currentSubtotalPrice:[245],currentTotalDuties:[245],currentTotalPrice:[245],currentTotalShippingPrice:[245],currentTotalTax:[245],customAttributes:[9],customerLocale:[376],customerUrl:[389],discountApplications:[165,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],edited:[19],email:[376],financialStatus:[253],fulfillmentStatus:[254],id:[188],lineItems:[256,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],name:[376],orderNumber:[197],originalTotalDuties:[245],originalTotalPrice:[245],phone:[376],processedAt:[155],shippingAddress:[207],shippingDiscountAllocations:[162],statusUrl:[389],subtotalPrice:[245],subtotalPriceV2:[245],successfulFulfillments:[178,{first:[197]}],totalPrice:[245],totalPriceV2:[245],totalRefunded:[245],totalRefundedV2:[245],totalShippingPrice:[245],totalShippingPriceV2:[245],totalTax:[245],totalTaxV2:[245],__typename:[376]},OrderCancelReason:{},OrderConnection:{edges:[252],nodes:[249],pageInfo:[262],totalCount:[394],__typename:[376]},OrderEdge:{cursor:[376],node:[249],__typename:[376]},OrderFinancialStatus:{},OrderFulfillmentStatus:{},OrderLineItem:{currentQuantity:[197],customAttributes:[9],discountAllocations:[162],discountedTotalPrice:[245],originalTotalPrice:[245],quantity:[197],title:[376],variant:[286],__typename:[376]},OrderLineItemConnection:{edges:[257],nodes:[255],pageInfo:[262],__typename:[376]},OrderLineItemEdge:{cursor:[376],node:[255],__typename:[376]},OrderSortKeys:{},Page:{body:[185],bodySummary:[376],createdAt:[155],handle:[376],id:[188],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[389],seo:[298],title:[376],trackingParameters:[376],updatedAt:[155],__typename:[376]},PageConnection:{edges:[261],nodes:[259],pageInfo:[262],__typename:[376]},PageEdge:{cursor:[376],node:[259],__typename:[376]},PageInfo:{endCursor:[376],hasNextPage:[19],hasPreviousPage:[19],startCursor:[376],__typename:[376]},PageSortKeys:{},PaginatedSitemapResources:{hasNextPage:[19],items:[370],__typename:[376]},PaymentSettings:{acceptedCardBrands:[24],cardVaultUrl:[389],countryCode:[127],currencyCode:[130],enabledPresentmentCurrencies:[130],shopifyPaymentsAccountId:[376],supportedDigitalWallets:[161],__typename:[376]},PredictiveSearchLimitScope:{},PredictiveSearchResult:{articles:[4],collections:[108],pages:[259],products:[273],queries:[301],__typename:[376]},PredictiveSearchType:{},PreferenceDeliveryMethodType:{},PriceRangeFilter:{min:[177],max:[177],__typename:[376]},PricingPercentageValue:{percentage:[177],__typename:[376]},PricingValue:{on_MoneyV2:[245],on_PricingPercentageValue:[271],__typename:[376]},Product:{adjacentVariants:[286,{selectedOptions:[310,"[SelectedOptionInput!]"],ignoreUnknownOptions:[19],caseInsensitiveMatch:[19]}],availableForSale:[19],category:[386],collections:[109,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],compareAtPriceRange:[283],createdAt:[155],description:[376,{truncateAt:[197]}],descriptionHtml:[185],encodedVariantAvailability:[376],encodedVariantExistence:[376],featuredImage:[190],handle:[376],id:[188],images:[191,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[278]}],isGiftCard:[19],media:[214,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[279]}],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],onlineStoreUrl:[389],options:[280,{first:[197]}],priceRange:[283],productType:[376],publishedAt:[155],requiresSellingPlan:[19],selectedOrFirstAvailableVariant:[286,{selectedOptions:[310,"[SelectedOptionInput!]"],ignoreUnknownOptions:[19],caseInsensitiveMatch:[19]}],sellingPlanGroups:[327,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],seo:[298],tags:[376],title:[376],totalInventory:[197],trackingParameters:[376],updatedAt:[155],variantBySelectedOptions:[286,{selectedOptions:[310,"[SelectedOptionInput!]!"],ignoreUnknownOptions:[19],caseInsensitiveMatch:[19]}],variants:[290,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[292]}],variantsCount:[124],vendor:[376],__typename:[376]},ProductCollectionSortKeys:{},ProductConnection:{edges:[276],filters:[173],nodes:[273],pageInfo:[262],__typename:[376]},ProductEdge:{cursor:[376],node:[273],__typename:[376]},ProductFilter:{available:[19],variantOption:[401],category:[107],taxonomyMetafield:[387],productType:[376],productVendor:[376],price:[270],productMetafield:[229],variantMetafield:[229],tag:[376],__typename:[376]},ProductImageSortKeys:{},ProductMediaSortKeys:{},ProductOption:{id:[188],name:[376],optionValues:[281],values:[376],__typename:[376]},ProductOptionValue:{firstSelectableVariant:[286],id:[188],name:[376],swatch:[282],__typename:[376]},ProductOptionValueSwatch:{color:[112],image:[213],__typename:[376]},ProductPriceRange:{maxVariantPrice:[245],minVariantPrice:[245],__typename:[376]},ProductRecommendationIntent:{},ProductSortKeys:{},ProductVariant:{availableForSale:[19],barcode:[376],compareAtPrice:[245],compareAtPriceV2:[245],components:[288,{first:[197],after:[376],last:[197],before:[376]}],currentlyNotInStock:[19],groupedBy:[290,{first:[197],after:[376],last:[197],before:[376]}],id:[188],image:[190],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],price:[245],priceV2:[245],product:[273],quantityAvailable:[197],quantityPriceBreaks:[295,{first:[197],after:[376],last:[197],before:[376]}],quantityRule:[297],requiresComponents:[19],requiresShipping:[19],selectedOptions:[309],sellingPlanAllocations:[313,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],shopPayInstallmentsPricing:[343],sku:[376],storeAvailability:[374,{near:[184],first:[197],after:[376],last:[197],before:[376],reverse:[19]}],taxable:[19],title:[376],unitPrice:[245],unitPriceMeasurement:[390],weight:[177],weightUnit:[404],__typename:[376]},ProductVariantComponent:{productVariant:[286],quantity:[197],__typename:[376]},ProductVariantComponentConnection:{edges:[289],nodes:[287],pageInfo:[262],__typename:[376]},ProductVariantComponentEdge:{cursor:[376],node:[287],__typename:[376]},ProductVariantConnection:{edges:[291],nodes:[286],pageInfo:[262],__typename:[376]},ProductVariantEdge:{cursor:[376],node:[286],__typename:[376]},ProductVariantSortKeys:{},PurchasingCompany:{company:[117],contact:[118],location:[119],__typename:[376]},QuantityPriceBreak:{minimumQuantity:[197],price:[245],__typename:[376]},QuantityPriceBreakConnection:{edges:[296],nodes:[294],pageInfo:[262],__typename:[376]},QuantityPriceBreakEdge:{cursor:[376],node:[294],__typename:[376]},QuantityRule:{increment:[197],maximum:[197],minimum:[197],__typename:[376]},SEO:{description:[376],title:[376],__typename:[376]},ScriptDiscountApplication:{allocationMethod:[164],targetSelection:[167],targetType:[168],title:[376],value:[272],__typename:[376]},SearchPrefixQueryType:{},SearchQuerySuggestion:{styledText:[376],text:[376],trackingParameters:[376],__typename:[376]},SearchResultItem:{on_Article:[4],on_Page:[259],on_Product:[273],on_HasMetafields:[186],on_Node:[247],on_OnlineStorePublishable:[248],on_Trackable:[388],__typename:[376]},SearchResultItemConnection:{edges:[304],nodes:[302],pageInfo:[262],productFilters:[173],totalCount:[197],__typename:[376]},SearchResultItemEdge:{cursor:[376],node:[302],__typename:[376]},SearchSortKeys:{},SearchType:{},SearchUnavailableProductsType:{},SearchableField:{},SelectedOption:{name:[376],value:[376],__typename:[376]},SelectedOptionInput:{name:[376],value:[376],__typename:[376]},SellingPlan:{billingPolicy:[316],checkoutCharge:[317],deliveryPolicy:[322],description:[376],id:[188],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],name:[376],options:[331],priceAdjustments:[333],recurringDeliveries:[19],__typename:[376]},SellingPlanAllocation:{checkoutChargeAmount:[245],priceAdjustments:[315],remainingBalanceChargeAmount:[245],sellingPlan:[311],__typename:[376]},SellingPlanAllocationConnection:{edges:[314],nodes:[312],pageInfo:[262],__typename:[376]},SellingPlanAllocationEdge:{cursor:[376],node:[312],__typename:[376]},SellingPlanAllocationPriceAdjustment:{compareAtPrice:[245],perDeliveryPrice:[245],price:[245],unitPrice:[245],__typename:[376]},SellingPlanBillingPolicy:{on_SellingPlanRecurringBillingPolicy:[335],__typename:[376]},SellingPlanCheckoutCharge:{type:[319],value:[320],__typename:[376]},SellingPlanCheckoutChargePercentageValue:{percentage:[177],__typename:[376]},SellingPlanCheckoutChargeType:{},SellingPlanCheckoutChargeValue:{on_MoneyV2:[245],on_SellingPlanCheckoutChargePercentageValue:[318],__typename:[376]},SellingPlanConnection:{edges:[323],nodes:[311],pageInfo:[262],__typename:[376]},SellingPlanDeliveryPolicy:{on_SellingPlanRecurringDeliveryPolicy:[336],__typename:[376]},SellingPlanEdge:{cursor:[376],node:[311],__typename:[376]},SellingPlanFixedAmountPriceAdjustment:{adjustmentAmount:[245],__typename:[376]},SellingPlanFixedPriceAdjustment:{price:[245],__typename:[376]},SellingPlanGroup:{appName:[376],name:[376],options:[329],sellingPlans:[321,{first:[197],after:[376],last:[197],before:[376],reverse:[19]}],__typename:[376]},SellingPlanGroupConnection:{edges:[328],nodes:[326],pageInfo:[262],__typename:[376]},SellingPlanGroupEdge:{cursor:[376],node:[326],__typename:[376]},SellingPlanGroupOption:{name:[376],values:[376],__typename:[376]},SellingPlanInterval:{},SellingPlanOption:{name:[376],value:[376],__typename:[376]},SellingPlanPercentagePriceAdjustment:{adjustmentPercentage:[177],__typename:[376]},SellingPlanPriceAdjustment:{adjustmentValue:[334],orderCount:[197],__typename:[376]},SellingPlanPriceAdjustmentValue:{on_SellingPlanFixedAmountPriceAdjustment:[324],on_SellingPlanFixedPriceAdjustment:[325],on_SellingPlanPercentagePriceAdjustment:[332],__typename:[376]},SellingPlanRecurringBillingPolicy:{interval:[330],intervalCount:[197],__typename:[376]},SellingPlanRecurringDeliveryPolicy:{interval:[330],intervalCount:[197],__typename:[376]},Shop:{brand:[20],description:[376],id:[188],metafield:[226,{namespace:[376],key:[376,"String!"]}],metafields:[226,{identifiers:[187,"[HasMetafieldsIdentifier!]!"]}],moneyFormat:[376],name:[376],paymentSettings:[265],primaryDomain:[171],privacyPolicy:[365],refundPolicy:[365],shippingPolicy:[365],shipsToCountries:[127],shopPayInstallmentsPricing:[342],subscriptionPolicy:[366],termsOfService:[365],__typename:[376]},ShopPayInstallmentsFinancingPlan:{id:[188],maxPrice:[245],minPrice:[245],terms:[340],__typename:[376]},ShopPayInstallmentsFinancingPlanFrequency:{},ShopPayInstallmentsFinancingPlanTerm:{apr:[197],frequency:[339],id:[188],installmentsCount:[124],loanType:[341],__typename:[376]},ShopPayInstallmentsLoan:{},ShopPayInstallmentsPricing:{financingPlans:[338],maxPrice:[245],minPrice:[245],__typename:[376]},ShopPayInstallmentsProductVariantPricing:{available:[19],eligible:[19],fullPrice:[245],id:[188],installmentsCount:[124],pricePerTerm:[245],__typename:[376]},ShopPayPaymentRequest:{deliveryMethods:[346],discountCodes:[376],discounts:[349],lineItems:[354],locale:[376],presentmentCurrency:[130],selectedDeliveryMethodType:[348],shippingAddress:[345],shippingLines:[360],subtotal:[245],total:[245],totalShippingPrice:[362],totalTax:[245],__typename:[376]},ShopPayPaymentRequestContactField:{address1:[376],address2:[376],city:[376],companyName:[376],countryCode:[376],email:[376],firstName:[376],lastName:[376],phone:[376],postalCode:[376],provinceCode:[376],__typename:[376]},ShopPayPaymentRequestDeliveryMethod:{amount:[245],code:[376],deliveryExpectationLabel:[376],detail:[376],label:[376],maxDeliveryDate:[189],minDeliveryDate:[189],__typename:[376]},ShopPayPaymentRequestDeliveryMethodInput:{code:[376],label:[376],detail:[376],amount:[244],minDeliveryDate:[189],maxDeliveryDate:[189],deliveryExpectationLabel:[376],__typename:[376]},ShopPayPaymentRequestDeliveryMethodType:{},ShopPayPaymentRequestDiscount:{amount:[245],label:[376],__typename:[376]},ShopPayPaymentRequestDiscountInput:{label:[376],amount:[244],__typename:[376]},ShopPayPaymentRequestImage:{alt:[376],url:[376],__typename:[376]},ShopPayPaymentRequestImageInput:{url:[376],alt:[376],__typename:[376]},ShopPayPaymentRequestInput:{discountCodes:[376],lineItems:[355],shippingLines:[361],total:[244],subtotal:[244],discounts:[350],totalShippingPrice:[363],totalTax:[244],deliveryMethods:[347],selectedDeliveryMethodType:[348],locale:[376],presentmentCurrency:[130],paymentMethod:[376],__typename:[376]},ShopPayPaymentRequestLineItem:{finalItemPrice:[245],finalLinePrice:[245],image:[351],itemDiscounts:[349],label:[376],lineDiscounts:[349],originalItemPrice:[245],originalLinePrice:[245],quantity:[197],requiresShipping:[19],sku:[376],__typename:[376]},ShopPayPaymentRequestLineItemInput:{label:[376],quantity:[197],sku:[376],requiresShipping:[19],image:[352],originalLinePrice:[244],finalLinePrice:[244],lineDiscounts:[350],originalItemPrice:[244],finalItemPrice:[244],itemDiscounts:[350],__typename:[376]},ShopPayPaymentRequestReceipt:{paymentRequest:[344],processingStatusType:[376],token:[376],__typename:[376]},ShopPayPaymentRequestSession:{checkoutUrl:[389],paymentRequest:[344],sourceIdentifier:[376],token:[376],__typename:[376]},ShopPayPaymentRequestSessionCreatePayload:{shopPayPaymentRequestSession:[357],userErrors:[399],__typename:[376]},ShopPayPaymentRequestSessionSubmitPayload:{paymentRequestReceipt:[356],userErrors:[399],__typename:[376]},ShopPayPaymentRequestShippingLine:{amount:[245],code:[376],label:[376],__typename:[376]},ShopPayPaymentRequestShippingLineInput:{code:[376],label:[376],amount:[244],__typename:[376]},ShopPayPaymentRequestTotalShippingPrice:{discounts:[349],finalTotal:[245],originalTotal:[245],__typename:[376]},ShopPayPaymentRequestTotalShippingPriceInput:{discounts:[350],originalTotal:[244],finalTotal:[244],__typename:[376]},ShopPayWalletContentInput:{billingAddress:[210],sessionToken:[376],__typename:[376]},ShopPolicy:{body:[376],handle:[376],id:[188],title:[376],url:[389],__typename:[376]},ShopPolicyWithDefault:{body:[376],handle:[376],id:[188],title:[376],url:[389],__typename:[376]},Sitemap:{pagesCount:[124],resources:[264,{page:[197,"Int!"]}],__typename:[376]},SitemapImage:{alt:[376],filepath:[376],updatedAt:[155],__typename:[376]},SitemapResource:{handle:[376],image:[368],title:[376],updatedAt:[155],__typename:[376]},SitemapResourceInterface:{handle:[376],updatedAt:[155],on_SitemapResource:[369],on_SitemapResourceMetaobject:[371],__typename:[376]},SitemapResourceMetaobject:{handle:[376],onlineStoreUrlHandle:[376],type:[376],updatedAt:[155],__typename:[376]},SitemapType:{},StoreAvailability:{available:[19],location:[202],pickUpTime:[376],quantityAvailable:[197],__typename:[376]},StoreAvailabilityConnection:{edges:[375],nodes:[373],pageInfo:[262],__typename:[376]},StoreAvailabilityEdge:{cursor:[376],node:[373],__typename:[376]},String:{},StringConnection:{edges:[378],nodes:[376],pageInfo:[262],__typename:[376]},StringEdge:{cursor:[376],node:[376],__typename:[376]},SubmissionError:{code:[380],message:[376],__typename:[376]},SubmissionErrorCode:{},SubmitAlreadyAccepted:{attemptId:[376],__typename:[376]},SubmitFailed:{checkoutUrl:[389],errors:[379],__typename:[376]},SubmitSuccess:{attemptId:[376],redirectUrl:[389],__typename:[376]},SubmitThrottled:{pollAfter:[155],__typename:[376]},Swatch:{color:[112],image:[218],__typename:[376]},TaxonomyCategory:{ancestors:[386],id:[188],name:[376],__typename:[376]},TaxonomyMetafieldFilter:{namespace:[376],key:[376],value:[376],__typename:[376]},Trackable:{trackingParameters:[376],on_Article:[4],on_Collection:[108],on_Page:[259],on_Product:[273],on_SearchQuerySuggestion:[301],__typename:[376]},URL:{},UnitPriceMeasurement:{measuredType:[391],quantityUnit:[392],quantityValue:[177],referenceUnit:[392],referenceValue:[197],__typename:[376]},UnitPriceMeasurementMeasuredType:{},UnitPriceMeasurementMeasuredUnit:{},UnitSystem:{},UnsignedInt64:{},UrlRedirect:{id:[188],path:[376],target:[376],__typename:[376]},UrlRedirectConnection:{edges:[397],nodes:[395],pageInfo:[262],__typename:[376]},UrlRedirectEdge:{cursor:[376],node:[395],__typename:[376]},UserError:{field:[376],message:[376],__typename:[376]},UserErrorsShopPayPaymentRequestSessionUserErrors:{code:[400],field:[376],message:[376],__typename:[376]},UserErrorsShopPayPaymentRequestSessionUserErrorsCode:{},VariantOptionFilter:{name:[376],value:[376],__typename:[376]},Video:{alt:[376],id:[188],mediaContentType:[215],presentation:[219],previewImage:[190],sources:[403],__typename:[376]},VideoSource:{format:[376],height:[197],mimeType:[376],url:[376],width:[197],__typename:[376]},WeightUnit:{},Query:{article:[4,{id:[188,"ID!"]}],articles:[6,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[8],query:[376]}],blog:[15,{handle:[376],id:[188]}],blogByHandle:[15,{handle:[376,"String!"]}],blogs:[16,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[18],query:[376]}],cart:[25,{id:[188,"ID!"]}],cartCompletionAttempt:[38,{attemptId:[376,"String!"]}],collection:[108,{id:[188],handle:[376]}],collectionByHandle:[108,{handle:[376,"String!"]}],collections:[109,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[111],query:[376]}],customer:[131,{customerAccessToken:[376,"String!"]}],localization:[201],locations:[204,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[206],near:[184]}],menu:[221,{handle:[376,"String!"]}],metaobject:[236,{id:[188],handle:[240]}],metaobjects:[237,{type:[376,"String!"],sortKey:[376],first:[197],after:[376],last:[197],before:[376],reverse:[19]}],node:[247,{id:[188,"ID!"]}],nodes:[247,{ids:[188,"[ID!]!"]}],page:[259,{handle:[376],id:[188]}],pageByHandle:[259,{handle:[376,"String!"]}],pages:[260,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[263],query:[376]}],paymentSettings:[265],predictiveSearch:[267,{limit:[197],limitScope:[266],query:[376,"String!"],searchableFields:[308,"[SearchableField!]"],types:[268,"[PredictiveSearchType!]"],unavailableProducts:[307]}],product:[273,{id:[188],handle:[376]}],productByHandle:[273,{handle:[376,"String!"]}],productRecommendations:[273,{productId:[188],productHandle:[376],intent:[284]}],productTags:[377,{first:[197,"Int!"]}],productTypes:[377,{first:[197,"Int!"]}],products:[275,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[285],query:[376]}],publicApiVersions:[0],search:[303,{first:[197],after:[376],last:[197],before:[376],reverse:[19],sortKey:[305],query:[376,"String!"],prefix:[300],productFilters:[277,"[ProductFilter!]"],types:[306,"[SearchType!]"],unavailableProducts:[307]}],shop:[337],sitemap:[367,{type:[372,"SitemapType!"]}],urlRedirects:[396,{first:[197],after:[376],last:[197],before:[376],reverse:[19],query:[376]}],__typename:[376]}}}),m=(e=>{let{queryRoot:t,mutationRoot:n,subscriptionRoot:r,...i}=e,a=u(i),s={};return t&&(s.query=e=>{if(!t)throw Error("queryRoot argument is missing");return a(d("query",t,e))}),n&&(s.mutation=e=>{if(!n)throw Error("mutationRoot argument is missing");return a(d("mutation",n,e))}),s})({url:"https://becane-paris.myshopify.com/api/2025-01/graphql.json",url:"https://".concat("becane-paris",".myshopify.com/api/2025-01/graphql.json"),headers:{"X-Shopify-Storefront-Access-Token":"81e2a5e6c9fbebb105581c2fd8b67a1b"},queryRoot:f.Query,mutationRoot:f.Mutation,subscriptionRoot:f.Subscription}),g=async e=>{let t=await m.query({collection:{__args:{handle:e},handle:!0,title:!0,products:{__args:{first:100},pageInfo:{__scalar:!0},nodes:{title:!0,id:!0,handle:!0,priceRange:{minVariantPrice:{__scalar:!0},maxVariantPrice:{__scalar:!0}},compareAtPriceRange:{minVariantPrice:{__scalar:!0}},variants:{__args:{first:1},nodes:{title:!0,sku:!0}},featuredImage:{url:!0,height:!0,width:!0}}}}});return null==t?void 0:t.collection},v=async e=>{let t=await m.query({nodes:{__args:{ids:e},on_Product:{id:!0,title:!0,handle:!0,priceRange:{minVariantPrice:{__scalar:!0},maxVariantPrice:{__scalar:!0}},featuredImage:{url:!0,height:!0,width:!0},variants:{__args:{first:1},nodes:{title:!0,sku:!0}}}}});return null==t?void 0:t.nodes},_='\n  fragment CartFragment on Cart {\n    id\n    checkoutUrl\n    totalQuantity\n    buyerIdentity {\n      countryCode\n      customer {\n        id\n        email\n        firstName\n        lastName\n        displayName\n      }\n      email\n      phone\n    }\n    lines(first: $numCartLines) {\n      edges {\n        node {\n          id\n          quantity\n          attributes {\n            key\n            value\n          }\n          cost {\n            totalAmount {\n              amount\n              currencyCode\n            }\n            compareAtAmountPerQuantity {\n              amount\n              currencyCode\n            }\n          }\n          merchandise {\n            ... on ProductVariant {\n              id\n              availableForSale\n              quantityAvailable\n              compareAtPrice {\n                ...MoneyFragment\n              }\n              price {\n                ...MoneyFragment\n              }\n              requiresShipping\n              title\n              sku\n              image {\n                ...ImageFragment\n              }\n              product {\n                handle\n                title\n                vendor\n                id\n                metafields(identifiers:[{namespace: "shopify", key:"color-pattern"}]) {\n                  key,\n                  value,\n                  references(first:10) {\n                    ...on MetafieldReferenceConnection {\n                      nodes {\n                        ... on Metaobject {\n                          handle,\n                          id,\n                          field(key:"label") {\n                            value\n                          }\n                        }\n                      }\n                    }\n                }\n                }\n              }\n              selectedOptions {\n                name\n                value\n              }\n            }\n          }\n        }\n      }\n    }\n    cost {\n      subtotalAmount {\n        ...MoneyFragment\n      }\n      totalAmount {\n        ...MoneyFragment\n      }\n      totalDutyAmount {\n        ...MoneyFragment\n      }\n      totalTaxAmount {\n        ...MoneyFragment\n      }\n    }\n    note\n    attributes {\n      key\n      value\n    }\n    discountCodes {\n      code\n      applicable\n    }\n  }\n\n  fragment MoneyFragment on MoneyV2 {\n    currencyCode\n    amount\n  }\n  fragment ImageFragment on Image {\n    id\n    url\n    altText\n    width\n    height\n  }\n'},18875:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(74848),i=n(96540),a=n(46942),s=n.n(a),o=n(91106),l=n.n(o),u=n(71522),c=n(24499),d=n(54525),h=n.n(d);let p=i.memo(e=>{let{children:t,className:n,suffix:a,spaceBetween:o,contentProps:d,suffixProps:p,as:f,...m}=e,g=f||(m.href?l():"button"),v={};g===l()&&(v.scroll=!1);let _=(null==d?void 0:d.variants)?u.P.span:"span",y=(null==d?void 0:d.variants)?u.P.span:"span",[x,b]=(0,i.useState)(!1);return(0,r.jsxs)(g,{className:s()(h().wrapper,n,{[h().spaceBetween]:o}),...v,...m,onMouseEnter:e=>{var t;null===(t=m.onMouseEnter)||void 0===t||t.call(m,e),(m.onClick||m.href)&&b(!0)},onMouseLeave:e=>{var t;null===(t=m.onMouseLeave)||void 0===t||t.call(m,e),b(!1)},children:[(0,r.jsx)(_,{className:h().content,...d,children:(0,r.jsx)(c.A,{shuffle:x,children:t})}),a&&(0,r.jsx)(y,{...p,className:h().suffix,children:(0,r.jsx)(c.A,{shuffle:x,children:a})})]})})},14100:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(74848),i=n(96540),a=n(46942),s=n.n(a),o=n(71522),l=n(98189),u=n(50394),c=n.n(u);let d=i.memo(e=>{let{className:t,children:n,...i}=e;return(0,r.jsx)(o.P.h1,{className:s()(c().wrapper,t),...i,...l.q3,...l.L$,children:n})})},61849:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(74848),i=n(96540),a=n(46942),s=n.n(a),o=n(71522),l=n(98189),u=n(1422),c=n.n(u);let d=i.memo(e=>{let{className:t,children:n,...i}=e;return(0,r.jsx)(o.P.h5,{className:s()(c().wrapper,t),...i,...l.q3,...l.L$,children:n})})},33973:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(74848),i=n(96540),a=n(13368),s=n.n(a),o=n(83673),l=n.n(o),u=n(60331),c=n(56335);let d=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/icons/apple-touch-icon.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"96x96",href:"/icons/favicon-96x96.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/icons/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/icons/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/icons/site.webmanifest"}),(0,r.jsx)("link",{rel:"shortcut icon",href:"/icons/favicon.ico"}),(0,r.jsx)("meta",{name:"msapplication-config",content:"/icons/browserconfig.xml"}),(0,r.jsx)("meta",{name:"theme-color",content:"#ffffff"})]}),h=e=>{let{title:t,description:n,image:a}=e;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,r.jsx)("meta",{property:"og:site_name",content:t},"og:site_name"),(0,r.jsx)("meta",{property:"og:title",content:t},"og:title"),(0,r.jsx)("meta",{property:"og:description",content:n},"og:description"),(0,r.jsx)("meta",{property:"og:image",content:a},"og:image"),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"},"twitter:card"),(0,r.jsx)("meta",{name:"twitter:title",content:t},"twitter:title"),(0,r.jsx)("meta",{name:"twitter:image",content:a},"twitter:image"),(0,r.jsx)("meta",{itemProp:"name",content:t},"itemProp:name"),(0,r.jsx)("meta",{itemProp:"description",content:n},"itemProp:description")]},"og")},p=e=>{var t,n,i;let{product:a}=e;return(0,r.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org/","@type":"Product",name:a.title,image:null===(n=(0,c.D)(null==a?void 0:a.images))||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,description:a.description,brand:{"@type":"Organization",name:"B\xe9cane"},availability:a.availableForSale?"https://schema.org/InStock":"https://schema.org/OutOfStock",offers:null===(i=(0,c.D)(a.variants))||void 0===i?void 0:i.map(e=>{var t,n;return{"@type":"Offer",priceCurrency:e.price.currencyCode,price:e.price.amount,availability:e.availableForSale?"https://schema.org/InStock":"https://schema.org/OutOfStock",seller:{"@type":"Organization",name:"B\xe9cane"},itemOffered:{"@type":"IndividualProduct",name:e.title,image:null===(n=(0,c.D)(null==a?void 0:a.images))||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,description:a.description,sku:e.sku}}})})}})},f=e=>{let{title:t,description:n,image:i,keywords:a,product:o}=e,c=(0,u.fZ)(),f=l()([t,c("meta.title")]).join(" | "),m=n||c("meta.description");return(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:f}),(0,r.jsx)("meta",{charSet:"utf-8"},"charSet"),(0,r.jsx)("meta",{name:"description",content:m},"description"),a&&(0,r.jsx)("meta",{name:"keywords",content:a},"keywords"),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"},"viewport"),(0,r.jsx)("meta",{name:"google-site-verification",content:"oG5worVf9vu5biASTSF8PQWnrLQmNGYS7BvQoz8RVfg"}),h({title:f,description:m,image:i||"https://unemployedmag.com/wp-content/uploads/2016/12/unemployed_mag_logo_transparent_black_700-1.png"}),d(),o&&p({product:o})]})}},75449:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(74848),i=n(96540),a=n(71522),s=n(98189),o=n(46942),l=n.n(o),u=n(13467),c=n.n(u);let d=i.memo(e=>{let{className:t,autoAnim:n=!0,...i}=e;return(0,r.jsx)(a.P.div,{className:l()(c().overlay,t),...i,...s.di,...n?s.q3:{}})})},68815:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(74848),i=n(96540),a=n(46942),s=n.n(a),o=n(56335),l=n(76759);let u=e=>"priceRange"in e,c=e=>"merchandise"in e,d=e=>{var t,n,r,i,a,s,h,p,f,m,g,v,_,y,x,b,S,E,M,T,A;if(!e)return null;if((0,l.gi)(e))return console.log("productOrVariant",e),{price:null===(n=e.store.priceRange)||void 0===n?void 0:null===(t=n.minVariantPrice)||void 0===t?void 0:t.amount,compareAtPrice:null===(i=e.store.compareAtPriceRange)||void 0===i?void 0:null===(r=i.minVariantPrice)||void 0===r?void 0:r.amount,currency:null===(s=e.store.priceRange)||void 0===s?void 0:null===(a=s.minVariantPrice)||void 0===a?void 0:a.currencyCode};if(c(e))return{price:e.cost.totalAmount.amount,compareAtPrice:(parseFloat((null===(h=e.cost.compareAtAmountPerQuantity)||void 0===h?void 0:h.amount)||"0")*e.quantity).toString(),currency:e.cost.totalAmount.currencyCode};if(!u(e))return{price:null===(p=e.price)||void 0===p?void 0:p.amount,compareAtPrice:null===(f=e.compareAtPrice)||void 0===f?void 0:f.amount,currency:null===(m=e.price)||void 0===m?void 0:m.currencyCode};{let t=(null===(g=e.variants)||void 0===g?void 0:g.nodes)?(0,o.D)(e.variants):e.variants;if((null==t?void 0:t.length)===1&&(null===(_=t[0])||void 0===_?void 0:null===(v=_.price)||void 0===v?void 0:v.amount))return d(t[0]);let n=null===(x=e.priceRange)||void 0===x?void 0:null===(y=x.minVariantPrice)||void 0===y?void 0:y.amount,r=null===(S=e.priceRange)||void 0===S?void 0:null===(b=S.maxVariantPrice)||void 0===b?void 0:b.amount;return{from:r&&r!==n,price:null==n?void 0:n.replace(/\.0+$/,""),compareAtPrice:null===(M=e.compareAtPriceRange)||void 0===M?void 0:null===(E=M.minVariantPrice)||void 0===E?void 0:E.amount,currency:null===(A=e.priceRange)||void 0===A?void 0:null===(T=A.minVariantPrice)||void 0===T?void 0:T.currencyCode}}},h=e=>(0,i.useMemo)(()=>d(e),[e]);var p=n(94922);let f=new Map;function m(e,t){let n=JSON.stringify([e,t]);return function(){let r=f.get(n);return r||(r=new Intl.NumberFormat(e,t),f.set(n,r)),r}}var g=n(17815),v=n.n(g);let _=i.memo(e=>{let{price:t,noTrailingZeros:n,currency:a}=e,{amount:s,currencyCode:o}=function(e){let{countryIsoCode:t,languageIsoCode:n}=(0,p.qu)(),r=n.includes("_")?n.replace("_","-"):`${n}-${t}`;if(!r)throw Error("useMoney(): Unable to get 'locale' from 'useShop()', which means that 'locale' was not passed to '<ShopifyProvider/>'. 'locale' is required for 'useMoney()' to work");let a=parseFloat(e.amount),{defaultFormatter:s,nameFormatter:o,narrowSymbolFormatter:l,withoutTrailingZerosFormatter:u,withoutCurrencyFormatter:c,withoutTrailingZerosOrCurrencyFormatter:d}=(0,i.useMemo)(()=>{let t={style:"currency",currency:e.currencyCode};return{defaultFormatter:m(r,t),nameFormatter:m(r,{...t,currencyDisplay:"name"}),narrowSymbolFormatter:m(r,{...t,currencyDisplay:"narrowSymbol"}),withoutTrailingZerosFormatter:m(r,{...t,minimumFractionDigits:0,maximumFractionDigits:0}),withoutCurrencyFormatter:m(r),withoutTrailingZerosOrCurrencyFormatter:m(r,{minimumFractionDigits:0,maximumFractionDigits:0})}},[e.currencyCode,r]),h=e=>"currency"===e.type,f=(0,i.useMemo)(()=>({original:()=>e,currencyCode:()=>e.currencyCode,localizedString:()=>s().format(a),parts:()=>s().formatToParts(a),withoutTrailingZeros:()=>a%1==0?u().format(a):s().format(a),withoutTrailingZerosAndCurrency:()=>a%1==0?d().format(a):c().format(a),currencyName:()=>{var t;return(null==(t=o().formatToParts(a).find(h))?void 0:t.value)??e.currencyCode},currencySymbol:()=>{var t;return(null==(t=s().formatToParts(a).find(h))?void 0:t.value)??e.currencyCode},currencyNarrowSymbol:()=>{var e;return(null==(e=l().formatToParts(a).find(h))?void 0:e.value)??""},amount:()=>s().formatToParts(a).filter(e=>["decimal","fraction","group","integer","literal"].includes(e.type)).map(e=>e.value).join("")}),[e,a,o,s,l,c,u,d]);return(0,i.useMemo)(()=>new Proxy(f,{get:(e,t)=>{var n;return null==(n=Reflect.get(e,t))?void 0:n.call(null)}}),[f])}({amount:(null==t?void 0:t.toString())||"",currencyCode:a}),l=(0,i.useMemo)(()=>"number"==typeof t?t:"string"==typeof t?parseFloat(t):void 0,[t]);return(0,r.jsxs)("div",{className:v().wrapper,children:[(0,r.jsx)("span",{className:v().amount,children:n?l:s})," ",(0,r.jsx)("span",{className:v().currency,children:o})]})});var y=n(23408),x=n.n(y);let b=i.memo(e=>{let{className:t,item:n}=e,i=h(n);return i?(0,r.jsxs)("span",{className:s()(x().wrapper,t,(null==n?void 0:n.__typename)&&{[x()[null==n?void 0:n.__typename]]:!0}),children:[!!parseInt(i.compareAtPrice)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:x().previous,children:(0,r.jsx)(_,{price:i.compareAtPrice,currency:i.currency,noTrailingZeros:!0})})}),(0,r.jsx)(_,{price:i.price,currency:i.currency,noTrailingZeros:!0})]}):null})},89004:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(74848),i=n(96540),a=n(65290),s=n(46942),o=n.n(s),l=n(552),u=n.n(l);let c=(0,i.forwardRef)((e,t)=>{let{image:n,imageMobile:i,src:s,className:l="",sizeSet:c=["256","512","1024","1536","2048"],breakpoint:d=900,size:h="100vw",sizeMobile:p,forcePicture:f=!1,loading:m="eager",attributes:g={},placeholder:v="",..._}=e,y=(null==n?void 0:n.alt)||(null==n?void 0:n.name)||"Image",x=c.map(e=>"".concat((0,a.Qp)(s,e)," ").concat(e,"w")).join(", "),b=i?c.map(e=>"".concat((0,a.Qp)(i.src,e)," ").concat(e,"w")).join(", "):"",S=p?"(max-width: ".concat(d,"px) ").concat(p,", ").concat(h):h;return(0,r.jsx)(r.Fragment,{children:i||f?(0,r.jsxs)("picture",{className:o()(l,u().image),ref:t,...g,..._,style:{..._.style,"--placeholder-color":v||null},children:[i&&(0,r.jsx)("source",{srcSet:b,media:"(max-width: ".concat(d,"px)")}),(0,r.jsx)("source",{srcSet:x,media:i?"(min-width: ".concat(d+1,"px)"):void 0}),(0,r.jsx)("img",{width:null==n?void 0:n.width,height:null==n?void 0:n.height,alt:y,sizes:S,srcSet:x,src:"".concat(s),loading:m,draggable:!1,...g})]}):(0,r.jsx)("img",{width:null==n?void 0:n.width,height:null==n?void 0:n.height,alt:y,srcSet:x,src:"".concat(s),sizes:S,className:o()(l,u().image),loading:m,draggable:!1,ref:t,...g,..._,style:{..._.style,"--placeholder-color":v||null}})})})},24499:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(74848),i=n(96540),a=n(46942),s=n.n(a),o=n(2466),l=n(54871),u=n(92464),c=n(85930),d=n.n(c);let h=e=>" "===e||"\n"===e?e:e.toLowerCase()===e&&isNaN(Number(e))?String.fromCharCode(Math.floor(26*Math.random())+97):isNaN(Number(e))?String.fromCharCode(Math.floor(26*Math.random())+65):String.fromCharCode(Math.floor(10*Math.random())+48),p=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.split("").map(e=>(" "===e||"\n"===e)&&t?e:h(e)).join("")},f=i.memo(e=>{let{className:t,children:n,iterations:a=2,interval:c=50,keepSpaces:h=!0,shuffle:f,...m}=e,g=(0,i.useMemo)(()=>(function(e){return"string"==typeof e||!(0,l.A)(e)&&(0,u.A)(e)&&"[object String]"==(0,o.A)(e)})(n)||function(e){return"number"==typeof e||(0,u.A)(e)&&"[object Number]"==(0,o.A)(e)}(n)?n.toString():null,[n]),[v,_]=(0,i.useState)(g),y=(0,i.useRef)(null),x=(0,i.useRef)(0),b=(0,i.useRef)(null);return((0,i.useEffect)(()=>()=>{y.current&&clearTimeout(y.current)},[]),(0,i.useEffect)(()=>{g&&_(g)},[g]),(0,i.useEffect)(()=>{if(f){b.current&&(b.current.style.width="".concat(b.current.getBoundingClientRect().width,"px"));let e=()=>{x.current<a?(_(p(g||"",h)),x.current+=1,y.current=setTimeout(e,c)):(_(g),x.current=0)};e()}else b.current&&(b.current.style.width=""),_(g),x.current=0,y.current&&clearTimeout(y.current);return()=>{y.current&&clearTimeout(y.current)}},[f,b]),g)?(0,r.jsx)("div",{className:s()(d().wrapper,t,{[d().shuffling]:f}),...m,ref:b,children:v}):n})},98189:(e,t,n)=>{"use strict";n.d(t,{$Y:()=>u,AJ:()=>c,Br:()=>x,CW:()=>y,Ik:()=>_,Jj:()=>g,L$:()=>p,a0:()=>o,di:()=>m,gj:()=>f,go:()=>d,q3:()=>l,yc:()=>v});var r=n(71522),i=n(22276),a=n(91106),s=n.n(a);let o=e=>e/60,l={initial:"initial",animate:"animate",exit:"exit"},u={duration:.7,ease:i.a.quintEaseOut},c={variants:{initial:function(){let{invert:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{y:e?"-100%":"100%"}},animate:{y:"0%"}},transition:u};c.variants.exit=c.variants.initial;let d={variants:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1}},transition:u};d.variants.exit={opacity:0,scale:.95};let h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{duration:.5,ease:i.A.quintEaseInOut,delay:e}},p={variants:{initial:function(){let{reverse:e=!1,offset:t="100%"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{y:e?t:"-"+t,opacity:0}},animate:function(){let{delay:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{y:"0%",opacity:1,transition:h(e)}},exit:function(){let{reverse:e=!1,offset:t="100%",delay:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{y:e?"-"+t:t,opacity:0,transition:h(n)}}},transformTemplate:e=>{let{y:t}=e;return"0%"!==t?"translateY(".concat(t,") translateZ(0)"):"none"}};e=>{let{x:t}=e;return"0%"!==t?"translateX(".concat(t,") translateZ(0)"):"none"},u.ease;let f={variants:{initial:{y:"10%",opacity:0},animate:{y:"0%",opacity:1},exit:{y:"10%",opacity:0}},transformTemplate:e=>{let{y:t}=e;return"0%"!==t?"translateY(".concat(t,") translateZ(0)"):"none"},transition:u};i.A.linear;let m={variants:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:o(15)}}},transition:{duration:.3,ease:i.A.linear}},g={variants:{initial:{visibility:"hidden"},animate:{visibility:"visible"},exit:{visibility:"hidden"}},transition:{duration:0}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{variants:{animate:{transition:{staggerChildren:e,delayChildren:t}}}}},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{variants:{animate:{transition:{staggerDirection:n?-1:1,staggerChildren:e,delayChildren:t}},exit:{transition:{staggerDirection:n?1:-1,staggerChildren:e}}}}},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{variants:{animate:{transition:{staggerChildren:e,delayChildren:t}},exit:{transition:{staggerChildren:e}}}}};v();let x=r.P.create(s())},16303:(e,t,n)=>{"use strict";n.d(t,{C:()=>r,l:()=>i});let r=()=>!1,i=()=>!1},43890:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(51474),i=n(91106),a=n.n(i);let s={home:"/",index:"/indexes/collections",products:"/indexes/products",stories:"/stories",story:"/story/:slug",product:"/products/:slug",collection:"/collection/:slug",look:"/looks/:collection/:product"},o={routes:s};(0,r.A)(s,(e,t)=>{let n=e.match(/:([^/]+)/g)||[];o[t]=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.reduce((e,t,n)=>r[n]?e.replace(t,r[n]||""):e.replace("/"+t,""),e)}}),o.detect=e=>{var t,n;switch((null==e?void 0:e.type)||(null==e?void 0:e._type)){case"home":return o.home();case"story":return o.story(null===(t=e.slug)||void 0===t?void 0:t.current);case"textPage":return o.textpage(null===(n=e.slug)||void 0===n?void 0:n.current);default:return(null==e?void 0:e.href)||""}},o.link=e=>{if(!e)return{};if((null==e?void 0:e._type)==="market-selector")return{tag:"button"};let t=(null==e?void 0:e.url)||o.detect(e);return t?e.external?{tag:"a",rel:"noopener noreferrer",target:"_blank",href:t}:{scroll:!0,prefetch:!1,href:t,tag:a()}:{tag:"div"}};let l=o},65290:(e,t,n)=>{"use strict";n.d(t,{Qp:()=>i});let r={pico:16,icon:32,thumb:50,small:100,compact:160,medium:240,large:480,grande:600,master:2048},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:70;if(e){if(e&&~e.indexOf("cdn.shopify.com")){let n=isNaN(t)?t:t+"x";return e.replace(/_(pico|icon|thumb|small|compact|medium|large|grande|original|1024x1024|2048x2048|master)+\./g,".").replace(/\.jpg|\.png|\.gif|\.jpeg|\.webp/g,e=>"_"+n+e)+"&fit=scale"}if(e&&~e.indexOf("cdn.sanity.io")){let i=isNaN(t)?r[t]:t;return i?e+"?w=".concat(i,"&q=").concat(n,"&auto=format&fit=scale"):e}return e}}},88114:(e,t,n)=>{"use strict";n.d(t,{B:()=>d,i:()=>a});var r=n(22276),i=n(98189);let a={leftToRight:"left-to-right",rightToLeft:"right-to-left",bottomOverlayExit:"bottom-overlay-exit",bottomOverlayEnter:"bottom-overlay-enter",topOverlayExit:"top-overlay-exit",topOverlayEnter:"top-overlay-enter",horizontal:"horizontal",none:"none"},s=e=>e===a.bottomOverlayEnter||e===a.bottomOverlayExit||e===a.topOverlayEnter||e===a.topOverlayExit,o=e=>e===a.rightToLeft||e===a.bottomOverlayExit||e===a.bottomOverlayEnter,l=e=>s(e)?"y":"x",u=(e,t)=>{let n=parseFloat(t.toString()),r=t.toString().replace(n.toString(),"").trim()||"px";return o(e)?"".concat(n).concat(r):"".concat(-n).concat(r)},c=e=>e===a.leftToRight||e===a.rightToLeft?"vw":"vh",d={variants:{initial:function(){let{type:e=a.leftToRight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===a.none?{visibility:"visible","--overlay":0}:e===a.rightToLeft||e===a.leftToRight?{visibility:"visible",opacity:0,x:u(e,"-30vw")}:e===a.bottomOverlayExit||e===a.topOverlayExit?{[l(e)]:0,"--overlay":1,visibility:"visible",zIndex:10}:(e===a.bottomOverlayEnter||a.topOverlayEnter,{visibility:"visible",[l(e)]:u(e,"100"+c(e)),zIndex:50,"--clip-progress":0})},animate:function(){let{type:e=a.leftToRight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e===a.none)return{"--overlay":0};let t={...i.$Y};return(e===a.rightToLeft||e===a.leftToRight)&&(t=h.animate.horizontal),(e===a.bottomOverlayEnter||e===a.topOverlayEnter)&&(t=h.animate.topOverlay),{x:0,y:0,"--overlay":0,opacity:1,[l(e)]:0,"--clip-progress":1,transition:t}},exit:function(){let{type:e=a.leftToRight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===a.none?{"--overlay":0}:e===a.rightToLeft||e===a.leftToRight?{visibility:"visible",opacity:0,x:u(e,"30vw"),transition:{...h.exit.horizontal}}:e!==a.bottomOverlayExit&&e!==a.topOverlayExit?{[l(e)]:0,"--overlay":1,zIndex:10}:{[l(e)]:u(e,"100"+c(e)),zIndex:50,"--clip-progress":0}}},transition:i.$Y},h={initial:{},animate:{topOverlay:{"--clip-progress":{...i.$Y},y:{...i.$Y}},horizontal:{x:{...i.$Y,duration:(0,i.a0)(35),delay:(0,i.a0)(5)},opacity:{...i.$Y,duration:(0,i.a0)(20),delay:(0,i.a0)(20)}}},exit:{horizontal:{x:{ease:r.a.quintEaseIn,duration:(0,i.a0)(35)},opacity:{ease:r.a.quintEaseIn,duration:(0,i.a0)(20)}}}}},91270:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,E:()=>o});var r=n(46880),i=n.n(r);let a={desktop:!0},s=e=>{e||(e=window.navigator.userAgent);let t=i().getParser(e),n=t.getPlatformType(),r=t.getBrowserName(),a=t.getOSName(),s=(t.getPlatform().model||"").toLowerCase(),o="macOS"===a&&navigator.maxTouchPoints>1,l=!!navigator.brave;return{desktop:"desktop"===n&&!o,mobile:"mobile"===n,tablet:"tablet"===n||"tv"===n||o,opera:"Opera"===r||"Opera Coast"===r,safari:"Safari"===r,edge:"Microsoft Edge"===r,ie:"Internet Explorer"===r,chrome:("Chrome"===r||"Chromium"===r)&&!l,firefox:"Firefox"===r,uc_browser:"UC Browser"===r,brave:l,android:"Android"===a,ios:"iOS"===a,windows:"Windows"===a,linux:"Linux"===a,macos:"macOS"===a,iphone:"iphone"===s,ipad:"ipad"===s}},o=e=>{Object.assign(a,s(e));{let e=(e,t)=>document.documentElement.classList.add((e?"":"no-")+t);e(a.safari,"safari"),e(a.firefox,"firefox"),e(a.mobile,"mobile"),e(a.tablet,"tablet"),e(a.desktop,"desktop")}};o();let l=a},22276:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,a:()=>a});var r=n(85870),i=n(18298);let a={linear:[0,0,1,1],principle:[.25,.1,.25,1],principleIn:[.42,.1,1,1],principleOut:[0,0,.58,1],quadEaseIn:[.55,.085,.68,.53],cubicEaseIn:[.55,.055,.675,.19],quartEaseIn:[.895,.03,.685,.22],quintEaseIn:[.64,0,.78,0],sineEaseIn:[.47,0,.745,.715],expoEaseIn:[.95,.05,.795,.035],circEaseIn:[.6,.04,.98,.335],quadEaseOut:[.25,.46,.45,.94],cubicEaseOut:[.215,.61,.355,1],quartEaseOut:[.165,.84,.44,1],quintEaseOut:[.22,1,.36,1],sineEaseOut:[.39,.575,.565,1],expoEaseOut:[.19,1,.22,1],circEaseOut:[.075,.82,.165,1],quadEaseInOut:[.455,.03,.515,.955],cubicEaseInOut:[.65,0,.35,1],quartEaseInOut:[.77,0,.175,1],quintEaseInOut:[.83,0,.17,1],sineEaseInOut:[.445,.05,.55,.95],expoEaseInOut:[1,0,0,1],circEaseInOut:[.785,.135,.15,.86],custom:[1,0,.4,1]},s=(0,r.A)(a,e=>(0,i.A)(...e))},61342:(e,t,n)=>{"use strict";let r;n.d(t,{A:()=>s});let i=e=>e.charAt(0).toUpperCase()+e.slice(1),a=()=>r||(r=document.createElement("div")),s={slugify:e=>e?e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""):"",splice:(e,t,n,r)=>e.slice(0,t)+r+e.slice(t+Math.abs(n)),limitTextBySentence:function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!e)return null;n&&(t-=1);let r=e.split(".");return r.length>t?r.slice(0,t).join(".")+(n?"...":""):e},limitTextByCharacter:function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return e?(n&&(t-=1),e.length>t)?e.slice(0,t)+(n?"...":""):e:null},spanify:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(e,t)=>'<span class="'.concat(t,'">').concat(e,"</span>"),i=e=>n?r(r(e,"letter"),"inner-letter"):r(e,"letter"),a=e=>t?e.split("").map(i).join(""):r(e,"inner-word");return e.split(" ").map(e=>r(a(e),"word")).join(" ")},capitalize:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?i(e):e.split(/(.*?(?:[ '-]|$))/g).map(i).join("")},escape:e=>(a().textContent=e,a().innerText=e,a().innerHTML),padStart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=""+e;for(;r.length<n;)r=t+r;return r},encodeURLParams:e=>Object.entries(e).map(e=>{let[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))}).join("&"),decodeURLParams:e=>e&&e.split("&").reduce((e,t)=>{let n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e},{})}},30478:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(96540);let i=function(e){let t=(0,r.useRef)(e);return t.current=e,t}},30308:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(48731),i=n(71843),a=n(1994),s=n(13667);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[o,l,u]=(0,s.A)(()=>t(e.get()));return(0,r.L)((0,i.G)(e,t),"change",e=>{var t;n&&(t=u.current,(0,a.A)(t,e))||u.current===e||l(e)}),o}},13667:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(96540),i=n(2928),a=n(30478);let s=function(e){let[t,n]=(0,r.useState)(e),s=(0,a.A)(t);return[t,e=>{n(e),s.current=(0,i.A)(e)?e(t):e},s]}},88159:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r=n(96540);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,r.useEffect)(()=>{if(e.current){let r=new ResizeObserver(t);return r.observe(e.current,n),()=>{r.disconnect()}}t()},[t,JSON.stringify(n),e.current])}},69549:(e,t,n)=>{"use strict";n.d(t,{K:()=>D});var r=n(96540),i=n(52218),a=n(71222),s=n(68029);function o(e,t,n,r){document.cookie=(0,i.A)(e,t,{maxage:n,domain:r,samesite:"Lax",path:"/"})}var l=n(62768);function u(e,t){return{schema_id:e,payload:t,metadata:{event_created_at_ms:Date.now()}}}function c(e){let t={id:"",resource:null,resourceId:null,search:"",searchParams:new URLSearchParams,hash:""};if("string"!=typeof e)return t;try{let{search:n,searchParams:r,pathname:i,hash:a}=new URL(e),s=i.split("/"),o=s[s.length-1],l=s[s.length-2];if(!o||!l)return t;return{id:`${o}${n}${a}`||"",resource:l??null,resourceId:o||null,search:n,searchParams:r,hash:a}}catch{return t}}function d(e,t){return"object"!=typeof e?{}:(Object.entries(e).forEach(([e,n])=>{n&&(t[e]=n)}),t)}function h(e){let{id:t,resource:n}=c(e.resourceId),r=n?n.toLowerCase():void 0;return[u("trekkie_storefront_page_view/1.4",d({pageType:e.pageType,customerId:parseInt(c(e.customerId).id||"0"),resourceType:r,resourceId:parseInt(t)},{appClientId:e.shopifySalesChannel?l.pe[e.shopifySalesChannel]:l.pe.headless,isMerchantRequest:function(e){if("string"!=typeof e)return!1;let t=new URL(e).hostname;return -1!==t.indexOf("myshopify.dev")||"localhost"===t}(e.url),hydrogenSubchannelId:e.storefrontId||e.hydrogenSubchannelId||"0",isPersistentCookie:e.hasUserConsent,uniqToken:e.uniqueToken,visitToken:e.visitToken,microSessionId:(0,s.Yv)(),microSessionCount:1,url:e.url,path:e.path,search:e.search,referrer:e.referrer,title:e.title,shopId:parseInt(c(e.shopId).id),currency:e.currency,contentLanguage:e.acceptedLanguage||"en"}))]}let p="custom_storefront_customer_tracking/1.2",f="page_rendered",m="collection_page_rendered",g="product_page_rendered",v="search_submitted";function _(e){return{canonical_url:e.canonicalUrl||e.url,customer_id:parseInt(c(e.customerId).id||"0")}}function y(e){return{source:e.shopifySalesChannel||l.As.headless,asset_version_id:e.assetVersionId||"2025.1.0",hydrogenSubchannelId:e.storefrontId||e.hydrogenSubchannelId||"0",is_persistent_cookie:e.hasUserConsent,deprecated_visit_token:e.visitToken,unique_token:e.uniqueToken,event_time:Date.now(),event_id:(0,s.Yv)(),event_source_url:e.url,referrer:e.referrer,user_agent:e.userAgent,navigation_type:e.navigationType,navigation_api:e.navigationApi,shop_id:parseInt(c(e.shopId).id),currency:e.currency,ccpa_enforced:e.ccpaEnforced||!1,gdpr_enforced:e.gdprEnforced||!1,gdpr_enforced_as_string:e.gdprEnforced?"true":"false",analytics_allowed:e.analyticsAllowed||!1,marketing_allowed:e.marketingAllowed||!1,sale_of_data_allowed:e.saleOfDataAllowed||!1}}function x(e){return e?e.map(e=>JSON.stringify(d({variant_gid:e.variantGid,category:e.category,sku:e.sku,product_id:parseInt(c(e.productGid).id),variant_id:parseInt(c(e.variantGid).id)},{product_gid:e.productGid,name:e.name,variant:e.variantName||"",brand:e.brand,price:parseFloat(e.price),quantity:Number(e.quantity||0)}))):[]}let b="sendShopifyAnalytics request is unsuccessful";var S=n(76424),E=n(68572),M=n(16303);let T={};function A(e){console.error("[h2:error:useCustomerPrivacy] Unable to setup Customer Privacy API: Missing consent.".concat(e," configuration."))}let w=!1;function C(){if(w)return;w=!0;let e=new CustomEvent("shopifyCustomerPrivacyApiLoaded");document.dispatchEvent(e)}function P(e){let t=window.document.location.host,n=e.split(".").reverse(),r=t.split(".").reverse(),i=[];return n.forEach((e,t)=>{e===r[t]&&i.push(e)}),i.reverse().join(".")}function R(e){let{customerPrivacy:t,config:n}=e,r=t.setTrackingConsent,{locale:i,country:a,...s}=n;return function(e,t){r({...s,headlessStorefront:!0,...e},t)}}function I(e){let{privacyBanner:t,config:n}=e,r=t.loadBanner,i=t.showPreferences;return{loadBanner:function(e){if("object"==typeof e){r({...n,...e});return}r(n)},showPreferences:function(e){if("object"==typeof e){i({...n,...e});return}i(n)}}}let L=(e,t)=>{var n;return{productGid:e.id,variantGid:null==t?void 0:t.id,brand:e.vendor,name:e.title,price:null==t?void 0:null===(n=t.price)||void 0===n?void 0:n.amount,sku:null==t?void 0:t.sku}};function D(){let e=(0,S.usePathname)(),{shop:t}=(0,E.fK)(),{customerPrivacy:n,privacyBanner:i=null}=function(e){let{withPrivacyBanner:t=!1,onVisitorConsentCollected:n,onReady:i,...a}=e;!function(e,t){let[n,i]=(0,r.useState)("loading");(0,r.useEffect)(()=>{(function(e,t){let n=T[e];if(n)return n;let r=new Promise((n,r)=>{let i=document.createElement("script");(null==t?void 0:t.module)?i.type="module":i.type="text/javascript",i.src=e,i.onload=()=>{n(!0)},i.onerror=()=>{r(!1)},(null==t?void 0:t.in)==="head"?document.head.appendChild(i):document.body.appendChild(i);let a=null==t?void 0:t.attributes;a&&Object.keys(a).forEach(e=>{i.setAttribute(e,a[e])})});return T[e]=r,r})(e,t).then(()=>i("done")).catch(()=>i("error"))},[e])}(t?"https://cdn.shopify.com/shopifycloud/privacy-banner/storefront-banner.js":"https://cdn.shopify.com/shopifycloud/consent-tracking-api/v0.1/consent-tracking-api.js",{attributes:{id:"customer-privacy-api"}});let{observing:s,setLoaded:o}=function(e){let{withPrivacyBanner:t,onLoaded:n}=e,i=(0,r.useRef)({customerPrivacy:!1,privacyBanner:!1}),[a,s]=(0,r.useState)(t?[!1,!1]:[!1]),o=a.every(Boolean);return(0,r.useEffect)(()=>{o&&n&&n()},[o,n]),{observing:i,setLoaded:{customerPrivacy:()=>{t?s(e=>[!0,e[1]]):s(()=>[!0])},privacyBanner:()=>{t&&s(e=>[e[0],!0])}}}}({withPrivacyBanner:t,onLoaded:i}),l=(0,r.useMemo)(()=>{let{checkoutDomain:e,storefrontAccessToken:t}=a;return e||A("checkoutDomain"),t||A("storefrontAccessToken"),(t.startsWith("shpat_")||32!==t.length)&&console.error("[h2:error:useCustomerPrivacy] It looks like you passed a private access token, make sure to use the public token"),{checkoutRootDomain:e,storefrontAccessToken:t,storefrontRootDomain:P(e),country:a.country,locale:a.locale}},[a,P,A]);(0,r.useEffect)(()=>{let e=e=>{n&&n(e.detail)};return document.addEventListener("visitorConsentCollected",e),()=>{document.removeEventListener("visitorConsentCollected",e)}},[n]),(0,r.useEffect)(()=>{if(!t||s.current.privacyBanner)return;s.current.privacyBanner=!0;let e=window.privacyBanner||void 0;Object.defineProperty(window,"privacyBanner",{configurable:!0,get:()=>e,set(t){"object"==typeof t&&null!==t&&"showPreferences"in t&&"loadBanner"in t&&(t.loadBanner(l),e=I({privacyBanner:t,config:l}),o.privacyBanner(),C())}})},[t,l,I,o.privacyBanner]),(0,r.useEffect)(()=>{if(s.current.customerPrivacy)return;s.current.customerPrivacy=!0;let e=null,t=window.Shopify||void 0;Object.defineProperty(window,"Shopify",{configurable:!0,get:()=>t,set(n){"object"==typeof n&&null!==n&&0===Object.keys(n).length&&(t=n,Object.defineProperty(window.Shopify,"customerPrivacy",{configurable:!0,get:()=>e,set(n){"object"==typeof n&&null!==n&&"setTrackingConsent"in n&&(e={...n,setTrackingConsent:R({customerPrivacy:n,config:l})},t={...t,customerPrivacy:e},o.customerPrivacy(),C())}}))}})},[l,R,o.customerPrivacy]);let u={customerPrivacy:function(){try{var e;return window.Shopify&&window.Shopify.customerPrivacy?null===(e=window.Shopify)||void 0===e?void 0:e.customerPrivacy:null}catch(e){return null}}()};return t&&(u.privacyBanner=function(){try{var e;return window&&(null===(e=window)||void 0===e?void 0:e.privacyBanner)?window.privacyBanner:null}catch(e){return null}}()),u}({storefrontAccessToken:"81e2a5e6c9fbebb105581c2fd8b67a1b",checkoutDomain:t.primaryDomain.host,withPrivacyBanner:!0});(0,r.useEffect)(()=>{null==i||i.loadBanner()},[n,i]);let w=(0,r.useMemo)(()=>window.location.hostname,[t]);!function(e){let{hasUserConsent:t=!1,domain:n="",checkoutDomain:i=""}=e||{};(0,r.useEffect)(()=>{let e=(0,s.Wb)(document.cookie),r=n||window.document.location.host;if(i){let e=i.split(".").reverse(),t=r.split(".").reverse(),n=[];e.forEach((e,r)=>{e===t[r]&&n.push(e)}),r=n.reverse().join(".")}/^localhost/.test(r)&&(r="");let l=r?/^\./.test(r)?r:`.${r}`:"";t?(o(a.l4,e[a.l4]||(0,s.Yv)(),31104e3,l),o(a.lP,e[a.lP]||(0,s.Yv)(),1800,l)):(o(a.l4,"",0,l),o(a.lP,"",0,l))},[e,t,n,i])}({checkoutDomain:t.primaryDomain.host,domain:w,hasUserConsent:null==n?void 0:n.analyticsProcessingAllowed()});let D=(e,r)=>{try{var i;if((0,M.C)())return;return null===(i=function(e,t){let{eventName:n,payload:r}=e;if(!r.hasUserConsent)return Promise.resolve();let i=[];return n===l.sE.PAGE_VIEW?i=i.concat(h(r),function(e){let t=_(e),n=e.pageType,r=[];switch(r.push(u(p,d({event_name:f,...t},y(e)))),n){case l.I5.collection:r.push(u(p,d({event_name:m,...t,collection_name:e.collectionHandle,collection_id:parseInt(c(e.collectionId).id)},y(e))));break;case l.I5.product:r.push(u(p,d({event_name:g,...t,products:x(e.products),total_value:e.totalValue},y(e))));break;case l.I5.search:r.push(u(p,d({event_name:v,...t,search_string:e.searchString},y(e))))}return r}(r)):n===l.sE.ADD_TO_CART?i=i.concat(function(e){let t=c(e.cartId),n=(null==t?void 0:t.id)?`${t.id}`:null;return[u(p,d({event_name:"product_added_to_cart",customerId:e.customerId,cart_token:n,total_value:e.totalValue,products:x(e.products),customer_id:parseInt(c(e.customerId).id||"0")},y(e)))]}(r)):n===l.sE.PAGE_VIEW_2?i=i.concat(h(r),[u(p,d({event_name:f,..._(r)},y(r)))]):n===l.sE.COLLECTION_VIEW?i=i.concat([u(p,d({event_name:m,..._(r),collection_name:r.collectionHandle,collection_id:parseInt(c(r.collectionId).id)},y(r)))]):n===l.sE.PRODUCT_VIEW?i=i.concat([u(p,d({event_name:g,..._(r),products:x(r.products),total_value:r.totalValue},y(r)))]):n===l.sE.SEARCH_VIEW&&(i=i.concat([u(p,d({event_name:v,..._(r),search_string:r.searchString},y(r)))])),i.length?function(e,t){if("undefined"!=typeof window&&window.navigator&&/Chrome-Lighthouse/.test(window.navigator.userAgent))return Promise.resolve();let n={events:e,metadata:{event_sent_at_ms:Date.now()}};try{return fetch(t?`https://${t}/.well-known/shopify/monorail/unstable/produce_batch`:"https://monorail-edge.shopifysvc.com/unstable/produce_batch",{method:"post",headers:{"content-type":"text/plain"},body:JSON.stringify(n)}).then(e=>{if(!e.ok)throw Error("Response failed");return e.text()}).then(e=>{e&&JSON.parse(e).result.forEach(e=>{200!==e.status&&console.error(b,"\n\n",e.message)})}).catch(e=>{console.error(b,e)})}catch(e){return Promise.resolve()}}(i,void 0):Promise.resolve()}({eventName:e,payload:{...function(){if("undefined"==typeof document&&(console.error("getClientBrowserParameters should only be used within the useEffect callback or event handlers"),1))return{uniqueToken:"",visitToken:"",url:"",path:"",search:"",referrer:"",title:"",userAgent:"",navigationType:"",navigationApi:""};let[e,t]=function(){try{let e="PerformanceNavigationTiming",t=function(){try{let e=(null==performance?void 0:performance.getEntriesByType)&&(null==performance?void 0:performance.getEntriesByType("navigation"));if(e&&e[0]){let e=window.performance.getEntriesByType("navigation")[0].type;return e&&e.toString()}}catch(e){}}();if(t||(t=function(){var e,t;try{if(PerformanceNavigation&&(null==(e=null==performance?void 0:performance.navigation)?void 0:e.type)!==null&&(null==(t=null==performance?void 0:performance.navigation)?void 0:t.type)!==void 0){let e=performance.navigation.type;switch(e){case PerformanceNavigation.TYPE_NAVIGATE:return"navigate";case PerformanceNavigation.TYPE_RELOAD:return"reload";case PerformanceNavigation.TYPE_BACK_FORWARD:return"back_forward";default:return`unknown: ${e}`}}}catch(e){}}(),e="performance.navigation"),t)return[t,e];return["unknown","unknown"]}catch(e){}return["error","error"]}(),n=(0,s.Wb)(document.cookie);return{uniqueToken:n[a.l4],visitToken:n[a.lP],url:location.href,path:location.pathname,search:location.search,referrer:document.referrer,title:document.title,userAgent:navigator.userAgent,navigationType:e,navigationApi:t}}(),hasUserConsent:(null==n?void 0:n.analyticsProcessingAllowed())||!1,shopifySalesChannel:l.As.headless,shopId:t.id,currency:"EUR",acceptedLanguage:"EN",...r||{}}}))||void 0===i?void 0:i.catch(()=>{})}catch(e){}};return{sendPageView:e=>{var t;D(l.sE.PAGE_VIEW,{...e,products:(null==e?void 0:null===(t=e.products)||void 0===t?void 0:t.map(e=>L(e)))||void 0})},sendAddToCart:e=>{var t,n,r,i;return D(l.sE.ADD_TO_CART,{cartId:null===(t=e.id)||void 0===t?void 0:t.split("?").shift(),totalValue:parseFloat(null===(r=e.cost)||void 0===r?void 0:null===(n=r.totalAmount)||void 0===n?void 0:n.amount),products:(null===(i=e.lines)||void 0===i?void 0:i.map(e=>{var t;return{...L(null==e?void 0:null===(t=e.merchandise)||void 0===t?void 0:t.product,null==e?void 0:e.merchandise),quantity:null==e?void 0:e.quantity}}))||[]})},pathname:e}}},90781:(e,t,n)=>{"use strict";let r,i,a,s,o,l,u,c,d,h,p,f,m,g,v,_,y,x;let b=globalThis,S="10.18.0";function E(){return M(b),b}function M(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||S,t[S]=t[S]||{}}function T(e,t,n=b){let r=n.__SENTRY__=n.__SENTRY__||{},i=r[S]=r[S]||{};return i[e]||(i[e]=t())}let A=["debug","info","warn","error","log","assert","trace"],w={};function C(e){if(!("console"in b))return e();let t=b.console,n={},r=Object.keys(w);r.forEach(e=>{let r=w[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}let P={log:function(...e){[...e]},warn:function(...e){[...e]}};function R(e,t,n=[t],r="npm"){let i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(e=>({name:`${r}:@sentry/${e}`,version:S})),version:S}),e._metadata=i}let I=Object.prototype.toString;function L(e){switch(I.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return j(e,Error)}}function D(e,t){return I.call(e)===`[object ${t}]`}function O(e){return D(e,"ErrorEvent")}function N(e){return D(e,"DOMError")}function U(e){return D(e,"String")}function F(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function k(e){return null===e||F(e)||"object"!=typeof e&&"function"!=typeof e}function B(e){return D(e,"Object")}function V(e){return"undefined"!=typeof Event&&j(e,Event)}function z(e){return!!(e?.then&&"function"==typeof e.then)}function j(e,t){try{return e instanceof t}catch{return!1}}function H(e){return!!("object"==typeof e&&null!==e&&(e.__isVue||e._isVue))}function G(e){return"undefined"!=typeof Request&&j(e,Request)}function W(e,t={}){if(!e)return"<unknown>";try{let n,r=e,i=[],a=0,s=0,o=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&a++<5&&(n=function(e,t){let n=[];if(!e?.tagName)return"";if(b.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}n.push(e.tagName.toLowerCase());let r=t?.length?t.filter(t=>e.getAttribute(t)).map(t=>[t,e.getAttribute(t)]):null;if(r?.length)r.forEach(e=>{n.push(`[${e[0]}="${e[1]}"]`)});else{e.id&&n.push(`#${e.id}`);let t=e.className;if(t&&U(t))for(let e of t.split(/\s+/))n.push(`.${e}`)}for(let t of["aria-label","type","name","title","alt"]){let r=e.getAttribute(t);r&&n.push(`[${t}="${r}"]`)}return n.join("")}(r,o),"html"!==n&&(!(a>1)||!(s+3*i.length+n.length>=l)));)i.push(n),s+=n.length,r=r.parentNode;return i.reverse().join(" > ")}catch{return"<unknown>"}}function q(){try{return b.document.location.href}catch{return""}}function X(e){if(!b.HTMLElement)return null;let t=e;for(let e=0;e<5&&t;e++){if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function $(e,t=0){return"string"!=typeof e||0===t?e:e.length<=t?e:`${e.slice(0,t)}...`}function Y(e,t){if(!Array.isArray(e))return"";let n=[];for(let t=0;t<e.length;t++){let r=e[t];try{H(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function K(e,t,n=!1){return!!U(e)&&(D(t,"RegExp")?t.test(e):!!U(t)&&(n?e===t:e.includes(t)))}function Z(e,t=[],n=!1){return t.some(t=>K(e,t,n))}function J(e,t,n){if(!(t in e))return;let r=e[t];if("function"!=typeof r)return;let i=n(r);"function"==typeof i&&ee(i,r);try{e[t]=i}catch{}}function Q(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{}}function ee(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,Q(e,"__sentry_original__",t)}catch{}}function et(e){return e.__sentry_original__}function en(e){if(L(e))return{message:e.message,name:e.name,stack:e.stack,...ei(e)};if(!V(e))return e;{let t={type:e.type,target:er(e.target),currentTarget:er(e.currentTarget),...ei(e)};return"undefined"!=typeof CustomEvent&&j(e,CustomEvent)&&(t.detail=e.detail),t}}function er(e){try{return"undefined"!=typeof Element&&j(e,Element)?W(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function ei(e){if("object"!=typeof e||null===e)return{};{let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}}function ea(e=b.crypto||b.msCrypto){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{let t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch{}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function es(e){return e.exception?.values?.[0]}function eo(e,t,n){let r=e.exception=e.exception||{},i=r.values=r.values||[],a=i[0]=i[0]||{};a.value||(a.value=t||""),a.type||(a.type=n||"Error")}function el(e,t){let n=es(e);if(!n)return;let r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){let e={...r?.data,...t.data};n.mechanism.data=e}}function eu(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{Q(e,"__sentry_captured__",!0)}catch{}return!1}function ec(){return Date.now()/1e3}function ed(){return(r??(r=function(){let{performance:e}=b;if(!e?.now||!e.timeOrigin)return ec;let t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function eh(){return i||(i=function(){let{performance:e}=b;if(!e?.now)return[void 0,"none"];let t=e.now(),n=Date.now(),r=e.timeOrigin?Math.abs(e.timeOrigin+t-n):36e5,i=e.timing?.navigationStart,a="number"==typeof i?Math.abs(i+t-n):36e5;return r<36e5||a<36e5?r<=a?[e.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[n,"dateNow"]}()),i[0]}function ep(e,t={}){if(!t.user||(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ed(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ea()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{let t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function ef(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;let r={...e};for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=ef(r[e],t[e],n-1));return r}function em(){return ea().substring(16)}let eg="_sentrySpan";function ev(e,t){t?Q(e,eg,t):delete e[eg]}class e_{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ea(),sampleRand:Math.random()}}clone(){let e=new e_;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,ev(e,this[eg]),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ep(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;let t="function"==typeof e?e(this):e,{tags:n,extra:r,user:i,contexts:a,level:s,fingerprint:o=[],propagationContext:l}=(t instanceof e_?t.getScopeData():B(t)?e:void 0)||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...r},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),s&&(this._level=s),o.length&&(this._fingerprint=o),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ev(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ea(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){let n="number"==typeof t?t:100;if(n<=0)return this;let r={timestamp:ec(),...e,message:e.message?$(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[eg]}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=ef(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){let n=t?.event_id||ea();if(!this._client)return n;let r=Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){let r=n?.event_id||ea();if(!this._client)return r;let i=Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureEvent(e,t){let n=t?.event_id||ea();return this._client&&this._client.captureEvent(e,{...t,event_id:n},this),n}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class ey{constructor(e,t){let n,r;n=e||new e_,r=t||new e_,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){let t;let n=this._pushScope();try{t=e(n)}catch(e){throw this._popScope(),e}return z(t)?t.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function ex(){let e=M(E());return e.stack=e.stack||new ey(T("defaultCurrentScope",()=>new e_),T("defaultIsolationScope",()=>new e_))}function eb(e){return ex().withScope(e)}function eS(e,t){let n=ex();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function eE(e){return ex().withScope(()=>e(ex().getIsolationScope()))}function eM(e){let t=M(e);return t.acs?t.acs:{withIsolationScope:eE,withScope:eb,withSetScope:eS,withSetIsolationScope:(e,t)=>eE(t),getCurrentScope:()=>ex().getScope(),getIsolationScope:()=>ex().getIsolationScope()}}function eT(){return eM(E()).getCurrentScope()}function eA(){return eM(E()).getIsolationScope()}function ew(...e){let t=eM(E());if(2===e.length){let[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function eC(){return eT().getClient()}let eP="production";function eR(e){return new eL(t=>{t(e)})}function eI(e){return new eL((t,n)=>{n(e)})}class eL{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new eL((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new eL((t,n)=>{let r,i;return this.then(t=>{i=!1,r=t,e&&e()},t=>{i=!0,r=t,e&&e()}).then(()=>{if(i){n(r);return}t(r)})})}_executeHandlers(){if(0===this._state)return;let e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){let t=(e,t)=>{if(0===this._state){if(z(t)){t.then(n,r);return}this._state=e,this._value=t,this._executeHandlers()}},n=e=>{t(1,e)},r=e=>{t(2,e)};try{e(n,r)}catch(e){r(e)}}}let eD="sentry.source",eO="sentry.sample_rate",eN="sentry.previous_trace_sample_rate",eU="sentry.op",eF="sentry.origin",ek="sentry.idle_span_finish_reason",eB="sentry.measurement_unit",eV="sentry.measurement_value",ez="sentry.custom_span_name",ej="sentry.profile_id",eH="sentry.exclusive_time",eG="sentry-",eW=/^sentry-/;function eq(e){let t=eX(e);if(!t)return;let n=Object.entries(t).reduce((e,[t,n])=>(t.match(eW)&&(e[t.slice(eG.length)]=n),e),{});return Object.keys(n).length>0?n:void 0}function eX(e){return e&&(U(e)||Array.isArray(e))?Array.isArray(e)?e.reduce((e,t)=>(Object.entries(e$(t)).forEach(([t,n])=>{e[t]=n}),e),{}):e$(e):void 0}function e$(e){return e.split(",").map(e=>{let t=e.indexOf("=");return -1===t?[]:[e.slice(0,t),e.slice(t+1)].map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})}).reduce((e,[t,n])=>(t&&n&&(e[t]=n),e),{})}let eY=/^o(\d+)\./,eK=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function eZ(e,t=!1){let{host:n,path:r,pass:i,port:a,projectId:s,protocol:o,publicKey:l}=e;return`${o}://${l}${t&&i?`:${i}`:""}@${n}${a?`:${a}`:""}/${r?`${r}/`:r}${s}`}function eJ(e){let t=eK.exec(e);if(!t){C(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,i="",a="",s="",o=""]=t.slice(1),l="",u=o,c=u.split("/");if(c.length>1&&(l=c.slice(0,-1).join("/"),u=c.pop()),u){let e=u.match(/^\d+/);e&&(u=e[0])}return eQ({host:a,pass:i,path:l,projectId:u,port:s,protocol:n,publicKey:r})}function eQ(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function e0(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let t=e||eC()?.getOptions();return!!t&&(null!=t.tracesSampleRate||!!t.tracesSampler)}function e1(e,t){e.setAttribute("http.response.status_code",t);let n=function(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}(t);"unknown_error"!==n.message&&e.setStatus(n)}let e3="_sentryScope",e2="_sentryIsolationScope";function e6(e){return{scope:e[e3],isolationScope:function(e){if(e){if("object"==typeof e&&"deref"in e&&"function"==typeof e.deref)try{return e.deref()}catch{return}return e}}(e[e2])}}function e7(e){if("boolean"==typeof e)return Number(e);let t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t))&&!(t<0)&&!(t>1))return t}let e4=RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function e5(e=ea(),t=em(),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function e8(e=ea(),t=em(),n){return`00-${e}-${t}-${n?"01":"00"}`}let e9=!1;function te(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:i})=>({span_id:e,trace_id:t,sampled:1===n,attributes:i,...r})):void 0}function tt(e){return"number"==typeof e?tn(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?tn(e.getTime()):ed()}function tn(e){return e>0x2540be3ff?e/1e3:e}function tr(e){if("function"==typeof e.getSpanJSON)return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(e.attributes&&e.startTime&&e.name&&e.endTime&&e.status){let{attributes:r,startTime:i,name:a,endTime:s,status:o,links:l}=e;return{span_id:t,trace_id:n,data:r,description:a,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:tt(i),timestamp:tt(s)||void 0,status:ta(o),op:r[eU],origin:r[eF],links:te(l)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function ti(e){let{traceFlags:t}=e.spanContext();return 1===t}function ta(e){return e&&0!==e.code?1===e.code?"ok":e.message||"unknown_error":void 0}let ts="_sentryChildSpans",to="_sentryRootSpan";function tl(e,t){let n=e[to]||e;Q(t,to,n),e[ts]?e[ts].add(t):Q(e,ts,new Set([t]))}function tu(e){let t=new Set;return!function e(n){if(!t.has(n)&&ti(n))for(let r of(t.add(n),n[ts]?Array.from(n[ts]):[]))e(r)}(e),Array.from(t)}function tc(e){return e[to]||e}function td(){let e=eM(E());return e.getActiveSpan?e.getActiveSpan():eT()[eg]}function th(){e9||(C(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),e9=!0)}let tp="_frozenDsc";function tf(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},i={environment:n.environment||eP,release:n.release,public_key:r,trace_id:e,org_id:function(e){let t;let n=e.getOptions(),{host:r}=e.getDsn()||{};return n.orgId?t=String(n.orgId):r&&(t=function(e){let t=e.match(eY);return t?.[1]}(r)),t}(t)};return t.emit("createDsc",i),i}function tm(e,t){let n=t.getPropagationContext();return n.dsc||tf(n.traceId,e)}function tg(e){let t=eC();if(!t)return{};let n=tc(e),r=tr(n),i=r.data,a=n.spanContext().traceState,s=a?.get("sentry.sample_rate")??i[eO]??i[eN];function o(e){return("number"==typeof s||"string"==typeof s)&&(e.sample_rate=`${s}`),e}let l=n[tp];if(l)return o(l);let u=a?.get("sentry.dsc"),c=u&&eq(u);if(c)return o(c);let d=tf(e.spanContext().traceId,t),h=i[eD],p=r.description;return"url"!==h&&p&&(d.transaction=p),e0()&&(d.sampled=String(ti(n)),d.sample_rand=a?.get("sentry.sample_rand")??e6(n).scope?.getPropagationContext().sampleRand.toString()),o(d),t.emit("createDsc",d,n),d}function tv(e,t){let{extra:n,tags:r,user:i,contexts:a,level:s,sdkProcessingMetadata:o,breadcrumbs:l,fingerprint:u,eventProcessors:c,attachments:d,propagationContext:h,transactionName:p,span:f}=t;t_(e,"extra",n),t_(e,"tags",r),t_(e,"user",i),t_(e,"contexts",a),e.sdkProcessingMetadata=ef(e.sdkProcessingMetadata,o,2),s&&(e.level=s),p&&(e.transactionName=p),f&&(e.span=f),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),c.length&&(e.eventProcessors=[...e.eventProcessors,...c]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function t_(e,t,n){e[t]=ef(e[t],n,1)}let ty=/\(error: (.*)\)/,tx=/captureMessage|captureException/;function tb(...e){let t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0,r=0)=>{let i=[],a=e.split("\n");for(let e=n;e<a.length;e++){let n=a[e];n.length>1024&&(n=n.slice(0,1024));let s=ty.test(n)?n.replace(ty,"$1"):n;if(!s.match(/\S*Error: /)){for(let e of t){let t=e(s);if(t){i.push(t);break}}if(i.length>=50+r)break}}return function(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(tS(t).function||"")&&t.pop(),t.reverse(),tx.test(tS(t).function||"")&&(t.pop(),tx.test(tS(t).function||"")&&t.pop()),t.slice(0,50).map(e=>({...e,filename:e.filename||tS(t).filename,function:e.function||"?"}))}(i.slice(r))}}function tS(e){return e[e.length-1]||{}}let tE="<anonymous>";function tM(e){try{if(!e||"function"!=typeof e)return tE;return e.name||tE}catch{return tE}}function tT(e){let t=e.exception;if(t){let e=[];try{return t.values.forEach(t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)}),e}catch{}}}function tA(e,t=100,n=Infinity){try{return function e(t,n,r=Infinity,i=Infinity,a=function(){let e=new WeakSet;return[function(t){return!!e.has(t)||(e.add(t),!1)},function(t){e.delete(t)}]}()){let[s,o]=a;if(null==n||["boolean","string"].includes(typeof n)||"number"==typeof n&&Number.isFinite(n))return n;let l=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(H(t))return"[VueViewModel]";if(B(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${tM(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;let n=function(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);if(/^HTML(\w*)Element$/.test(n))return`[HTMLElement: ${n}]`;return`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(t,n);if(!l.startsWith("[object "))return l;if(n.__sentry_skip_normalization__)return n;let u="number"==typeof n.__sentry_override_normalization_depth__?n.__sentry_override_normalization_depth__:r;if(0===u)return l.replace("object ","");if(s(n))return"[Circular ~]";if(n&&"function"==typeof n.toJSON)try{let t=n.toJSON();return e("",t,u-1,i,a)}catch{}let c=Array.isArray(n)?[]:{},d=0,h=en(n);for(let t in h){if(!Object.prototype.hasOwnProperty.call(h,t))continue;if(d>=i){c[t]="[MaxProperties ~]";break}let n=h[t];c[t]=e(t,n,u-1,i,a),d++}return o(n),c}("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function tw(e,t){return eT().captureEvent(e,t)}function tC(e){eA().addEventProcessor(e)}function tP(e){let t=eA(),n=eT(),{userAgent:r}=b.navigator||{},i=function(e){let t=ed(),n={sid:ea(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>({sid:`${n.sid}`,init:n.init,started:new Date(1e3*n.started).toISOString(),timestamp:new Date(1e3*n.timestamp).toISOString(),status:n.status,errors:n.errors,did:"number"==typeof n.did||"string"==typeof n.did?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})};return e&&ep(n,e),n}({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),a=t.getSession();return a?.status==="ok"&&ep(a,{status:"exited"}),tR(),t.setSession(i),i}function tR(){let e=eA(),t=eT().getSession()||e.getSession();if(t){let e;e={},"ok"===t.status&&(e={status:"exited"}),ep(t,e)}tI(),e.setSession()}function tI(){let e=eA(),t=eC(),n=e.getSession();n&&t&&t.captureSession(n)}function tL(e=!1){if(e){tR();return}tI()}let tD=[];function tO(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function tN(e,t,n){if(!n[t.name]){if(n[t.name]=t,-1===tD.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),tD.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){let n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,r)=>n(t,r,e))}if("function"==typeof t.processEvent){let n=t.processEvent.bind(t),r=Object.assign((t,r)=>n(t,r,e),{id:t.name});e.addEventProcessor(r)}}}let tU=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],tF=(e={})=>{let t;return{name:"EventFilters",setup(n){t=tB(e,n.getOptions())},processEvent:(n,r,i)=>(t||(t=tB(e,i.getOptions())),!function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;let n=e.transaction;return!!n&&Z(n,t)}(e,t.ignoreTransactions))return!0}else{var n;if(n=t.ignoreErrors,n?.length&&(function(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t})(e).some(e=>Z(e,n))||e.exception?.values?.length&&!e.message&&!e.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value)||function(e,t){if(!t?.length)return!1;let n=tV(e);return!!n&&Z(n,t)}(e,t.denyUrls)||!function(e,t){if(!t?.length)return!0;let n=tV(e);return!n||Z(n,t)}(e,t.allowUrls))return!0}return!1}(n,t)?n:null)}},tk=(e={})=>({...tF(e),name:"InboundFilters"});function tB(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:tU],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function tV(e){try{let t=[...e.exception?.values??[]].reverse().find(e=>e.mechanism?.parent_id===void 0&&e.stacktrace?.frames?.length),n=t?.stacktrace?.frames;return n?function(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch{return null}}let tz=new WeakMap,tj=()=>({name:"FunctionToString",setupOnce(){l=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=et(this),n=tz.has(eC())&&void 0!==t?t:this;return l.apply(n,e)}}catch{}},setup(e){tz.set(e,!0)}}),tH=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{var n;if((n=e)&&(function(e,t){let n=e.message,r=t.message;return!!((n||r)&&(!n||r)&&(n||!r)&&n===r&&tW(e,t)&&tG(e,t))}(t,n)||function(e,t){let n=tq(t),r=tq(e);return!!(n&&r&&n.type===r.type&&n.value===r.value&&tW(e,t)&&tG(e,t))}(t,n)))return null}catch{}return e=t}}};function tG(e,t){let n=tT(e),r=tT(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let e=0;e<r.length;e++){let t=r[e],i=n[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function tW(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch{return!1}}function tq(e){return e.exception?.values?.[0]}function tX(e,t=[]){return[e,t]}function t$(e,t){for(let n of e[1]){let e=n[0].type;if(t(n,e))return!0}return!1}function tY(e){let t=M(b);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}let tK={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function tZ(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function tJ(e,t){if(!t?.length||!e.description)return!1;for(let n of t){if("string"==typeof n||n instanceof RegExp){if(K(e.description,n))return!0;continue}if(!n.name&&!n.op)continue;let t=!n.name||K(e.description,n.name),r=!n.op||e.op&&K(e.op,n.op);if(t&&r)return!0}return!1}let tQ=Symbol.for("SentryInternalError"),t0=Symbol.for("SentryDoNotSendEventError");function t1(e){return{message:e,[tQ]:!0}}function t3(e){return{message:e,[t0]:!0}}class t2{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn&&(this._dsn=function(e){let t="string"==typeof e?eJ(e):eQ(e);if(t)return t}(e.dsn)),this._dsn){let t=function(e,t,n){return t||`${function(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/?${function(e,t){let n={sentry_version:"7"};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){let r=ea();if(eu(e))return r;let i={event_id:r,...t};return this._process(this.eventFromException(e,i).then(e=>this._captureEvent(e,i,n))),i.event_id}captureMessage(e,t,n,r){let i={event_id:ea(),...n},a=F(e)?e:String(e),s=k(e)?this.eventFromMessage(a,t,i):this.eventFromException(e,i);return this._process(s.then(e=>this._captureEvent(e,i,r))),i.event_id}captureEvent(e,t,n){let r=ea();if(t?.originalException&&eu(t.originalException))return r;let i={event_id:r,...t},a=e.sdkProcessingMetadata||{},s=a.capturedSpanScope,o=a.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,s||n,o)),i.event_id}captureSession(e){this.sendSession(e),ep(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){let t=this._transport;if(!t)return!0;this.emit("flush");let n=await this._isClientDoneProcessing(e),r=await t.flush(e);return n&&r}async close(e){let t=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),t}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){let t=this._integrations[e.name];tN(this,e,this._integrations),t||tO(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=function(e,t,n,r){let i=tZ(n),a=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){if(!t)return;let n=e.sdk||{};e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0}}(e,n?.sdk);let s=function(e,t,n,r){let i=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:eZ(r)},...i&&{trace:i}}}(e,i,r,t);return delete e.sdkProcessingMetadata,tX(s,[[{type:a},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(let e of t.attachments||[])n=function(e,t){let[n,r]=e;return[n,[...r,t]]}(n,function(e){let t="string"==typeof e.data?tY(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}(e));this.sendEnvelope(n).then(t=>this.emit("afterSendEvent",e,t))}sendSession(e){let{release:t,environment:n=eP}=this._options;if("aggregates"in e){let r=e.attrs||{};if(!r.release&&!t)return;r.release=r.release||t,r.environment=r.environment||n,e.attrs=r}else{if(!e.release&&!t)return;e.release=e.release||t,e.environment=e.environment||n}this.emit("beforeSendSession",e);let r=function(e,t,n,r){let i=tZ(n);return tX({sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:eZ(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){let r=`${e}:${t}`;this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){let n=this._hooks[e]=this._hooks[e]||new Set,r=(...e)=>t(...e);return n.add(r),()=>{n.delete(r)}}emit(e,...t){let n=this._hooks[e];n&&n.forEach(e=>e(...t))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(e){}return{}}_setupIntegrations(){let{integrations:e}=this._options;this._integrations=function(e,t){let n={};return t.forEach(t=>{t&&tN(e,t,n)}),n}(this,e),tO(this,e)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,r=!1,i=t.exception?.values;if(i)for(let e of(r=!0,i)){let t=e.mechanism;if(t?.handled===!1){n=!0;break}}let a="ok"===e.status;(a&&0===e.errors||a&&n)&&(ep(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}async _isClientDoneProcessing(e){let t=0;for(;!e||t<e;){if(await new Promise(e=>setTimeout(e,1)),!this._numProcessing)return!0;t++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){let i=this.getOptions(),l=Object.keys(this._integrations);return!t.integrations&&l?.length&&(t.integrations=l),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),(function(e,t,n,r,i,l){let{normalizeDepth:u=3,normalizeMaxBreadth:c=1e3}=e,d={...t,event_id:t.event_id||n.event_id||ea(),timestamp:t.timestamp||ec()},h=n.integrations||e.integrations.map(e=>e.name);(function(e,t){let{environment:n,release:r,dist:i,maxValueLength:a=250}=t;e.environment=e.environment||n||eP,!e.release&&r&&(e.release=r),!e.dist&&i&&(e.dist=i);let s=e.request;s?.url&&(s.url=$(s.url,a))})(d,e),h.length>0&&(d.sdk=d.sdk||{},d.sdk.integrations=[...d.sdk.integrations||[],...h]),i&&i.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){let n=function(e){let t=b._sentryDebugIds;if(!t)return{};let n=Object.keys(t);return o&&n.length===s?o:(s=n.length,o=n.reduce((n,r)=>{a||(a={});let i=a[r];if(i)n[i[0]]=i[1];else{let i=e(r);for(let e=i.length-1;e>=0;e--){let s=i[e],o=s?.filename,l=t[r];if(o&&l){n[o]=l,a[r]=[o,l];break}}}return n},{}))}(t);e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=n[e.filename])})})}(d,e.stackParser);let p=function(e,t){if(!t)return e;let n=e?e.clone():new e_;return n.update(t),n}(r,n.captureContext);n.mechanism&&el(d,n.mechanism);let f=i?i.getEventProcessors():[],m=T("globalScope",()=>new e_).getScopeData();l&&tv(m,l.getScopeData()),p&&tv(m,p.getScopeData());let g=[...n.attachments||[],...m.attachments];return g.length&&(n.attachments=g),function(e,t){let{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:a}=t;(function(e,t){let{extra:n,tags:r,user:i,contexts:a,level:s,transactionName:o}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(i).length&&(e.user={...i,...e.user}),Object.keys(a).length&&(e.contexts={...a,...e.contexts}),s&&(e.level=s),o&&"transaction"!==e.type&&(e.transaction=o)})(e,t),r&&function(e,t){e.contexts={trace:function(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),i=r?t:tr(e).parent_span_id,a=e6(e).scope;return{parent_span_id:i,span_id:r?a?.getPropagationContext().propagationSpanId||em():t,trace_id:n}}(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:tg(t),...e.sdkProcessingMetadata};let n=tr(tc(t)).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,r),e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],n&&(e.fingerprint=e.fingerprint.concat(n)),e.fingerprint.length||delete e.fingerprint,function(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,i),e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...a}}(d,m),(function(e,t,n,r=0){try{let i=function e(t,n,r,i){let a=r[i];if(!t||!a)return t;let s=a({...t},n);return z(s)?s.then(t=>e(t,n,r,i+1)):e(s,n,r,i+1)}(t,n,e,r);return z(i)?i:eR(i)}catch(e){return eI(e)}})([...f,...m.eventProcessors],d,n).then(e=>(e&&function(e){let t={};if(e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof u&&u>0)?function(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:tA(e.data,t,n)}}))},...e.user&&{user:tA(e.user,t,n)},...e.contexts&&{contexts:tA(e.contexts,t,n)},...e.extra&&{extra:tA(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=tA(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(e=>({...e,...e.data&&{data:tA(e.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=tA(e.contexts.flags,3,n)),r}(e,u,c):e)})(i,e,t,n,this,r).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:function(e){let{traceId:t,parentSpanId:n,propagationSpanId:r}=e.getPropagationContext(),i={trace_id:t,span_id:r||em()};return n&&(i.parent_span_id=n),i}(n),...e.contexts};let r=tm(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:r,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},n=eT(),r=eA()){return this._processEvent(e,t,n,r).then(e=>e.event_id,e=>{})}_processEvent(e,t,n,r){let i=this.getOptions(),{sampleRate:a}=i,s=t7(e),o=t6(e),l=e.type||"error",u=`before send for type \`${l}\``,c=void 0===a?void 0:e7(a);if(o&&"number"==typeof c&&Math.random()>c)return this.recordDroppedEvent("sample_rate","error"),eI(t3(`Discarding event because it's not included in the random sample (sampling rate = ${a})`));let d="replay_event"===l?"replay":l;return this._prepareEvent(e,t,n,r).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",d),t3("An event processor returned `null`, will not send event.");return t.data&&!0===t.data.__sentry__?e:function(e,t){let n=`${t} must return \`null\` or a valid event.`;if(z(e))return e.then(e=>{if(!B(e)&&null!==e)throw t1(n);return e},e=>{throw t1(`${t} rejected with ${e}`)});if(!B(e)&&null!==e)throw t1(n);return e}(function(e,t,n,r){let{beforeSend:i,beforeSendTransaction:a,beforeSendSpan:s,ignoreSpans:o}=t,l=n;if(t6(l)&&i)return i(l,r);if(t7(l)){if(s||o){let t=function(e){let{trace_id:t,parent_span_id:n,span_id:r,status:i,origin:a,data:s,op:o}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:o,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:a,profile_id:s?.[ej],exclusive_time:s?.[eH],measurements:e.measurements,is_segment:!0}}(l);if(o?.length&&tJ(t,o))return null;if(s){let e=s(t);e?l=ef(n,{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[ej]:e.profile_id},...e.exclusive_time&&{[eH]:e.exclusive_time}}}},measurements:e.measurements}):th()}if(l.spans){let t=[],n=l.spans;for(let e of n){if(o?.length&&tJ(e,o)){!function(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let t of e)t.parent_span_id===r&&(t.parent_span_id=n)}(n,e);continue}if(s){let n=s(e);n?t.push(n):(th(),t.push(e))}else t.push(e)}let r=l.spans.length-t.length;r&&e.recordDroppedEvent("before_send","span",r),l.spans=t}}if(a){if(l.spans){let e=l.spans.length;l.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return a(l,r)}}return l}(this,i,e,t),u)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",d),s){let t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw t3(`${u} returned \`null\`, will not send event.`)}let a=n.getSession()||r.getSession();if(o&&a&&this._updateSessionFromEvent(a,i),s){let e=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}let l=i.transaction_info;return s&&l&&i.transaction!==e.transaction&&(i.transaction_info={...l,source:"custom"}),this.sendEvent(i,t),i}).then(null,e=>{if(e&&"object"==typeof e&&t0 in e||e&&"object"==typeof e&&tQ in e)throw e;throw this.captureException(e,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:e}),t1(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){let e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{let[n,r]=e.split(":");return{reason:n,category:r,quantity:t}})}_flushOutcomes(){var e;let t=this._clearOutcomes();if(0===t.length||!this._dsn)return;let n=tX((e=this._options.tunnel&&eZ(this._dsn))?{dsn:e}:{},[[{type:"client_report"},{timestamp:ec(),discarded_events:t}]]);this.sendEnvelope(n)}}function t6(e){return void 0===e.type}function t7(e){return"transaction"===e.type}function t4(e,t){let n=t??t5().get(e)??[];if(0===n.length)return;let r=e.getOptions(),i=function(e,t,n,r){let i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(i.dsn=eZ(r)),tX(i,[[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]])}(n,r._metadata,r.tunnel,e.getDsn());t5().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function t5(){return T("clientToLogBufferMap",()=>new WeakMap)}function t8(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function t9(e,t){let n=nt(e,t),r={type:function(e){let t=e?.name;return!t&&nr(e)?e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception":t}(t),value:function(e){let t=e?.message;return nr(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function ne(e,t){return{exception:{values:[t9(e,t)]}}}function nt(e,t){let n=t.stacktrace||t.stack||"",r=t&&nn.test(t.message)?1:0,i="number"==typeof t.framesToPop?t.framesToPop:0;try{return e(n,r,i)}catch{}return[]}let nn=/Minified React error #\d+;/i;function nr(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function ni(e,t,n,r,i){let a;if(O(t)&&t.error)return ne(e,t.error);if(N(t)||D(t,"DOMException")){if("stack"in t)a=ne(e,t);else{let i=t.name||(N(t)?"DOMError":"DOMException"),s=t.message?`${i}: ${t.message}`:i;eo(a=na(e,s,n,r),s)}return"code"in t&&(a.tags={...a.tags,"DOMException.code":`${t.code}`}),a}return L(t)?ne(e,t):(B(t)||V(t)?el(a=function(e,t,n,r){let i=eC(),a=i?.getOptions().normalizeDepth,s=function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}(t),o={__serialized__:function e(t,n=3,r=102400){let i=tA(t,n);return~-encodeURI(JSON.stringify(i)).split(/%..|./).length>r?e(t,n-1,r):i}(t,a)};if(s)return{exception:{values:[t9(e,s)]},extra:o};let l={exception:{values:[{type:V(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:function(e,{isUnhandledRejection:t}){let n=function(e,t=40){let n=Object.keys(en(e));n.sort();let r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return $(r,t);for(let e=n.length;e>0;e--){let r=n.slice(0,e).join(", ");if(!(r.length>t)){if(e===n.length)return r;return $(r,t)}}return""}(e),r=t?"promise rejection":"exception";if(O(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(V(e)){let t=function(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e);return`Event \`${t}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}(t,{isUnhandledRejection:r})}]},extra:o};if(n){let t=nt(e,n);t.length&&(l.exception.values[0].stacktrace={frames:t})}return l}(e,t,n,i),{synthetic:!0}):(eo(a=na(e,t,n,r),`${t}`,void 0),el(a,{synthetic:!0})),a)}function na(e,t,n,r){let i={};if(r&&n){let r=nt(e,n);r.length&&(i.exception={values:[{value:t,stacktrace:{frames:r}}]}),el(i,{synthetic:!0})}if(F(t)){let{__sentry_template_string__:e,__sentry_template_values__:n}=t;return i.logentry={message:e,params:n},i}return i.message=t,i}let ns=0;function no(e,t={}){if("function"!=typeof e)return e;try{let t=e.__sentry_wrapped__;if(t){if("function"==typeof t)return t;return e}if(et(e))return e}catch{return e}let n=function(...n){try{let r=n.map(e=>no(e,t));return e.apply(this,r)}catch(e){throw ns++,setTimeout(()=>{ns--}),ew(r=>{r.addEventProcessor(e=>(t.mechanism&&(eo(e,void 0,void 0),el(e,t.mechanism)),e.extra={...e.extra,arguments:n},e)),eT().captureException(e,void 0)}),e}};try{for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch{}ee(n,e),Q(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch{}return n}function nl(){let e=q(),{referrer:t}=b.document||{},{userAgent:n}=b.navigator||{};return{url:e,headers:{...t&&{Referer:t},...n&&{"User-Agent":n}}}}class nu extends t2{constructor(e){let t={release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:b.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e};R(t,"browser",["browser"],b.SENTRY_SDK_SOURCE||"npm"),t._metadata?.sdk&&(t._metadata.sdk.settings={infer_ip:t.sendDefaultPii?"auto":"never",...t._metadata.sdk.settings}),super(t);let{sendDefaultPii:n,sendClientReports:r,enableLogs:i}=this._options;b.document&&(r||i)&&b.document.addEventListener("visibilitychange",()=>{"hidden"===b.document.visibilityState&&(r&&this._flushOutcomes(),i&&t4(this))}),i&&(this.on("flush",()=>{t4(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{t4(this)},5e3)})),n&&this.on("beforeSendSession",t8)}eventFromException(e,t){return function(e,t,n,r){let i=ni(e,t,n?.syntheticException||void 0,r);return el(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),eR(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,i){let a=na(e,t,r?.syntheticException||void 0,i);return a.level=n,r?.event_id&&(a.event_id=r.event_id),eR(a)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,r)}}let nc={},nd={};function nh(e,t){nc[e]=nc[e]||[],nc[e].push(t)}function np(e,t){if(!nd[e]){nd[e]=!0;try{t()}catch(e){}}}function nf(e,t){let n=e&&nc[e];if(n)for(let e of n)try{e(t)}catch(e){}}function nm(){"console"in b&&A.forEach(function(e){e in b.console&&J(b.console,e,function(t){return w[e]=t,function(...t){nf("console",{args:t,level:e});let n=w[e];n?.apply(b.console,t)}})})}function ng(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function nv(e,t){let n="fetch";nh(n,e),np(n,()=>n_(void 0,t))}function n_(e,t=!1){(!t||function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in b))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(ng(b.fetch))return!0;let e=!1,t=b.document;if(t&&"function"==typeof t.createElement)try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=ng(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){}return e}())&&J(b,"fetch",function(t){return function(...n){let r=Error(),{method:i,url:a}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){let[t,n]=e;return{url:nS(t),method:nb(n,"method")?String(n.method).toUpperCase():"GET"}}let t=e[0];return{url:nS(t),method:nb(t,"method")?String(t.method).toUpperCase():"GET"}}(n),s={args:n,fetchData:{method:i,url:a},startTimestamp:1e3*ed(),virtualError:r,headers:function(e){let[t,n]=e;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(G(t))return new Headers(t.headers)}catch{}}(n)};return e||nf("fetch",{...s}),t.apply(b,n).then(async t=>(e?e(t):nf("fetch",{...s,endTimestamp:1e3*ed(),response:t}),t),e=>{if(nf("fetch",{...s,endTimestamp:1e3*ed(),error:e}),L(e)&&void 0===e.stack&&(e.stack=r.stack,Q(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{let t=new URL(s.fetchData.url);e.message=`${e.message} (${t.host})`}catch{}throw e})}})}async function ny(e,t){if(e?.body){let n=e.body,r=n.getReader(),i=setTimeout(()=>{n.cancel().then(null,()=>{})},9e4),a=!0;for(;a;){let e;try{e=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);let{done:i}=await r.read();clearTimeout(e),i&&(t(),a=!1)}catch{a=!1}finally{clearTimeout(e)}}clearTimeout(i),r.releaseLock(),n.cancel().then(null,()=>{})}}function nx(e){let t;try{t=e.clone()}catch{return}ny(t,()=>{nf("fetch-body-resolved",{endTimestamp:1e3*ed(),response:e})})}function nb(e,t){return!!e&&"object"==typeof e&&!!e[t]}function nS(e){return"string"==typeof e?e:e?nb(e,"url")?e.url:e.toString?e.toString():"":""}function nE(e,t){let n=eC(),r=eA();if(!n)return;let{beforeBreadcrumb:i=null,maxBreadcrumbs:a=100}=n.getOptions();if(a<=0)return;let s={timestamp:ec(),...e},o=i?C(()=>i(s,t)):s;null!==o&&(n.emit&&n.emit("beforeAddBreadcrumb",o,t),r.addBreadcrumb(o,a))}function nM(e){if(void 0!==e)return e>=400&&e<500?"warning":e>=500?"error":void 0}function nT(e){return"isRelative"in e}function nA(e,t){let n=0>=e.indexOf("://")&&0!==e.indexOf("//"),r=t??(n?"thismessage:/":void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let t=new URL(e,r);if(n)return{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash};return t}catch{}}function nw(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function nC(e){return e.split(/[?#]/,1)[0]}function nP(){if(!b.document)return;let e=nf.bind(null,"dom"),t=nR(e,!0);b.document.addEventListener("click",t,!1),b.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{let n=b[t]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(J(n,"addEventListener",function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{let r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=r[n]=r[n]||{refCount:0};if(!a.handler){let r=nR(e);a.handler=r,t.call(this,n,r,i)}a.refCount++}catch{}return t.call(this,n,r,i)}}),J(n,"removeEventListener",function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{let n=this.__sentry_instrumentation_handlers__||{},i=n[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch{}return e.call(this,t,n,r)}}))})}function nR(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=function(e){try{return e.target}catch{return null}}(n);if("keypress"===n.type&&(!r?.tagName||"INPUT"!==r.tagName&&"TEXTAREA"!==r.tagName&&!r.isContentEditable))return;Q(n,"_sentryCaptured",!0),r&&!r._sentryId&&Q(r,"_sentryId",ea());let i="keypress"===n.type?"input":n.type;!function(e){if(e.type!==c)return!1;try{if(!e.target||e.target._sentryId!==d)return!1}catch{}return!0}(n)&&(e({event:n,name:i,global:t}),c=n.type,d=r?r._sentryId:void 0),clearTimeout(u),u=b.setTimeout(()=>{d=void 0,c=void 0},1e3)}}let nI="__sentry_xhr_v3__";function nL(e){nh("xhr",e),np("xhr",nD)}function nD(){if(!b.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){let r=Error(),i=1e3*ed(),a=U(n[0])?n[0].toUpperCase():void 0,s=function(e){if(U(e))return e;try{return e.toString()}catch{}}(n[1]);if(!a||!s)return e.apply(t,n);t[nI]={method:a,url:s,request_headers:{}},"POST"===a&&s.match(/sentry_key/)&&(t.__sentry_own_request__=!0);let o=()=>{let e=t[nI];if(e&&4===t.readyState){try{e.status_code=t.status}catch{}nf("xhr",{endTimestamp:1e3*ed(),startTimestamp:i,xhr:t,virtualError:r})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(o(),e.apply(t,n))}):t.addEventListener("readystatechange",o),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){let[r,i]=n,a=t[nI];return a&&U(r)&&U(i)&&(a.request_headers[r.toLowerCase()]=i),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){let r=t[nI];return r&&(void 0!==n[0]&&(r.body=n[0]),nf("xhr",{startTimestamp:1e3*ed(),xhr:t})),e.apply(t,n)}})}function nO(e){let t="history";nh(t,e),np(t,nN)}function nN(){b.addEventListener("popstate",()=>{let e=b.location.href,t=h;h=e,t!==e&&nf("history",{from:t,to:e})}),"history"in b&&b.history&&(J(b.history,"pushState",e),J(b.history,"replaceState",e));function e(e){return function(...t){let n=t.length>2?t[2]:void 0;if(n){let r=h,i=function(e){try{return new URL(e,b.location.origin).toString()}catch{return e}}(String(n));if(h=i,r===i)return e.apply(this,t);nf("history",{from:r,to:i})}return e.apply(this,t)}}}let nU=(e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){var n;t.console&&function(e){let t="console";nh(t,e),np(t,nm)}(function(t){var n;if(eC()!==e)return;let r={category:"console",data:{arguments:t.args,logger:"console"},level:"warn"===(n=t.level)?"warning":["fatal","error","warning","log","info","debug"].includes(n)?n:"log",message:Y(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;r.message=`Assertion failed: ${Y(t.args.slice(1)," ")||"console.assert"}`,r.data.arguments=t.args.slice(1)}nE(r,{input:t.args,level:t.level})}),t.dom&&(nh("dom",(n=t.dom,function(t){let r,i;if(eC()!==e)return;let a="object"==typeof n?n.serializeAttribute:void 0,s="object"==typeof n&&"number"==typeof n.maxStringLength?n.maxStringLength:void 0;s&&s>1024&&(s=1024),"string"==typeof a&&(a=[a]);try{let e=t.event,n=e&&e.target?e.target:e;r=W(n,{keyAttrs:a,maxStringLength:s}),i=X(n)}catch{r="<unknown>"}if(0===r.length)return;let o={category:`ui.${t.name}`,message:r};i&&(o.data={"ui.component_name":i}),nE(o,{event:t.event,name:t.name,global:t.global})})),np("dom",nP)),t.xhr&&nL(function(t){if(eC()!==e)return;let{startTimestamp:n,endTimestamp:r}=t,i=t.xhr[nI];if(!n||!r||!i)return;let{method:a,url:s,status_code:o,body:l}=i,u={xhr:t.xhr,input:l,startTimestamp:n,endTimestamp:r},c={category:"xhr",data:{method:a,url:s,status_code:o},type:"http",level:nM(o)};e.emit("beforeOutgoingRequestBreadcrumb",c,u),nE(c,u)}),t.fetch&&nv(function(t){if(eC()!==e)return;let{startTimestamp:n,endTimestamp:r}=t;if(!(!r||t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method)){if(t.fetchData.method,t.fetchData.url,t.error){let i=t.fetchData,a={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},s={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",s,a),nE(s,a)}else{let i=t.response,a={...t.fetchData,status_code:i?.status};t.fetchData.request_body_size,t.fetchData.response_body_size,i?.status;let s={input:t.args,response:i,startTimestamp:n,endTimestamp:r},o={category:"fetch",data:a,type:"http",level:nM(a.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",o,s),nE(o,s)}}}),t.history&&nO(function(t){if(eC()!==e)return;let n=t.from,r=t.to,i=nw(b.location.href),a=n?nw(n):void 0,s=nw(r);a?.path||(a=i),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),nE({category:"navigation",data:{from:n,to:r}})}),t.sentry&&e.on("beforeSendEvent",function(t){eC()===e&&nE({category:`sentry.${"transaction"===t.type?"transaction":"event"}`,event_id:t.event_id,level:t.level,message:function(e){let{message:t,event_id:n}=e;if(t)return t;let r=es(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}(t)},{event:t})})}}},nF=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],nk=(e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&J(b,"setTimeout",nB),t.setInterval&&J(b,"setInterval",nB),t.requestAnimationFrame&&J(b,"requestAnimationFrame",nV),t.XMLHttpRequest&&"XMLHttpRequest"in b&&J(XMLHttpRequest.prototype,"send",nz);let e=t.eventTarget;e&&(Array.isArray(e)?e:nF).forEach(e=>(function(e,t){let n=b[e]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(J(n,"addEventListener",function(n){return function(r,i,a){try{"function"==typeof i.handleEvent&&(i.handleEvent=no(i.handleEvent,{mechanism:{data:{handler:tM(i),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&this&&"object"==typeof this&&"removeEventListener"in this&&"function"==typeof this.removeEventListener&&this.removeEventListener(r,i),n.apply(this,[r,no(i,{mechanism:{data:{handler:tM(i),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),J(n,"removeEventListener",function(e){return function(t,n,r){try{let i=n.__sentry_wrapped__;i&&e.call(this,t,i,r)}catch{}return e.call(this,t,n,r)}}))})(e,t))}}};function nB(e){return function(...t){let n=t[0];return t[0]=no(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${tM(e)}`}}),e.apply(this,t)}}function nV(e){return function(t){return e.apply(this,[no(t,{mechanism:{data:{handler:tM(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function nz(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in n&&"function"==typeof n[e]&&J(n,e,function(t){let n={mechanism:{data:{handler:tM(t)},handled:!1,type:`auto.browser.browserapierrors.xhr.${e}`}},r=et(t);return r&&(n.mechanism.data.handler=tM(r)),no(t,n)})}),e.apply(this,t)}}let nj=()=>({name:"BrowserSession",setupOnce(){void 0!==b.document&&(tP({ignoreDuration:!0}),tL(),nO(({from:e,to:t})=>{void 0!==e&&e!==t&&(tP({ignoreDuration:!0}),tL())}))}}),nH=null;function nG(e){let t="error";nh(t,e),np(t,nW)}function nW(){nH=b.onerror,b.onerror=function(e,t,n,r,i){return nf("error",{column:r,error:i,line:n,msg:e,url:t}),!!nH&&nH.apply(this,arguments)},b.onerror.__SENTRY_INSTRUMENTED__=!0}let nq=null;function nX(e){let t="unhandledrejection";nh(t,e),np(t,n$)}function n$(){nq=b.onunhandledrejection,b.onunhandledrejection=function(e){return nf("unhandledrejection",e),!nq||nq.apply(this,arguments)},b.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let nY=(e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&nG(t=>{let{stackParser:n,attachStacktrace:r}=nK();if(eC()!==e||ns>0)return;let{msg:i,url:a,line:s,column:o,error:l}=t,u=function(e,t,n,r){let i=e.exception=e.exception||{},a=i.values=i.values||[],s=a[0]=a[0]||{},o=s.stacktrace=s.stacktrace||{},l=o.frames=o.frames||[],u=function(e){if(U(e)&&0!==e.length){if(e.startsWith("data:")){let t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e.slice(0,1024)}}(t)??q();return 0===l.length&&l.push({colno:r,filename:u,function:"?",in_app:!0,lineno:n}),e}(ni(n,l||i,void 0,r,!1),a,s,o);u.level="error",tw(u,{originalException:l,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})}),t.onunhandledrejection&&nX(t=>{let{stackParser:n,attachStacktrace:r}=nK();if(eC()!==e||ns>0)return;let i=function(e){if(k(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),a=k(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:ni(n,i,void 0,r,!0);a.level="error",tw(a,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}}};function nK(){let e=eC();return e?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}let nZ=()=>({name:"HttpContext",preprocessEvent(e){if(!b.navigator&&!b.location&&!b.document)return;let t=nl(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});function nJ(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function nQ(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}let n0=(e={})=>{let t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,i){!function(e,t,n,r,i,a){if(!i.exception?.values||!a||!j(a.originalException,Error))return;let s=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;s&&(i.exception.values=function e(t,n,r,i,a,s,o,l){if(s.length>=r+1)return s;let u=[...s];if(j(i[a],Error)){nJ(o,l);let s=t(n,i[a]),c=u.length;nQ(s,a,c,l),u=e(t,n,r,i[a],a,[s,...u],s,c)}return Array.isArray(i.errors)&&i.errors.forEach((i,s)=>{if(j(i,Error)){nJ(o,l);let c=t(n,i),d=u.length;nQ(c,`errors[${s}]`,d,l),u=e(t,n,r,i,a,[c,...u],c,d)}}),u}(e,t,r,a.originalException,n,i.exception.values,s,0))}(t9,i.getOptions().stackParser,n,t,e,r)}}};function n1(e,t,n,r){let i={filename:e,function:"<anonymous>"===t?"?":t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}let n3=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,n2=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,n6=/\((\S*)(?::(\d+))(?::(\d+))\)/,n7=/at (.+?) ?\(data:(.+?),/,n4=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,n5=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,n8=tb([30,e=>{let t=e.match(n7);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=n3.exec(e);if(n){let[,e,t,r]=n;return n1(e,"?",+t,+r)}let r=n2.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){let e=n6.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}let[e,t]=n9(r[1]||"?",r[2]);return n1(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,e=>{let t=n4.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let e=n5.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||"?";return[n,e]=n9(n,e),n1(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]),n9=(e,t)=>{let n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:"?",n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},re=Symbol.for("SentryBufferFullError"),rt={};function rn(e,t=function(e){let t=rt[e];if(t)return t;let n=b[e];if(ng(n))return rt[e]=n.bind(b);let r=b.document;if(r&&"function"==typeof r.createElement)try{let t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);let i=t.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(t)}catch(e){}return n?rt[e]=n.bind(b):n}("fetch")){let n=0,r=0;async function i(i){let a=i.body.length;n+=a,r++;let s={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{let n=await t(e.url,s);return{statusCode:n.status,headers:{"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")}}}catch(e){throw rt.fetch=void 0,e}finally{n-=a,r--}}return function(e,t,n=function(e=100){let t=new Set;return{get $(){return Array.from(t)},add:function(n){if(!(t.size<e))return eI(re);let r=n();return t.add(r),r.then(()=>{t.delete(r)},()=>{t.delete(r)}),r},drain:function(e){if(!t.size)return eR(!0);let n=Promise.allSettled(Array.from(t)).then(()=>!0);return e?Promise.race([n,new Promise(t=>setTimeout(()=>t(!1),e))]):n}}}(e.bufferSize||64)){let r={};return{send:function(i){let a=[];if(t$(i,(t,n)=>{let i=tK[n];(function(e,t,n=Date.now()){return(e[t]||e.all||0)>n})(r,i)?e.recordDroppedEvent("ratelimit_backoff",i):a.push(t)}),0===a.length)return Promise.resolve({});let s=tX(i[0],a),o=t=>{t$(s,(n,r)=>{e.recordDroppedEvent(t,tK[r])})};return n.add(()=>t({body:function(e){let[t,n]=e,r=JSON.stringify(t);function i(e){"string"==typeof r?r="string"==typeof e?r+e:[tY(r),e]:r.push("string"==typeof e?tY(e):e)}for(let e of n){let[t,n]=e;if(i(`
${JSON.stringify(t)}
`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let e;try{e=JSON.stringify(n)}catch{e=JSON.stringify(tA(n))}i(e)}}return"string"==typeof r?r:function(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),n=0;for(let r of e)t.set(r,n),n+=r.length;return t}(r)}(s)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode),r=function(e,{statusCode:t,headers:n},r=Date.now()){let i={...e},a=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(a)for(let e of a.trim().split(",")){let[t,n,,,a]=e.split(":",5),s=parseInt(t,10),o=(isNaN(s)?60:s)*1e3;if(n)for(let e of n.split(";"))"metric_bucket"===e?(!a||a.split(";").includes("custom"))&&(i[e]=r+o):i[e]=r+o;else i.all=r+o}else s?i.all=r+function(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(s,r):429===t&&(i.all=r+6e4);return i}(r,e),e),e=>{throw o("network_error"),e})).then(e=>e,e=>{if(e===re)return o("queue_overflow"),Promise.resolve({});throw e})},flush:e=>n.drain(e)}}(e,i)}function rr(e){return[tk(),tj(),nk(),nU(),nY(),n0(),tH(),nZ(),nj()]}var ri=n(96540),ra=n(65606);class rs{constructor(e={}){this._traceId=e.traceId||ea(),this._spanId=e.spanId||em()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}function ro(e){if(!e||0===e.length)return;let t={};return e.forEach(e=>{let n=e.attributes||{},r=n[eB],i=n[eV];"string"==typeof r&&"number"==typeof i&&(t[e.name]={value:i,unit:r})}),t}class rl{constructor(e={}){this._traceId=e.traceId||ea(),this._spanId=e.spanId||em(),this._startTime=e.startTimestamp||ed(),this._links=e.links,this._attributes={},this.setAttributes({[eF]:"manual",[eU]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,t){}spanContext(){let{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach(t=>this.setAttribute(t,e[t])),this}updateStartTime(e){this._startTime=tt(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(eD,"custom"),this}end(e){this._endTime||(this._endTime=tt(e),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[eU],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:ta(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[eF],profile_id:this._attributes[ej],exclusive_time:this._attributes[eH],measurements:ro(this._events),is_segment:this._isStandaloneSpan&&tc(this)===this||void 0,segment_id:this._isStandaloneSpan?tc(this).spanContext().spanId:void 0,links:te(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){let r=ru(t)?t:n||ed(),i=ru(t)?{}:t||{},a={name:e,time:tt(r),attributes:i};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let e=eC();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===tc(this)))return;if(this._isStandaloneSpan){this._sampled?function(e){let t=eC();if(!t)return;let n=e[1];if(!n||0===n.length){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}(function(e,t){let n=tg(e[0]),r=t?.getDsn(),i=t?.getOptions().tunnel,a={sent_at:new Date().toISOString(),...!!n.trace_id&&!!n.public_key&&{trace:n},...!!i&&r&&{dsn:eZ(r)}},{beforeSendSpan:s,ignoreSpans:o}=t?.getOptions()||{},l=o?.length?e.filter(e=>!tJ(tr(e),o)):e,u=e.length-l.length;u&&t?.recordDroppedEvent("before_send","span",u);let c=s?e=>{let t=tr(e);return s(t)||(th(),t)}:tr,d=[];for(let e of l){let t=c(e);t&&d.push([{type:"span"},t])}return tX(a,d)}([this],e)):e&&e.recordDroppedEvent("sample_rate","span");return}let t=this._convertSpanToTransaction();t&&(e6(this).scope||eT()).captureEvent(t)}_convertSpanToTransaction(){if(!rc(tr(this)))return;this._name||(this._name="<unlabeled transaction>");let{scope:e,isolationScope:t}=e6(this),n=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(!0!==this._sampled)return;let r=tu(this).filter(e=>e!==this&&!(e instanceof rl&&e.isStandaloneSpan())).map(e=>tr(e)).filter(rc),i=this._attributes[eD];delete this._attributes[ez],r.forEach(e=>{delete e.data[ez]});let a={contexts:{trace:function(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:a,status:s,origin:o,links:l}=tr(e);return{parent_span_id:a,span_id:t,trace_id:n,data:r,op:i,status:s,origin:o,links:l}}(this)},spans:r.length>1e3?r.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):r,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,dynamicSamplingContext:tg(this)},request:n,...i&&{transaction_info:{source:i}}},s=ro(this._events);return s&&Object.keys(s).length&&(a.measurements=s),a}}function ru(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function rc(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}let rd="__SENTRY_SUPPRESS_TRACING__";function rh(e){let t=eM(E());if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=rm(e),{forceTransaction:r,parentSpan:i}=e;return(e.scope?t=>ew(e.scope,t):void 0!==i?e=>rp(i,e):e=>e())(()=>{let t=eT(),a=rv(t,i);return e.onlyIfParent&&!a?new rs:rf({parentSpan:a,spanArguments:n,forceTransaction:r,scope:t})})}function rp(e,t){let n=eM(E());return n.withActiveSpan?n.withActiveSpan(e,t):ew(n=>(ev(n,e||void 0),t(n)))}function rf({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){var i;let a;if(!e0()){let r=new rs;if(n||!e){let e={sampled:"false",sample_rate:"0",transaction:t.name,...tg(r)};Q(r,tp,e)}return r}let s=eA();if(e&&!n)a=function(e,t,n){let{spanId:r,traceId:i}=e.spanContext(),a=!t.getScopeData().sdkProcessingMetadata[rd]&&ti(e),s=a?new rl({...n,parentSpanId:r,traceId:i,sampled:a}):new rs({traceId:i});tl(e,s);let o=eC();return o&&(o.emit("spanStart",s),n.endTimestamp&&o.emit("spanEnd",s)),s}(e,r,t),tl(e,a);else if(e){let n=tg(e),{traceId:i,spanId:s}=e.spanContext(),o=ti(e);Q(a=rg({traceId:i,parentSpanId:s,...t},r,o),tp,n)}else{let{traceId:e,dsc:n,parentSpanId:i,sampled:o}={...s.getPropagationContext(),...r.getPropagationContext()};a=rg({traceId:e,parentSpanId:i,...t},r,o),n&&Q(a,tp,n)}return(i=a)&&(Q(i,e2,function(e){try{let t=b.WeakRef;if("function"==typeof t)return new t(e)}catch{}return e}(s)),Q(i,e3,r)),a}function rm(e){let t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let n={...t};return n.startTimestamp=tt(e.startTime),delete n.startTime,n}return t}function rg(e,t,n){let r=eC(),i=r?.getOptions()||{},{name:a=""}=e,s={spanAttributes:{...e.attributes},spanName:a,parentSampled:n};r?.emit("beforeSampling",s,{decision:!1});let o=s.parentSampled??n,l=s.spanAttributes,u=t.getPropagationContext(),[c,d,h]=t.getScopeData().sdkProcessingMetadata[rd]?[!1]:function(e,t,n){let r,i;if(!e0(e))return[!1];"function"==typeof e.tracesSampler?(r=e.tracesSampler({...t,inheritOrSampleWith:e=>"number"==typeof t.parentSampleRate?t.parentSampleRate:"boolean"==typeof t.parentSampled?Number(t.parentSampled):e}),i=!0):void 0!==t.parentSampled?r=t.parentSampled:void 0!==e.tracesSampleRate&&(r=e.tracesSampleRate,i=!0);let a=e7(r);return void 0===a?[!1]:a?[n<a,a,i]:[!1,a,i]}(i,{name:a,parentSampled:o,attributes:l,parentSampleRate:e7(u.dsc?.sample_rate)},u.sampleRand),p=new rl({...e,attributes:{[eD]:"custom",[eO]:void 0!==d&&h?d:void 0,...l},sampled:c});return!c&&r&&r.recordDroppedEvent("sample_rate","transaction"),r&&r.emit("spanStart",p),p}function rv(e,t){if(t)return t;if(null===t)return;let n=e[eg];if(!n)return;let r=eC();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?tc(n):n}let r_={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function ry(e,t={}){let n;let r=new Map,i=!1,a="externalFinish",s=!t.disableAutoFinish,o=[],{idleTimeout:l=r_.idleTimeout,finalTimeout:u=r_.finalTimeout,childSpanTimeout:c=r_.childSpanTimeout,beforeSpanEnd:d,trimIdleSpanEndTimestamp:h=!0}=t,p=eC();if(!p||!e0()){let e=new rs,t={sample_rate:"0",sampled:"false",...tg(e)};return Q(e,tp,t),e}let f=eT(),m=td(),g=function(e){let t=rh(e);return ev(eT(),t),t}(e);function v(){n&&(clearTimeout(n),n=void 0)}function _(e){v(),n=setTimeout(()=>{!i&&0===r.size&&s&&(a="idleTimeout",g.end(e))},l)}function y(e){n=setTimeout(()=>{!i&&s&&(a="heartbeatFailed",g.end(e))},c)}function x(e){i=!0,r.clear(),o.forEach(e=>e()),ev(f,m);let t=tr(g),{start_timestamp:n}=t;if(!n)return;t.data[ek]||g.setAttribute(ek,a),P.log(`[Tracing] Idle span "${t.op}" finished`);let s=tu(g).filter(e=>e!==g),c=0;s.forEach(t=>{t.isRecording()&&(t.setStatus({code:2,message:"cancelled"}),t.end(e));let{timestamp:n=0,start_timestamp:r=0}=tr(t),i=r<=e;(!(n-r<=(u+l)/1e3)||!i)&&(g[ts]&&g[ts].delete(t),c++)}),c>0&&g.setAttribute("sentry.idle_span_discarded_spans",c)}return g.end=new Proxy(g.end,{apply(e,t,n){if(d&&d(g),t instanceof rs)return;let[r,...i]=n,a=tt(r||ed()),s=tu(g).filter(e=>e!==g),o=tr(g);if(!s.length||!h)return x(a),Reflect.apply(e,t,[a,...i]);let l=p.getOptions().ignoreSpans,c=s?.reduce((e,t)=>{let n=tr(t);return!n.timestamp||l&&tJ(n,l)?e:e?Math.max(e,n.timestamp):n.timestamp},void 0),f=o.start_timestamp,m=Math.min(f?f+u/1e3:1/0,Math.max(f||-1/0,Math.min(a,c||1/0)));return x(m),Reflect.apply(e,t,[m,...i])}}),o.push(p.on("spanStart",e=>{if(!(i||e===g||tr(e).timestamp||e instanceof rl&&e.isStandaloneSpan())&&tu(g).includes(e)){var t;t=e.spanContext().spanId,v(),r.set(t,!0),y(ed()+c/1e3)}})),o.push(p.on("spanEnd",e=>{var t;i||(t=e.spanContext().spanId,r.has(t)&&r.delete(t),0===r.size&&_(ed()+l/1e3))})),o.push(p.on("idleSpanEnableAutoFinish",e=>{e===g&&(s=!0,_(),r.size&&y())})),t.disableAutoFinish||_(),setTimeout(()=>{i||(g.setStatus({code:2,message:"deadline_exceeded"}),a="finalTimeout",g.end())},u),g}let rx=!1,rb=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",rS=(e,t,n,r)=>{let i,a;return s=>{t.value>=0&&(s||r)&&((a=t.value-(i??0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=rb(t.value,n),e(t))}},rE=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,rM=(e=!0)=>{let t=b.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},rT=()=>{let e=rM();return e?.activationStart??0},rA=(e,t=-1)=>{let n=rM(),r="navigate";return n&&(b.document?.prerendering||rT()>0?r="prerender":b.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:rE(),navigationType:r}},rw=new WeakMap;function rC(e,t){return rw.get(e)||rw.set(e,new t),rw.get(e)}class rP{constructor(){rP.prototype.__init.call(this),rP.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){if(e.hadRecentInput)return;let t=this._sessionEntries[0],n=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),this._onAfterProcessingUnexpectedShift?.(e)}}let rR=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},rI=e=>{let t=!1;return()=>{t||(e(),t=!0)}},rL=-1,rD=()=>b.document?.visibilityState!=="hidden"||b.document?.prerendering?1/0:0,rO=e=>{"hidden"===b.document.visibilityState&&rL>-1&&(rL="visibilitychange"===e.type?e.timeStamp:0,rU())},rN=()=>{addEventListener("visibilitychange",rO,!0),addEventListener("prerenderingchange",rO,!0)},rU=()=>{removeEventListener("visibilitychange",rO,!0),removeEventListener("prerenderingchange",rO,!0)},rF=()=>{if(b.document&&rL<0){let e=rT();rL=(b.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(t=>"hidden"===t.name&&t.startTime>e)[0]?.startTime)??rD(),rN()}return{get firstHiddenTime(){return rL}}},rk=e=>{b.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},rB=[1800,3e3],rV=(e,t={})=>{rk(()=>{let n;let r=rF(),i=rA("FCP"),a=rR("paint",e=>{for(let t of e)"first-contentful-paint"===t.name&&(a.disconnect(),t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-rT(),0),i.entries.push(t),n(!0)))});a&&(n=rS(e,i,rB,t.reportAllChanges))})},rz=[.1,.25],rj=(e,t={})=>{rV(rI(()=>{let n;let r=rA("CLS",0),i=rC(t,rP),a=e=>{for(let t of e)i._processEntry(t);i._sessionValue>r.value&&(r.value=i._sessionValue,r.entries=i._sessionEntries,n())},s=rR("layout-shift",a);s&&(n=rS(e,r,rz,t.reportAllChanges),b.document?.addEventListener("visibilitychange",()=>{b.document?.visibilityState==="hidden"&&(a(s.takeRecords()),n(!0))}),b?.setTimeout?.(n))}))},rH=0,rG=1/0,rW=0,rq=e=>{e.forEach(e=>{e.interactionId&&(rG=Math.min(rG,e.interactionId),rH=(rW=Math.max(rW,e.interactionId))?(rW-rG)/7+1:0)})},rX=()=>p?rH:performance.interactionCount||0,r$=()=>{"interactionCount"in performance||p||(p=rR("event",rq,{type:"event",buffered:!0,durationThreshold:0}))},rY=0,rK=()=>rX()-rY;class rZ{constructor(){rZ.prototype.__init.call(this),rZ.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){rY=rX(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){let e=Math.min(this._longestInteractionList.length-1,Math.floor(rK()/50));return this._longestInteractionList[e]}_processEntry(e){if(this._onBeforeProcessingEntry?.(e),!(e.interactionId||"first-input"===e.entryType))return;let t=this._longestInteractionList.at(-1),n=this._longestInteractionMap.get(e.interactionId);if(n||this._longestInteractionList.length<10||e.duration>t._latency){if(n?e.duration>n._latency?(n.entries=[e],n._latency=e.duration):e.duration===n._latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(n.id,n),this._longestInteractionList.push(n)),this._longestInteractionList.sort((e,t)=>t._latency-e._latency),this._longestInteractionList.length>10)for(let e of this._longestInteractionList.splice(10))this._longestInteractionMap.delete(e.id);this._onAfterProcessingINPCandidate?.(n)}}}let rJ=e=>{let t=t=>{("pagehide"===t.type||b.document?.visibilityState==="hidden")&&e(t)};b.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},rQ=e=>{let t=b.requestIdleCallback||b.setTimeout;b.document?.visibilityState==="hidden"?e():(t(e=rI(e)),rJ(e))},r0=[200,500],r1=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&rk(()=>{let n;r$();let r=rA("INP"),i=rC(t,rZ),a=e=>{rQ(()=>{for(let t of e)i._processEntry(t);let t=i._estimateP98LongestInteraction();t&&t._latency!==r.value&&(r.value=t._latency,r.entries=t.entries,n())})},s=rR("event",a,{durationThreshold:t.durationThreshold??40});n=rS(e,r,r0,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),rJ(()=>{a(s.takeRecords()),n(!0)}))})};class r3{_processEntry(e){this._onBeforeProcessingEntry?.(e)}}let r2=[2500,4e3],r6=(e,t={})=>{rk(()=>{let n;let r=rF(),i=rA("LCP"),a=rC(t,r3),s=e=>{for(let s of(t.reportAllChanges||(e=e.slice(-1)),e))a._processEntry(s),s.startTime<r.firstHiddenTime&&(i.value=Math.max(s.startTime-rT(),0),i.entries=[s],n())},o=rR("largest-contentful-paint",s);if(o){n=rS(e,i,r2,t.reportAllChanges);let r=rI(()=>{s(o.takeRecords()),o.disconnect(),n(!0)});for(let e of["keydown","click","visibilitychange"])b.document&&addEventListener(e,()=>rQ(r),{capture:!0,once:!0})}})},r7=[800,1800],r4=e=>{b.document?.prerendering?rk(()=>r4(e)):b.document?.readyState!=="complete"?addEventListener("load",()=>r4(e),!0):setTimeout(e)},r5=(e,t={})=>{let n=rA("TTFB"),r=rS(e,n,r7,t.reportAllChanges);r4(()=>{let e=rM();e&&(n.value=Math.max(e.responseStart-rT(),0),n.entries=[e],r(!0))})},r8={},r9={};function ie(e,t=!1){return iu("cls",e,ia,f,t)}function it(e,t=!1){return iu("lcp",e,is,m,t)}function ir(e,t){return ic(e,t),r9[e]||(function(e){let t={};"event"===e&&(t.durationThreshold=0),rR(e,t=>{ii(e,{entries:t})},t)}(e),r9[e]=!0),id(e,t)}function ii(e,t){let n=r8[e];if(n?.length)for(let e of n)try{e(t)}catch(e){}}function ia(){return rj(e=>{ii("cls",{metric:e}),f=e},{reportAllChanges:!0})}function is(){return r6(e=>{ii("lcp",{metric:e}),m=e},{reportAllChanges:!0})}function io(){return r5(e=>{ii("ttfb",{metric:e}),g=e})}function il(){return r1(e=>{ii("inp",{metric:e}),v=e})}function iu(e,t,n,r,i=!1){let a;return ic(e,t),r9[e]||(a=n(),r9[e]=!0),r&&t({metric:r}),id(e,t,i?a:void 0)}function ic(e,t){r8[e]=r8[e]||[],r8[e].push(t)}function id(e,t,n){return()=>{n&&n();let r=r8[e];if(!r)return;let i=r.indexOf(t);-1!==i&&r.splice(i,1)}}function ih(e){return"number"==typeof e&&isFinite(e)}function ip(e,t,n,{...r}){let i=tr(e).start_timestamp;return i&&i>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),rp(e,()=>{let e=rh({startTime:t,...r});return e&&e.end(n),e})}function im(e){let t;let n=eC();if(!n)return;let{name:r,transaction:i,attributes:a,startTime:s}=e,{release:o,environment:l,sendDefaultPii:u}=n.getOptions(),c=n.getIntegrationByName("Replay"),d=c?.getReplayId(),h=eT(),p=h.getUser(),f=void 0!==p?p.email||p.id||p.ip_address:void 0;try{t=h.getScopeData().contexts.profile.profile_id}catch{}return rh({name:r,attributes:{release:o,environment:l,user:f||void 0,profile_id:t||void 0,replay_id:d||void 0,transaction:i,"user_agent.original":b.navigator?.userAgent,"client.address":u?"{{auto}}":void 0,...a},startTime:s,experimental:{standalone:!0}})}function ig(){return b.addEventListener&&b.performance}function iv(e){return e/1e3}function i_(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function iy(e,t){let n;let r=!1;function i(e){!r&&n&&t(e,n),r=!0}rJ(()=>{i("pagehide")});let a=e.on("beforeStartNavigationSpan",(e,t)=>{t?.isRedirect||(i("navigation"),a(),s())}),s=e.on("afterStartPageLoadSpan",e=>{n=e.spanContext().spanId,s()})}function ix(e){return e?((eh()||performance.timeOrigin)+e)/1e3:e}function ib(e){let t={};if(void 0!=e.nextHopProtocol){let{name:n,version:r}=function(e){let t="unknown",n="unknown",r="";for(let i of e){if("/"===i){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=i}return r===e&&(t=r),{name:t,version:n}}(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return eh()||ig()?.timeOrigin?Object.fromEntries(Object.entries({...t,"http.request.redirect_start":ix(e.redirectStart),"http.request.redirect_end":ix(e.redirectEnd),"http.request.worker_start":ix(e.workerStart),"http.request.fetch_start":ix(e.fetchStart),"http.request.domain_lookup_start":ix(e.domainLookupStart),"http.request.domain_lookup_end":ix(e.domainLookupEnd),"http.request.connect_start":ix(e.connectStart),"http.request.secure_connection_start":ix(e.secureConnectionStart),"http.request.connection_end":ix(e.connectEnd),"http.request.request_start":ix(e.requestStart),"http.request.response_start":ix(e.responseStart),"http.request.response_end":ix(e.responseEnd),"http.request.time_to_first_byte":null!=e.responseStart?e.responseStart/1e3:void 0}).filter(([,e])=>null!=e)):t}let iS=0,iE={};function iM(e,t,n,r,i=n){let a=t["secureConnection"===n?"connectEnd":"fetch"===n?"domainLookupStart":`${n}End`],s=t[`${n}Start`];s&&a&&ip(e,r+iv(s),r+iv(a),{op:`browser.${i}`,name:t.name,attributes:{[eF]:"auto.ui.browser.metrics",..."redirect"===n&&null!=t.redirectCount?{"http.redirect_count":t.redirectCount}:{}}})}let iT=[],iA=new Map,iw={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"},iC=({metric:e})=>{if(void 0==e.value)return;let t=iv(e.value);if(t>60)return;let n=e.entries.find(t=>t.duration===e.value&&iw[t.name]);if(!n)return;let{interactionId:r}=n,i=iw[n.name],a=iv(eh()+n.startTime),s=td(),o=s?tc(s):void 0,l=(null!=r?iA.get(r):void 0)||o,u=l?tr(l).description:eT().getScopeData().transactionName,c=im({name:W(n.target),transaction:u,attributes:{[eF]:"auto.http.browser.inp",[eU]:`ui.interaction.${i}`,[eH]:n.duration},startTime:a});c&&(c.addEvent("inp",{[eB]:"millisecond",[eV]:e.value}),c.end(a+t))},iP=({entries:e})=>{let t=td(),n=t?tc(t):void 0,r=n?tr(n).description:eT().getScopeData().transactionName;e.forEach(e=>{if(!e.identifier)return;let t=e.name,n=e.renderTime,i=e.loadTime,[a,s]=i?[iv(i),"load-time"]:n?[iv(n),"render-time"]:[ed(),"entry-emission"],o="image-paint"===t?iv(Math.max(0,(n??0)-(i??0))):0,l={[eF]:"auto.ui.browser.elementtiming",[eU]:"ui.elementtiming",[eD]:"component","sentry.span_start_time_source":s,"sentry.transaction_name":r,"element.id":e.id,"element.type":e.element?.tagName?.toLowerCase()||"unknown","element.size":e.naturalWidth&&e.naturalHeight?`${e.naturalWidth}x${e.naturalHeight}`:void 0,"element.render_time":n,"element.load_time":i,"element.url":e.url||void 0,"element.identifier":e.identifier,"element.paint_type":t};!function(e,t){let n=eM(E());if(n.startSpan)return n.startSpan(e,t);let r=rm(e),{forceTransaction:i,parentSpan:a,scope:s}=e;ew(s?.clone(),()=>(void 0!==a?e=>rp(a,e):e=>e())(()=>{let n=eT(),s=rv(n,a),o=e.onlyIfParent&&!s?new rs:rf({parentSpan:s,spanArguments:r,forceTransaction:i,scope:n});return ev(n,o),function(e,t,n=()=>{},r=()=>{}){var i;let a;try{a=e()}catch(e){throw t(e),n(),e}return z(i=a)?i.then(e=>(n(),r(e),e),e=>{throw t(e),n(),e}):(n(),r(i),i)}(()=>t(o),()=>{let{status:e}=tr(o);o.isRecording()&&(!e||"ok"===e)&&o.setStatus({code:2,message:"internal_error"})},()=>{o.end()})}))}({name:`element[${e.identifier}]`,attributes:l,startTime:a,onlyIfParent:!0},e=>{e.end(a+o)})})},iR="sentry_previous_trace";function iI(e){return 1===e.traceFlags}function iL(e={}){let t=e.client||eC();if(!function(){let e=eC();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}()||!t)return{};let n=eM(E());if(n.getTraceData)return n.getTraceData(e);let r=e.scope||eT(),i=e.span||td(),a=i?function(e){let{traceId:t,spanId:n}=e.spanContext();return e5(t,n,ti(e))}(i):function(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return e5(t,r,n)}(r),s=function(e){if(e)return function(e){if(0!==Object.keys(e).length)return Object.entries(e).reduce((e,[t,n],r)=>{let i=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,a=0===r?i:`${e},${i}`;return a.length>8192?e:a},"")}(Object.entries(e).reduce((e,[t,n])=>(n&&(e[`${eG}${t}`]=n),e),{}))}(i?tg(i):tm(t,r));if(!e4.test(a))return P.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let o={"sentry-trace":a,baggage:s};if(e.propagateTraceparent){let e=i?function(e){let{traceId:t,spanId:n}=e.spanContext();return e8(t,n,ti(e))}(i):function(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return e8(t,r,n)}(r);e&&(o.traceparent=e)}return o}function iD(e){return e.split(",").some(e=>e.trim().startsWith(eG))}let iO=new WeakMap,iN=new Map,iU={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function iF(e){let{url:t}=tr(e).data;if(!t||"string"!=typeof t)return;let n=ir("resource",({entries:r})=>{r.forEach(r=>{"resource"===r.entryType&&"initiatorType"in r&&"string"==typeof r.nextHopProtocol&&("fetch"===r.initiatorType||"xmlhttprequest"===r.initiatorType)&&r.name.endsWith(t)&&(e.setAttributes(ib(r)),setTimeout(n))})})}function ik(e){try{return new URL(e,b.location.origin).href}catch{return}}let iB={...r_,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...iU},iV=(e={})=>{let t,n,r;let i={name:void 0,source:void 0},a=b.document,{enableInp:s,enableElementTiming:o,enableLongTask:l,enableLongAnimationFrame:u,_experiments:{enableInteractions:c,enableStandaloneClsSpans:d,enableStandaloneLcpSpans:h},beforeStartSpan:p,idleTimeout:f,finalTimeout:m,childSpanTimeout:x,markBackgroundSpan:S,traceFetch:E,traceXHR:M,trackFetchStreamPerformance:T,shouldCreateSpanForRequest:A,enableHTTPTimings:w,ignoreResourceSpans:C,ignorePerformanceApiSpans:P,instrumentPageLoad:R,instrumentNavigation:I,detectRedirects:L,linkPreviousTrace:D,consistentTraceSampling:O,enableReportPageLoaded:N,onRequestSpanStart:U}={...iB,...e};function F(e,n,s=!0){let o="pageload"===n.op,l=n.name,u=p?p(n):n,c=u.attributes||{};if(l!==u.name&&(c[eD]="custom",u.attributes=c),!s){let e=ec();rh({...u,startTime:e}).end(e);return}i.name=u.name,i.source=c[eD];let g=ry(u,{idleTimeout:f,finalTimeout:m,childSpanTimeout:x,disableAutoFinish:o,beforeSpanEnd:n=>{t?.(),function(e,t){let n=ig(),r=eh();if(!n?.getEntries||!r)return;let i=iv(r),a=n.getEntries(),{op:s,start_timestamp:o}=tr(e);a.slice(iS).forEach(n=>{let r=iv(n.startTime),a=iv(Math.max(0,n.duration));if("navigation"!==s||!o||!(i+r<o))switch(n.entryType){case"navigation":["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(t=>{iM(e,n,t,i)}),iM(e,n,"secureConnection",i,"TLS/SSL"),iM(e,n,"fetch",i,"cache"),iM(e,n,"domainLookup",i,"DNS"),function(e,t,n){let r=n+iv(t.requestStart),i=n+iv(t.responseEnd),a=n+iv(t.responseStart);t.responseEnd&&(ip(e,r,i,{op:"browser.request",name:t.name,attributes:{[eF]:"auto.ui.browser.metrics"}}),ip(e,a,i,{op:"browser.response",name:t.name,attributes:{[eF]:"auto.ui.browser.metrics"}}))}(e,n,i);break;case"mark":case"paint":case"measure":{(function(e,t,n,r,i,a){if(["mark","measure"].includes(t.entryType)&&Z(t.name,a))return;let s=rM(!1),o=i+Math.max(n,iv(s?s.requestStart:0)),l=i+n,u=l+r,c={[eF]:"auto.resource.browser.metrics"};o!==l&&(c["sentry.browser.measure_happened_before_request"]=!0,c["sentry.browser.measure_start_time"]=o),function(e,t){try{let n=t.detail;if(!n)return;if("object"==typeof n){for(let[t,r]of Object.entries(n))if(r&&k(r))e[`sentry.browser.measure.detail.${t}`]=r;else if(void 0!==r)try{e[`sentry.browser.measure.detail.${t}`]=JSON.stringify(r)}catch{}return}if(k(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}(c,t),o<=u&&ip(e,o,u,{name:t.name,op:t.entryType,attributes:c})})(e,n,r,a,i,t.ignorePerformanceApiSpans);let s=rF(),o=n.startTime<s.firstHiddenTime;"first-paint"===n.name&&o&&(iE.fp={value:n.startTime,unit:"millisecond"}),"first-contentful-paint"===n.name&&o&&(iE.fcp={value:n.startTime,unit:"millisecond"});break}case"resource":(function(e,t,n,r,i,a,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;let o=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(s?.includes(o))return;let l={[eF]:"auto.resource.browser.metrics"},u=nw(n);u.protocol&&(l["url.scheme"]=u.protocol.split(":").pop()),u.host&&(l["server.address"]=u.host),l["url.same_origin"]=n.includes(b.location.origin),function(e,t,n){n.forEach(([n,r])=>{let i=e[n];null!=i&&("number"==typeof i&&i<0x7fffffff||"string"==typeof i)&&(t[r]=i)})}(t,l,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);let c={...l,...ib(t)},d=a+r;ip(e,d,d+i,{name:n.replace(b.location.origin,""),op:o,attributes:c})})(e,n,n.name,r,a,i,t.ignoreResourceSpans)}}),iS=Math.max(a.length-1,0),function(e){let t=b.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),ih(n.rtt)&&(iE["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ih(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),ih(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===s&&(function(e){let t=rM(!1);if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(iE),t.recordClsOnPageloadSpan||delete iE.cls,t.recordLcpOnPageloadSpan||delete iE.lcp,Object.entries(iE).forEach(([e,t])=>{!function(e,t,n,r=td()){let i=r&&tc(r);i&&i.addEvent(e,{[eV]:t,[eB]:n})}(e,t.value,t.unit)}),e.setAttribute("performance.timeOrigin",i),e.setAttribute("performance.activationStart",rT()),_&&t.recordLcpOnPageloadSpan&&(_.element&&e.setAttribute("lcp.element",W(_.element)),_.id&&e.setAttribute("lcp.id",_.id),_.url&&e.setAttribute("lcp.url",_.url.trim().slice(0,200)),null!=_.loadTime&&e.setAttribute("lcp.loadTime",_.loadTime),null!=_.renderTime&&e.setAttribute("lcp.renderTime",_.renderTime),e.setAttribute("lcp.size",_.size)),y?.sources&&t.recordClsOnPageloadSpan&&y.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,W(t.node)))),_=void 0,y=void 0,iE={}}(n,{recordClsOnPageloadSpan:!d,recordLcpOnPageloadSpan:!h,ignoreResourceSpans:C,ignorePerformanceApiSpans:P}),Q(e,iG,void 0);let i=eT(),a=i.getPropagationContext();i.setPropagationContext({...a,traceId:g.spanContext().traceId,sampled:ti(g),dsc:tg(n)}),o&&(r=void 0)},trimIdleSpanEndTimestamp:!N});function v(){a&&["interactive","complete"].includes(a.readyState)&&e.emit("idleSpanEnableAutoFinish",g)}o&&N&&(r=g),Q(e,iG,g),o&&!N&&a&&(a.addEventListener("readystatechange",()=>{v()}),v())}return{name:"BrowserTracing",setup(e){if(!function(){rx||(e.tag="sentry_tracingErrorCallback",rx=!0,nG(e),nX(e));function e(){let e=td(),t=e&&tc(e);t&&t.setStatus({code:2,message:"internal_error"})}}(),t=function({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){let r=ig();if(r&&eh()){r.mark&&b.performance.mark("sentry-tracing-init");let i=t?function(e){let t,n=0;if(!i_("largest-contentful-paint"))return;let r=it(({metric:e})=>{let r=e.entries[e.entries.length-1];r&&(n=e.value,t=r)},!0);iy(e,(e,i)=>{(function(e,t,n,r){let i=iv((eh()||0)+(t?.startTime||0)),a=eT().getScopeData().transactionName,s=t?W(t.element):"Largest contentful paint",o={[eF]:"auto.http.browser.lcp",[eU]:"ui.webvital.lcp",[eH]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(o["lcp.element"]=W(t.element)),t.id&&(o["lcp.id"]=t.id),t.url&&(o["lcp.url"]=t.url.trim().slice(0,200)),null!=t.loadTime&&(o["lcp.loadTime"]=t.loadTime),null!=t.renderTime&&(o["lcp.renderTime"]=t.renderTime),null!=t.size&&(o["lcp.size"]=t.size));let l=im({name:s,transaction:a,attributes:o,startTime:i});l&&(l.addEvent("lcp",{[eB]:"millisecond",[eV]:e}),l.end(i))})(n,t,i,e),r()})}(n):it(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(iE.lcp={value:e.value,unit:"millisecond"},_=t)},!0),a=iu("ttfb",({metric:e})=>{e.entries[e.entries.length-1]&&(iE.ttfb={value:e.value,unit:"millisecond"})},io,g),s=e?function(e){let t,n=0;if(!i_("layout-shift"))return;let r=ie(({metric:e})=>{let r=e.entries[e.entries.length-1];r&&(n=e.value,t=r)},!0);iy(e,(e,i)=>{(function(e,t,n,r){let i=t?iv((eh()||0)+t.startTime):ed(),a=eT().getScopeData().transactionName,s=t?W(t.sources[0]?.node):"Layout shift",o={[eF]:"auto.http.browser.cls",[eU]:"ui.webvital.cls",[eH]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((e,t)=>{o[`cls.source.${t+1}`]=W(e.node)});let l=im({name:s,transaction:a,attributes:o,startTime:i});l&&(l.addEvent("cls",{[eB]:"",[eV]:e}),l.end(i))})(n,t,i,e),r()})}(n):ie(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(iE.cls={value:e.value,unit:""},y=t)},!0);return()=>{i?.(),a(),s?.()}}return()=>void 0}({recordClsStandaloneSpans:d||!1,recordLcpStandaloneSpans:h||!1,client:e}),s&&function(){if(ig()&&eh()){let e=iu("inp",iC,il,v)}}(),o&&ig()&&eh()&&ir("element",iP),u&&b.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver(e=>{let t=td();if(t)for(let n of e.getEntries()){if(!n.scripts[0])continue;let e=iv(eh()+n.startTime),{start_timestamp:r,op:i}=tr(t);if("navigation"===i&&r&&e<r)continue;let a=iv(n.duration),s={[eF]:"auto.ui.browser.metrics"},{invoker:o,invokerType:l,sourceURL:u,sourceFunctionName:c,sourceCharPosition:d}=n.scripts[0];s["browser.script.invoker"]=o,s["browser.script.invoker_type"]=l,u&&(s["code.filepath"]=u),c&&(s["code.function"]=c),-1!==d&&(s["browser.script.source_char_position"]=d),ip(t,e,e+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:s})}}).observe({type:"long-animation-frame",buffered:!0}):l&&ir("longtask",({entries:e})=>{let t=td();if(!t)return;let{op:n,start_timestamp:r}=tr(t);for(let i of e){let e=iv(eh()+i.startTime),a=iv(i.duration);"navigation"===n&&r&&e<r||ip(t,e,e+a,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[eF]:"auto.ui.browser.metrics"}})}}),c&&ir("event",({entries:e})=>{let t=td();if(t){for(let n of e)if("click"===n.name){let e=iv(eh()+n.startTime),r=iv(n.duration),i={name:W(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[eF]:"auto.ui.browser.metrics"}},a=X(n.target);a&&(i.attributes["ui.component_name"]=a),ip(t,e,e+r,i)}}}),L&&a){let e=()=>{n=ed()};addEventListener("click",e,{capture:!0}),addEventListener("keydown",e,{capture:!0,passive:!0})}function i(){let t=e[iG];t&&!tr(t).timestamp&&(t.setAttribute(ek,"cancelled"),t.end())}e.on("startNavigationSpan",(t,r)=>{if(eC()!==e)return;if(r?.isRedirect){F(e,{op:"navigation.redirect",...t},!1);return}n=void 0,i(),eA().setPropagationContext({traceId:ea(),sampleRand:Math.random(),propagationSpanId:e0()?void 0:em()});let a=eT();a.setPropagationContext({traceId:ea(),sampleRand:Math.random(),propagationSpanId:e0()?void 0:em()}),a.setSDKProcessingMetadata({normalizedRequest:void 0}),F(e,{op:"navigation",...t,parentSpan:null,forceTransaction:!0})}),e.on("startPageLoadSpan",(t,n={})=>{if(eC()!==e)return;i();let r=function(e,t){let n=function(e){let t;if(!e)return;let n=e.match(e4);if(n)return"1"===n[3]?t=!0:"0"===n[3]&&(t=!1),{traceId:n[1],parentSampled:t,parentSpanId:n[2]}}(e),r=eq(t);if(!n?.traceId)return{traceId:ea(),sampleRand:Math.random()};let i=function(e,t){let n=e7(t?.sample_rand);if(void 0!==n)return n;let r=e7(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}(n,r);r&&(r.sample_rand=i.toString());let{traceId:a,parentSpanId:s,parentSampled:o}=n;return{traceId:a,parentSpanId:s,sampled:o,dsc:r||{},sampleRand:i}}(n.sentryTrace||iH("sentry-trace"),n.baggage||iH("baggage")),a=eT();a.setPropagationContext(r),e0()||(a.getPropagationContext().propagationSpanId=em()),a.setSDKProcessingMetadata({normalizedRequest:nl()}),F(e,{op:"pageload",...t})}),e.on("endPageloadSpan",()=>{N&&r&&(r.setAttribute(ek,"reportPageLoaded"),r.end())})},afterAllSetup(e){let t,r=q();if("off"!==D&&function(e,{linkPreviousTrace:t,consistentTraceSampling:n}){let r="session-storage"===t,i=r?function(){try{let e=b.sessionStorage?.getItem(iR);return JSON.parse(e)}catch{return}}():void 0;e.on("spanStart",e=>{if(tc(e)!==e)return;let t=eT().getPropagationContext();i=function(e,t,n){let r=tr(t),i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:function(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[eO])}catch{return 0}}(),sampleRand:n.sampleRand};if(!e)return i;let a=e.spanContext;return a.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=3600&&(t.addLink({context:a,attributes:{"sentry.link.type":"previous_trace"}}),t.setAttribute("sentry.previous_trace",`${a.traceId}-${a.spanId}-${iI(a)?1:0}`)),i)}(i,e,t),r&&function(e){try{b.sessionStorage.setItem(iR,JSON.stringify(e))}catch(e){}}(i)});let a=!0;n&&e.on("beforeSampling",e=>{if(!i)return;let t=eT(),n=t.getPropagationContext();if(a&&n.parentSpanId){a=!1;return}t.setPropagationContext({...n,dsc:{...n.dsc,sample_rate:String(i.sampleRate),sampled:String(iI(i.spanContext))},sampleRand:i.sampleRand}),e.parentSampled=iI(i.spanContext),e.parentSampleRate=i.sampleRate,e.spanAttributes={...e.spanAttributes,[eN]:i.sampleRate}})}(e,{linkPreviousTrace:D,consistentTraceSampling:O}),b.location){if(R){let t=eh();iz(e,{name:b.location.pathname,startTime:t?t/1e3:void 0,attributes:{[eD]:"url",[eF]:"auto.pageload.browser"}})}I&&nO(({to:t,from:i})=>{if(void 0===i&&r?.indexOf(t)!==-1){r=void 0;return}r=void 0;let a=nA(t),s=e[iG],o=s&&L&&function(e,t){let n=tr(e),r=ec();return!(r-n.start_timestamp>1.5)&&(!t||!(r-t<=1.5))}(s,n);ij(e,{name:a?.pathname||b.location.pathname,attributes:{[eD]:"url",[eF]:"auto.navigation.browser"}},{url:t,isRedirect:o})})}S&&b.document&&b.document.addEventListener("visibilitychange",()=>{let e=td();if(!e)return;let t=tc(e);if(b.document.hidden&&t){let{op:e,status:n}=tr(t);n||t.setStatus({code:2,message:"cancelled"}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}),c&&b.document&&addEventListener("click",()=>{let n=e[iG];!(n&&["navigation","pageload"].includes(tr(n).op))&&(t&&(t.setAttribute(ek,"interactionInterrupted"),t.end(),t=void 0),i.name&&(t=ry({name:i.name,op:"ui.action.click",attributes:{[eD]:i.source||"url"}},{idleTimeout:f,finalTimeout:m,childSpanTimeout:x})))},{capture:!0}),s&&function(){let e=({entries:e})=>{let t=td(),n=t&&tc(t);e.forEach(e=>{if(!("duration"in e)||!n)return;let t=e.interactionId;if(!(null==t||iA.has(t))){if(iT.length>10){let e=iT.shift();iA.delete(e)}iT.push(t),iA.set(t,n)}})};ir("event",e),ir("first-input",e)}(),function(e,t){let{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:i,shouldCreateSpanForRequest:a,enableHTTPTimings:s,tracePropagationTargets:o,onRequestSpanStart:l}={...iU,...t},u="function"==typeof a?a:e=>!0,c=e=>(function(e,t){let n=q();if(n){let r,i;try{r=new URL(e,n),i=new URL(n).origin}catch{return!1}let a=r.origin===i;return t?Z(r.toString(),t)||a&&Z(r.pathname,t):a}{let n=!!e.match(/^\/(?!\/)/);return t?Z(e,t):n}})(e,o),d={},h=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(e=>("transaction"===e.type&&e.spans&&e.spans.forEach(e=>{if("http.client"===e.op){let t=iN.get(e.span_id);t&&(e.timestamp=t/1e3,iN.delete(e.span_id))}}),e)),i&&function(e){let t="fetch-body-resolved";nh(t,e),np(t,()=>n_(nx))}(e=>{if(e.response){let t=iO.get(e.response);t&&e.endTimestamp&&iN.set(t,e.endTimestamp)}}),nv(e=>{let t=function(e,t,n,r,i){if(!e.fetchData)return;let{method:a,url:s}=e.fetchData,o=e0()&&t(s);if(e.endTimestamp&&o){let t=e.fetchData.__span;if(!t)return;let n=r[t];n&&(function(e,t){if(t.response){e1(e,t.response.status);let n=t.response?.headers?.get("content-length");if(n){let t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}(n,e),delete r[t]);return}let{spanOrigin:l="auto.http.browser",propagateTraceparent:u=!1}="object"==typeof i?i:{spanOrigin:i},c=!!td(),d=o&&c?rh(function(e,t,n){let r=nA(e);return{name:r?`${t} ${function(e){if(nT(e))return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}(r)}`:t,attributes:function(e,t,n,r){let i={url:e,type:"fetch","http.method":n,[eF]:r,[eU]:"http.client"};return t&&(nT(t)||(i["http.url"]=t.href,i["server.address"]=t.host),t.search&&(i["http.query"]=t.search),t.hash&&(i["http.fragment"]=t.hash)),i}(e,r,t,n)}}(s,a,l)):new rs;if(e.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(e.fetchData.url)){let t=e.args[0],n=e.args[1]||{},r=function(e,t,n,r){let i=iL({span:n,propagateTraceparent:r}),a=i["sentry-trace"],s=i.baggage,o=i.traceparent;if(!a)return;let l=t.headers||(G(e)?e.headers:void 0);if(!l)return{...i};if("undefined"!=typeof Headers&&j(l,Headers)){let e=new Headers(l);if(e.get("sentry-trace")||e.set("sentry-trace",a),r&&o&&!e.get("traceparent")&&e.set("traceparent",o),s){let t=e.get("baggage");t?iD(t)||e.set("baggage",`${t},${s}`):e.set("baggage",s)}return e}if(Array.isArray(l)){let e=[...l];l.find(e=>"sentry-trace"===e[0])||e.push(["sentry-trace",a]),r&&o&&!l.find(e=>"traceparent"===e[0])&&e.push(["traceparent",o]);let t=l.find(e=>"baggage"===e[0]&&iD(e[1]));return s&&!t&&e.push(["baggage",s]),e}{let e="sentry-trace"in l?l["sentry-trace"]:void 0,t="traceparent"in l?l.traceparent:void 0,n="baggage"in l?l.baggage:void 0,i=n?Array.isArray(n)?[...n]:[n]:[],u=n&&(Array.isArray(n)?n.find(e=>iD(e)):iD(n));s&&!u&&i.push(s);let c={...l,"sentry-trace":e??a,baggage:i.length>0?i.join(","):void 0};return r&&o&&!t&&(c.traceparent=o),c}}(t,n,e0()&&c?d:void 0,u);r&&(e.args[1]=n,n.headers=r)}let h=eC();if(h){let t={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};h.emit("beforeOutgoingRequestSpan",d,t)}return d}(e,u,c,d,{propagateTraceparent:h});if(e.response&&e.fetchData.__span&&iO.set(e.response,e.fetchData.__span),t){let n=ik(e.fetchData.url),r=n?nw(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r}),s&&iF(t),l?.(t,{headers:e.headers})}})),r&&nL(e=>{let t=function(e,t,n,r,i){let a=e.xhr,s=a?.[nI];if(!a||a.__sentry_own_request__||!s)return;let{url:o,method:l}=s,u=e0()&&t(o);if(e.endTimestamp&&u){let e=a.__sentry_xhr_span_id__;if(!e)return;let t=r[e];t&&void 0!==s.status_code&&(e1(t,s.status_code),t.end(),delete r[e]);return}let c=ik(o),d=c?nw(c):nw(o),h=nC(o),p=!!td(),f=u&&p?rh({name:`${l} ${h}`,attributes:{url:o,type:"xhr","http.method":l,"http.url":c,"server.address":d?.host,[eF]:"auto.http.browser",[eU]:"http.client",...d?.search&&{"http.query":d?.search},...d?.hash&&{"http.fragment":d?.hash}}}):new rs;a.__sentry_xhr_span_id__=f.spanContext().spanId,r[a.__sentry_xhr_span_id__]=f,n(o)&&function(e,t,n){let{"sentry-trace":r,baggage:i,traceparent:a}=iL({span:t,propagateTraceparent:n});r&&function(e,t,n,r){let i=e.__sentry_xhr_v3__?.request_headers;if(!i?.["sentry-trace"]&&e.setRequestHeader)try{if(e.setRequestHeader("sentry-trace",t),r&&!i?.traceparent&&e.setRequestHeader("traceparent",r),n){let t=i?.baggage;t&&t.split(",").some(e=>e.trim().startsWith("sentry-"))||e.setRequestHeader("baggage",n)}}catch{}}(e,r,i,a)}(a,e0()&&p?f:void 0,i);let m=eC();return m&&m.emit("beforeOutgoingRequestSpan",f,e),f}(e,u,c,d,h);if(t){let n;s&&iF(t);try{n=new Headers(e.xhr.__sentry_xhr_v3__?.request_headers)}catch{}l?.(t,{headers:n})}})}(e,{traceFetch:E,traceXHR:M,trackFetchStreamPerformance:T,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:A,enableHTTPTimings:w,onRequestSpanStart:U})}}};function iz(e,t,n){e.emit("startPageLoadSpan",t,n),eT().setTransactionName(t.name);let r=e[iG];return r&&e.emit("afterStartPageLoadSpan",r),r}function ij(e,t,n){let{url:r,isRedirect:i}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:i}),e.emit("startNavigationSpan",t,{isRedirect:i});let a=eT();return a.setTransactionName(t.name),r&&!i&&a.setSDKProcessingMetadata({normalizedRequest:{...nl(),url:r}}),e[iG]}function iH(e){let t=b.document,n=t?.querySelector(`meta[name=${e}]`);return n?.getAttribute("content")||void 0}let iG="_sentry_idleSpan",iW=null,iq=new Map,iX=new Map;function i$(e){let t=e.split("/").filter(Boolean),n=0;for(let e of t)if(e.startsWith(":")){let t=e.substring(1);t.endsWith("*?")?n+=1e3:t.endsWith("*")?n+=100:n+=10}return n}let iY=e=>{let t=function(){if(!b?._sentryRouteManifest||"string"!=typeof b._sentryRouteManifest)return null;let e=b._sentryRouteManifest;if(iW&&x===e)return iW;iq.clear(),iX.clear();let t={staticRoutes:[],dynamicRoutes:[]};try{if(t=JSON.parse(e),!Array.isArray(t.staticRoutes)||!Array.isArray(t.dynamicRoutes))return null;return iW=t,x=e,t}catch{return null}}();if(!t)return;if(iX.has(e))return iX.get(e);let{staticRoutes:n,dynamicRoutes:r}=t;if(!Array.isArray(n)||!Array.isArray(r))return;let i=(function(e,t,n){let r=[];if(t.some(t=>t.path===e))return r;for(let t of n)if(t.regex){let n=function(e){if(iq.has(e))return iq.get(e)??null;try{let t=new RegExp(e);return iq.set(e,t),t}catch(e){return null}}(t.regex);n?.test(e)&&r.push(t.path)}return r})(e,n,r).sort((e,t)=>i$(e)-i$(t))[0];return iX.set(e,i),i},iK="incomplete-app-router-transaction",iZ="router-patch",iJ={current:void 0};function iQ(e){try{return new URL(e,"http://example.com/").pathname}catch{return"/"}}let i0=new WeakSet;function i1(e,t,n){i0.has(t)||(i0.add(t),["back","forward","push","replace"].forEach(r=>{t?.[r]&&(t[r]=new Proxy(t[r],{apply(t,i,a){if("router-patch"!==iZ)return t.apply(i,a);let s=iK,o={[eU]:"navigation",[eF]:"auto.navigation.nextjs.app_router_instrumentation",[eD]:"url"};"push"===r?(s=iQ(a[0]),o["navigation.type"]="router.push"):"replace"===r?(s=iQ(a[0]),o["navigation.type"]="router.replace"):"back"===r?o["navigation.type"]="router.back":"forward"===r&&(o["navigation.type"]="router.forward");let l=iY(s);return n.current=ij(e,{name:l??s,attributes:{...o,[eD]:l?"route":"url"}}),t.apply(i,a)}}))}))}var i3=n(86715);let i2=i3.events?i3:i3.default,i6=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function i7(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:"/";i&&(t=`${i}/${t}`,n="/"===i.charAt(0))}return t=(function(e,t){let n=0;for(let t=e.length-1;t>=0;t--){let r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e})(t.split("/").filter(e=>!!e),!n).join("/"),(n?"/":"")+t||"."}function i4(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}let i5=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in b&&!!b.window,i=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let i=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),a=/^\//.test(r.filename);if(e){if(t){let e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(i||a){let e;let a=i?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,s=t?function(e,t){e=i7(e).slice(1),t=i7(t).slice(1);let n=i4(e.split("/")),r=i4(t.split("/")),i=Math.min(n.length,r.length),a=i;for(let e=0;e<i;e++)if(n[e]!==r[e]){a=e;break}let s=[];for(let e=a;e<n.length;e++)s.push("..");return(s=s.concat(r.slice(a))).join("/")}(t,a):function(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=i6.exec(t);return n?n.slice(1):[]}(a)[2]||"";r.filename=`${n}${s}`}return r}}({isBrowser:r,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map(e=>{var t;return{...e,...e.stacktrace&&{stacktrace:{...t=e.stacktrace,frames:t?.frames?.map(e=>i(e))}}}})}}}catch{return e}}(t)),t}}},i8=({assetPrefix:e,basePath:t,rewriteFramesAssetPrefixPath:n,experimentalThirdPartyOriginStackFrames:r})=>({...i5({iteratee:i=>{if(r){let n="undefined"!=typeof window&&window.location?window.location.origin:"";if(i.filename?.startsWith(n)&&!i.filename.endsWith(".js"))return i;if(e)i.filename?.startsWith(e)&&(i.filename=i.filename.replace(e,"app://"));else if(t)try{let{origin:e}=new URL(i.filename);e===n&&(i.filename=i.filename?.replace(e,"app://").replace(t,""))}catch{}}else try{let{origin:e}=new URL(i.filename);i.filename=i.filename?.replace(e,"app://").replace(n,"")}catch{}return r?(i.filename?.includes("/_next")&&(i.filename=decodeURI(i.filename)),i.filename?.match(/\/_next\/static\/chunks\/(main-|main-app-|polyfills-|webpack-|framework-|framework\.)[0-9a-f]+\.js$/)&&(i.in_app=!1)):(i.filename?.startsWith("app:///_next")&&(i.filename=decodeURI(i.filename)),i.filename?.match(/^app:\/\/\/_next\/static\/chunks\/(main-|main-app-|polyfills-|webpack-|framework-|framework\.)[0-9a-f]+\.js$/)&&(i.in_app=!1)),i}}),name:"NextjsClientStackFrameNormalization"});var i9=n(65606),ae=n(65606);let at=!1;globalThis._sentryRewritesTunnelPath=void 0,globalThis.SENTRY_RELEASE={id:"b298c4aebbd811e6714d5cb648b4ad142d6a0b0d"},globalThis._sentryBasePath=void 0,globalThis._sentryNextJsVersion="15.1.9",globalThis._sentryRewriteFramesAssetPrefixPath="",globalThis._sentryAssetPrefix=void 0,globalThis._sentryExperimentalThirdPartyOriginStackFrames=void 0,globalThis._sentryRouteManifest='{"dynamicRoutes":[],"staticRoutes":[]}',function(e){at&&C(()=>{console.warn("[@sentry/nextjs] You are calling `Sentry.init()` more than once on the client. This can happen if you have both a `sentry.client.config.ts` and a `instrumentation-client.ts` file with `Sentry.init()` calls. It is recommended to call `Sentry.init()` once in `instrumentation-client.ts`.")}),at=!0;let t={environment:function(e){let t=e?"production":ra.env.VERCEL_ENV;return t?`vercel-${t}`:void 0}(!0)||"production",defaultIntegrations:function(e){let t=rr(e);("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&t.push(function(e={}){let t=iV({...e,instrumentNavigation:!1,instrumentPageLoad:!1,onRequestSpanStart(...t){let[n,{headers:r}]=t;return r?.get("next-router-prefetch")&&n?.setAttribute("http.request.prefetch",!0),e.onRequestSpanStart?.(...t)}}),{instrumentPageLoad:n=!0,instrumentNavigation:r=!0}=e;return{...t,afterAllSetup(e){var i;if(r&&(i=e,b.document.getElementById("__NEXT_DATA__")?i2.events.on("routeChangeStart",e=>{let t,n;let r=nC(e),a=function(e){let t=b.__BUILD_MANIFEST?.sortedPages;if(t)return t.find(t=>{let n=function(e){let t=e.split("/"),n="";t[t.length-1]?.match(/^\[\[\.\.\..+\]\]$/)&&(t.pop(),n="(?:/(.+?))?");let r=t.map(e=>e.replace(/^\[\.\.\..+\]$/,"(.+?)").replace(/^\[.*\]$/,"([^/]+?)")).join("/");return RegExp(`^${r}${n}(?:/)?$`)}(t);return e.match(n)})}(r);a?(t=a,n="route"):(t=r,n="url"),ij(i,{name:t,attributes:{[eU]:"navigation",[eF]:"auto.navigation.nextjs.pages_router_instrumentation",[eD]:n}})}):function(e){(t,n)=>{let r=new URL(t,b.location.href).pathname,i=iY(r),a=i??r;"router-patch"===iZ&&(iZ="transition-start-hook");let s=iJ.current;s?(s.updateName(a),s.setAttributes({"navigation.type":`router.${n}`,[eD]:i?"route":"url"}),iJ.current=void 0):ij(e,{name:a,attributes:{[eU]:"navigation",[eF]:"auto.navigation.nextjs.app_router_instrumentation",[eD]:i?"route":"url","navigation.type":`router.${n}`}})},b.addEventListener("popstate",()=>{let t=iY(b.location.pathname);iJ.current?.isRecording()?(iJ.current.updateName(t??b.location.pathname),iJ.current.setAttribute(eD,t?"route":"url")):iJ.current=ij(e,{name:t??b.location.pathname,attributes:{[eF]:"auto.navigation.nextjs.app_router_instrumentation",[eD]:t?"route":"url","navigation.type":"browser.popstate"}})});let t=!1,n=0,r=setInterval(()=>{n++;let i=b?.next?.router??b?.nd?.router;t||n>500?clearInterval(r):i&&(clearInterval(r),t=!0,i1(e,i,iJ),["nd","next"].forEach(t=>{let n=b[t];n&&(b[t]=new Proxy(n,{set:(t,n,r)=>("router"===n&&"object"==typeof r&&null!==r&&i1(e,r,iJ),t[n]=r,!0)}))}))},20)}(i)),t.afterAllSetup(e),n)b.document.getElementById("__NEXT_DATA__")?function(e){let{route:t,params:n,sentryTrace:r,baggage:i}=function(){let e;let t=b.document.getElementById("__NEXT_DATA__");if(t?.innerHTML)try{e=JSON.parse(t.innerHTML)}catch{}if(!e)return{};let n={},{page:r,query:i,props:a}=e;return n.route=r,n.params=i,a?.pageProps&&(n.sentryTrace=a.pageProps._sentryTraceData,n.baggage=a.pageProps._sentryBaggage),n}(),a=eX(i),s=t||b.location.pathname;a?.["sentry-transaction"]&&"/_error"===s&&(s=(s=a["sentry-transaction"]).replace(/^(GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS|TRACE|CONNECT)\s+/i,""));let o=eh();iz(e,{name:s,startTime:o?o/1e3:void 0,attributes:{[eU]:"pageload",[eF]:"auto.pageload.nextjs.pages_router_instrumentation",[eD]:t?"route":"url",...n&&e.getOptions().sendDefaultPii&&{...n}}},{sentryTrace:r,baggage:i})}(e):function(e){let t=iY(b.location.pathname),n=eh();iz(e,{name:t??b.location.pathname,startTime:n?n/1e3:void 0,attributes:{[eU]:"pageload",[eF]:"auto.pageload.nextjs.app_router_instrumentation",[eD]:t?"route":"url"}})}(e)}}}());let n=b._sentryRewriteFramesAssetPrefixPath||"",r=ae.env._sentryAssetPrefix||b._sentryAssetPrefix,i=ae.env._sentryBasePath||b._sentryBasePath,a="true"===ae.env._experimentalThirdPartyOriginStackFrames||"true"===b._experimentalThirdPartyOriginStackFrames;return t.push(i8({assetPrefix:r,basePath:i,rewriteFramesAssetPrefixPath:n,experimentalThirdPartyOriginStackFrames:a})),t}(e),release:"b298c4aebbd811e6714d5cb648b4ad142d6a0b0d",...e};(function(e){let t=i9.env._sentryRewritesTunnelPath||b._sentryRewritesTunnelPath;if(t&&e.dsn){let n=eJ(e.dsn);if(!n)return;let r=n.host.match(/^o(\d+)\.ingest(?:\.([a-z]{2}))?\.sentry\.io$/);if(r){let i=r[1],a=r[2],s=`${t}?o=${i}&p=${n.projectId}`;a&&(s+=`&r=${a}`),e.tunnel=s}}})(t),R(t,"nextjs",["nextjs","react"]),function(e){var t,n;let r={...e};R(r,"react"),t="react",n={version:ri.version},eA().setContext(t,n),function(e={}){var t;let n=!e.skipBrowserExtensionCheck&&!!function(){if(void 0===b.window||b.nw)return!1;let e=b.chrome||b.browser;if(!e?.runtime?.id)return!1;let t=q();return!(b===b.top&&["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"].some(e=>t.startsWith(`${e}://`)))}();(function(e,t){!0===t.debug&&C(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}),eT().update(t.initialScope);let n=new e(t);eT().setClient(n),n.init()})(nu,{...e,enabled:!n&&e.enabled,stackParser:Array.isArray(t=e.stackParser||n8)?tb(...t):t,integrations:function(e){let t;let n=e.defaultIntegrations||[],r=e.integrations;if(n.forEach(e=>{e.isDefaultInstance=!0}),Array.isArray(r))t=[...n,...r];else if("function"==typeof r){let e=r(n);t=Array.isArray(e)?e:[e]}else t=n;return function(e){let t={};return e.forEach(e=>{let{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.values(t)}(t)}({integrations:e.integrations,defaultIntegrations:null==e.defaultIntegrations?rr():e.defaultIntegrations}),transport:e.transport||rn})}(r)}(t);let n=e=>"transaction"===e.type&&"/404"===e.transaction?null:e;n.id="NextClient404Filter",tC(n);let r=e=>"transaction"===e.type&&e.transaction===iK?null:e;r.id="IncompleteTransactionFilter",tC(r);let i=(e,t)=>{var n;return L(n=t?.originalException)&&"string"==typeof n.digest&&n.digest.startsWith("NEXT_REDIRECT;")||e.exception?.values?.[0]?.value==="NEXT_REDIRECT"?null:e};i.id="NextRedirectErrorFilter",tC(i)}({dsn:"https://98d559987cbc5c53b7e0766199527f52@o1089566.ingest.us.sentry.io/4510154021339136",tracesSampleRate:1,enableLogs:!0,debug:!1})},96247:(e,t,n)=>{"use strict";function r(){throw Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return r}}),n(33167).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},90958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{DynamicServerError:function(){return r},isDynamicServerError:function(){return i}});let n="DYNAMIC_SERVER_USAGE";class r extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=n}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===n}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},63750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ReadonlyURLSearchParams:function(){return l.ReadonlyURLSearchParams},RedirectType:function(){return l.RedirectType},ServerInsertedHTMLContext:function(){return c.ServerInsertedHTMLContext},forbidden:function(){return l.forbidden},notFound:function(){return l.notFound},permanentRedirect:function(){return l.permanentRedirect},redirect:function(){return l.redirect},unauthorized:function(){return l.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow},useParams:function(){return f},usePathname:function(){return h},useRouter:function(){return p},useSearchParams:function(){return d},useSelectedLayoutSegment:function(){return g},useSelectedLayoutSegments:function(){return m},useServerInsertedHTML:function(){return c.useServerInsertedHTML}});let r=n(96540),i=n(99258),a=n(18519),s=n(94365),o=n(70274),l=n(14531),u=n(88228),c=n(30465);function d(){let e=(0,r.useContext)(a.SearchParamsContext);return(0,r.useMemo)(()=>e?new l.ReadonlyURLSearchParams(e):null,[e])}function h(){return(0,u.useDynamicRouteParams)("usePathname()"),(0,r.useContext)(a.PathnameContext)}function p(){let e=(0,r.useContext)(i.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function f(){return(0,u.useDynamicRouteParams)("useParams()"),(0,r.useContext)(a.PathParamsContext)}function m(e){void 0===e&&(e="children"),(0,u.useDynamicRouteParams)("useSelectedLayoutSegments()");let t=(0,r.useContext)(i.LayoutRouterContext);return t?function e(t,n,r,i){let a;if(void 0===r&&(r=!0),void 0===i&&(i=[]),r)a=t[1][n];else{var l;let e=t[1];a=null!=(l=e.children)?l:Object.values(e)[0]}if(!a)return i;let u=a[0],c=(0,s.getSegmentValue)(u);return!c||c.startsWith(o.PAGE_SEGMENT_KEY)?i:(i.push(c),e(a,n,!1,i))}(t.tree,e):null}function g(e){void 0===e&&(e="children"),(0,u.useDynamicRouteParams)("useSelectedLayoutSegment()");let t=m(e);if(!t||0===t.length)return null;let n="children"===e?t[0]:t[t.length-1];return n===o.DEFAULT_SEGMENT_KEY?null:n}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ReadonlyURLSearchParams:function(){return c},RedirectType:function(){return i.RedirectType},forbidden:function(){return s.forbidden},notFound:function(){return a.notFound},permanentRedirect:function(){return r.permanentRedirect},redirect:function(){return r.redirect},unauthorized:function(){return o.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow}});let r=n(68600),i=n(58923),a=n(67966),s=n(96247),o=n(54730),l=n(48542);class u extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class c extends URLSearchParams{append(){throw new u}delete(){throw new u}set(){throw new u}sort(){throw new u}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},67966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return i}});let r=""+n(33167).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function i(){let e=Error(r);throw e.digest=r,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},68600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{getRedirectError:function(){return s},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return c},getURLFromRedirectError:function(){return u},permanentRedirect:function(){return l},redirect:function(){return o}});let r=n(47860),i=n(24357),a=n(58923);function s(e,t,n){void 0===n&&(n=i.RedirectStatusCode.TemporaryRedirect);let r=Error(a.REDIRECT_ERROR_CODE);return r.digest=a.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+n+";",r}function o(e,t){let n=r.actionAsyncStorage.getStore();throw s(e,t||((null==n?void 0:n.isAction)?a.RedirectType.push:a.RedirectType.replace),i.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t=a.RedirectType.replace),s(e,t,i.RedirectStatusCode.PermanentRedirect)}function u(e){return(0,a.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function c(e){if(!(0,a.isRedirectError)(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function d(e){if(!(0,a.isRedirectError)(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},94365:(e,t)=>{"use strict";function n(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},61480:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{StaticGenBailoutError:function(){return r},isStaticGenBailoutError:function(){return i}});let n="NEXT_STATIC_GEN_BAILOUT";class r extends Error{constructor(...e){super(...e),this.code=n}}function i(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===n}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},54730:(e,t,n)=>{"use strict";function r(){throw Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return r}}),n(33167).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},48542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,s.isNextRouterError)(t)||(0,a.isBailoutToCSRError)(t)||(0,r.isDynamicUsageError)(t)||(0,i.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let r=n(78837),i=n(89222),a=n(28431),s=n(87643);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},15157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return i}});let r=n(2063);function i(e,t,i,a){{let s=n(46405).normalizeLocalePath,o=n(18134).detectDomainLocale,l=t||s(e,i).detectedLocale,u=o(a,void 0,l);if(u){let t="http"+(u.http?"":"s")+"://",n=l===u.defaultLocale?"":"/"+l;return""+t+u.domain+(0,r.normalizePathTrailingSlash)(""+n+e)}return!1}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6397:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return y}});let r=n(87677),i=n(74848),a=r._(n(96540)),s=n(56847),o=n(27785),l=n(42772),u=n(1278),c=n(26185),d=n(47644),h=n(56334),p=n(15157),f=n(90296),m=n(1903),g=new Set;function v(e,t,n,r){if((0,o.isLocalURL)(t)){if(!r.bypassPrefetchedCheck){let i=t+"%"+n+"%"+(void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0);if(g.has(i))return;g.add(i)}e.prefetch(t,n,r).catch(e=>{})}}function _(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}let y=a.default.forwardRef(function(e,t){let n,r;let{href:l,as:g,children:y,prefetch:x=null,passHref:b,replace:S,shallow:E,scroll:M,locale:T,onClick:A,onMouseEnter:w,onTouchStart:C,legacyBehavior:P=!1,...R}=e;n=y,P&&("string"==typeof n||"number"==typeof n)&&(n=(0,i.jsx)("a",{children:n}));let I=a.default.useContext(d.RouterContext),L=!1!==x,{href:D,as:O}=a.default.useMemo(()=>{if(!I){let e=_(l);return{href:e,as:g?_(g):e}}let[e,t]=(0,s.resolveHref)(I,l,!0);return{href:e,as:g?(0,s.resolveHref)(I,g):t||e}},[I,l,g]),N=a.default.useRef(D),U=a.default.useRef(O);P&&(r=a.default.Children.only(n));let F=P?r&&"object"==typeof r&&r.ref:t,[k,B,V]=(0,h.useIntersection)({rootMargin:"200px"}),z=a.default.useCallback(e=>{(U.current!==O||N.current!==D)&&(V(),U.current=O,N.current=D),k(e)},[O,D,V,k]),j=(0,m.useMergedRef)(z,F);a.default.useEffect(()=>{I&&B&&L&&v(I,D,O,{locale:T})},[O,D,B,T,L,null==I?void 0:I.locale,I]);let H={ref:j,onClick(e){P||"function"!=typeof A||A(e),P&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),I&&!e.defaultPrevented&&function(e,t,n,r,i,a,s,l){let{nodeName:u}=e.currentTarget;"A"===u.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!(0,o.isLocalURL)(n))||(e.preventDefault(),(()=>{let e=null==s||s;"beforePopState"in t?t[i?"replace":"push"](n,r,{shallow:a,locale:l,scroll:e}):t[i?"replace":"push"](r||n,{scroll:e})})())}(e,I,D,O,S,E,M,T)},onMouseEnter(e){P||"function"!=typeof w||w(e),P&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),I&&v(I,D,O,{locale:T,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:function(e){P||"function"!=typeof C||C(e),P&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),I&&v(I,D,O,{locale:T,priority:!0,bypassPrefetchedCheck:!0})}};if((0,u.isAbsoluteUrl)(O))H.href=O;else if(!P||b||"a"===r.type&&!("href"in r.props)){let e=void 0!==T?T:null==I?void 0:I.locale,t=(null==I?void 0:I.isLocaleDomain)&&(0,p.getDomainLocale)(O,e,null==I?void 0:I.locales,null==I?void 0:I.domainLocales);H.href=t||(0,f.addBasePath)((0,c.addLocale)(O,e,null==I?void 0:I.defaultLocale))}return P?a.default.cloneElement(r,H):(0,i.jsx)("a",{...R,...H,children:n})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},46405:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return r}});let r=(e,t)=>n(14008).normalizeLocalePath(e,t);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},56334:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let r=n(96540),i=n(74959),a="function"==typeof IntersectionObserver,s=new Map,o=[];function l(e){let{rootRef:t,rootMargin:n,disabled:l}=e,u=l||!a,[c,d]=(0,r.useState)(!1),h=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{h.current=e},[]);return(0,r.useEffect)(()=>{if(a){if(u||c)return;let e=h.current;if(e&&e.tagName)return function(e,t,n){let{id:r,observer:i,elements:a}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=o.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=s.get(r)))return t;let i=new Map;return t={id:n,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e),elements:i},o.push(n),s.set(n,t),t}(n);return a.set(e,t),i.observe(e),function(){if(a.delete(e),i.unobserve(e),0===a.size){i.disconnect(),s.delete(r);let e=o.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&o.splice(e,1)}}}(e,e=>e&&d(e),{root:null==t?void 0:t.current,rootMargin:n})}else if(!c){let e=(0,i.requestIdleCallback)(()=>d(!0));return()=>(0,i.cancelIdleCallback)(e)}},[u,n,t,c,h.current]),[p,c,(0,r.useCallback)(()=>{d(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return i}});let r=n(96540);function i(e,t){let n=(0,r.useRef)(()=>{}),i=(0,r.useRef)(()=>{});return(0,r.useMemo)(()=>e&&t?r=>{null===r?(n.current(),i.current()):(n.current=a(e,r),i.current=a(t,r))}:e||t,[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let n=e(t);return"function"==typeof n?n:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},30465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ServerInsertedHTMLContext:function(){return i},useServerInsertedHTML:function(){return a}});let r=n(40544)._(n(96540)),i=r.default.createContext(null);function a(e){let t=(0,r.useContext)(i);t&&t(e)}},48039:(e,t,n)=>{"use strict";let r;n.r(t),n.d(t,{default:()=>o4});var i,a=n(74848),s=n(96540),o=n(73010),l=n(46942),u=n.n(l),c=n(86715),d=n.n(c);let h=(0,s.lazy)(()=>Promise.all([n.e(591),n.e(295),n.e(891),n.e(399),n.e(23)]).then(n.bind(n,59610)));function p(e){return(0,a.jsx)(s.Suspense,{fallback:null,children:(0,a.jsx)(h,{...e})})}function f(e){let t,n;if("string"!=typeof e.basePath)try{t=""}catch(e){console.error("Failed detecting basePath",e)}if("boolean"!=typeof e.trailingSlash)try{n=!1}catch(e){console.error("Failed detecting trailingSlash",e)}return(0,a.jsx)(p,{...e,basePath:e.basePath??t,trailingSlash:e.trailingSlash??n})}var m=n(33973),g=n(33974),v=n.n(g);let _=()=>{let[e,t]=(0,s.useState)(!1),n=(0,s.useRef)(null),r=n=>{if("KeyG"===n.code&&n.shiftKey){let n=!e;t(n),localStorage.setItem("grid-helper",n.toString())}};return(0,s.useEffect)(()=>{if(t("true"===localStorage.getItem("grid-helper")),n.current)return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[e]),(0,a.jsxs)("div",{ref:n,className:u()(v().gridHelper,{[v().visible]:e}),children:[(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol}),(0,a.jsx)("div",{className:v().gridHelperCol})]})};var y=n(5191),x=n.n(y);let b=e=>{let{className:t}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 84 10",className:u()(x().icon,t),children:(0,a.jsx)("path",{fill:"#0A0A0A",d:"M11.88 4.66c1.9-.42 3.34-1.68 3.24-3.17C15.02 0 12.52 0 12.52 0H4.58L0 9.99l7.77-.07c3.96.12 5.82-2.4 5.85-3.68.02-1.28-1.74-1.58-1.74-1.58ZM9.5 6.8c-.25.76-1.3 1.01-1.8 1.04l-2.68.06.93-2.08s2.38-.02 2.72.02c.35.03 1.08.2.83.96Zm1.3-3.92c-.23.67-.8.98-1.66 1.03-.86.05-2.3.05-2.3.05l.86-1.94s2.12 0 2.38.04c.26.04.96.16.73.82Zm10.38-.64 6.85.01L29.05.01H18.12l-4.6 9.97h10.96l1.02-2.22h-6.87l.92-2h6.34l.93-2.05H20.5l.68-1.47Zm61.13.01L83.33.01H72.4l-4.6 9.97h10.96l1.02-2.22h-6.87l.92-2h6.35l.92-2.05h-6.32l.68-1.47 6.85.01ZM39.59 6.7l-3.04-.81s-1.17 1.85-3.03 1.85c0 0-1.64.29-1.98-.79a.57.57 0 0 1-.03-.13c-.1-1.02 1.03-3.66 3.06-4.35 1.87-.66 2.98.12 2.9 1.14l3.75-.57S41.66.2 37.58.05c-4.09-.15-7.18 1.26-8.91 3.9-1.73 2.64-1.3 4.65.23 5.43 1.53.77 4.06.63 4.98.5.9-.12 3.31-.28 5.7-3.18ZM47.58.01l-9.56 9.97h4.15l1.37-1.65h4.63l-.1 1.66h4.22L52.01 0l-4.43.01Zm.6 6.21-2.86.02 3.09-3.52-.22 3.5ZM66.83.03l-2.56 5.5L61.93.02h-3.86l-4.62 9.97 3.84.02 2.52-5.46 2.4 5.45h3.88L70.68.03h-3.85Z"})})},S=e=>{let{className:t,light:n=!1,...r}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 14 14",width:"14",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,className:u()(x().icon,t),children:[(0,a.jsx)("circle",{cx:"7",cy:"7",r:"6",stroke:n?"#acacac":"#fff",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M13 7a6 6 0 1 1-6-6",stroke:n?"#fff":"#0D0D0D",strokeWidth:"2",children:(0,a.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 7 7",to:"360 7 7",dur:"1s",repeatCount:"indefinite"})})]})};var E=n(91106),M=n.n(E),T=n(43890),A=n(18875),w=n(60331),C=n(40068),P=n(61342);let R=(0,s.createContext)(null);function I(){let e=(0,s.useContext)(R);if(null==e)throw Error("Expected a cart line context but none was found");return e}function L({children:e,line:t}){return(0,a.jsx)(R.Provider,{value:t,children:e})}function D(e){let{as:t,onClick:n,defaultOnClick:r,children:i,buttonRef:o,...l}=e,u=(0,s.useCallback)(e=>{if(n){let t=n(e);if("boolean"==typeof t&&!1===t||(null==e?void 0:e.defaultPrevented))return}null==r||r(e)},[r,n]);return(0,a.jsx)(t||"button",{ref:o,onClick:u,...l,children:i})}function O(e){let[t,n]=(0,s.useState)(!1),{status:r,checkoutUrl:i}=(0,C._$)(),{children:o,...l}=e;return(0,s.useEffect)(()=>{t&&i&&"idle"===r&&(window.location.href=i)},[t,r,i]),(0,a.jsx)(D,{...l,disabled:t||l.disabled,onClick:()=>n(!0),children:o})}var N=n(88159),U=n(46004),F=n(5483),k=n(71522),B=n(22276),V=n(95882),z=n.n(V);let j=(0,s.forwardRef)((e,t)=>{let{className:n,children:r,onUpdate:i,vertical:o=!1,duration:l=.3,instant:c=!0,ease:d=B.a.sineEaseInOut,enabled:h=!0,...p}=e,f=(0,s.useRef)(!0),m=(0,s.useRef)(null),g=(0,U.d)(0),v=(0,U.d)(0);return(0,N.w)(m,()=>{if(!m.current)return;let e=o?m.current.offsetHeight:m.current.offsetWidth;e!==v.get()&&(v.set(e),f.current&&!c?g.set(e):(0,F.i)(g,e,{type:"tween",duration:0===e?.5*l:l,ease:d,onUpdate:i}),f.current=!1)}),(0,a.jsx)(k.P.div,{className:u()(z().wrapper,n,{[z().vertical]:o,[z().enabled]:h}),style:{[o?"height":"width"]:g},ref:t,...p,children:(0,a.jsx)("div",{className:z().inner,ref:m,children:r})})}),H=s.memo(j);var G=n(98189),W=n(24499),q=n(7965),X=n.n(q);function $(e){let{status:t,linesRemove:n,linesUpdate:r}=(0,C._$)(),i=I(),{children:o,adjust:l,onClick:u,...c}=e,d=(0,s.useCallback)(()=>{if("remove"===l){n([(null==i?void 0:i.id)??""]);return}let e="decrease"===l?((null==i?void 0:i.quantity)??0)-1:((null==i?void 0:i.quantity)??0)+1;if(e<=0){n([(null==i?void 0:i.id)??""]);return}r([{id:(null==i?void 0:i.id)??"",quantity:e,attributes:(null==i?void 0:i.attributes)??[]}])},[l,null==i?void 0:i.attributes,null==i?void 0:i.id,null==i?void 0:i.quantity,n,r]),h=c.disabled;return(0,a.jsx)(D,{...c,onClick:u,defaultOnClick:d,disabled:void 0!==h?h:"idle"!==t,children:o})}var Y=n(89004),K=n(68815),Z=n(32935),J=n.n(Z);let Q=s.memo(e=>{var t,n,r,i,o,l,c,d,h,p,f,m,g,v,_,y,x,b;let{className:S,lineProps:E,...A}=e,P=(0,w.fZ)(),R=I(),L=(0,C._$)(),[D,O]=(0,s.useState)(!1),N=(0,s.useMemo)(()=>{var e,t,n;let r=null===(n=R.merchandise)||void 0===n?void 0:null===(t=n.selectedOptions)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.value;return(null==r?void 0:r.toLowerCase())==="default title"?P("product.one-size"):r},[null===(t=R.merchandise)||void 0===t?void 0:t.selectedOptions]),U=(0,s.useMemo)(()=>{var e,t,n,r,i;let a=null===(n=R.merchandise)||void 0===n?void 0:null===(t=n.product)||void 0===t?void 0:null===(e=t.metafields)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.key)==="color-pattern");return(null==a?void 0:null===(i=a.references)||void 0===i?void 0:null===(r=i.nodes)||void 0===r?void 0:r.length)?a.references.nodes[0].field.value:null},[null===(r=R.merchandise)||void 0===r?void 0:null===(n=r.product)||void 0===n?void 0:n.metafields]);return R.merchandise&&R.merchandise.product?(0,a.jsxs)(k.P.div,{className:u()(J().wrapper,S),...E,...A,children:[(0,a.jsx)(M(),{href:T.A.product(null===(i=R.merchandise)||void 0===i?void 0:i.product.handle),children:(0,a.jsx)(Y.A,{className:J().image,ratio:((null===(l=R.merchandise)||void 0===l?void 0:null===(o=l.image)||void 0===o?void 0:o.width)||1)/((null===(d=R.merchandise)||void 0===d?void 0:null===(c=d.image)||void 0===c?void 0:c.height)||1),size:"10vw",src:null===(p=R.merchandise)||void 0===p?void 0:null===(h=p.image)||void 0===h?void 0:h.url,image:{src:null===(m=R.merchandise)||void 0===m?void 0:null===(f=m.image)||void 0===f?void 0:f.url,width:(null===(v=R.merchandise)||void 0===v?void 0:null===(g=v.image)||void 0===g?void 0:g.width)||0,height:(null===(y=R.merchandise)||void 0===y?void 0:null===(_=y.image)||void 0===_?void 0:_.height)||0}})}),(0,a.jsxs)("div",{className:J().content,children:[(0,a.jsxs)("div",{className:J().top,children:[(0,a.jsx)("h2",{className:J().title,children:null===(b=R.merchandise)||void 0===b?void 0:null===(x=b.product)||void 0===x?void 0:x.title}),(0,a.jsx)("span",{className:J().price,children:(0,a.jsx)(K.A,{item:R})})]}),(0,a.jsxs)("div",{className:J().bottom,children:[(0,a.jsxs)("h2",{className:J().size,children:[R.quantity," x ",N," ",U&&"/ ".concat(U)]}),(0,a.jsx)($,{as:"button",adjust:"remove",className:J().remove,disabled:"updating"===L.status,onMouseEnter:()=>{O(!0)},onMouseLeave:()=>{O(!1)},children:(0,a.jsx)(W.A,{shuffle:D,children:P("cart.remove")})})]})]})]}):(0,a.jsx)(a.Fragment,{})}),ee=(0,s.memo)(e=>{var t,n,r,i,l,c,d,h;let{className:p,...f}=e,{cartOpened:m}=(0,o.SF)(),g=(0,C._$)(),v=(0,w.fZ)(),_={lineProps:{...G.Jj}},[y,x]=(0,s.useState)(!1);return(0,a.jsxs)(H,{className:u()(X().wrapper,p,{[X().opened]:m}),...G.q3,animate:m?"animate":"exit",vertical:!0,...(0,G.Ik)(.1,.2),...f,children:[(0,a.jsx)("div",{className:X().list,children:(null===(t=g.lines)||void 0===t?void 0:t.length)?null===(n=g.lines)||void 0===n?void 0:n.map((e,t)=>e&&(0,a.jsx)(L,{line:e,children:(0,a.jsx)(Q,{..._})},t)):(0,a.jsx)("span",{className:X().empty,children:v("cart.empty")})}),g.lines&&g.lines.length>0&&(0,a.jsx)(k.P.div,{...G.Jj,children:(0,a.jsxs)(O,{className:X().checkout,onMouseEnter:()=>{x(!0)},onMouseLeave:()=>{x(!1)},children:[(0,a.jsx)(W.A,{shuffle:y,children:v("cart.checkout").toLocaleUpperCase()}),(0,a.jsxs)("span",{className:X().checkoutCost,children:[(null===(i=g.cost)||void 0===i?void 0:null===(r=i.totalAmount)||void 0===r?void 0:r.amount)&&parseFloat(null===(c=g.cost)||void 0===c?void 0:null===(l=c.totalAmount)||void 0===l?void 0:l.amount),"\xa0",null===(h=g.cost)||void 0===h?void 0:null===(d=h.totalAmount)||void 0===d?void 0:d.currencyCode]})]})})]})});var et=n(48322),en=n(68385),er=n(68572),ei=n(75449),ea=n(29852),es=n(54660),eo=n(52427),el=n.n(eo);let eu=s.memo(e=>{let{className:t,children:n,...r}=e;return(0,a.jsx)(k.P.div,{className:u()(el().wrapper,t),...G.q3,...r,...(0,G.yc)(.4,0),children:n})});var ec=n(40495),ed=n.n(ec);let eh=s.memo(e=>{var t,n;let{className:r,...i}=e,{setCartOpened:l,cartOpened:d,menuOpened:h,setMenuOpened:p}=(0,o.SF)(),{stories:f,products:m}=(0,er.fK)(),{mq:g}=(0,en.tS)(),{lastCollection:v}=(0,ea.r0)(),_=(0,w.fZ)(),y=(0,C._$)(),x=(0,c.useRouter)(),E=g.tabletPortrait?"top-right-bar":"top-left-bar",R=(0,et.hs)(E),I=g.tabletPortrait?H:"div",L=g.tabletPortrait?{vertical:!0}:{},D={contentProps:{...G.Jj},suffixProps:{...G.Jj}},O=h?"animate":"exit";return(0,s.useEffect)(()=>{h&&l(!1)},[h]),(0,s.useEffect)(()=>{d&&p(!1)},[d]),(0,a.jsxs)("header",{className:u()(ed().wrapper,r,{[ed().hasTunnel]:!!R,[ed().cartOpened]:d,[ed().menuOpened]:h}),...i,children:[(0,a.jsxs)("div",{className:ed().inner,children:[(0,a.jsxs)("div",{className:u()(ed().line,ed().top),children:[(0,a.jsx)(M(),{href:T.A.home(),className:ed().logoLink,scroll:!1,onClick:e=>{var t;e.preventDefault(),x.push(T.A.home()+"?collection=".concat(null==v?void 0:null===(t=v.slug)||void 0===t?void 0:t.current),T.A.home(),{scroll:!1})},children:(0,a.jsx)(b,{className:ed().logo})}),(0,a.jsx)(S,{className:ed().loader})]}),(0,a.jsxs)("div",{className:u()(ed().line,ed().menuLine),children:[(0,a.jsxs)(I,{className:ed().menu,initial:"exit",animate:O,...L,...(0,G.yc)(.1,.1),children:[(0,a.jsx)(A.A,{className:ed().button,suffix:P.A.padStart(null==m?void 0:m.length),href:T.A.products(),...D,children:_("pages.all")}),(null==f?void 0:null===(n=f[0])||void 0===n?void 0:null===(t=n.slug)||void 0===t?void 0:t.current)&&(0,a.jsx)(A.A,{className:ed().button,suffix:P.A.padStart(null==f?void 0:f.length),href:T.A.story(null==f?void 0:f[0].slug.current),...D,children:_("pages.stories")}),g.tabletPortrait&&(0,a.jsx)(et.dJ,{id:"top-left-bar"})]}),(0,a.jsx)("div",{className:ed().spacer}),(0,a.jsxs)("div",{className:ed().buttons,children:[(0,a.jsx)(A.A,{className:u()(ed().button,ed().menuButton),onClick:()=>p(e=>!e),children:_(h?"common.close":"common.menu")}),(0,a.jsx)(A.A,{className:u()(ed().button,ed().cartButton),suffix:P.A.padStart(y.totalQuantity||0),onClick:()=>l(e=>!e),children:_(d?"common.close":"common.cart")})]})]})]}),(0,a.jsx)(es.N,{children:d&&(0,a.jsx)(ee,{className:ed().cart})}),(0,a.jsx)(es.N,{children:(h||d)&&(0,a.jsx)(ei.A,{className:ed().overlay,onClick:()=>{p(!1),l(!1)}})}),(0,a.jsx)(k.P.div,{className:u()(ed().bottomBar),initial:"initial",animate:R?"animate":"initial",...G.AJ,custom:{invert:!0},children:(0,a.jsx)(et.AA,{id:E,component:eu,mode:"wait",initial:!1})},E)]})});var ep=n(13097),ef=n(48731),em=n(40191),eg=n.n(em);let ev=s.memo(e=>{var t,n;let{className:r,pageType:i}=e,{footer:o}=(0,er.fK)(),{mq:l}=(0,en.tS)(),c=(0,w.fZ)(),d=(0,s.useRef)(null),h=(0,s.useRef)(null),p=(0,s.useRef)(null),{scrollXProgress:f}=(0,ep.L)({container:l.tabletPortrait?h:void 0,offset:["start center","end end"]});(0,ef.L)(f,"change",e=>{var t,n;null===(t=d.current)||void 0===t||t.style.setProperty("--scroll-left-progress","".concat(100*e,"%")),null===(n=d.current)||void 0===n||n.style.setProperty("--scroll-right-progress","".concat(100-100*e,"%"))});let m="page"===i||"text-page"===i;return(0,a.jsxs)("div",{className:u()(eg().wrapper,r),children:[(0,a.jsx)(k.P.div,{className:u()(eg().manifesto,{[eg().fixed]:m}),ref:p,children:c("footer.manifesto")}),(0,a.jsx)("nav",{ref:d,className:u()(eg().bars,{[eg().fixed]:m}),children:l.tabletPortrait?(0,a.jsxs)(a.Fragment,{children:[o.email&&(0,a.jsx)("div",{className:u()(eg().bar,eg().left),children:(0,a.jsx)(A.A,{className:u()(eg().button,eg().email),href:"mailto:".concat(o.email),children:o.email})}),(0,a.jsxs)("div",{ref:h,className:u()(eg().bar,eg().right),children:[o.footerMenu.map((e,t)=>(0,a.jsx)(A.A,{className:eg().button,href:e.href,children:e.title},t)),null==o?void 0:null===(t=o.footerLinks)||void 0===t?void 0:t.map((e,t)=>(0,a.jsx)(A.A,{className:u()(eg().button),href:e.href,target:"_blank",children:e.title},t))]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:u()(eg().bar,eg().left),children:o.footerMenu.map((e,t)=>(0,a.jsx)(A.A,{className:eg().button,href:e.href,children:e.title},t))}),(0,a.jsxs)("div",{className:u()(eg().bar,eg().right),children:[(null==o?void 0:o.email)&&(0,a.jsx)(A.A,{className:u()(eg().button,eg().email),href:"mailto:".concat(o.email),children:o.email}),null==o?void 0:null===(n=o.footerLinks)||void 0===n?void 0:n.map((e,t)=>(0,a.jsx)(A.A,{className:u()(eg().button),href:e.href,target:"_blank",children:e.title},t))]})]})})]})});var e_=n(50467);let ey="srgb",ex="srgb-linear",eb="linear",eS="srgb",eE="300 es";class eM{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){let n=this._listeners;return void 0!==n&&void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){let n=this._listeners;if(void 0===n)return;let r=n[e];if(void 0!==r){let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){let t=this._listeners;if(void 0===t)return;let n=t[e.type];if(void 0!==n){e.target=this;let t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}let eT=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],eA=Math.PI/180,ew=180/Math.PI;function eC(){let e=0xffffffff*Math.random()|0,t=0xffffffff*Math.random()|0,n=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0;return(eT[255&e]+eT[e>>8&255]+eT[e>>16&255]+eT[e>>24&255]+"-"+eT[255&t]+eT[t>>8&255]+"-"+eT[t>>16&15|64]+eT[t>>24&255]+"-"+eT[63&n|128]+eT[n>>8&255]+"-"+eT[n>>16&255]+eT[n>>24&255]+eT[255&r]+eT[r>>8&255]+eT[r>>16&255]+eT[r>>24&255]).toLowerCase()}function eP(e,t,n){return Math.max(t,Math.min(n,e))}function eR(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/0xffffffff;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/0x7fffffff,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function eI(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(0xffffffff*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(0x7fffffff*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}class eL{constructor(e=0,t=0){eL.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=eP(this.x,e.x,t.x),this.y=eP(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=eP(this.x,e,t),this.y=eP(this.y,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(eP(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(eP(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class eD{constructor(e,t,n,r,i,a,s,o,l){eD.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l)}set(e,t,n,r,i,a,s,o,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=s,u[3]=t,u[4]=i,u[5]=o,u[6]=n,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],_=r[4],y=r[7],x=r[2],b=r[5],S=r[8];return i[0]=a*f+s*v+o*x,i[3]=a*m+s*_+o*b,i[6]=a*g+s*y+o*S,i[1]=l*f+u*v+c*x,i[4]=l*m+u*_+c*b,i[7]=l*g+u*y+c*S,i[2]=d*f+h*v+p*x,i[5]=d*m+h*_+p*b,i[8]=d*g+h*y+p*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-n*i*u+n*s*o+r*i*l-r*a*o}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=u*a-s*l,d=s*o-u*i,h=l*i-a*o,p=t*c+n*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);let f=1/p;return e[0]=c*f,e[1]=(r*l-u*n)*f,e[2]=(s*n-r*a)*f,e[3]=d*f,e[4]=(u*t-r*o)*f,e[5]=(r*i-s*t)*f,e[6]=h*f,e[7]=(n*o-l*t)*f,e[8]=(a*t-n*i)*f,this}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,s){let o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(eO.makeScale(e,t)),this}rotate(e){return this.premultiply(eO.makeRotation(-e)),this}translate(e,t){return this.premultiply(eO.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let eO=new eD;function eN(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function eU(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let eF={};function ek(e){e in eF||(eF[e]=!0,console.warn(e))}let eB=new eD().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),eV=new eD().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715),ez=function(){let e={enabled:!0,workingColorSpace:ex,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n&&(this.spaces[t].transfer===eS&&(e.r=ej(e.r),e.g=ej(e.g),e.b=ej(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===eS&&(e.r=eH(e.r),e.g=eH(e.g),e.b=eH(e.b))),e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return""===e?eb:this.spaces[e].transfer},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[ex]:{primaries:t,whitePoint:r,transfer:eb,toXYZ:eB,fromXYZ:eV,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:ey},outputColorSpaceConfig:{drawingBufferColorSpace:ey}},[ey]:{primaries:t,whitePoint:r,transfer:eS,toXYZ:eB,fromXYZ:eV,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:ey}}}),e}();function ej(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function eH(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class eG{static getDataURL(e){let t;if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===r&&(r=eU("canvas")),r.width=e.width,r.height=e.height;let n=r.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=r}return t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let t=eU("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*ej(i[e]/255);return n.putImageData(r,0,0),t}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*ej(t[e]/255)):t[e]=ej(t[e]);return{data:t,width:e.width,height:e.height}}}}let eW=0;class eq{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:eW++}),this.uuid=eC(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(eX(r[t].image)):e.push(eX(r[t]))}else e=eX(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function eX(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?eG.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let e$=0;class eY extends eM{constructor(e=eY.DEFAULT_IMAGE,t=eY.DEFAULT_MAPPING,n=1001,r=1001,i=1006,a=1008,s=1023,o=1009,l=eY.DEFAULT_ANISOTROPY,u=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:e$++}),this.uuid=eC(),this.name="",this.source=new eq(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new eL(0,0),this.repeat=new eL(1,1),this.center=new eL(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new eD,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}eY.DEFAULT_IMAGE=null,eY.DEFAULT_MAPPING=300,eY.DEFAULT_ANISOTROPY=1;class eK{constructor(e=0,t=0,n=0,r=1){eK.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;let a=e.elements,s=a[0],o=a[4],l=a[8],u=a[1],c=a[5],d=a[9],h=a[2],p=a[6],f=a[10];if(.01>Math.abs(o-u)&&.01>Math.abs(l-h)&&.01>Math.abs(d-p)){if(.1>Math.abs(o+u)&&.1>Math.abs(l+h)&&.1>Math.abs(d+p)&&.1>Math.abs(s+c+f-3))return this.set(1,0,0,0),this;t=Math.PI;let e=(s+1)/2,a=(c+1)/2,m=(f+1)/2,g=(o+u)/4,v=(l+h)/4,_=(d+p)/4;return e>a&&e>m?e<.01?(n=0,r=.707106781,i=.707106781):(r=g/(n=Math.sqrt(e)),i=v/n):a>m?a<.01?(n=.707106781,r=0,i=.707106781):(n=g/(r=Math.sqrt(a)),i=_/r):m<.01?(n=.707106781,r=.707106781,i=0):(n=v/(i=Math.sqrt(m)),r=_/i),this.set(n,r,i,t),this}let m=Math.sqrt((p-d)*(p-d)+(l-h)*(l-h)+(u-o)*(u-o));return .001>Math.abs(m)&&(m=1),this.x=(p-d)/m,this.y=(l-h)/m,this.z=(u-o)/m,this.w=Math.acos((s+c+f-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=eP(this.x,e.x,t.x),this.y=eP(this.y,e.y,t.y),this.z=eP(this.z,e.z,t.z),this.w=eP(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=eP(this.x,e,t),this.y=eP(this.y,e,t),this.z=eP(this.z,e,t),this.w=eP(this.w,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(eP(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class eZ extends eM{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new eK(0,0,e,t),this.scissorTest=!1,this.viewport=new eK(0,0,e,t);let r=new eY({width:e,height:t,depth:1},(n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:1006,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n)).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];let i=n.count;for(let e=0;e<i;e++)this.textures[e]=r.clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let t=Object.assign({},e.texture.image);return this.texture.source=new eq(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class eJ extends eZ{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class eQ extends eY{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class e0 extends eY{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class e1{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,s){let o=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],d=i[a+0],h=i[a+1],p=i[a+2],f=i[a+3];if(0===s){e[t+0]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(1===s){e[t+0]=d,e[t+1]=h,e[t+2]=p,e[t+3]=f;return}if(c!==f||o!==d||l!==h||u!==p){let e=1-s,t=o*d+l*h+u*p+c*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){let i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,s=Math.sin(s*a)/i}let i=s*n;if(o=o*e+d*i,l=l*e+h*i,u=u*e+p*i,c=c*e+f*i,e===1-s){let e=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=e,l*=e,u*=e,c*=e}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,a){let s=n[r],o=n[r+1],l=n[r+2],u=n[r+3],c=i[a],d=i[a+1],h=i[a+2],p=i[a+3];return e[t]=s*p+u*c+o*h-l*d,e[t+1]=o*p+u*d+l*c-s*h,e[t+2]=l*p+u*h+s*d-o*c,e[t+3]=u*p-s*c-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),u=s(r/2),c=s(i/2),d=o(n/2),h=o(r/2),p=o(i/2);switch(a){case"XYZ":this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p;break;case"YXZ":this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p;break;case"ZXY":this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p;break;case"ZYX":this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p;break;case"YZX":this._x=d*u*c+l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c-d*h*p;break;case"XZY":this._x=d*u*c-l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],l=t[2],u=t[6],c=t[10],d=n+s+c;if(d>0){let e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(u-o)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>s&&n>c){let e=2*Math.sqrt(1+n-s-c);this._w=(u-o)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(s>c){let e=2*Math.sqrt(1+s-n-c);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(o+u)/e}else{let e=2*Math.sqrt(1+c-n-s);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(o+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(eP(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+a*s+r*l-i*o,this._y=r*u+a*o+i*s-n*l,this._z=i*u+a*l+n*o-r*s,this._w=a*u-n*s-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,r=this._y,i=this._z,a=this._w,s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;let o=1-s*s;if(o<=Number.EPSILON){let e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}let l=Math.sqrt(o),u=Math.atan2(l,s),c=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=a*c+this._w*d,this._x=n*c+this._x*d,this._y=r*c+this._y*d,this._z=i*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class e3{constructor(e=0,t=0,n=0){e3.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(e6.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(e6.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*r-s*n),u=2*(s*t-i*r),c=2*(i*n-a*t);return this.x=t+o*l+a*c-s*u,this.y=n+o*u+s*l-i*c,this.z=r+o*c+i*u-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=eP(this.x,e.x,t.x),this.y=eP(this.y,e.y,t.y),this.z=eP(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=eP(this.x,e,t),this.y=eP(this.y,e,t),this.z=eP(this.z,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(eP(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return e2.copy(this).projectOnVector(e),this.sub(e2)}reflect(e){return this.sub(e2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(eP(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let e2=new e3,e6=new e1;class e7{constructor(e=new e3(Infinity,Infinity,Infinity),t=new e3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(e5.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(e5.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=e5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n){let r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,e5):e5.fromBufferAttribute(r,t),e5.applyMatrix4(e.matrixWorld),this.expandByPoint(e5);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),e8.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),e8.copy(n.boundingBox)),e8.applyMatrix4(e.matrixWorld),this.union(e8)}let r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,e5),e5.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ta),ts.subVectors(this.max,ta),e9.subVectors(e.a,ta),te.subVectors(e.b,ta),tt.subVectors(e.c,ta),tn.subVectors(te,e9),tr.subVectors(tt,te),ti.subVectors(e9,tt);let t=[0,-tn.z,tn.y,0,-tr.z,tr.y,0,-ti.z,ti.y,tn.z,0,-tn.x,tr.z,0,-tr.x,ti.z,0,-ti.x,-tn.y,tn.x,0,-tr.y,tr.x,0,-ti.y,ti.x,0];return!!(tu(t,e9,te,tt,ts)&&tu(t=[1,0,0,0,1,0,0,0,1],e9,te,tt,ts))&&(to.crossVectors(tn,tr),tu(t=[to.x,to.y,to.z],e9,te,tt,ts))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,e5).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(e5).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(e4[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),e4[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),e4[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),e4[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),e4[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),e4[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),e4[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),e4[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(e4)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let e4=[new e3,new e3,new e3,new e3,new e3,new e3,new e3,new e3],e5=new e3,e8=new e7,e9=new e3,te=new e3,tt=new e3,tn=new e3,tr=new e3,ti=new e3,ta=new e3,ts=new e3,to=new e3,tl=new e3;function tu(e,t,n,r,i){for(let a=0,s=e.length-3;a<=s;a+=3){tl.fromArray(e,a);let s=i.x*Math.abs(tl.x)+i.y*Math.abs(tl.y)+i.z*Math.abs(tl.z),o=t.dot(tl),l=n.dot(tl),u=r.dot(tl);if(Math.max(-Math.max(o,l,u),Math.min(o,l,u))>s)return!1}return!0}let tc=new e7,td=new e3,th=new e3;class tp{constructor(e=new e3,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):tc.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;td.subVectors(e,this.center);let t=td.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),n=(e-this.radius)*.5;this.center.addScaledVector(td,n/e),this.radius+=n}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(th.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(td.copy(e.center).add(th)),this.expandByPoint(td.copy(e.center).sub(th)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}let tf=new e3,tm=new e3,tg=new e3,tv=new e3,t_=new e3,ty=new e3,tx=new e3;class tb{constructor(e=new e3,t=new e3(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,tf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=tf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(tf.copy(this.origin).addScaledVector(this.direction,t),tf.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){let i,a,s,o;tm.copy(e).add(t).multiplyScalar(.5),tg.copy(t).sub(e).normalize(),tv.copy(this.origin).sub(tm);let l=.5*e.distanceTo(t),u=-this.direction.dot(tg),c=tv.dot(this.direction),d=-tv.dot(tg),h=tv.lengthSq(),p=Math.abs(1-u*u);if(p>0){if(i=u*d-c,a=u*c-d,o=l*p,i>=0){if(a>=-o){if(a<=o){let e=1/p;i*=e,a*=e,s=i*(i+u*a+2*c)+a*(u*i+a+2*d)+h}else s=-(i=Math.max(0,-(u*(a=l)+c)))*i+a*(a+2*d)+h}else s=-(i=Math.max(0,-(u*(a=-l)+c)))*i+a*(a+2*d)+h}else a<=-o?(a=(i=Math.max(0,-(-u*l+c)))>0?-l:Math.min(Math.max(-l,-d),l),s=-i*i+a*(a+2*d)+h):a<=o?(i=0,s=(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+h):(a=(i=Math.max(0,-(u*l+c)))>0?l:Math.min(Math.max(-l,-d),l),s=-i*i+a*(a+2*d)+h)}else a=u>0?-l:l,s=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*d)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(tm).addScaledVector(tg,a),s}intersectSphere(e,t){tf.subVectors(e.center,this.origin);let n=tf.dot(this.direction),r=tf.dot(tf)-n*n,i=e.radius*e.radius;if(r>i)return null;let a=Math.sqrt(i-r),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)}intersectBox(e,t){let n,r,i,a,s,o;let l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return(l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(i=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(i=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||i>r)?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(s=(e.min.z-d.z)*c,o=(e.max.z-d.z)*c):(s=(e.max.z-d.z)*c,o=(e.min.z-d.z)*c),n>o||s>r)?null:((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,tf)}intersectTriangle(e,t,n,r,i){let a;t_.subVectors(t,e),ty.subVectors(n,e),tx.crossVectors(t_,ty);let s=this.direction.dot(tx);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}tv.subVectors(this.origin,e);let o=a*this.direction.dot(ty.crossVectors(tv,ty));if(o<0)return null;let l=a*this.direction.dot(t_.cross(tv));if(l<0||o+l>s)return null;let u=-a*tv.dot(tx);return u<0?null:this.at(u/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class tS{constructor(e,t,n,r,i,a,s,o,l,u,c,d,h,p,f,m){tS.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l,u,c,d,h,p,f,m)}set(e,t,n,r,i,a,s,o,l,u,c,d,h,p,f,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tS().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/tE.setFromMatrixColumn(e,0).length(),i=1/tE.setFromMatrixColumn(e,1).length(),a=1/tE.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){let e=a*u,n=a*c,r=s*u,i=s*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*o}else if("YXZ"===e.order){let e=o*u,n=o*c,r=l*u,i=l*c;t[0]=e+i*s,t[4]=r*s-n,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=a*o}else if("ZXY"===e.order){let e=o*u,n=o*c,r=l*u,i=l*c;t[0]=e-i*s,t[4]=-a*c,t[8]=r+n*s,t[1]=n+r*s,t[5]=a*u,t[9]=i-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){let e=a*u,n=a*c,r=s*u,i=s*c;t[0]=o*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){let e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){let e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=a*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=s*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tT,e,tA)}lookAt(e,t,n){let r=this.elements;return tP.subVectors(e,t),0===tP.lengthSq()&&(tP.z=1),tP.normalize(),tw.crossVectors(n,tP),0===tw.lengthSq()&&(1===Math.abs(n.z)?tP.x+=1e-4:tP.z+=1e-4,tP.normalize(),tw.crossVectors(n,tP)),tw.normalize(),tC.crossVectors(tP,tw),r[0]=tw.x,r[4]=tC.x,r[8]=tP.x,r[1]=tw.y,r[5]=tC.y,r[9]=tP.y,r[2]=tw.z,r[6]=tC.z,r[10]=tP.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],_=n[7],y=n[11],x=n[15],b=r[0],S=r[4],E=r[8],M=r[12],T=r[1],A=r[5],w=r[9],C=r[13],P=r[2],R=r[6],I=r[10],L=r[14],D=r[3],O=r[7],N=r[11],U=r[15];return i[0]=a*b+s*T+o*P+l*D,i[4]=a*S+s*A+o*R+l*O,i[8]=a*E+s*w+o*I+l*N,i[12]=a*M+s*C+o*L+l*U,i[1]=u*b+c*T+d*P+h*D,i[5]=u*S+c*A+d*R+h*O,i[9]=u*E+c*w+d*I+h*N,i[13]=u*M+c*C+d*L+h*U,i[2]=p*b+f*T+m*P+g*D,i[6]=p*S+f*A+m*R+g*O,i[10]=p*E+f*w+m*I+g*N,i[14]=p*M+f*C+m*L+g*U,i[3]=v*b+_*T+y*P+x*D,i[7]=v*S+_*A+y*R+x*O,i[11]=v*E+_*w+y*I+x*N,i[15]=v*M+_*C+y*L+x*U,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14],p=e[3];return p*(+i*o*c-r*l*c-i*s*d+n*l*d+r*s*h-n*o*h)+e[7]*(+t*o*h-t*l*d+i*a*d-r*a*h+r*l*u-i*o*u)+e[11]*(+t*l*c-t*s*h-i*a*c+n*a*h+i*s*u-n*l*u)+e[15]*(-r*s*u-t*o*c+t*s*d+r*a*c-n*a*d+n*o*u)}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=c*m*l-f*d*l+f*o*h-s*m*h-c*o*g+s*d*g,_=p*d*l-u*m*l-p*o*h+a*m*h+u*o*g-a*d*g,y=u*f*l-p*c*l+p*s*h-a*f*h-u*s*g+a*c*g,x=p*c*o-u*f*o-p*s*d+a*f*d+u*s*m-a*c*m,b=t*v+n*_+r*y+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/b;return e[0]=v*S,e[1]=(f*d*i-c*m*i-f*r*h+n*m*h+c*r*g-n*d*g)*S,e[2]=(s*m*i-f*o*i+f*r*l-n*m*l-s*r*g+n*o*g)*S,e[3]=(c*o*i-s*d*i-c*r*l+n*d*l+s*r*h-n*o*h)*S,e[4]=_*S,e[5]=(u*m*i-p*d*i+p*r*h-t*m*h-u*r*g+t*d*g)*S,e[6]=(p*o*i-a*m*i-p*r*l+t*m*l+a*r*g-t*o*g)*S,e[7]=(a*d*i-u*o*i+u*r*l-t*d*l-a*r*h+t*o*h)*S,e[8]=y*S,e[9]=(p*c*i-u*f*i-p*n*h+t*f*h+u*n*g-t*c*g)*S,e[10]=(a*f*i-p*s*i+p*n*l-t*f*l-a*n*g+t*s*g)*S,e[11]=(u*s*i-a*c*i-u*n*l+t*c*l+a*n*h-t*s*h)*S,e[12]=x*S,e[13]=(u*f*r-p*c*r+p*n*d-t*f*d-u*n*m+t*c*m)*S,e[14]=(p*s*r-a*f*r-p*n*o+t*f*o+a*n*m-t*s*m)*S,e[15]=(a*c*r-u*s*r+u*n*o-t*c*o-a*n*d+t*s*d)*S,this}scale(e){let t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,l=i*a,u=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,u*s+n,u*o-r*a,0,l*o-r*s,u*o+r*a,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,i=t._x,a=t._y,s=t._z,o=t._w,l=i+i,u=a+a,c=s+s,d=i*l,h=i*u,p=i*c,f=a*u,m=a*c,g=s*c,v=o*l,_=o*u,y=o*c,x=n.x,b=n.y,S=n.z;return r[0]=(1-(f+g))*x,r[1]=(h+y)*x,r[2]=(p-_)*x,r[3]=0,r[4]=(h-y)*b,r[5]=(1-(d+g))*b,r[6]=(m+v)*b,r[7]=0,r[8]=(p+_)*S,r[9]=(m-v)*S,r[10]=(1-(d+f))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,i=tE.set(r[0],r[1],r[2]).length(),a=tE.set(r[4],r[5],r[6]).length(),s=tE.set(r[8],r[9],r[10]).length();0>this.determinant()&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],tM.copy(this);let o=1/i,l=1/a,u=1/s;return tM.elements[0]*=o,tM.elements[1]*=o,tM.elements[2]*=o,tM.elements[4]*=l,tM.elements[5]*=l,tM.elements[6]*=l,tM.elements[8]*=u,tM.elements[9]*=u,tM.elements[10]*=u,t.setFromRotationMatrix(tM),n.x=i,n.y=a,n.z=s,this}makePerspective(e,t,n,r,i,a,s=2e3){let o,l;let u=this.elements;if(2e3===s)o=-(a+i)/(a-i),l=-2*a*i/(a-i);else if(2001===s)o=-a/(a-i),l=-a*i/(a-i);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return u[0]=2*i/(t-e),u[4]=0,u[8]=(t+e)/(t-e),u[12]=0,u[1]=0,u[5]=2*i/(n-r),u[9]=(n+r)/(n-r),u[13]=0,u[2]=0,u[6]=0,u[10]=o,u[14]=l,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,i,a,s=2e3){let o,l;let u=this.elements,c=1/(t-e),d=1/(n-r),h=1/(a-i);if(2e3===s)o=(a+i)*h,l=-2*h;else if(2001===s)o=i*h,l=-1*h;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return u[0]=2*c,u[4]=0,u[8]=0,u[12]=-((t+e)*c),u[1]=0,u[5]=2*d,u[9]=0,u[13]=-((n+r)*d),u[2]=0,u[6]=0,u[10]=l,u[14]=-o,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}let tE=new e3,tM=new tS,tT=new e3(0,0,0),tA=new e3(1,1,1),tw=new e3,tC=new e3,tP=new e3,tR=new tS,tI=new e1;class tL{constructor(e=0,t=0,n=0,r=tL.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,i=r[0],a=r[4],s=r[8],o=r[1],l=r[5],u=r[9],c=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(eP(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-eP(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(eP(d,-1,1)),.9999999>Math.abs(d)?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-eP(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(eP(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-eP(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return tR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(tR,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return tI.setFromEuler(this),this.setFromQuaternion(tI,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}tL.DEFAULT_ORDER="XYZ";class tD{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let tO=0,tN=new e3,tU=new e1,tF=new tS,tk=new e3,tB=new e3,tV=new e3,tz=new e1,tj=new e3(1,0,0),tH=new e3(0,1,0),tG=new e3(0,0,1),tW={type:"added"},tq={type:"removed"},tX={type:"childadded",child:null},t$={type:"childremoved",child:null};class tY extends eM{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:tO++}),this.uuid=eC(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=tY.DEFAULT_UP.clone();let e=new e3,t=new tL,n=new e1,r=new e3(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new tS},normalMatrix:{value:new eD}}),this.matrix=new tS,this.matrixWorld=new tS,this.matrixAutoUpdate=tY.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=tY.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new tD,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return tU.setFromAxisAngle(e,t),this.quaternion.multiply(tU),this}rotateOnWorldAxis(e,t){return tU.setFromAxisAngle(e,t),this.quaternion.premultiply(tU),this}rotateX(e){return this.rotateOnAxis(tj,e)}rotateY(e){return this.rotateOnAxis(tH,e)}rotateZ(e){return this.rotateOnAxis(tG,e)}translateOnAxis(e,t){return tN.copy(e).applyQuaternion(this.quaternion),this.position.add(tN.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(tj,e)}translateY(e){return this.translateOnAxis(tH,e)}translateZ(e){return this.translateOnAxis(tG,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(tF.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?tk.copy(e):tk.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),tB.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tF.lookAt(tB,tk,this.up):tF.lookAt(tk,tB,this.up),this.quaternion.setFromRotationMatrix(tF),r&&(tF.extractRotation(r.matrixWorld),tU.setFromRotationMatrix(tF),this.quaternion.premultiply(tU.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(tW),tX.child=e,this.dispatchEvent(tX),tX.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(tq),t$.child=e,this.dispatchEvent(t$),t$.child=null),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),tF.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),tF.multiply(e.parent.matrixWorld)),e.applyMatrix4(tF),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(tW),tX.child=e,this.dispatchEvent(tX),tX.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);let r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tB,e,tV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tB,tz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material)}if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){let t=a(e.geometries),r=a(e.materials),i=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),u=a(e.animations),c=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function a(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let n=e.children[t];this.add(n.clone())}return this}}tY.DEFAULT_UP=new e3(0,1,0),tY.DEFAULT_MATRIX_AUTO_UPDATE=!0,tY.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let tK=new e3,tZ=new e3,tJ=new e3,tQ=new e3,t0=new e3,t1=new e3,t3=new e3,t2=new e3,t6=new e3,t7=new e3,t4=new eK,t5=new eK,t8=new eK;class t9{constructor(e=new e3,t=new e3,n=new e3){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),tK.subVectors(e,t),r.cross(tK);let i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){tK.subVectors(r,t),tZ.subVectors(n,t),tJ.subVectors(e,t);let a=tK.dot(tK),s=tK.dot(tZ),o=tK.dot(tJ),l=tZ.dot(tZ),u=tZ.dot(tJ),c=a*l-s*s;if(0===c)return i.set(0,0,0),null;let d=1/c,h=(l*o-s*u)*d,p=(a*u-s*o)*d;return i.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,tQ)&&tQ.x>=0&&tQ.y>=0&&tQ.x+tQ.y<=1}static getInterpolation(e,t,n,r,i,a,s,o){return null===this.getBarycoord(e,t,n,r,tQ)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(i,tQ.x),o.addScaledVector(a,tQ.y),o.addScaledVector(s,tQ.z),o)}static getInterpolatedAttribute(e,t,n,r,i,a){return t4.setScalar(0),t5.setScalar(0),t8.setScalar(0),t4.fromBufferAttribute(e,t),t5.fromBufferAttribute(e,n),t8.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(t4,i.x),a.addScaledVector(t5,i.y),a.addScaledVector(t8,i.z),a}static isFrontFacing(e,t,n,r){return tK.subVectors(n,t),tZ.subVectors(e,t),0>tK.cross(tZ).dot(r)}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return tK.subVectors(this.c,this.b),tZ.subVectors(this.a,this.b),.5*tK.cross(tZ).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return t9.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return t9.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return t9.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return t9.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return t9.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,r;let i=this.a,a=this.b,s=this.c;t0.subVectors(a,i),t1.subVectors(s,i),t2.subVectors(e,i);let o=t0.dot(t2),l=t1.dot(t2);if(o<=0&&l<=0)return t.copy(i);t6.subVectors(e,a);let u=t0.dot(t6),c=t1.dot(t6);if(u>=0&&c<=u)return t.copy(a);let d=o*c-u*l;if(d<=0&&o>=0&&u<=0)return n=o/(o-u),t.copy(i).addScaledVector(t0,n);t7.subVectors(e,s);let h=t0.dot(t7),p=t1.dot(t7);if(p>=0&&h<=p)return t.copy(s);let f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return r=l/(l-p),t.copy(i).addScaledVector(t1,r);let m=u*p-h*c;if(m<=0&&c-u>=0&&h-p>=0)return t3.subVectors(s,a),r=(c-u)/(c-u+(h-p)),t.copy(a).addScaledVector(t3,r);let g=1/(m+f+d);return n=f*g,r=d*g,t.copy(i).addScaledVector(t0,n).addScaledVector(t1,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ne={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},nt={h:0,s:0,l:0},nn={h:0,s:0,l:0};function nr(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*6*(2/3-n):e}class ni{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){return void 0===t&&void 0===n?e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e):this.setRGB(e,t,n),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ey){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ez.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=ez.workingColorSpace){return this.r=e,this.g=t,this.b=n,ez.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=ez.workingColorSpace){if(e=(e%1+1)%1,t=eP(t,0,1),n=eP(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=nr(i,r,e+1/3),this.g=nr(i,r,e),this.b=nr(i,r,e-1/3)}return ez.toWorkingColorSpace(this,r),this}setStyle(e,t=ey){let n;function r(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;let a=n[1],s=n[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let r=n[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ey){let n=ne[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ej(e.r),this.g=ej(e.g),this.b=ej(e.b),this}copyLinearToSRGB(e){return this.r=eH(e.r),this.g=eH(e.g),this.b=eH(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ey){return ez.fromWorkingColorSpace(na.copy(this),e),65536*Math.round(eP(255*na.r,0,255))+256*Math.round(eP(255*na.g,0,255))+Math.round(eP(255*na.b,0,255))}getHexString(e=ey){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ez.workingColorSpace){let n,r;ez.fromWorkingColorSpace(na.copy(this),t);let i=na.r,a=na.g,s=na.b,o=Math.max(i,a,s),l=Math.min(i,a,s),u=(l+o)/2;if(l===o)n=0,r=0;else{let e=o-l;switch(r=u<=.5?e/(o+l):e/(2-o-l),o){case i:n=(a-s)/e+(a<s?6:0);break;case a:n=(s-i)/e+2;break;case s:n=(i-a)/e+4}n/=6}return e.h=n,e.s=r,e.l=u,e}getRGB(e,t=ez.workingColorSpace){return ez.fromWorkingColorSpace(na.copy(this),t),e.r=na.r,e.g=na.g,e.b=na.b,e}getStyle(e=ey){ez.fromWorkingColorSpace(na.copy(this),e);let t=na.r,n=na.g,r=na.b;return e!==ey?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(nt),this.setHSL(nt.h+e,nt.s+t,nt.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(nt),e.getHSL(nn);let n=(1-t)*nt.h+t*nn.h,r=(1-t)*nt.s+t*nn.s,i=(1-t)*nt.l+t*nn.l;return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let na=new ni;ni.NAMES=ne;let ns=0;class no extends eM{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ns++}),this.uuid=eC(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ni(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(void 0===r){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),100!==this.blendEquation&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),7680!==this.stencilFail&&(n.stencilFail=this.stencilFail),7680!==this.stencilZFail&&(n.stencilZFail=this.stencilZFail),7680!==this.stencilZPass&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class nl extends no{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ni(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tL,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let nu=new e3,nc=new eL,nd=0;class nh{constructor(e,t,n=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:nd++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)nc.fromBufferAttribute(this,t),nc.applyMatrix3(e),this.setXY(t,nc.x,nc.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)nu.fromBufferAttribute(this,t),nu.applyMatrix3(e),this.setXYZ(t,nu.x,nu.y,nu.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)nu.fromBufferAttribute(this,t),nu.applyMatrix4(e),this.setXYZ(t,nu.x,nu.y,nu.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)nu.fromBufferAttribute(this,t),nu.applyNormalMatrix(e),this.setXYZ(t,nu.x,nu.y,nu.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)nu.fromBufferAttribute(this,t),nu.transformDirection(e),this.setXYZ(t,nu.x,nu.y,nu.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=eR(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=eI(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=eR(t,this.array)),t}setX(e,t){return this.normalized&&(t=eI(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=eR(t,this.array)),t}setY(e,t){return this.normalized&&(t=eI(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=eR(t,this.array)),t}setZ(e,t){return this.normalized&&(t=eI(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=eR(t,this.array)),t}setW(e,t){return this.normalized&&(t=eI(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=eI(t,this.array),n=eI(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=eI(t,this.array),n=eI(n,this.array),r=eI(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=eI(t,this.array),n=eI(n,this.array),r=eI(r,this.array),i=eI(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class np extends nh{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class nf extends nh{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class nm extends nh{constructor(e,t,n){super(new Float32Array(e),t,n)}}let ng=0,nv=new tS,n_=new tY,ny=new e3,nx=new e7,nb=new e7,nS=new e3;class nE extends eM{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ng++}),this.uuid=eC(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(eN(e)?nf:np)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=new eD().getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return nv.makeRotationFromQuaternion(e),this.applyMatrix4(nv),this}rotateX(e){return nv.makeRotationX(e),this.applyMatrix4(nv),this}rotateY(e){return nv.makeRotationY(e),this.applyMatrix4(nv),this}rotateZ(e){return nv.makeRotationZ(e),this.applyMatrix4(nv),this}translate(e,t,n){return nv.makeTranslation(e,t,n),this.applyMatrix4(nv),this}scale(e,t,n){return nv.makeScale(e,t,n),this.applyMatrix4(nv),this}lookAt(e){return n_.lookAt(e),n_.updateMatrix(),this.applyMatrix4(n_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ny).negate(),this.translate(ny.x,ny.y,ny.z),this}setFromPoints(e){let t=this.getAttribute("position");if(void 0===t){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new nm(t,3))}else{let n=Math.min(e.length,t.count);for(let r=0;r<n;r++){let n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new e7);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new e3(-1/0,-1/0,-1/0),new e3(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];nx.setFromBufferAttribute(n),this.morphTargetsRelative?(nS.addVectors(this.boundingBox.min,nx.min),this.boundingBox.expandByPoint(nS),nS.addVectors(this.boundingBox.max,nx.max),this.boundingBox.expandByPoint(nS)):(this.boundingBox.expandByPoint(nx.min),this.boundingBox.expandByPoint(nx.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new tp);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new e3,1/0);return}if(e){let n=this.boundingSphere.center;if(nx.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];nb.setFromBufferAttribute(n),this.morphTargetsRelative?(nS.addVectors(nx.min,nb.min),nx.expandByPoint(nS),nS.addVectors(nx.max,nb.max),nx.expandByPoint(nS)):(nx.expandByPoint(nb.min),nx.expandByPoint(nb.max))}nx.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)nS.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(nS));if(t)for(let i=0,a=t.length;i<a;i++){let a=t[i],s=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)nS.fromBufferAttribute(a,t),s&&(ny.fromBufferAttribute(e,t),nS.add(ny)),r=Math.max(r,n.distanceToSquared(nS))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new nh(new Float32Array(4*n.count),4));let a=this.getAttribute("tangent"),s=[],o=[];for(let e=0;e<n.count;e++)s[e]=new e3,o[e]=new e3;let l=new e3,u=new e3,c=new e3,d=new eL,h=new eL,p=new eL,f=new e3,m=new e3,g=this.groups;0===g.length&&(g=[{start:0,count:e.count}]);for(let t=0,r=g.length;t<r;++t){let r=g[t],a=r.start,v=r.count;for(let t=a,r=a+v;t<r;t+=3)!function(e,t,r){l.fromBufferAttribute(n,e),u.fromBufferAttribute(n,t),c.fromBufferAttribute(n,r),d.fromBufferAttribute(i,e),h.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),u.sub(l),c.sub(l),h.sub(d),p.sub(d);let a=1/(h.x*p.y-p.x*h.y);isFinite(a)&&(f.copy(u).multiplyScalar(p.y).addScaledVector(c,-h.y).multiplyScalar(a),m.copy(c).multiplyScalar(h.x).addScaledVector(u,-p.x).multiplyScalar(a),s[e].add(f),s[t].add(f),s[r].add(f),o[e].add(m),o[t].add(m),o[r].add(m))}(e.getX(t+0),e.getX(t+1),e.getX(t+2))}let v=new e3,_=new e3,y=new e3,x=new e3;function b(e){y.fromBufferAttribute(r,e),x.copy(y);let t=s[e];v.copy(t),v.sub(y.multiplyScalar(y.dot(t))).normalize(),_.crossVectors(x,t);let n=_.dot(o[e]);a.setXYZW(e,v.x,v.y,v.z,n<0?-1:1)}for(let t=0,n=g.length;t<n;++t){let n=g[t],r=n.start,i=n.count;for(let t=r,n=r+i;t<n;t+=3)b(e.getX(t+0)),b(e.getX(t+1)),b(e.getX(t+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new nh(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let r=new e3,i=new e3,a=new e3,s=new e3,o=new e3,l=new e3,u=new e3,c=new e3;if(e)for(let d=0,h=e.count;d<h;d+=3){let h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(u),o.add(u),l.add(u),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)nS.fromBufferAttribute(e,t),nS.normalize(),e.setXYZ(t,nS.x,nS.y,nS.z)}toNonIndexed(){function e(e,t){let n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),s=0,o=0;for(let i=0,l=t.length;i<l;i++){s=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[o++]=n[s++]}return new nh(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new nE,n=this.index.array,r=this.attributes;for(let i in r){let a=e(r[i],n);t.setAttribute(i,a)}let i=this.morphAttributes;for(let r in i){let a=[],s=i[r];for(let t=0,r=s.length;t<r;t++){let r=e(s[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let e=0,n=a.length;e<n;e++){let n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let t in n){let r=n[t];e.data.attributes[t]=r.toJSON(e.data)}let r={},i=!1;for(let t in this.morphAttributes){let n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){let r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let r=e.attributes;for(let e in r){let n=r[e];this.setAttribute(e,n.clone(t))}let i=e.morphAttributes;for(let e in i){let n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let e=0,t=a.length;e<t;e++){let t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}let s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());let o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let nM=new tS,nT=new tb,nA=new tp,nw=new e3,nC=new e3,nP=new e3,nR=new e3,nI=new e3,nL=new e3,nD=new e3,nO=new e3;class nN extends tY{constructor(e=new nE,t=new nl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let s=this.morphTargetInfluences;if(i&&s){nL.set(0,0,0);for(let n=0,r=i.length;n<r;n++){let r=s[n],o=i[n];0!==r&&(nI.fromBufferAttribute(o,e),a?nL.addScaledVector(nI,r):nL.addScaledVector(nI.sub(t),r))}t.add(nL)}return t}raycast(e,t){let n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),nA.copy(n.boundingSphere),nA.applyMatrix4(i),nT.copy(e.ray).recast(e.near),!1===nA.containsPoint(nT.origin)&&(null===nT.intersectSphere(nA,nw)||nT.origin.distanceToSquared(nw)>(e.far-e.near)**2)||(nM.copy(i).invert(),nT.copy(e.ray).applyMatrix4(nM),null!==n.boundingBox&&!1===nT.intersectsBox(n.boundingBox)))return;this._computeIntersections(e,t,nT)}}_computeIntersections(e,t,n){let r;let i=this.geometry,a=this.material,s=i.index,o=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==s){if(Array.isArray(a))for(let i=0,o=d.length;i<o;i++){let o=d[i],p=a[o.materialIndex],f=Math.max(o.start,h.start),m=Math.min(s.count,Math.min(o.start+o.count,h.start+h.count));for(let i=f;i<m;i+=3)(r=nU(this,p,e,n,l,u,c,s.getX(i),s.getX(i+1),s.getX(i+2)))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}else{let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);for(let d=i;d<o;d+=3)(r=nU(this,a,e,n,l,u,c,s.getX(d),s.getX(d+1),s.getX(d+2)))&&(r.faceIndex=Math.floor(d/3),t.push(r))}}else if(void 0!==o){if(Array.isArray(a))for(let i=0,s=d.length;i<s;i++){let s=d[i],p=a[s.materialIndex],f=Math.max(s.start,h.start),m=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));for(let i=f;i<m;i+=3)(r=nU(this,p,e,n,l,u,c,i,i+1,i+2))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}else{let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);for(let o=i;o<s;o+=3)(r=nU(this,a,e,n,l,u,c,o,o+1,o+2))&&(r.faceIndex=Math.floor(o/3),t.push(r))}}}}function nU(e,t,n,r,i,a,s,o,l,u){e.getVertexPosition(o,nC),e.getVertexPosition(l,nP),e.getVertexPosition(u,nR);let c=function(e,t,n,r,i,a,s,o){if(null===(1===t.side?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,0===t.side,o)))return null;nO.copy(o),nO.applyMatrix4(e.matrixWorld);let l=n.ray.origin.distanceTo(nO);return l<n.near||l>n.far?null:{distance:l,point:nO.clone(),object:e}}(e,t,n,r,nC,nP,nR,nD);if(c){let e=new e3;t9.getBarycoord(nD,nC,nP,nR,e),i&&(c.uv=t9.getInterpolatedAttribute(i,o,l,u,e,new eL)),a&&(c.uv1=t9.getInterpolatedAttribute(a,o,l,u,e,new eL)),s&&(c.normal=t9.getInterpolatedAttribute(s,o,l,u,e,new e3),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));let t={a:o,b:l,c:u,normal:new e3,materialIndex:0};t9.getNormal(nC,nP,nR,t.normal),c.face=t,c.barycoord=e}return c}class nF extends nE{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};let s=this;r=Math.floor(r),i=Math.floor(i);let o=[],l=[],u=[],c=[],d=0,h=0;function p(e,t,n,r,i,a,p,f,m,g,v){let _=a/m,y=p/g,x=a/2,b=p/2,S=f/2,E=m+1,M=g+1,T=0,A=0,w=new e3;for(let a=0;a<M;a++){let s=a*y-b;for(let o=0;o<E;o++){let d=o*_-x;w[e]=d*r,w[t]=s*i,w[n]=S,l.push(w.x,w.y,w.z),w[e]=0,w[t]=0,w[n]=f>0?1:-1,u.push(w.x,w.y,w.z),c.push(o/m),c.push(1-a/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){let n=d+t+E*e,r=d+t+E*(e+1),i=d+(t+1)+E*(e+1),a=d+(t+1)+E*e;o.push(n,r,a),o.push(r,i,a),A+=6}s.addGroup(h,A,v),h+=A,d+=T}p("z","y","x",-1,-1,n,t,e,a=Math.floor(a),i,0),p("z","y","x",1,-1,n,t,-e,a,i,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new nm(l,3)),this.setAttribute("normal",new nm(u,3)),this.setAttribute("uv",new nm(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nF(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function nk(e){let t={};for(let n in e)for(let r in t[n]={},e[n]){let i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function nB(e){let t={};for(let n=0;n<e.length;n++){let r=nk(e[n]);for(let e in r)t[e]=r[e]}return t}function nV(e){let t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:ez.workingColorSpace}let nz={clone:nk};class nj extends no{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=nk(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let n in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class nH extends tY{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tS,this.projectionMatrix=new tS,this.projectionMatrixInverse=new tS,this.coordinateSystem=2e3}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let nG=new e3,nW=new eL,nq=new eL;class nX extends nH{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*ew*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*eA*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ew*Math.atan(Math.tan(.5*eA*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){nG.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(nG.x,nG.y).multiplyScalar(-e/nG.z),nG.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(nG.x,nG.y).multiplyScalar(-e/nG.z)}getViewSize(e,t){return this.getViewBounds(e,nW,nq),t.subVectors(nq,nW)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*eA*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/s,r*=a.width/e,n*=a.height/s}let s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class n$ extends tY{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new nX(-90,1,e,t);r.layers=this.layers,this.add(r);let i=new nX(-90,1,e,t);i.layers=this.layers,this.add(i);let a=new nX(-90,1,e,t);a.layers=this.layers,this.add(a);let s=new nX(-90,1,e,t);s.layers=this.layers,this.add(s);let o=new nX(-90,1,e,t);o.layers=this.layers,this.add(o);let l=new nX(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,s,o]=t;for(let e of t)this.remove(e);if(2e3===e)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else if(2001===e)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[i,a,s,o,l,u]=this.children,c=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(c,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class nY extends eY{constructor(e,t,n,r,i,a,s,o,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,i,a,s,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class nK extends eJ{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1};this.texture=new nY([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new nF(5,5,5),i=new nj({name:"CubemapFromEquirect",uniforms:nk(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;let a=new nN(r,i),s=t.minFilter;return 1008===t.minFilter&&(t.minFilter=1006),new n$(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){let i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}class nZ extends tY{constructor(){super(),this.isGroup=!0,this.type="Group"}}let nJ={type:"move"};class nQ{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new nZ,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new nZ,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new e3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new e3),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new nZ,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new e3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new e3),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null,s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){for(let r of(a=!0,e.hand.values())){let e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}let r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position);l.inputState.pinching&&s>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1);null!==s&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(nJ)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new nZ;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class n0 extends tY{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new tL,this.environmentIntensity=1,this.environmentRotation=new tL,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}let n1=new e3,n3=new e3,n2=new eD;class n6{constructor(e=new e3(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=n1.subVectors(n,t).cross(n3.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(n1),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||n2.getNormalMatrix(e),r=this.coplanarPoint(n1).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let n7=new tp,n4=new e3;class n5{constructor(e=new n6,t=new n6,n=new n6,r=new n6,i=new n6,a=new n6){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3){let n=this.planes,r=e.elements,i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5],c=r[6],d=r[7],h=r[8],p=r[9],f=r[10],m=r[11],g=r[12],v=r[13],_=r[14],y=r[15];if(n[0].setComponents(o-i,d-l,m-h,y-g).normalize(),n[1].setComponents(o+i,d+l,m+h,y+g).normalize(),n[2].setComponents(o+a,d+u,m+p,y+v).normalize(),n[3].setComponents(o-a,d-u,m-p,y-v).normalize(),n[4].setComponents(o-s,d-c,m-f,y-_).normalize(),2e3===t)n[5].setComponents(o+s,d+c,m+f,y+_).normalize();else if(2001===t)n[5].setComponents(s,c,f,_).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),n7.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),n7.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(n7)}intersectsSprite(e){return n7.center.set(0,0,0),n7.radius=.7071067811865476,n7.applyMatrix4(e.matrixWorld),this.intersectsSphere(n7)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(n4.x=r.normal.x>0?e.max.x:e.min.x,n4.y=r.normal.y>0?e.max.y:e.min.y,n4.z=r.normal.z>0?e.max.z:e.min.z,0>r.distanceToPoint(n4))return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}class n8 extends eY{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==i?i:1006,this.generateMipmaps=!1;let u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class n9 extends eY{constructor(e,t,n,r,i,a,s,o,l,u=1026){if(1026!==u&&1027!==u)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===u&&(n=1014),void 0===n&&1027===u&&(n=1020),super(null,r,i,a,s,o,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class re{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)t.push(i+=(n=this.getPoint(a/e)).distanceTo(r)),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n;let r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];let s=0,o=a-1,l;for(;s<=o;)if((l=r[i=Math.floor(s+(o-s)/2)]-n)<0)s=i+1;else if(l>0)o=i-1;else{o=i;break}if(r[i=o]===n)return i/(a-1);let u=r[i],c=r[i+1];return(i+(n-u)/(c-u))/(a-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let i=this.getPoint(n),a=this.getPoint(r),s=t||(i.isVector2?new eL:new e3);return s.copy(a).sub(i).normalize(),s}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new e3,r=[],i=[],a=[],s=new e3,o=new tS;for(let t=0;t<=e;t++){let n=t/e;r[t]=this.getTangentAt(n,new e3)}i[0]=new e3,a[0]=new e3;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),c=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(r[t-1],r[t]),s.length()>Number.EPSILON){s.normalize();let e=Math.acos(eP(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(eP(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class rt extends re{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t=new eL){let n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);let a=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(a),o=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=o-this.aY;s=n*e-r*t+this.aX,o=n*t+r*e+this.aY}return t.set(s,o)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class rn extends rt{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function rr(){let e=0,t=0,n=0,r=0;function i(i,a,s,o){e=i,t=s,n=-3*i+3*a-2*s-o,r=2*i-2*a+s+o}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,u=(n-t)/s-(r-t)/(s+o)+(r-n)/o;i(t,n,l*=s,u*=s)},calc:function(i){let a=i*i;return e+t*i+n*a+a*i*r}}}let ri=new e3,ra=new rr,rs=new rr,ro=new rr;class rl extends re{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new e3){let n,r;let i=this.points,a=i.length,s=(a-(this.closed?0:1))*e,o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:0===l&&o===a-1&&(o=a-2,l=1),this.closed||o>0?n=i[(o-1)%a]:(ri.subVectors(i[0],i[1]).add(i[0]),n=ri);let u=i[o%a],c=i[(o+1)%a];if(this.closed||o+2<a?r=i[(o+2)%a]:(ri.subVectors(i[a-1],i[a-2]).add(i[a-1]),r=ri),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(n.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(c),e),a=Math.pow(c.distanceToSquared(r),e);i<1e-4&&(i=1),t<1e-4&&(t=i),a<1e-4&&(a=i),ra.initNonuniformCatmullRom(n.x,u.x,c.x,r.x,t,i,a),rs.initNonuniformCatmullRom(n.y,u.y,c.y,r.y,t,i,a),ro.initNonuniformCatmullRom(n.z,u.z,c.z,r.z,t,i,a)}else"catmullrom"===this.curveType&&(ra.initCatmullRom(n.x,u.x,c.x,r.x,this.tension),rs.initCatmullRom(n.y,u.y,c.y,r.y,this.tension),ro.initCatmullRom(n.z,u.z,c.z,r.z,this.tension));return t.set(ra.calc(l),rs.calc(l),ro.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new e3().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ru(e,t,n,r,i){let a=(r-t)*.5,s=(i-n)*.5,o=e*e;return e*o*(2*n-2*r+a+s)+(-3*n+3*r-2*a-s)*o+a*e+n}function rc(e,t,n,r){return function(e,t){let n=1-e;return n*n*t}(e,t)+2*(1-e)*e*n+e*e*r}function rd(e,t,n,r,i){return function(e,t){let n=1-e;return n*n*n*t}(e,t)+function(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+3*(1-e)*e*e*r+e*e*e*i}class rh extends re{constructor(e=new eL,t=new eL,n=new eL,r=new eL){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new eL){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(rd(e,n.x,r.x,i.x,a.x),rd(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rp extends re{constructor(e=new e3,t=new e3,n=new e3,r=new e3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new e3){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(rd(e,n.x,r.x,i.x,a.x),rd(e,n.y,r.y,i.y,a.y),rd(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rf extends re{constructor(e=new eL,t=new eL){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new eL){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new eL){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rm extends re{constructor(e=new e3,t=new e3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new e3){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new e3){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rg extends re{constructor(e=new eL,t=new eL,n=new eL){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new eL){let n=this.v0,r=this.v1,i=this.v2;return t.set(rc(e,n.x,r.x,i.x),rc(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rv extends re{constructor(e=new e3,t=new e3,n=new e3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new e3){let n=this.v0,r=this.v1,i=this.v2;return t.set(rc(e,n.x,r.x,i.x),rc(e,n.y,r.y,i.y),rc(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class r_ extends re{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new eL){let n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,s=n[0===i?i:i-1],o=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return t.set(ru(a,s.x,o.x,l.x,u.x),ru(a,s.y,o.y,l.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new eL().fromArray(n))}return this}}var ry=Object.freeze({__proto__:null,ArcCurve:rn,CatmullRomCurve3:rl,CubicBezierCurve:rh,CubicBezierCurve3:rp,EllipseCurve:rt,LineCurve:rf,LineCurve3:rm,QuadraticBezierCurve:rg,QuadraticBezierCurve3:rv,SplineCurve:r_});class rx extends re{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new ry[n](t,e))}return this}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=n){let e=r[i]-n,a=this.curves[i],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)e.push(t+=this.curves[n].getLength());return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t;let n=[];for(let r=0,i=this.curves;r<i.length;r++){let a=i[r],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){let r=o[e];t&&t.equals(r)||(n.push(r),t=r)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(new ry[n.type]().fromJSON(n))}return this}}class rb extends rx{constructor(e){super(),this.type="Path",this.currentPoint=new eL,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new rf(this.currentPoint.clone(),new eL(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let i=new rg(this.currentPoint.clone(),new eL(e,t),new eL(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){let s=new rh(this.currentPoint.clone(),new eL(e,t),new eL(n,r),new eL(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}splineThru(e){let t=new r_([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){let s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,s,o){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,s,o),this}absellipse(e,t,n,r,i,a,s,o){let l=new rt(e,t,n,r,i,a,s,o);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class rS extends nE{constructor(e=[new eL(0,-.5),new eL(.5,0),new eL(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=eP(r,0,2*Math.PI);let i=[],a=[],s=[],o=[],l=[],u=1/t,c=new e3,d=new eL,h=new e3,p=new e3,f=new e3,m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.x+=f.x,h.y+=f.y,h.z+=f.z,h.normalize(),o.push(h.x,h.y,h.z),f.copy(p)}for(let i=0;i<=t;i++){let h=n+i*u*r,p=Math.sin(h),f=Math.cos(h);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*p,c.y=e[n].y,c.z=e[n].x*f,a.push(c.x,c.y,c.z),d.x=i/t,d.y=n/(e.length-1),s.push(d.x,d.y);let r=o[3*n+0]*p,u=o[3*n+1],h=o[3*n+0]*f;l.push(r,u,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){let r=t+n*e.length,a=r+e.length,s=r+e.length+1,o=r+1;i.push(r,a,o),i.push(s,o,a)}this.setIndex(i),this.setAttribute("position",new nm(a,3)),this.setAttribute("uv",new nm(s,2)),this.setAttribute("normal",new nm(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rS(e.points,e.segments,e.phiStart,e.phiLength)}}class rE extends rS{constructor(e=1,t=1,n=4,r=8){let i=new rb;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new rE(e.radius,e.length,e.capSegments,e.radialSegments)}}class rM extends nE{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);let i=[],a=[],s=[],o=[],l=new e3,u=new eL;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let i=0,c=3;i<=t;i++,c+=3){let d=n+i/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),a.push(l.x,l.y,l.z),s.push(0,0,1),u.x=(a[c]/e+1)/2,u.y=(a[c+1]/e+1)/2,o.push(u.x,u.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new nm(a,3)),this.setAttribute("normal",new nm(s,3)),this.setAttribute("uv",new nm(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class rT extends nE{constructor(e=1,t=1,n=1,r=32,i=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o};let l=this;r=Math.floor(r),i=Math.floor(i);let u=[],c=[],d=[],h=[],p=0,f=[],m=n/2,g=0;function v(n){let i=p,a=new eL,f=new e3,v=0,_=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=r;e++)c.push(0,m*y,0),d.push(0,y,0),h.push(.5,.5),p++;let x=p;for(let e=0;e<=r;e++){let t=e/r*o+s,n=Math.cos(t),i=Math.sin(t);f.x=_*i,f.y=m*y,f.z=_*n,c.push(f.x,f.y,f.z),d.push(0,y,0),a.x=.5*n+.5,a.y=.5*i*y+.5,h.push(a.x,a.y),p++}for(let e=0;e<r;e++){let t=i+e,r=x+e;!0===n?u.push(r,r+1,t):u.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}(function(){let a=new e3,v=new e3,_=0,y=(t-e)/n;for(let l=0;l<=i;l++){let u=[],g=l/i,_=g*(t-e)+e;for(let e=0;e<=r;e++){let t=e/r,i=t*o+s,l=Math.sin(i),f=Math.cos(i);v.x=_*l,v.y=-g*n+m,v.z=_*f,c.push(v.x,v.y,v.z),a.set(l,y,f).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),u.push(p++)}f.push(u)}for(let n=0;n<r;n++)for(let r=0;r<i;r++){let a=f[r][n],s=f[r+1][n],o=f[r+1][n+1],l=f[r][n+1];(e>0||0!==r)&&(u.push(a,s,l),_+=3),(t>0||r!==i-1)&&(u.push(s,o,l),_+=3)}l.addGroup(g,_,0),g+=_})(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new nm(c,3)),this.setAttribute("normal",new nm(d,3)),this.setAttribute("uv",new nm(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rT(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rA extends rT{constructor(e=1,t=1,n=32,r=1,i=!1,a=0,s=2*Math.PI){super(0,e,t,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}static fromJSON(e){return new rA(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rw extends nE{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let i=[],a=[];function s(e){i.push(e.x,e.y,e.z)}function o(t,n){let r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}(function(e){let n=new e3,r=new e3,i=new e3;for(let a=0;a<t.length;a+=3)o(t[a+0],n),o(t[a+1],r),o(t[a+2],i),function(e,t,n,r){let i=r+1,a=[];for(let r=0;r<=i;r++){a[r]=[];let s=e.clone().lerp(n,r/i),o=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)0===e&&r===i?a[r][e]=s:a[r][e]=s.clone().lerp(o,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){let n=Math.floor(t/2);t%2==0?(s(a[e][n+1]),s(a[e+1][n]),s(a[e][n])):(s(a[e][n+1]),s(a[e+1][n+1]),s(a[e+1][n]))}}(n,r,i,e)})(r),function(e){let t=new e3;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){let e=new e3;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];let n=u(e)/2/Math.PI+.5,r=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5;a.push(n,1-r)}(function(){let e=new e3,t=new e3,n=new e3,r=new e3,s=new eL,o=new eL,c=new eL;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),s.set(a[h+0],a[h+1]),o.set(a[h+2],a[h+3]),c.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);let p=u(r);l(s,h+0,e,p),l(o,h+2,t,p),l(c,h+4,n,p)}})(),function(){for(let e=0;e<a.length;e+=6){let t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),s=Math.min(t,n,r);i>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new nm(i,3)),this.setAttribute("normal",new nm(i.slice(),3)),this.setAttribute("uv",new nm(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rw(e.vertices,e.indices,e.radius,e.details)}}class rC extends rw{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rC(e.radius,e.detail)}}class rP extends rb{constructor(e){super(e),this.uuid=eC(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(new rb().fromJSON(n))}return this}}let rR={triangulate:function(e,t,n=2){let r,i,a,s,o,l,u;let c=t&&t.length,d=c?t[0]*n:e.length,h=rI(e,0,d,n,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(e,t,n,r){let i,a,s,o,l;let u=[];for(i=0,a=t.length;i<a;i++)s=t[i]*r,o=i<a-1?t[i+1]*r:e.length,(l=rI(e,s,o,r,!1))===l.next&&(l.steiner=!0),u.push(function(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}(l));for(u.sort(rD),i=0;i<u.length;i++)n=function(e,t){let n=function(e,t){let n=t,r=-1/0,i,a=e.x,s=e.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){let e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i}n=n.next}while(n!==t);if(!i)return null;let o=i,l=i.x,u=i.y,c=1/0,d;n=i;do{var h,p;a>=n.x&&n.x>=l&&a!==n.x&&rN(s<u?a:r,s,l,u,s<u?r:a,s,n.x,n.y)&&(d=Math.abs(s-n.y)/(a-n.x),rz(n,e)&&(d<c||d===c&&(n.x>i.x||n.x===i.x&&(h=i,p=n,0>rU(h.prev,h,p.prev)&&0>rU(p.next,h,h.next))))&&(i=n,c=d)),n=n.next}while(n!==o);return i}(e,t);if(!n)return t;let r=rj(n,e);return rL(r,r.next),rL(n,n.next)}(u[i],n);return n}(e,t,h,n)),e.length>80*n){r=a=e[0],i=s=e[1];for(let t=n;t<d;t+=n)o=e[t],l=e[t+1],o<r&&(r=o),l<i&&(i=l),o>a&&(a=o),l>s&&(s=l);u=0!==(u=Math.max(a-r,s-i))?32767/u:0}return function e(t,n,r,i,a,s,o){if(!t)return;!o&&s&&function(e,t,n,r){let i=e;do 0===i.z&&(i.z=rO(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,s,o,l,u=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,o=0,t=0;t<u&&(o++,r=r.nextZ);t++);for(l=u;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(s>1)}(i)}(t,i,a,s);let l=t,u,c;for(;t.prev!==t.next;){if(u=t.prev,c=t.next,s?function(e,t,n,r){let i=e.prev,a=e.next;if(rU(i,e,a)>=0)return!1;let s=i.x,o=e.x,l=a.x,u=i.y,c=e.y,d=a.y,h=s<o?s<l?s:l:o<l?o:l,p=u<c?u<d?u:d:c<d?c:d,f=s>o?s>l?s:l:o>l?o:l,m=u>c?u>d?u:d:c>d?c:d,g=rO(h,p,t,n,r),v=rO(f,m,t,n,r),_=e.prevZ,y=e.nextZ;for(;_&&_.z>=g&&y&&y.z<=v;){if(_.x>=h&&_.x<=f&&_.y>=p&&_.y<=m&&_!==i&&_!==a&&rN(s,u,o,c,l,d,_.x,_.y)&&rU(_.prev,_,_.next)>=0||(_=_.prevZ,y.x>=h&&y.x<=f&&y.y>=p&&y.y<=m&&y!==i&&y!==a&&rN(s,u,o,c,l,d,y.x,y.y)&&rU(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;_&&_.z>=g;){if(_.x>=h&&_.x<=f&&_.y>=p&&_.y<=m&&_!==i&&_!==a&&rN(s,u,o,c,l,d,_.x,_.y)&&rU(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;y&&y.z<=v;){if(y.x>=h&&y.x<=f&&y.y>=p&&y.y<=m&&y!==i&&y!==a&&rN(s,u,o,c,l,d,y.x,y.y)&&rU(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}(t,i,a,s):function(e){let t=e.prev,n=e.next;if(rU(t,e,n)>=0)return!1;let r=t.x,i=e.x,a=n.x,s=t.y,o=e.y,l=n.y,u=r<i?r<a?r:a:i<a?i:a,c=s<o?s<l?s:l:o<l?o:l,d=r>i?r>a?r:a:i>a?i:a,h=s>o?s>l?s:l:o>l?o:l,p=n.next;for(;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=h&&rN(r,s,i,o,a,l,p.x,p.y)&&rU(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}(t)){n.push(u.i/r|0),n.push(t.i/r|0),n.push(c.i/r|0),rG(t),t=c.next,l=c.next;continue}if((t=c)===l){o?1===o?e(t=function(e,t,n){let r=e;do{let i=r.prev,a=r.next.next;!rF(i,a)&&rk(i,r,r.next,a)&&rz(i,a)&&rz(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),rG(r),rG(r.next),r=e=a),r=r.next}while(r!==e);return rL(r)}(rL(t),n,r),n,r,i,a,s,2):2===o&&function(t,n,r,i,a,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){var l,u;if(o.i!==t.i&&(l=o,u=t,l.next.i!==u.i&&l.prev.i!==u.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&rk(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(l,u)&&(rz(l,u)&&rz(u,l)&&function(e,t){let n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}(l,u)&&(rU(l.prev,l,u.prev)||rU(l,u.prev,u))||rF(l,u)&&rU(l.prev,l,l.next)>0&&rU(u.prev,u,u.next)>0))){let l=rj(o,t);o=rL(o,o.next),l=rL(l,l.next),e(o,n,r,i,a,s,0),e(l,n,r,i,a,s,0);return}t=t.next}o=o.next}while(o!==t)}(t,n,r,i,a,s):e(rL(t),n,r,i,a,s,1);break}}}(h,p,n,r,i,u,0),p}};function rI(e,t,n,r,i){let a,s;if(i===function(e,t,n,r){let i=0;for(let a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)s=rH(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=rH(a,e[a],e[a+1],s);return s&&rF(s,s.next)&&(rG(s),s=s.next),s}function rL(e,t){if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(rF(n,n.next)||0===rU(n.prev,n,n.next))){if(rG(n),(n=t=n.prev)===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function rD(e,t){return e.x-t.x}function rO(e,t,n,r,i){return(e=((e=((e=((e=((e=(e-n)*i|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)|(t=((t=((t=((t=((t=(t-r)*i|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)<<1}function rN(e,t,n,r,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(r-o)>=(n-s)*(t-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function rU(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function rF(e,t){return e.x===t.x&&e.y===t.y}function rk(e,t,n,r){let i=rV(rU(e,t,n)),a=rV(rU(e,t,r)),s=rV(rU(n,r,e)),o=rV(rU(n,r,t));return!!(i!==a&&s!==o||0===i&&rB(e,n,t)||0===a&&rB(e,r,t)||0===s&&rB(n,e,r)||0===o&&rB(n,t,r))}function rB(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function rV(e){return e>0?1:e<0?-1:0}function rz(e,t){return 0>rU(e.prev,e,e.next)?rU(e,t,e.next)>=0&&rU(e,e.prev,t)>=0:0>rU(e,t,e.prev)||0>rU(e,e.next,t)}function rj(e,t){let n=new rW(e.i,e.x,e.y),r=new rW(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function rH(e,t,n,r){let i=new rW(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function rG(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function rW(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class rq{static area(e){let t=e.length,n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return .5*n}static isClockWise(e){return 0>rq.area(e)}static triangulateShape(e,t){let n=[],r=[],i=[];rX(e),r$(n,e);let a=e.length;t.forEach(rX);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,r$(n,t[e]);let s=rR.triangulate(n,r);for(let e=0;e<s.length;e+=3)i.push(s.slice(e,e+3));return i}}function rX(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r$(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class rY extends nE{constructor(e=new rP([new eL(.5,.5),new eL(-.5,.5),new eL(-.5,-.5),new eL(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++)!function(e){let a,s,o,l;let u=[],c=void 0!==t.curveSegments?t.curveSegments:12,d=void 0!==t.steps?t.steps:1,h=void 0!==t.depth?t.depth:1,p=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:f-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,v=void 0!==t.bevelSegments?t.bevelSegments:3,_=t.extrudePath,y=void 0!==t.UVGenerator?t.UVGenerator:rK,x,b=!1;_&&(x=_.getSpacedPoints(d),b=!0,p=!1,a=_.computeFrenetFrames(d,!1),s=new e3,o=new e3,l=new e3),p||(v=0,f=0,m=0,g=0);let S=e.extractPoints(c),E=S.shape,M=S.holes;if(!rq.isClockWise(E)){E=E.reverse();for(let e=0,t=M.length;e<t;e++){let t=M[e];rq.isClockWise(t)&&(M[e]=t.reverse())}}let T=rq.triangulateShape(E,M),A=E;for(let e=0,t=M.length;e<t;e++){let t=M[e];E=E.concat(t)}function w(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}let C=E.length,P=T.length;function R(e,t,n){let r,i,a;let s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=s*s+o*o;if(Math.abs(s*u-o*l)>Number.EPSILON){let d=Math.sqrt(c),h=Math.sqrt(l*l+u*u),p=t.x-o/d,f=t.y+s/d,m=((n.x-u/h-p)*u-(n.y+l/h-f)*l)/(s*u-o*l),g=(r=p+s*m-e.x)*r+(i=f+o*m-e.y)*i;if(g<=2)return new eL(r,i);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(u)&&(e=!0),e?(r=-o,i=s,a=Math.sqrt(c)):(r=s,i=o,a=Math.sqrt(c/2))}return new eL(r/a,i/a)}let I=[];for(let e=0,t=A.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),I[e]=R(A[e],A[n],A[r]);let L=[],D,O=I.concat();for(let e=0,t=M.length;e<t;e++){let t=M[e];D=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),D[e]=R(t[e],t[r],t[i]);L.push(D),O=O.concat(D)}for(let e=0;e<v;e++){let t=e/v,n=f*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=A.length;e<t;e++){let t=w(A[e],I[e],r);F(t.x,t.y,-n)}for(let e=0,t=M.length;e<t;e++){let t=M[e];D=L[e];for(let e=0,i=t.length;e<i;e++){let i=w(t[e],D[e],r);F(i.x,i.y,-n)}}}let N=m+g;for(let e=0;e<C;e++){let t=p?w(E[e],O[e],N):E[e];b?(o.copy(a.normals[0]).multiplyScalar(t.x),s.copy(a.binormals[0]).multiplyScalar(t.y),l.copy(x[0]).add(o).add(s),F(l.x,l.y,l.z)):F(t.x,t.y,0)}for(let e=1;e<=d;e++)for(let t=0;t<C;t++){let n=p?w(E[t],O[t],N):E[t];b?(o.copy(a.normals[e]).multiplyScalar(n.x),s.copy(a.binormals[e]).multiplyScalar(n.y),l.copy(x[e]).add(o).add(s),F(l.x,l.y,l.z)):F(n.x,n.y,h/d*e)}for(let e=v-1;e>=0;e--){let t=e/v,n=f*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=A.length;e<t;e++){let t=w(A[e],I[e],r);F(t.x,t.y,h+n)}for(let e=0,t=M.length;e<t;e++){let t=M[e];D=L[e];for(let e=0,i=t.length;e<i;e++){let i=w(t[e],D[e],r);b?F(i.x,i.y+x[d-1].y,x[d-1].x+n):F(i.x,i.y,h+n)}}}function U(e,t){let i=e.length;for(;--i>=0;){let a=i,s=i-1;s<0&&(s=e.length-1);for(let e=0,i=d+2*v;e<i;e++){let i=C*e,o=C*(e+1);!function(e,t,i,a){B(e),B(t),B(a),B(t),B(i),B(a);let s=r.length/3,o=y.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);V(o[0]),V(o[1]),V(o[3]),V(o[1]),V(o[2]),V(o[3])}(t+a+i,t+s+i,t+s+o,t+a+o)}}}function F(e,t,n){u.push(e),u.push(t),u.push(n)}function k(e,t,i){B(e),B(t),B(i);let a=r.length/3,s=y.generateTopUV(n,r,a-3,a-2,a-1);V(s[0]),V(s[1]),V(s[2])}function B(e){r.push(u[3*e+0]),r.push(u[3*e+1]),r.push(u[3*e+2])}function V(e){i.push(e.x),i.push(e.y)}(function(){let e=r.length/3;if(p){let e=0*C;for(let t=0;t<P;t++){let n=T[t];k(n[2]+e,n[1]+e,n[0]+e)}e=C*(d+2*v);for(let t=0;t<P;t++){let n=T[t];k(n[0]+e,n[1]+e,n[2]+e)}}else{for(let e=0;e<P;e++){let t=T[e];k(t[2],t[1],t[0])}for(let e=0;e<P;e++){let t=T[e];k(t[0]+C*d,t[1]+C*d,t[2]+C*d)}}n.addGroup(e,r.length/3-e,0)})(),function(){let e=r.length/3,t=0;U(A,0),t+=A.length;for(let e=0,n=M.length;e<n;e++){let n=M[e];U(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}(e[a]);this.setAttribute("position",new nm(r,3)),this.setAttribute("uv",new nm(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){let r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}let r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=new ry[r.type]().fromJSON(r)),new rY(n,e.options)}}let rK={generateTopUV:function(e,t,n,r,i){let a=t[3*n],s=t[3*n+1],o=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new eL(a,s),new eL(o,l),new eL(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){let s=t[3*n],o=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-c)<Math.abs(s-u)?[new eL(s,1-l),new eL(u,1-d),new eL(h,1-f),new eL(m,1-v)]:[new eL(o,1-l),new eL(c,1-d),new eL(p,1-f),new eL(g,1-v)]}};class rZ extends rw{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rZ(e.radius,e.detail)}}class rJ extends rw{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rJ(e.radius,e.detail)}}class rQ extends nE{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let i=e/2,a=t/2,s=Math.floor(n),o=Math.floor(r),l=s+1,u=o+1,c=e/s,d=t/o,h=[],p=[],f=[],m=[];for(let e=0;e<u;e++){let t=e*d-a;for(let n=0;n<l;n++){let r=n*c-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/s),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){let n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;h.push(n,r,a),h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new nm(p,3)),this.setAttribute("normal",new nm(f,3)),this.setAttribute("uv",new nm(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rQ(e.width,e.height,e.widthSegments,e.heightSegments)}}class r0 extends nE{constructor(e=.5,t=1,n=32,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);let s=[],o=[],l=[],u=[],c=e,d=(t-e)/(r=Math.max(1,r)),h=new e3,p=new eL;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){let r=i+e/n*a;h.x=c*Math.cos(r),h.y=c*Math.sin(r),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,u.push(p.x,p.y)}c+=d}for(let e=0;e<r;e++){let t=e*(n+1);for(let e=0;e<n;e++){let r=e+t,i=r+n+1,a=r+n+2,o=r+1;s.push(r,i,o),s.push(i,a,o)}}this.setIndex(s),this.setAttribute("position",new nm(o,3)),this.setAttribute("normal",new nm(l,3)),this.setAttribute("uv",new nm(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class r1 extends nE{constructor(e=new rP([new eL(0,.5),new eL(-.5,-.5),new eL(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],r=[],i=[],a=[],s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,o,t),s+=o,o=0;function l(e){let s=r.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===rq.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){let t=c[e];!0===rq.isClockWise(t)&&(c[e]=t.reverse())}let d=rq.triangulateShape(u,c);for(let e=0,t=c.length;e<t;e++){let t=c[e];u=u.concat(t)}for(let e=0,t=u.length;e<t;e++){let t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){let t=d[e],r=t[0]+s,i=t[1]+s,a=t[2]+s;n.push(r,i,a),o+=3}}this.setIndex(n),this.setAttribute("position",new nm(r,3)),this.setAttribute("normal",new nm(i,3)),this.setAttribute("uv",new nm(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){let r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}return new r1(n,e.curveSegments)}}class r3 extends nE{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let o=Math.min(a+s,Math.PI),l=0,u=[],c=new e3,d=new e3,h=[],p=[],f=[],m=[];for(let h=0;h<=n;h++){let g=[],v=h/n,_=0;0===h&&0===a?_=.5/t:h===n&&o===Math.PI&&(_=-.5/t);for(let n=0;n<=t;n++){let o=n/t;c.x=-e*Math.cos(r+o*i)*Math.sin(a+v*s),c.y=e*Math.cos(a+v*s),c.z=e*Math.sin(r+o*i)*Math.sin(a+v*s),p.push(c.x,c.y,c.z),d.copy(c).normalize(),f.push(d.x,d.y,d.z),m.push(o+_,1-v),g.push(l++)}u.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){let t=u[e][r+1],i=u[e][r],s=u[e+1][r],l=u[e+1][r+1];(0!==e||a>0)&&h.push(t,i,l),(e!==n-1||o<Math.PI)&&h.push(i,s,l)}this.setIndex(h),this.setAttribute("position",new nm(p,3)),this.setAttribute("normal",new nm(f,3)),this.setAttribute("uv",new nm(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r3(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class r2 extends rw{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new r2(e.radius,e.detail)}}class r6 extends nE{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);let a=[],s=[],o=[],l=[],u=new e3,c=new e3,d=new e3;for(let a=0;a<=n;a++)for(let h=0;h<=r;h++){let p=h/r*i,f=a/n*Math.PI*2;c.x=(e+t*Math.cos(f))*Math.cos(p),c.y=(e+t*Math.cos(f))*Math.sin(p),c.z=t*Math.sin(f),s.push(c.x,c.y,c.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),d.subVectors(c,u).normalize(),o.push(d.x,d.y,d.z),l.push(h/r),l.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,s=(r+1)*(e-1)+t,o=(r+1)*e+t;a.push(n,i,o),a.push(i,s,o)}this.setIndex(a),this.setAttribute("position",new nm(s,3)),this.setAttribute("normal",new nm(o,3)),this.setAttribute("uv",new nm(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r6(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class r7 extends nE{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);let s=[],o=[],l=[],u=[],c=new e3,d=new e3,h=new e3,p=new e3,f=new e3,m=new e3,g=new e3;for(let s=0;s<=n;++s){let _=s/n*i*Math.PI*2;v(_,i,a,e,h),v(_+.01,i,a,e,p),m.subVectors(p,h),g.addVectors(p,h),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){let i=e/r*Math.PI*2,a=-t*Math.cos(i),p=t*Math.sin(i);c.x=h.x+(a*g.x+p*f.x),c.y=h.y+(a*g.y+p*f.y),c.z=h.z+(a*g.z+p*f.z),o.push(c.x,c.y,c.z),d.subVectors(c,h).normalize(),l.push(d.x,d.y,d.z),u.push(s/n),u.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;s.push(n,i,o),s.push(i,a,o)}function v(e,t,n,r,i){let a=Math.cos(e),s=Math.sin(e),o=n/t*e,l=Math.cos(o);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*s*.5,i.z=r*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new nm(o,3)),this.setAttribute("normal",new nm(l,3)),this.setAttribute("uv",new nm(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r7(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class r4 extends nE{constructor(e=new rv(new e3(-1,-1,0),new e3(-1,1,0),new e3(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};let a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;let s=new e3,o=new e3,l=new eL,u=new e3,c=[],d=[],h=[],p=[];function f(i){u=e.getPointAt(i/t,u);let l=a.normals[i],h=a.binormals[i];for(let e=0;e<=r;e++){let t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+i*h.x,o.y=a*l.y+i*h.y,o.z=a*l.z+i*h.z,o.normalize(),d.push(o.x,o.y,o.z),s.x=u.x+n*o.x,s.y=u.y+n*o.y,s.z=u.z+n*o.z,c.push(s.x,s.y,s.z)}}(function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;p.push(n,i,s),p.push(i,a,s)}}()})(),this.setIndex(p),this.setAttribute("position",new nm(c,3)),this.setAttribute("normal",new nm(d,3)),this.setAttribute("uv",new nm(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new r4(new ry[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class r5 extends no{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class r8 extends no{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function r9(e,t,n){return e&&(n||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}class ie{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(!(e>=i)){let s=t[1];e<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0;break n}break e}for(;n<a;){let r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class it extends ie{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){let r=this.parameterPositions,i=e-2,a=e+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:i=e,s=2*t-n;break;case 2402:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*n-t;break;case 2402:a=1,o=n+r[1]-r[0];break;default:a=e-1,o=t}let l=(n-t)*.5,u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=i*u,this._offsetNext=a*u}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,_=(-1-h)*m+(1.5+h)*f+.5*p,y=h*m-h*f;for(let e=0;e!==s;++e)i[e]=g*a[u+e]+v*a[l+e]+_*a[o+e]+y*a[c+e];return i}}class ir extends ie{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(n-t)/(r-t),c=1-u;for(let e=0;e!==s;++e)i[e]=a[l+e]*c+a[o+e]*u;return i}}class ii extends ie{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ia{constructor(e,t,n,r){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=r9(t,this.TimeBufferType),this.values=r9(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t;let n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:r9(e.times,Array),values:r9(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new ii(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ir(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new it(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);let e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){let r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&ArrayBuffer.isView(r)&&!(r instanceof DataView))for(let t=0,n=r.length;t!==n;++t){let n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1,a=1;for(let s=1;s<i;++s){let i=!1,o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0])){if(r)i=!0;else{let e=s*n,r=e-n,a=e+n;for(let s=0;s!==n;++s){let n=t[e+s];if(n!==t[r+s]||n!==t[a+s]){i=!0;break}}}}if(i){if(s!==a){e[a]=e[s];let r=s*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,s=0;s!==n;++s)t[r+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),n=new this.constructor(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}ia.prototype.TimeBufferType=Float32Array,ia.prototype.ValueBufferType=Float32Array,ia.prototype.DefaultInterpolation=2301;class is extends ia{constructor(e,t,n){super(e,t,n)}}is.prototype.ValueTypeName="bool",is.prototype.ValueBufferType=Array,is.prototype.DefaultInterpolation=2300,is.prototype.InterpolantFactoryMethodLinear=void 0,is.prototype.InterpolantFactoryMethodSmooth=void 0;class io extends ia{}io.prototype.ValueTypeName="color";class il extends ia{}il.prototype.ValueTypeName="number";class iu extends ie{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(r-t),l=e*s;for(let e=l+s;l!==e;l+=4)e1.slerpFlat(i,0,a,l-s,a,l,o);return i}}class ic extends ia{InterpolantFactoryMethodLinear(e){return new iu(this.times,this.values,this.getValueSize(),e)}}ic.prototype.ValueTypeName="quaternion",ic.prototype.InterpolantFactoryMethodSmooth=void 0;class id extends ia{constructor(e,t,n){super(e,t,n)}}id.prototype.ValueTypeName="string",id.prototype.ValueBufferType=Array,id.prototype.DefaultInterpolation=2300,id.prototype.InterpolantFactoryMethodLinear=void 0,id.prototype.InterpolantFactoryMethodSmooth=void 0;class ih extends ia{}ih.prototype.ValueTypeName="vector";class ip{constructor(e,t,n){let r;let i=this,a=!1,s=0,o=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,o),s===o&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return -1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){let n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}let im=new ip;class ig{constructor(e){this.manager=void 0!==e?e:im,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ig.DEFAULT_MATERIAL_NAME="__DEFAULT";class iv extends nH{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class i_ extends nX{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}let iy="\\[\\]\\.:\\/",ix=RegExp("["+iy+"]","g"),ib="[^"+iy+"]",iS="[^"+iy.replace("\\.","")+"]",iE=/((?:WC+[\/:])*)/.source.replace("WC",ib),iM=RegExp("^"+iE+/(WCOD+)?/.source.replace("WCOD",iS)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ib)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ib)+"$"),iT=["material","materials","bones","map"];class iA{constructor(e,t,n){let r=n||iw.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class iw{constructor(e,t,n){this.path=t,this.parsedPath=n||iw.parseTrackName(t),this.node=iw.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new iw.Composite(e,t,n):new iw(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ix,"")}static parseTrackName(e){let t=iM.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){let e=n.nodeName.substring(r+1);-1!==iT.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(e){for(let r=0;r<e.length;r++){let i=e[r];if(i.name===t||i.uuid===t)return i;let a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=iw.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(void 0===e[n]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(void 0!==r){if(void 0===e[r]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[r]}}let a=e[r];if(void 0===a){console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?s=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}iw.Composite=iA,iw.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},iw.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},iw.prototype.GetterByBindingType=[iw.prototype._getValue_direct,iw.prototype._getValue_array,iw.prototype._getValue_arrayElement,iw.prototype._getValue_toArray],iw.prototype.SetterByBindingTypeAndVersioning=[[iw.prototype._setValue_direct,iw.prototype._setValue_direct_setNeedsUpdate,iw.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[iw.prototype._setValue_array,iw.prototype._setValue_array_setNeedsUpdate,iw.prototype._setValue_array_setMatrixWorldNeedsUpdate],[iw.prototype._setValue_arrayElement,iw.prototype._setValue_arrayElement_setNeedsUpdate,iw.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[iw.prototype._setValue_fromArray,iw.prototype._setValue_fromArray_setNeedsUpdate,iw.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);let iC=new tS;class iP{constructor(e,t,n=0,r=1/0){this.ray=new tb(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new tD,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return iC.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(iC),this}intersectObject(e,t=!0,n=[]){return iI(e,this,n,t),n.sort(iR),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)iI(e[r],this,n,t);return n.sort(iR),n}}function iR(e,t){return e.distance-t.distance}function iI(e,t,n,r){let i=!0;if(e.layers.test(t.layers)&&!1===e.raycast(t,n)&&(i=!1),!0===i&&!0===r){let r=e.children;for(let e=0,i=r.length;e<i;e++)iI(r[e],t,n,!0)}}function iL(e,t,n,r){let i=function(e){switch(e){case 1009:case 1010:return{byteLength:1,components:1};case 1012:case 1011:case 1016:return{byteLength:2,components:1};case 1017:case 1018:return{byteLength:2,components:4};case 1014:case 1013:case 1015:return{byteLength:4,components:1};case 35902:return{byteLength:4,components:3}}throw Error(`Unknown texture type ${e}.`)}(r);switch(n){case 1021:case 1024:return e*t;case 1025:return e*t*2;case 1028:case 1029:return e*t/i.components*i.byteLength;case 1030:case 1031:return e*t*2/i.components*i.byteLength;case 1022:return e*t*3/i.components*i.byteLength;case 1023:case 1033:return e*t*4/i.components*i.byteLength;case 33776:case 33777:case 36196:case 37492:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case 33778:case 33779:case 37496:case 37808:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case 35841:case 35843:return Math.max(e,16)*Math.max(t,8)/4;case 35840:case 35842:return Math.max(e,8)*Math.max(t,8)/2;case 37809:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case 37810:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case 37811:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case 37812:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case 37813:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case 37814:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case 37815:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case 37816:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case 37817:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case 37818:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case 37819:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case 37820:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case 37821:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case 36492:case 36494:case 36495:case 36285:case 36286:return Math.ceil(e/4)*Math.ceil(t/4)*16;case 36283:case 36284:return Math.ceil(e/4)*Math.ceil(t/4)*8}throw Error(`Unable to determine texture byte length for ${n} format.`)}function iD(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function iO(e){let t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);let r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){let e=t.get(n);(!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version});return}let i=t.get(n);if(void 0===i)t.set(n,function(t,n){let r;let i=t.array,a=t.usage,s=i.byteLength,o=e.createBuffer();if(e.bindBuffer(n,o),e.bufferData(n,i,a),t.onUploadCallback(),i instanceof Float32Array)r=e.FLOAT;else if(i instanceof Uint16Array)r=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)r=e.SHORT;else if(i instanceof Uint32Array)r=e.UNSIGNED_INT;else if(i instanceof Int32Array)r=e.INT;else if(i instanceof Int8Array)r=e.BYTE;else if(i instanceof Uint8Array)r=e.UNSIGNED_BYTE;else if(i instanceof Uint8ClampedArray)r=e.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);return{buffer:o,type:r,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:s}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){let i=n.array,a=n.updateRanges;if(e.bindBuffer(r,t),0===a.length)e.bufferSubData(r,0,i);else{a.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<a.length;e++){let n=a[t],r=a[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):a[++t]=r}a.length=t+1;for(let t=0,n=a.length;t<n;t++){let n=a[t];e.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"173"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="173");let iN={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		#else\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},iU={common:{diffuse:{value:new ni(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new eD},alphaMap:{value:null},alphaMapTransform:{value:new eD},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new eD}},envmap:{envMap:{value:null},envMapRotation:{value:new eD},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new eD}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new eD}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new eD},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new eD},normalScale:{value:new eL(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new eD},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new eD}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new eD}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new eD}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ni(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ni(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new eD},alphaTest:{value:0},uvTransform:{value:new eD}},sprite:{diffuse:{value:new ni(0xffffff)},opacity:{value:1},center:{value:new eL(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new eD},alphaMap:{value:null},alphaMapTransform:{value:new eD},alphaTest:{value:0}}},iF={basic:{uniforms:nB([iU.common,iU.specularmap,iU.envmap,iU.aomap,iU.lightmap,iU.fog]),vertexShader:iN.meshbasic_vert,fragmentShader:iN.meshbasic_frag},lambert:{uniforms:nB([iU.common,iU.specularmap,iU.envmap,iU.aomap,iU.lightmap,iU.emissivemap,iU.bumpmap,iU.normalmap,iU.displacementmap,iU.fog,iU.lights,{emissive:{value:new ni(0)}}]),vertexShader:iN.meshlambert_vert,fragmentShader:iN.meshlambert_frag},phong:{uniforms:nB([iU.common,iU.specularmap,iU.envmap,iU.aomap,iU.lightmap,iU.emissivemap,iU.bumpmap,iU.normalmap,iU.displacementmap,iU.fog,iU.lights,{emissive:{value:new ni(0)},specular:{value:new ni(1118481)},shininess:{value:30}}]),vertexShader:iN.meshphong_vert,fragmentShader:iN.meshphong_frag},standard:{uniforms:nB([iU.common,iU.envmap,iU.aomap,iU.lightmap,iU.emissivemap,iU.bumpmap,iU.normalmap,iU.displacementmap,iU.roughnessmap,iU.metalnessmap,iU.fog,iU.lights,{emissive:{value:new ni(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:iN.meshphysical_vert,fragmentShader:iN.meshphysical_frag},toon:{uniforms:nB([iU.common,iU.aomap,iU.lightmap,iU.emissivemap,iU.bumpmap,iU.normalmap,iU.displacementmap,iU.gradientmap,iU.fog,iU.lights,{emissive:{value:new ni(0)}}]),vertexShader:iN.meshtoon_vert,fragmentShader:iN.meshtoon_frag},matcap:{uniforms:nB([iU.common,iU.bumpmap,iU.normalmap,iU.displacementmap,iU.fog,{matcap:{value:null}}]),vertexShader:iN.meshmatcap_vert,fragmentShader:iN.meshmatcap_frag},points:{uniforms:nB([iU.points,iU.fog]),vertexShader:iN.points_vert,fragmentShader:iN.points_frag},dashed:{uniforms:nB([iU.common,iU.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:iN.linedashed_vert,fragmentShader:iN.linedashed_frag},depth:{uniforms:nB([iU.common,iU.displacementmap]),vertexShader:iN.depth_vert,fragmentShader:iN.depth_frag},normal:{uniforms:nB([iU.common,iU.bumpmap,iU.normalmap,iU.displacementmap,{opacity:{value:1}}]),vertexShader:iN.meshnormal_vert,fragmentShader:iN.meshnormal_frag},sprite:{uniforms:nB([iU.sprite,iU.fog]),vertexShader:iN.sprite_vert,fragmentShader:iN.sprite_frag},background:{uniforms:{uvTransform:{value:new eD},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:iN.background_vert,fragmentShader:iN.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new eD}},vertexShader:iN.backgroundCube_vert,fragmentShader:iN.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:iN.cube_vert,fragmentShader:iN.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:iN.equirect_vert,fragmentShader:iN.equirect_frag},distanceRGBA:{uniforms:nB([iU.common,iU.displacementmap,{referencePosition:{value:new e3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:iN.distanceRGBA_vert,fragmentShader:iN.distanceRGBA_frag},shadow:{uniforms:nB([iU.lights,iU.fog,{color:{value:new ni(0)},opacity:{value:1}}]),vertexShader:iN.shadow_vert,fragmentShader:iN.shadow_frag}};iF.physical={uniforms:nB([iF.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new eD},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new eD},clearcoatNormalScale:{value:new eL(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new eD},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new eD},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new eD},sheen:{value:0},sheenColor:{value:new ni(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new eD},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new eD},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new eD},transmissionSamplerSize:{value:new eL},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new eD},attenuationDistance:{value:0},attenuationColor:{value:new ni(0)},specularColor:{value:new ni(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new eD},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new eD},anisotropyVector:{value:new eL},anisotropyMap:{value:null},anisotropyMapTransform:{value:new eD}}]),vertexShader:iN.meshphysical_vert,fragmentShader:iN.meshphysical_frag};let ik={r:0,b:0,g:0},iB=new tL,iV=new tS;function iz(e,t,n,r,i,a,s){let o,l;let u=new ni(0),c=!0===a?0:1,d=null,h=0,p=null;function f(e){let r=!0===e.isScene?e.background:null;return r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r)),r}function m(t,n){t.getRGB(ik,nV(e)),r.buffers.color.setClear(ik.r,ik.g,ik.b,n,s)}return{getClearColor:function(){return u},setClearColor:function(e,t=1){u.set(e),m(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){m(u,c=e)},render:function(t){let n=!1,i=f(t);null===i?m(u,c):i&&i.isColor&&(m(i,1),n=!0);let a=e.xr.getEnvironmentBlendMode();"additive"===a?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===a&&r.buffers.color.setClear(0,0,0,0,s),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){let r=f(n);r&&(r.isCubeTexture||306===r.mapping)?(void 0===l&&((l=new nN(new nF(1,1,1),new nj({name:"BackgroundCubeMaterial",uniforms:nk(iF.backgroundCube.uniforms),vertexShader:iF.backgroundCube.vertexShader,fragmentShader:iF.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),iB.copy(n.backgroundRotation),iB.x*=-1,iB.y*=-1,iB.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(iB.y*=-1,iB.z*=-1),l.material.uniforms.envMap.value=r,l.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.uniforms.backgroundRotation.value.setFromMatrix4(iV.makeRotationFromEuler(iB)),l.material.toneMapped=ez.getTransfer(r.colorSpace)!==eS,(d!==r||h!==r.version||p!==e.toneMapping)&&(l.material.needsUpdate=!0,d=r,h=r.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null)):r&&r.isTexture&&(void 0===o&&((o=new nN(new rQ(2,2),new nj({name:"BackgroundMaterial",uniforms:nk(iF.background.uniforms),vertexShader:iF.background.vertexShader,fragmentShader:iF.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=r,o.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,o.material.toneMapped=ez.getTransfer(r.colorSpace)!==eS,!0===r.matrixAutoUpdate&&r.updateMatrix(),o.material.uniforms.uvTransform.value.copy(r.matrix),(d!==r||h!==r.version||p!==e.toneMapping)&&(o.material.needsUpdate=!0,d=r,h=r.version,p=e.toneMapping),o.layers.enableAll(),t.unshift(o,o.geometry,o.material,0,0,null))},dispose:function(){void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0),void 0!==o&&(o.geometry.dispose(),o.material.dispose(),o=void 0)}}}function ij(e,t){let n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=u(null),a=i,s=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function u(e){let t=[],r=[],i=[];for(let e=0;e<n;e++)t[e]=0,r[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function c(){let e=a.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function d(e){h(e,0)}function h(t,n){let r=a.newAttributes,i=a.enabledAttributes,s=a.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),s[t]!==n&&(e.vertexAttribDivisor(t,n),s[t]=n)}function p(){let t=a.newAttributes,n=a.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function f(t,n,r,i,a,s,o){!0===o?e.vertexAttribIPointer(t,n,r,a,s):e.vertexAttribPointer(t,n,r,i,a,s)}function m(){g(),s=!0,a!==i&&o((a=i).object)}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,l,m,g){let v=!1,_=function(t,n,i){let a=!0===i.wireframe,s=r[t.id];void 0===s&&(s={},r[t.id]=s);let o=s[n.id];void 0===o&&(o={},s[n.id]=o);let l=o[a];return void 0===l&&(l=u(e.createVertexArray()),o[a]=l),l}(m,l,i);a!==_&&o((a=_).object),(v=function(e,t,n,r){let i=a.attributes,s=t.attributes,o=0,l=n.getAttributes();for(let t in l)if(l[t].location>=0){let n=i[t],r=s[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n||n.attribute!==r||r&&n.data!==r.data)return!0;o++}return a.attributesNum!==o||a.index!==r}(n,m,l,g))&&function(e,t,n,r){let i={},s=t.attributes,o=0,l=n.getAttributes();for(let t in l)if(l[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));let r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,o++}a.attributes=i,a.attributesNum=o,a.index=r}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||s)&&(s=!1,function(n,r,i,a){c();let s=a.attributes,o=i.getAttributes(),l=r.defaultAttributeValues;for(let r in o){let i=o[r];if(i.location>=0){let o=s[r];if(void 0===o&&("instanceMatrix"===r&&n.instanceMatrix&&(o=n.instanceMatrix),"instanceColor"===r&&n.instanceColor&&(o=n.instanceColor)),void 0!==o){let r=o.normalized,s=o.itemSize,l=t.get(o);if(void 0===l)continue;let u=l.buffer,c=l.type,p=l.bytesPerElement,m=c===e.INT||c===e.UNSIGNED_INT||1013===o.gpuType;if(o.isInterleavedBufferAttribute){let t=o.data,l=t.stride,g=o.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)h(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)d(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<i.locationSize;e++)f(i.location+e,s/i.locationSize,c,r,l*p,(g+s/i.locationSize*e)*p,m)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)h(i.location+e,o.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<i.locationSize;e++)d(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<i.locationSize;e++)f(i.location+e,s/i.locationSize,c,r,s*p,s/i.locationSize*e*p,m)}}else if(void 0!==l){let t=l[r];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}p()}(n,i,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){for(let e in m(),r){let t=r[e];for(let e in t){let n=t[e];for(let e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;let t=r[e.id];for(let e in t){let n=t[e];for(let e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e.id]},releaseStatesOfProgram:function(e){for(let t in r){let n=r[t];if(void 0===n[e.id])continue;let i=n[e.id];for(let e in i)l(i[e].object),delete i[e];delete n[e.id]}},initAttributes:c,enableAttribute:d,disableUnusedAttributes:p}}function iH(e,t,n){let r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,a);let s=0;for(let e=0;e<a;e++)s+=i[e];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,a,s,o){if(0===s)return;let l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],a[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,a,0,o,0,s);let t=0;for(let e=0;e<s;e++)t+=a[e]*o[e];n.update(t,r,1)}}}function iG(e,t,n,r){let i;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp",o=a(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);let l=!0===n.logarithmicDepthBuffer,u=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,textureFormatReadable:function(t){return 1023===t||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){let i=1016===n&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return 1009===n||r.convert(n)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)||1015===n||!!i},precision:s,logarithmicDepthBuffer:l,reverseDepthBuffer:u,maxTextures:c,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:d>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function iW(e){let t=this,n=null,r=0,i=!1,a=!1,s=new n6,o=new eD,l={value:null,needsUpdate:!1};function u(e,n,r,i){let a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==i||null===u){let t=r+4*a,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===u||u.length<t)&&(u=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(i,o),s.normal.toArray(u,n),u[n+3]=s.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(s,o,c){let d=s.clippingPlanes,h=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(i&&null!==d&&0!==d.length&&(!a||p)){let e=a?0:r,t=4*e,i=f.clippingState||null;l.value=i,i=u(d,o,t,c);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}else a?u(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0)}}function iq(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let a=i.mapping;if(303===a||304===a){if(t.has(i))return n(t.get(i).texture,i.mapping);{let a=i.image;if(!a||!(a.height>0))return null;{let s=new nK(a.height);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}}}}return i},dispose:function(){t=new WeakMap}}}let iX=[.125,.215,.35,.446,.526,.582],i$=new iv,iY=new ni,iK=null,iZ=0,iJ=0,iQ=!1,i0=(1+Math.sqrt(5))/2,i1=1/i0,i3=[new e3(-i0,i1,0),new e3(i0,i1,0),new e3(-i1,0,i0),new e3(i1,0,i0),new e3(0,i0,-i1),new e3(0,i0,i1),new e3(-1,1,-1),new e3(1,1,-1),new e3(-1,1,1),new e3(1,1,1)];class i2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){iK=this._renderer.getRenderTarget(),iZ=this._renderer.getActiveCubeFace(),iJ=this._renderer.getActiveMipmapLevel(),iQ=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=i5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=i4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(iK,iZ,iJ),this._renderer.xr.enabled=iQ,e.scissorTest=!1,i7(e,0,0,e.width,e.height)}_fromTexture(e,t){301===e.mapping||302===e.mapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),iK=this._renderer.getRenderTarget(),iZ=this._renderer.getActiveCubeFace(),iJ=this._renderer.getActiveMipmapLevel(),iQ=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:ex,depthBuffer:!1},r=i6(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=i6(e,t,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],n=[],r=[],i=e,a=e-4+1+iX.length;for(let s=0;s<a;s++){let a=Math.pow(2,i);n.push(a);let o=1/a;s>e-4?o=iX[s-e+4-1]:0===s&&(o=0),r.push(o);let l=1/(a-2),u=-l,c=1+l,d=[u,u,c,u,c,c,u,u,c,c,u,c],h=new Float32Array(108),p=new Float32Array(72),f=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];h.set(r,18*e),p.set(d,12*e);let i=[e,e,e,e,e,e];f.set(i,6*e)}let m=new nE;m.setAttribute("position",new nh(h,3)),m.setAttribute("uv",new nh(p,2)),m.setAttribute("faceIndex",new nh(f,1)),t.push(m),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=new nj({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new e3(0,1,0)}},vertexShader:i8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}return r}_compileMaterial(e){let t=new nN(this._lodPlanes[0],e);this._renderer.compile(t,i$)}_sceneToCubeUV(e,t,n,r){let i=new nX(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.toneMapping;o.getClearColor(iY),o.toneMapping=0,o.autoClear=!1;let c=new nl({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new nN(new nF,c),h=!1,p=e.background;p?p.isColor&&(c.color.copy(p),e.background=null,h=!0):(c.color.copy(iY),h=!0);for(let t=0;t<6;t++){let n=t%3;0===n?(i.up.set(0,a[t],0),i.lookAt(s[t],0,0)):1===n?(i.up.set(0,0,a[t]),i.lookAt(0,s[t],0)):(i.up.set(0,a[t],0),i.lookAt(0,0,s[t]));let l=this._cubeSize;i7(r,n*l,t>2?l:0,l,l),o.setRenderTarget(r),h&&o.render(d,i),o.render(e,i)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=u,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){let n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=i5()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=i4());let i=r?this._cubemapMaterial:this._equirectMaterial,a=new nN(this._lodPlanes[0],i);i.uniforms.envMap.value=e;let s=this._cubeSize;i7(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,i$)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let t=1;t<r;t++){let n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=i3[(r-t-1)%i3.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,r,i){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,s){let o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");let u=new nN(this._lodPlanes[r],l),c=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,p=i/h,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);let m=[],g=0;for(let e=0;e<20;++e){let t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===a,s&&(c.poleAxis.value=s);let{_lodMax:v}=this;c.dTheta.value=h,c.mipInt.value=v-n;let _=this._sizeLods[r],y=4*(this._cubeSize-_);i7(t,3*_*(r>v-4?r-v+4:0),y,3*_,2*_),o.setRenderTarget(t),o.render(u,i$)}}function i6(e,t,n){let r=new eJ(e,t,n);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function i7(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function i4(){return new nj({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:i8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function i5(){return new nj({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:i8(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function i8(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function i9(e){let t=new WeakMap,n=null;function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let a=i.mapping,s=303===a||304===a,o=301===a||302===a;if(s||o){let a=t.get(i),l=void 0!==a?a.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new i2(e)),(a=s?n.fromEquirectangular(i,a):n.fromCubemap(i,a)).texture.pmremVersion=i.pmremVersion,t.set(i,a),a.texture;if(void 0!==a)return a.texture;{let l=i.image;return s&&l&&l.height>0||o&&l&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(l)?(null===n&&(n=new i2(e)),(a=s?n.fromEquirectangular(i):n.fromCubemap(i)).texture.pmremVersion=i.pmremVersion,t.set(i,a),i.addEventListener("dispose",r),a.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function ae(e){let t={};function n(n){let r;if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){let t=n(e);return null===t&&ek("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function at(e,t,n,r){let i={},a=new WeakMap;function s(e){let o=e.target;for(let e in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",s),delete i[o.id];let l=a.get(o);l&&(t.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){let n=[],r=e.index,i=e.attributes.position,s=0;if(null!==r){let e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){let r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;let e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){let e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}let o=new(eN(n)?nf:np)(n,1);o.version=s;let l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(n){let r=n.attributes;for(let n in r)t.update(r[n],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){let t=a.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function an(e,t,n){let r,i,a;function s(t,s,o){0!==o&&(e.drawElementsInstanced(r,s,i,t*a,o),n.update(s,r,o))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,s){e.drawElements(r,s,i,t*a),n.update(s,r,1)},this.renderInstances=s,this.renderMultiDraw=function(e,a,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,e,0,s);let o=0;for(let e=0;e<s;e++)o+=a[e];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,o,l,u){if(0===l)return;let c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)s(e[t]/a,o[t],u[t]);else{c.multiDrawElementsInstancedWEBGL(r,o,0,i,e,0,u,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*u[e];n.update(t,r,1)}}}function ar(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=n/3*i;break;case e.LINES:t.lines+=n/2*i;break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function ai(e,t,n){let r=new WeakMap,i=new eK;return{update:function(a,s,o){let l=a.morphTargetInfluences,u=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,c=void 0!==u?u.length:0,d=r.get(s);if(void 0===d||d.count!==c){void 0!==d&&d.texture.dispose();let e=void 0!==s.morphAttributes.position,n=void 0!==s.morphAttributes.normal,a=void 0!==s.morphAttributes.color,o=s.morphAttributes.position||[],l=s.morphAttributes.normal||[],u=s.morphAttributes.color||[],h=0;!0===e&&(h=1),!0===n&&(h=2),!0===a&&(h=3);let p=s.attributes.position.count*h,f=1;p>t.maxTextureSize&&(f=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);let m=new Float32Array(p*f*4*c),g=new eQ(m,p,f,c);g.type=1015,g.needsUpdate=!0;let v=4*h;for(let t=0;t<c;t++){let r=o[t],s=l[t],c=u[t],d=p*f*4*t;for(let t=0;t<r.count;t++){let o=t*v;!0===e&&(i.fromBufferAttribute(r,t),m[d+o+0]=i.x,m[d+o+1]=i.y,m[d+o+2]=i.z,m[d+o+3]=0),!0===n&&(i.fromBufferAttribute(s,t),m[d+o+4]=i.x,m[d+o+5]=i.y,m[d+o+6]=i.z,m[d+o+7]=0),!0===a&&(i.fromBufferAttribute(c,t),m[d+o+8]=i.x,m[d+o+9]=i.y,m[d+o+10]=i.z,m[d+o+11]=4===c.itemSize?i.w:1)}}d={count:c,texture:g,size:new eL(p,f)},r.set(s,d),s.addEventListener("dispose",function e(){g.dispose(),r.delete(s),s.removeEventListener("dispose",e)})}if(!0===a.isInstancedMesh&&null!==a.morphTexture)o.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{let t=0;for(let e=0;e<l.length;e++)t+=l[e];let n=s.morphTargetsRelative?1:1-t;o.getUniforms().setValue(e,"morphTargetBaseInfluence",n),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",d.texture,n),o.getUniforms().setValue(e,"morphTargetsTextureSize",d.size)}}}function aa(e,t,n,r){let i=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){let o=r.render.frame,l=s.geometry,u=t.get(s,l);if(i.get(u)!==o&&(t.update(u),i.set(u,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),i.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),i.set(s,o))),s.isSkinnedMesh){let e=s.skeleton;i.get(e)!==o&&(e.update(),i.set(e,o))}return u},dispose:function(){i=new WeakMap}}}let as=new eY,ao=new n9(1,1),al=new eQ,au=new e0,ac=new nY,ad=[],ah=[],ap=new Float32Array(16),af=new Float32Array(9),am=new Float32Array(4);function ag(e,t,n){let r=e[0];if(r<=0||r>0)return e;let i=t*n,a=ad[i];if(void 0===a&&(a=new Float32Array(i),ad[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function av(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function a_(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function ay(e,t){let n=ah[t];void 0===n&&(n=new Int32Array(t),ah[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ax(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ab(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(av(n,t))return;e.uniform2fv(this.addr,t),a_(n,t)}}function aS(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(av(n,t))return;e.uniform3fv(this.addr,t),a_(n,t)}}function aE(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(av(n,t))return;e.uniform4fv(this.addr,t),a_(n,t)}}function aM(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(av(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),a_(n,t)}else{if(av(n,r))return;am.set(r),e.uniformMatrix2fv(this.addr,!1,am),a_(n,r)}}function aT(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(av(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),a_(n,t)}else{if(av(n,r))return;af.set(r),e.uniformMatrix3fv(this.addr,!1,af),a_(n,r)}}function aA(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(av(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),a_(n,t)}else{if(av(n,r))return;ap.set(r),e.uniformMatrix4fv(this.addr,!1,ap),a_(n,r)}}function aw(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function aC(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(av(n,t))return;e.uniform2iv(this.addr,t),a_(n,t)}}function aP(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(av(n,t))return;e.uniform3iv(this.addr,t),a_(n,t)}}function aR(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(av(n,t))return;e.uniform4iv(this.addr,t),a_(n,t)}}function aI(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function aL(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(av(n,t))return;e.uniform2uiv(this.addr,t),a_(n,t)}}function aD(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(av(n,t))return;e.uniform3uiv(this.addr,t),a_(n,t)}}function aO(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(av(n,t))return;e.uniform4uiv(this.addr,t),a_(n,t)}}function aN(e,t,n){let r;let i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),this.type===e.SAMPLER_2D_SHADOW?(ao.compareFunction=515,r=ao):r=as,n.setTexture2D(t||r,a)}function aU(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||au,i)}function aF(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||ac,i)}function ak(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||al,i)}function aB(e,t){e.uniform1fv(this.addr,t)}function aV(e,t){let n=ag(t,this.size,2);e.uniform2fv(this.addr,n)}function az(e,t){let n=ag(t,this.size,3);e.uniform3fv(this.addr,n)}function aj(e,t){let n=ag(t,this.size,4);e.uniform4fv(this.addr,n)}function aH(e,t){let n=ag(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function aG(e,t){let n=ag(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function aW(e,t){let n=ag(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function aq(e,t){e.uniform1iv(this.addr,t)}function aX(e,t){e.uniform2iv(this.addr,t)}function a$(e,t){e.uniform3iv(this.addr,t)}function aY(e,t){e.uniform4iv(this.addr,t)}function aK(e,t){e.uniform1uiv(this.addr,t)}function aZ(e,t){e.uniform2uiv(this.addr,t)}function aJ(e,t){e.uniform3uiv(this.addr,t)}function aQ(e,t){e.uniform4uiv(this.addr,t)}function a0(e,t,n){let r=this.cache,i=t.length,a=ay(n,i);av(r,a)||(e.uniform1iv(this.addr,a),a_(r,a));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||as,a[e])}function a1(e,t,n){let r=this.cache,i=t.length,a=ay(n,i);av(r,a)||(e.uniform1iv(this.addr,a),a_(r,a));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||au,a[e])}function a3(e,t,n){let r=this.cache,i=t.length,a=ay(n,i);av(r,a)||(e.uniform1iv(this.addr,a),a_(r,a));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||ac,a[e])}function a2(e,t,n){let r=this.cache,i=t.length,a=ay(n,i);av(r,a)||(e.uniform1iv(this.addr,a),a_(r,a));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||al,a[e])}class a6{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ax;case 35664:return ab;case 35665:return aS;case 35666:return aE;case 35674:return aM;case 35675:return aT;case 35676:return aA;case 5124:case 35670:return aw;case 35667:case 35671:return aC;case 35668:case 35672:return aP;case 35669:case 35673:return aR;case 5125:return aI;case 36294:return aL;case 36295:return aD;case 36296:return aO;case 35678:case 36198:case 36298:case 36306:case 35682:return aN;case 35679:case 36299:case 36307:return aU;case 35680:case 36300:case 36308:case 36293:return aF;case 36289:case 36303:case 36311:case 36292:return ak}}(t.type)}}class a7{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return aB;case 35664:return aV;case 35665:return az;case 35666:return aj;case 35674:return aH;case 35675:return aG;case 35676:return aW;case 5124:case 35670:return aq;case 35667:case 35671:return aX;case 35668:case 35672:return a$;case 35669:case 35673:return aY;case 5125:return aK;case 36294:return aZ;case 36295:return aJ;case 36296:return aQ;case 35678:case 36198:case 36298:case 36306:case 35682:return a0;case 35679:case 36299:case 36307:return a1;case 35680:case 36300:case 36308:case 36293:return a3;case 36289:case 36303:case 36311:case 36292:return a2}}(t.type)}}class a4{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let i=0,a=r.length;i!==a;++i){let a=r[i];a.setValue(e,t[a.id],n)}}}let a5=/(\w+)(\])?(\[|\.)?/g;function a8(e,t){e.seq.push(t),e.map[t.id]=t}class a9{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);!function(e,t,n){let r=e.name,i=r.length;for(a5.lastIndex=0;;){let a=a5.exec(r),s=a5.lastIndex,o=a[1],l="]"===a[2],u=a[3];if(l&&(o|=0),void 0===u||"["===u&&s+2===i){a8(n,void 0===u?new a6(o,e,t):new a7(o,e,t));break}{let e=n.map[o];void 0===e&&a8(n,e=new a4(o)),n=e}}}(n,i,this)}}setValue(e,t,n,r){let i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){let a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,i=e.length;r!==i;++r){let i=e[r];i.id in t&&n.push(i)}return n}}function se(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let st=0,sn=new eD;function sr(e,t,n){let r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";let a=/ERROR: 0:(\d+)/.exec(i);if(!a)return i;{let r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){let i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}}let si=new e3;function sa(e){return""!==e}function ss(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function so(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let sl=/^[ \t]*#include +<([\w\d./]+)>/gm;function su(e){return e.replace(sl,sd)}let sc=new Map;function sd(e,t){let n=iN[t];if(void 0===n){let e=sc.get(t);if(void 0!==e)n=iN[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e);else throw Error("Can not resolve #include <"+t+">")}return su(n)}let sh=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sp(e){return e.replace(sh,sf)}function sf(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function sm(e){let t=`precision ${e.precision} float;
	precision ${e.precision} int;
	precision ${e.precision} sampler2D;
	precision ${e.precision} samplerCube;
	precision ${e.precision} sampler3D;
	precision ${e.precision} sampler2DArray;
	precision ${e.precision} sampler2DShadow;
	precision ${e.precision} samplerCubeShadow;
	precision ${e.precision} sampler2DArrayShadow;
	precision ${e.precision} isampler2D;
	precision ${e.precision} isampler3D;
	precision ${e.precision} isamplerCube;
	precision ${e.precision} isampler2DArray;
	precision ${e.precision} usampler2D;
	precision ${e.precision} usampler3D;
	precision ${e.precision} usamplerCube;
	precision ${e.precision} usampler2DArray;
	`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function sg(e,t,n,r){let i,a,s,o,l,u;let c=e.getContext(),d=n.defines,h=n.vertexShader,p=n.fragmentShader,f=(l="SHADOWMAP_TYPE_BASIC",1===n.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?l="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(l="SHADOWMAP_TYPE_VSM"),l),m=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),g=(u="ENVMAP_MODE_REFLECTION",n.envMap&&302===n.envMapMode&&(u="ENVMAP_MODE_REFRACTION"),u),v=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),_=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:1/t,maxMip:n}}(n),y=[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(sa).join("\n"),x=function(e){let t=[];for(let n in e){let r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(d),b=c.createProgram(),S=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(sa).join("\n")).length>0&&(i+="\n"),(a=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(sa).join("\n")).length>0&&(a+="\n")):(i=[sm(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+g:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(sa).join("\n"),a=[sm(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.envMap?"#define "+g:"",n.envMap?"#define "+v:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?iN.tonemapping_pars_fragment:"",0!==n.toneMapping?function(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Cineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 7:n="Neutral";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",iN.colorspace_pars_fragment,function(e,t){let n=function(e){ez._getMatrix(sn,ez.workingColorSpace,e);let t=`mat3( ${sn.elements.map(e=>e.toFixed(4))} )`;switch(ez.getTransfer(e)){case eb:return[t,"LinearTransferOETF"];case eS:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) {
	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );
}`}("linearToOutputTexel",n.outputColorSpace),function(){ez.getLuminanceCoefficients(si);let e=si.x.toFixed(4),t=si.y.toFixed(4),n=si.z.toFixed(4);return`float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${e}, ${t}, ${n} );
	return dot( weights, rgb );
}`}(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(sa).join("\n")),h=so(h=ss(h=su(h),n),n),p=so(p=ss(p=su(p),n),n),h=sp(h),p=sp(p),!0!==n.isRawShaderMaterial&&(S="#version 300 es\n",i=[y,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===eE?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===eE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);let E=S+i+h,M=S+a+p,T=se(c,c.VERTEX_SHADER,E),A=se(c,c.FRAGMENT_SHADER,M);function w(t){if(e.debug.checkShaderErrors){let n=c.getProgramInfoLog(b).trim(),r=c.getShaderInfoLog(T).trim(),s=c.getShaderInfoLog(A).trim(),o=!0,l=!0;if(!1===c.getProgramParameter(b,c.LINK_STATUS)){if(o=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(c,b,T,A);else{let e=sr(c,T,"vertex"),r=sr(c,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(b,c.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):(""===r||""===s)&&(l=!1);l&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:i},fragmentShader:{log:s,prefix:a}})}c.deleteShader(T),c.deleteShader(A),s=new a9(c,b),o=function(e,t){let n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let r=e.getActiveAttrib(t,i),a=r.name,s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(c,b)}c.attachShader(b,T),c.attachShader(b,A),void 0!==n.index0AttributeName?c.bindAttribLocation(b,0,n.index0AttributeName):!0===n.morphTargets&&c.bindAttribLocation(b,0,"position"),c.linkProgram(b),this.getUniforms=function(){return void 0===s&&w(this),s},this.getAttributes=function(){return void 0===o&&w(this),o};let C=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===C&&(C=c.getProgramParameter(b,37297)),C},this.destroy=function(){r.releaseStatesOfProgram(this),c.deleteProgram(b),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=st++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=T,this.fragmentShader=A,this}let sv=0;class s_{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){for(let t of this.materialCache.get(e))t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new sy(e),t.set(e,n)),n}}class sy{constructor(e){this.id=sv++,this.code=e,this.usedTimes=0}}function sx(e,t,n,r,i,a,s){let o=new tD,l=new s_,u=new Set,c=[],d=i.logarithmicDepthBuffer,h=i.vertexTextures,p=i.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return(u.add(e),0===e)?"uv":`uv${e}`}return{getParameters:function(a,o,c,g,v){let _,y,x,b;let S=g.fog,E=v.geometry,M=a.isMeshStandardMaterial?g.environment:null,T=(a.isMeshStandardMaterial?n:t).get(a.envMap||M),A=T&&306===T.mapping?T.image.height:null,w=f[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead.");let C=E.morphAttributes.position||E.morphAttributes.normal||E.morphAttributes.color,P=void 0!==C?C.length:0,R=0;if(void 0!==E.morphAttributes.position&&(R=1),void 0!==E.morphAttributes.normal&&(R=2),void 0!==E.morphAttributes.color&&(R=3),w){let e=iF[w];_=e.vertexShader,y=e.fragmentShader}else _=a.vertexShader,y=a.fragmentShader,l.update(a),x=l.getVertexShaderID(a),b=l.getFragmentShaderID(a);let I=e.getRenderTarget(),L=e.state.buffers.depth.getReversed(),D=!0===v.isInstancedMesh,O=!0===v.isBatchedMesh,N=!!a.map,U=!!a.matcap,F=!!T,k=!!a.aoMap,B=!!a.lightMap,V=!!a.bumpMap,z=!!a.normalMap,j=!!a.displacementMap,H=!!a.emissiveMap,G=!!a.metalnessMap,W=!!a.roughnessMap,q=a.anisotropy>0,X=a.clearcoat>0,$=a.dispersion>0,Y=a.iridescence>0,K=a.sheen>0,Z=a.transmission>0,J=q&&!!a.anisotropyMap,Q=X&&!!a.clearcoatMap,ee=X&&!!a.clearcoatNormalMap,et=X&&!!a.clearcoatRoughnessMap,en=Y&&!!a.iridescenceMap,er=Y&&!!a.iridescenceThicknessMap,ei=K&&!!a.sheenColorMap,ea=K&&!!a.sheenRoughnessMap,es=!!a.specularMap,eo=!!a.specularColorMap,el=!!a.specularIntensityMap,eu=Z&&!!a.transmissionMap,ec=Z&&!!a.thicknessMap,ed=!!a.gradientMap,eh=!!a.alphaMap,ep=a.alphaTest>0,ef=!!a.alphaHash,em=!!a.extensions,eg=0;a.toneMapped&&(null===I||!0===I.isXRRenderTarget)&&(eg=e.toneMapping);let ev={shaderID:w,shaderType:a.type,shaderName:a.name,vertexShader:_,fragmentShader:y,defines:a.defines,customVertexShaderID:x,customFragmentShaderID:b,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:O,batchingColor:O&&null!==v._colorsTexture,instancing:D,instancingColor:D&&null!==v.instanceColor,instancingMorph:D&&null!==v.morphTexture,supportsVertexTextures:h,outputColorSpace:null===I?e.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:ex,alphaToCoverage:!!a.alphaToCoverage,map:N,matcap:U,envMap:F,envMapMode:F&&T.mapping,envMapCubeUVHeight:A,aoMap:k,lightMap:B,bumpMap:V,normalMap:z,displacementMap:h&&j,emissiveMap:H,normalMapObjectSpace:z&&1===a.normalMapType,normalMapTangentSpace:z&&0===a.normalMapType,metalnessMap:G,roughnessMap:W,anisotropy:q,anisotropyMap:J,clearcoat:X,clearcoatMap:Q,clearcoatNormalMap:ee,clearcoatRoughnessMap:et,dispersion:$,iridescence:Y,iridescenceMap:en,iridescenceThicknessMap:er,sheen:K,sheenColorMap:ei,sheenRoughnessMap:ea,specularMap:es,specularColorMap:eo,specularIntensityMap:el,transmission:Z,transmissionMap:eu,thicknessMap:ec,gradientMap:ed,opaque:!1===a.transparent&&1===a.blending&&!1===a.alphaToCoverage,alphaMap:eh,alphaTest:ep,alphaHash:ef,combine:a.combine,mapUv:N&&m(a.map.channel),aoMapUv:k&&m(a.aoMap.channel),lightMapUv:B&&m(a.lightMap.channel),bumpMapUv:V&&m(a.bumpMap.channel),normalMapUv:z&&m(a.normalMap.channel),displacementMapUv:j&&m(a.displacementMap.channel),emissiveMapUv:H&&m(a.emissiveMap.channel),metalnessMapUv:G&&m(a.metalnessMap.channel),roughnessMapUv:W&&m(a.roughnessMap.channel),anisotropyMapUv:J&&m(a.anisotropyMap.channel),clearcoatMapUv:Q&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:en&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:er&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:ei&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ea&&m(a.sheenRoughnessMap.channel),specularMapUv:es&&m(a.specularMap.channel),specularColorMapUv:eo&&m(a.specularColorMap.channel),specularIntensityMapUv:el&&m(a.specularIntensityMap.channel),transmissionMapUv:eu&&m(a.transmissionMap.channel),thicknessMapUv:ec&&m(a.thicknessMap.channel),alphaMapUv:eh&&m(a.alphaMap.channel),vertexTangents:!!E.attributes.tangent&&(z||q),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!E.attributes.color&&4===E.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!E.attributes.uv&&(N||eh),fog:!!S,useFog:!0===a.fog,fogExp2:!!S&&S.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:L,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==E.morphAttributes.position,morphNormals:void 0!==E.morphAttributes.normal,morphColors:void 0!==E.morphAttributes.color,morphTargetsCount:P,morphTextureStride:R,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:eg,decodeVideoTexture:N&&!0===a.map.isVideoTexture&&ez.getTransfer(a.map.colorSpace)===eS,decodeVideoTextureEmissive:H&&!0===a.emissiveMap.isVideoTexture&&ez.getTransfer(a.emissiveMap.colorSpace)===eS,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:em&&!0===a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(em&&!0===a.extensions.multiDraw||O)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ev.vertexUv1s=u.has(1),ev.vertexUv2s=u.has(2),ev.vertexUv3s=u.has(3),u.clear(),ev},getProgramCacheKey:function(t){let n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(n.push(t.precision),n.push(t.outputColorSpace),n.push(t.envMapMode),n.push(t.envMapCubeUVHeight),n.push(t.mapUv),n.push(t.alphaMapUv),n.push(t.lightMapUv),n.push(t.aoMapUv),n.push(t.bumpMapUv),n.push(t.normalMapUv),n.push(t.displacementMapUv),n.push(t.emissiveMapUv),n.push(t.metalnessMapUv),n.push(t.roughnessMapUv),n.push(t.anisotropyMapUv),n.push(t.clearcoatMapUv),n.push(t.clearcoatNormalMapUv),n.push(t.clearcoatRoughnessMapUv),n.push(t.iridescenceMapUv),n.push(t.iridescenceThicknessMapUv),n.push(t.sheenColorMapUv),n.push(t.sheenRoughnessMapUv),n.push(t.specularMapUv),n.push(t.specularColorMapUv),n.push(t.specularIntensityMapUv),n.push(t.transmissionMapUv),n.push(t.thicknessMapUv),n.push(t.combine),n.push(t.fogExp2),n.push(t.sizeAttenuation),n.push(t.morphTargetsCount),n.push(t.morphAttributeCount),n.push(t.numDirLights),n.push(t.numPointLights),n.push(t.numSpotLights),n.push(t.numSpotLightMaps),n.push(t.numHemiLights),n.push(t.numRectAreaLights),n.push(t.numDirLightShadows),n.push(t.numPointLightShadows),n.push(t.numSpotLightShadows),n.push(t.numSpotLightShadowsWithMaps),n.push(t.numLightProbes),n.push(t.shadowMapType),n.push(t.toneMapping),n.push(t.numClippingPlanes),n.push(t.numClipIntersection),n.push(t.depthPacking),o.disableAll(),t.supportsVertexTextures&&o.enable(0),t.instancing&&o.enable(1),t.instancingColor&&o.enable(2),t.instancingMorph&&o.enable(3),t.matcap&&o.enable(4),t.envMap&&o.enable(5),t.normalMapObjectSpace&&o.enable(6),t.normalMapTangentSpace&&o.enable(7),t.clearcoat&&o.enable(8),t.iridescence&&o.enable(9),t.alphaTest&&o.enable(10),t.vertexColors&&o.enable(11),t.vertexAlphas&&o.enable(12),t.vertexUv1s&&o.enable(13),t.vertexUv2s&&o.enable(14),t.vertexUv3s&&o.enable(15),t.vertexTangents&&o.enable(16),t.anisotropy&&o.enable(17),t.alphaHash&&o.enable(18),t.batching&&o.enable(19),t.dispersion&&o.enable(20),t.batchingColor&&o.enable(21),n.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.reverseDepthBuffer&&o.enable(4),t.skinning&&o.enable(5),t.morphTargets&&o.enable(6),t.morphNormals&&o.enable(7),t.morphColors&&o.enable(8),t.premultipliedAlpha&&o.enable(9),t.shadowMapEnabled&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.transmission&&o.enable(15),t.sheen&&o.enable(16),t.opaque&&o.enable(17),t.pointsUvs&&o.enable(18),t.decodeVideoTexture&&o.enable(19),t.decodeVideoTextureEmissive&&o.enable(20),t.alphaToCoverage&&o.enable(21),n.push(o.mask),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){let t;let n=f[e.type];if(n){let e=iF[n];t=nz.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){let t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new sg(e,n,t,a),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){let t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function sb(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function sS(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function sE(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function sM(){let e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,s,o,l,u){let c=a(e,t,s,o,l,u);s.transmission>0?r.push(c):!0===s.transparent?i.push(c):n.push(c)},unshift:function(e,t,s,o,l,u){let c=a(e,t,s,o,l,u);s.transmission>0?r.unshift(c):!0===s.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=t,r=e.length;n<r;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||sS),r.length>1&&r.sort(t||sE),i.length>1&&i.sort(t||sE)}}}function sT(){let e=new WeakMap;return{get:function(t,n){let r;let i=e.get(t);return void 0===i?(r=new sM,e.set(t,[r])):n>=i.length?(r=new sM,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function sA(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":n={direction:new e3,color:new ni};break;case"SpotLight":n={position:new e3,direction:new e3,color:new ni,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new e3,color:new ni,distance:0,decay:0};break;case"HemisphereLight":n={direction:new e3,skyColor:new ni,groundColor:new ni};break;case"RectAreaLight":n={color:new ni,position:new e3,halfWidth:new e3,halfHeight:new e3}}return e[t.id]=n,n}}}let sw=0;function sC(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function sP(e){let t=new sA,n=function(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new eL};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new eL,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)r.probe.push(new e3);let i=new e3,a=new tS,s=new tS;return{setup:function(i){let a=0,s=0,o=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,u=0,c=0,d=0,h=0,p=0,f=0,m=0,g=0,v=0,_=0;i.sort(sC);for(let e=0,y=i.length;e<y;e++){let y=i[e],x=y.color,b=y.intensity,S=y.distance,E=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)a+=x.r*b,s+=x.g*b,o+=x.b*b;else if(y.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(y.sh.coefficients[e],b);_++}else if(y.isDirectionalLight){let e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){let e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=E,r.directionalShadowMatrix[l]=y.shadow.matrix,p++}r.directional[l]=e,l++}else if(y.isSpotLight){let e=t.get(y);e.position.setFromMatrixPosition(y.matrixWorld),e.color.copy(x).multiplyScalar(b),e.distance=S,e.coneCos=Math.cos(y.angle),e.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),e.decay=y.decay,r.spot[c]=e;let i=y.shadow;if(y.map&&(r.spotLightMap[g]=y.map,g++,i.updateMatrices(y),y.castShadow&&v++),r.spotLightMatrix[c]=i.matrix,y.castShadow){let e=n.get(y);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[c]=e,r.spotShadowMap[c]=E,m++}c++}else if(y.isRectAreaLight){let e=t.get(y);e.color.copy(x).multiplyScalar(b),e.halfWidth.set(.5*y.width,0,0),e.halfHeight.set(0,.5*y.height,0),r.rectArea[d]=e,d++}else if(y.isPointLight){let e=t.get(y);if(e.color.copy(y.color).multiplyScalar(y.intensity),e.distance=y.distance,e.decay=y.decay,y.castShadow){let e=y.shadow,t=n.get(y);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[u]=t,r.pointShadowMap[u]=E,r.pointShadowMatrix[u]=y.shadow.matrix,f++}r.point[u]=e,u++}else if(y.isHemisphereLight){let e=t.get(y);e.skyColor.copy(y.color).multiplyScalar(b),e.groundColor.copy(y.groundColor).multiplyScalar(b),r.hemi[h]=e,h++}}d>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=iU.LTC_FLOAT_1,r.rectAreaLTC2=iU.LTC_FLOAT_2):(r.rectAreaLTC1=iU.LTC_HALF_1,r.rectAreaLTC2=iU.LTC_HALF_2)),r.ambient[0]=a,r.ambient[1]=s,r.ambient[2]=o;let y=r.hash;(y.directionalLength!==l||y.pointLength!==u||y.spotLength!==c||y.rectAreaLength!==d||y.hemiLength!==h||y.numDirectionalShadows!==p||y.numPointShadows!==f||y.numSpotShadows!==m||y.numSpotMaps!==g||y.numLightProbes!==_)&&(r.directional.length=l,r.spot.length=c,r.rectArea.length=d,r.point.length=u,r.hemi.length=h,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=f,r.pointShadowMap.length=f,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=f,r.spotLightMatrix.length=m+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=_,y.directionalLength=l,y.pointLength=u,y.spotLength=c,y.rectAreaLength=d,y.hemiLength=h,y.numDirectionalShadows=p,y.numPointShadows=f,y.numSpotShadows=m,y.numSpotMaps=g,y.numLightProbes=_,r.version=sw++)},setupView:function(e,t){let n=0,o=0,l=0,u=0,c=0,d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){let h=e[t];if(h.isDirectionalLight){let e=r.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),i.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(d),n++}else if(h.isSpotLight){let e=r.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),i.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(d),l++}else if(h.isRectAreaLight){let e=r.rectArea[u];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),s.identity(),a.copy(h.matrixWorld),a.premultiply(d),s.extractRotation(a),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),u++}else if(h.isPointLight){let e=r.point[o];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),o++}else if(h.isHemisphereLight){let e=r.hemi[c];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),c++}}},state:r}}function sR(e){let t=new sP(e),n=[],r=[],i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function sI(e){let t=new WeakMap;return{get:function(n,r=0){let i;let a=t.get(n);return void 0===a?(i=new sR(e),t.set(n,[i])):r>=a.length?(i=new sR(e),a.push(i)):i=a[r],i},dispose:function(){t=new WeakMap}}}function sL(e,t,n){let r=new n5,i=new eL,a=new eL,s=new eK,o=new r5({depthPacking:3201}),l=new r8,u={},c=n.maxTextureSize,d={0:1,1:0,2:2},h=new nj({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new eL},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;let f=new nE;f.setAttribute("position",new nh(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new nN(f,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function _(t,n,r,i){let a=null,s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){let e=a.uuid,t=n.uuid,r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i,n.addEventListener("dispose",y)),a=i}return a.visible=n.visible,a.wireframe=n.wireframe,3===i?a.side=null!==n.shadowSide?n.shadowSide:n.side:a.side=null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial&&(e.properties.get(a).light=r),a}function y(e){for(let t in e.target.removeEventListener("dispose",y),u){let n=u[t],r=e.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}this.render=function(n,o,l){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===n.length)return;let u=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),y=e.state;y.setBlending(0),y.buffers.color.setClear(1,1,1,1),y.buffers.depth.setTest(!0),y.setScissorTest(!1);let x=3!==v&&3===this.type,b=3===v&&3!==this.type;for(let u=0,d=n.length;u<d;u++){let d=n[u],f=d.shadow;if(void 0===f){console.warn("THREE.WebGLShadowMap:",d,"has no shadow.");continue}if(!1===f.autoUpdate&&!1===f.needsUpdate)continue;i.copy(f.mapSize);let g=f.getFrameExtents();if(i.multiply(g),a.copy(f.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/g.x),i.x=a.x*g.x,f.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/g.y),i.y=a.y*g.y,f.mapSize.y=a.y)),null===f.map||!0===x||!0===b){let e=3!==this.type?{minFilter:1003,magFilter:1003}:{};null!==f.map&&f.map.dispose(),f.map=new eJ(i.x,i.y,e),f.map.texture.name=d.name+".shadowMap",f.camera.updateProjectionMatrix()}e.setRenderTarget(f.map),e.clear();let v=f.getViewportCount();for(let n=0;n<v;n++){let i=f.getViewport(n);s.set(a.x*i.x,a.y*i.y,a.x*i.z,a.y*i.w),y.viewport(s),f.updateMatrices(d,n),r=f.getFrustum(),function n(i,a,s,o,l){if(!1===i.visible)return;if(i.layers.test(a.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&3===l)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);let n=t.update(i),r=i.material;if(Array.isArray(r)){let t=n.groups;for(let u=0,c=t.length;u<c;u++){let c=t[u],d=r[c.materialIndex];if(d&&d.visible){let t=_(i,d,o,l);i.onBeforeShadow(e,i,a,s,n,t,c),e.renderBufferDirect(s,null,n,t,i,c),i.onAfterShadow(e,i,a,s,n,t,c)}}}else if(r.visible){let t=_(i,r,o,l);i.onBeforeShadow(e,i,a,s,n,t,null),e.renderBufferDirect(s,null,n,t,i,null),i.onAfterShadow(e,i,a,s,n,t,null)}}let u=i.children;for(let e=0,t=u.length;e<t;e++)n(u[e],a,s,o,l)}(o,l,f.camera,d,this.type)}!0!==f.isPointLightShadow&&3===this.type&&function(n,r){let a=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new eJ(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,m,null)}(f,l),f.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(u,d,f)}}let sD={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function sO(e,t){let n=new function(){let t=!1,n=new eK,r=null,i=new eK(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,i=null,a=null,s=null;return{setReversed:function(e){if(r!==e){let e=t.get("EXT_clip_control");r?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);let n=s;s=null,this.setClear(n)}r=e},getReversed:function(){return r},setTest:function(t){t?B(e.DEPTH_TEST):V(e.DEPTH_TEST)},setMask:function(t){i===t||n||(e.depthMask(t),i=t)},setFunc:function(t){if(r&&(t=sD[t]),a!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}a=t}},setLocked:function(e){n=e},setClear:function(t){s!==t&&(r&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){n=!1,i=null,a=null,s=null,r=!1}}},i=new function(){let t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,u=null;return{setTest:function(n){t||(n?B(e.STENCIL_TEST):V(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){(r!==t||i!==n||a!==s)&&(e.stencilFunc(t,n,s),r=t,i=n,a=s)},setOp:function(t,n,r){(s!==t||o!==n||l!==r)&&(e.stencilOp(t,n,r),s=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,u=null}}},a=new WeakMap,s=new WeakMap,o={},l={},u=new WeakMap,c=[],d=null,h=!1,p=null,f=null,m=null,g=null,v=null,_=null,y=null,x=new ni(0,0,0),b=0,S=!1,E=null,M=null,T=null,A=null,w=null,C=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),P=!1,R=e.getParameter(e.VERSION);-1!==R.indexOf("WebGL")?P=parseFloat(/^WebGL (\d)/.exec(R)[1])>=1:-1!==R.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(R)[1])>=2);let I=null,L={},D=e.getParameter(e.SCISSOR_BOX),O=e.getParameter(e.VIEWPORT),N=new eK().fromArray(D),U=new eK().fromArray(O);function F(t,n,r,i){let a=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<r;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return s}let k={};function B(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function V(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}k[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),k[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),k[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),k[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),i.setClear(0),B(e.DEPTH_TEST),r.setFunc(3),G(!1),W(1),B(e.CULL_FACE),H(0);let z={100:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};z[103]=e.MIN,z[104]=e.MAX;let j={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function H(t,n,r,i,a,s,o,l,u,c){if(0===t){!0===h&&(V(e.BLEND),h=!1);return}if(!1===h&&(B(e.BLEND),h=!0),5!==t){if(t!==p||c!==S){if((100!==f||100!==v)&&(e.blendEquation(e.FUNC_ADD),f=100,v=100),c)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,_=null,y=null,x.set(0,0,0),b=0,p=t,S=c}return}a=a||n,s=s||r,o=o||i,(n!==f||a!==v)&&(e.blendEquationSeparate(z[n],z[a]),f=n,v=a),(r!==m||i!==g||s!==_||o!==y)&&(e.blendFuncSeparate(j[r],j[i],j[s],j[o]),m=r,g=i,_=s,y=o),(!1===l.equals(x)||u!==b)&&(e.blendColor(l.r,l.g,l.b,u),x.copy(l),b=u),p=t,S=!1}function G(t){E!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),E=t)}function W(t){0!==t?(B(e.CULL_FACE),t!==M&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):V(e.CULL_FACE),M=t}function q(t,n,r){t?(B(e.POLYGON_OFFSET_FILL),(A!==n||w!==r)&&(e.polygonOffset(n,r),A=n,w=r)):V(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:i},enable:B,disable:V,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=c,i=!1;if(t){void 0===(r=u.get(n))&&(r=[],u.set(n,r));let a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:H,setMaterial:function(t,a){2===t.side?V(e.CULL_FACE):B(e.CULL_FACE);let s=1===t.side;a&&(s=!s),G(s),1===t.blending&&!1===t.transparent?H(0):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);let o=t.stencilWrite;i.setTest(o),o&&(i.setMask(t.stencilWriteMask),i.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),i.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?B(e.SAMPLE_ALPHA_TO_COVERAGE):V(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:G,setCullFace:W,setLineWidth:function(t){t!==T&&(P&&e.lineWidth(t),T=t)},setPolygonOffset:q,setScissorTest:function(t){t?B(e.SCISSOR_TEST):V(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+C-1),I!==t&&(e.activeTexture(t),I=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===I?e.TEXTURE0+C-1:I);let i=L[r];void 0===i&&(i={type:void 0,texture:void 0},L[r]=i),(i.type!==t||i.texture!==n)&&(I!==r&&(e.activeTexture(r),I=r),e.bindTexture(t,n||k[t]),i.type=t,i.texture=n)},unbindTexture:function(){let t=L[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){let r=s.get(n).get(t);a.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),a.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(0xffffffff),e.stencilFunc(e.ALWAYS,0,0xffffffff),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},I=null,L={},l={},u=new WeakMap,c=[],d=null,h=!1,p=null,f=null,m=null,g=null,v=null,_=null,y=null,x=new ni(0,0,0),b=0,S=!1,E=null,M=null,T=null,A=null,w=null,N.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),i.reset()}}}function sN(e,t,n,r,i,a,s){let o;let l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new eL,d=new WeakMap,h=new WeakMap,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function f(e,t){return p?new OffscreenCanvas(e,t):eU("canvas")}function m(e,t,n){let r=1,i=V(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){let n=Math.floor(r*i.width),a=Math.floor(r*i.height);void 0===o&&(o=f(n,a));let s=t?f(n,a):o;return s.width=n,s.height=a,s.getContext("2d").drawImage(e,0,0,n,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+a+")."),s}"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+").")}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function _(n,r,i,a,s=!1){if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;if(r===e.RED&&(i===e.FLOAT&&(o=e.R32F),i===e.HALF_FLOAT&&(o=e.R16F),i===e.UNSIGNED_BYTE&&(o=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.R8UI),i===e.UNSIGNED_SHORT&&(o=e.R16UI),i===e.UNSIGNED_INT&&(o=e.R32UI),i===e.BYTE&&(o=e.R8I),i===e.SHORT&&(o=e.R16I),i===e.INT&&(o=e.R32I)),r===e.RG&&(i===e.FLOAT&&(o=e.RG32F),i===e.HALF_FLOAT&&(o=e.RG16F),i===e.UNSIGNED_BYTE&&(o=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RG8UI),i===e.UNSIGNED_SHORT&&(o=e.RG16UI),i===e.UNSIGNED_INT&&(o=e.RG32UI),i===e.BYTE&&(o=e.RG8I),i===e.SHORT&&(o=e.RG16I),i===e.INT&&(o=e.RG32I)),r===e.RGB_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RGB8UI),i===e.UNSIGNED_SHORT&&(o=e.RGB16UI),i===e.UNSIGNED_INT&&(o=e.RGB32UI),i===e.BYTE&&(o=e.RGB8I),i===e.SHORT&&(o=e.RGB16I),i===e.INT&&(o=e.RGB32I)),r===e.RGBA_INTEGER&&(i===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),i===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),i===e.UNSIGNED_INT&&(o=e.RGBA32UI),i===e.BYTE&&(o=e.RGBA8I),i===e.SHORT&&(o=e.RGBA16I),i===e.INT&&(o=e.RGBA32I)),r===e.RGB&&i===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),r===e.RGBA){let t=s?eb:ez.getTransfer(a);i===e.FLOAT&&(o=e.RGBA32F),i===e.HALF_FLOAT&&(o=e.RGBA16F),i===e.UNSIGNED_BYTE&&(o=t===eS?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return(o===e.R16F||o===e.R32F||o===e.RG16F||o===e.RG32F||o===e.RGBA16F||o===e.RGBA32F)&&t.get("EXT_color_buffer_float"),o}function y(t,n){let r;return t?null===n||1014===n||1020===n?r=e.DEPTH24_STENCIL8:1015===n?r=e.DEPTH32F_STENCIL8:1012===n&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||1014===n||1020===n?r=e.DEPTH_COMPONENT24:1015===n?r=e.DEPTH_COMPONENT32F:1012===n&&(r=e.DEPTH_COMPONENT16),r}function x(e,t){return!0===g(e)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function b(e){let t=e.target;t.removeEventListener("dispose",b),function(e){let t=r.get(e);if(void 0===t.__webglInit)return;let n=e.source,i=h.get(n);if(i){let r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&E(e),0===Object.keys(i).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&d.delete(t)}function S(t){let n=t.target;n.removeEventListener("dispose",S),function(t){let n=r.get(t);if(t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture)),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let r=0;r<n.__webglFramebuffer[t].length;r++)e.deleteFramebuffer(n.__webglFramebuffer[t][r]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}let i=t.textures;for(let t=0,n=i.length;t<n;t++){let n=r.get(i[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),s.memory.textures--),r.remove(i[t])}r.remove(t)}(n)}function E(t){let n=r.get(t);e.deleteTexture(n.__webglTexture);let i=t.source,a=h.get(i);delete a[n.__cacheKey],s.memory.textures--}let M=0;function T(t,i){let a=r.get(t);if(t.isVideoTexture&&function(e){let t=s.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){let e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===e.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{I(a,t,i);return}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}let A={1e3:e.REPEAT,1001:e.CLAMP_TO_EDGE,1002:e.MIRRORED_REPEAT},w={1003:e.NEAREST,1004:e.NEAREST_MIPMAP_NEAREST,1005:e.NEAREST_MIPMAP_LINEAR,1006:e.LINEAR,1007:e.LINEAR_MIPMAP_NEAREST,1008:e.LINEAR_MIPMAP_LINEAR},C={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function P(n,a){if(1015===a.type&&!1===t.has("OES_texture_float_linear")&&(1006===a.magFilter||1007===a.magFilter||1005===a.magFilter||1008===a.magFilter||1006===a.minFilter||1007===a.minFilter||1005===a.minFilter||1008===a.minFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,A[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,A[a.wrapT]),(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY)&&e.texParameteri(n,e.TEXTURE_WRAP_R,A[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,w[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,w[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,C[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")&&1003!==a.magFilter&&(1005===a.minFilter||1008===a.minFilter)&&(1015!==a.type||!1!==t.has("OES_texture_float_linear"))&&(a.anisotropy>1||r.get(a).__currentAnisotropy)){let s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy}}function R(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",b));let i=n.source,a=h.get(i);void 0===a&&(a={},h.set(i,a));let o=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;let i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&E(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return r}function I(t,s,o){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);let u=R(t,s),c=s.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);let d=r.get(c);if(c.version!==d.__version||!0===u){let t;n.activeTexture(e.TEXTURE0+o);let r=ez.getPrimaries(ez.workingColorSpace),h=""===s.colorSpace?null:ez.getPrimaries(s.colorSpace),p=""===s.colorSpace||r===h?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let f=m(s.image,!1,i.maxTextureSize);f=B(s,f);let b=a.convert(s.format,s.colorSpace),S=a.convert(s.type),E=_(s.internalFormat,b,S,s.colorSpace,s.isVideoTexture);P(l,s);let M=s.mipmaps,T=!0!==s.isVideoTexture,A=void 0===d.__version||!0===u,w=c.dataReady,C=x(s,f);if(s.isDepthTexture)E=y(1027===s.format,s.type),A&&(T?n.texStorage2D(e.TEXTURE_2D,1,E,f.width,f.height):n.texImage2D(e.TEXTURE_2D,0,E,f.width,f.height,0,b,S,null));else if(s.isDataTexture){if(M.length>0){T&&A&&n.texStorage2D(e.TEXTURE_2D,C,E,M[0].width,M[0].height);for(let r=0,i=M.length;r<i;r++)t=M[r],T?w&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,b,S,t.data):n.texImage2D(e.TEXTURE_2D,r,E,t.width,t.height,0,b,S,t.data);s.generateMipmaps=!1}else T?(A&&n.texStorage2D(e.TEXTURE_2D,C,E,f.width,f.height),w&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f.width,f.height,b,S,f.data)):n.texImage2D(e.TEXTURE_2D,0,E,f.width,f.height,0,b,S,f.data)}else if(s.isCompressedTexture){if(s.isCompressedArrayTexture){T&&A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,E,M[0].width,M[0].height,f.depth);for(let r=0,i=M.length;r<i;r++)if(t=M[r],1023!==s.format){if(null!==b){if(T){if(w){if(s.layerUpdates.size>0){let i=iL(t.width,t.height,s.format,s.type);for(let a of s.layerUpdates){let s=t.data.subarray(a*i/t.data.BYTES_PER_ELEMENT,(a+1)*i/t.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,a,t.width,t.height,1,b,s)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,0,t.width,t.height,f.depth,b,t.data)}}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,r,E,t.width,t.height,f.depth,0,t.data,0,0)}else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()")}else T?w&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,0,t.width,t.height,f.depth,b,S,t.data):n.texImage3D(e.TEXTURE_2D_ARRAY,r,E,t.width,t.height,f.depth,0,b,S,t.data)}else{T&&A&&n.texStorage2D(e.TEXTURE_2D,C,E,M[0].width,M[0].height);for(let r=0,i=M.length;r<i;r++)t=M[r],1023!==s.format?null!==b?T?w&&n.compressedTexSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,b,t.data):n.compressedTexImage2D(e.TEXTURE_2D,r,E,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?w&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,b,S,t.data):n.texImage2D(e.TEXTURE_2D,r,E,t.width,t.height,0,b,S,t.data)}}else if(s.isDataArrayTexture){if(T){if(A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,E,f.width,f.height,f.depth),w){if(s.layerUpdates.size>0){let t=iL(f.width,f.height,s.format,s.type);for(let r of s.layerUpdates){let i=f.data.subarray(r*t/f.data.BYTES_PER_ELEMENT,(r+1)*t/f.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,f.width,f.height,1,b,S,i)}s.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,b,S,f.data)}}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,E,f.width,f.height,f.depth,0,b,S,f.data)}else if(s.isData3DTexture)T?(A&&n.texStorage3D(e.TEXTURE_3D,C,E,f.width,f.height,f.depth),w&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,b,S,f.data)):n.texImage3D(e.TEXTURE_3D,0,E,f.width,f.height,f.depth,0,b,S,f.data);else if(s.isFramebufferTexture){if(A){if(T)n.texStorage2D(e.TEXTURE_2D,C,E,f.width,f.height);else{let t=f.width,r=f.height;for(let i=0;i<C;i++)n.texImage2D(e.TEXTURE_2D,i,E,t,r,0,b,S,null),t>>=1,r>>=1}}}else if(M.length>0){if(T&&A){let t=V(M[0]);n.texStorage2D(e.TEXTURE_2D,C,E,t.width,t.height)}for(let r=0,i=M.length;r<i;r++)t=M[r],T?w&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,b,S,t):n.texImage2D(e.TEXTURE_2D,r,E,b,S,t);s.generateMipmaps=!1}else if(T){if(A){let t=V(f);n.texStorage2D(e.TEXTURE_2D,C,E,t.width,t.height)}w&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,b,S,f)}else n.texImage2D(e.TEXTURE_2D,0,E,b,S,f);g(s)&&v(l),d.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function L(t,i,s,o,u,c){let d=a.convert(s.format,s.colorSpace),h=a.convert(s.type),p=_(s.internalFormat,d,h,s.colorSpace),f=r.get(i),m=r.get(s);if(m.__renderTarget=i,!f.__hasExternalTextures){let t=Math.max(1,i.width>>c),r=Math.max(1,i.height>>c);u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,c,p,t,r,i.depth,0,d,h,null):n.texImage2D(u,c,p,t,r,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),k(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,u,m.__webglTexture,0,F(i)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,u,m.__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){let i=n.depthTexture,a=i&&i.isDepthTexture?i.type:null,s=y(n.stencilBuffer,a),o=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=F(n);k(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,s,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,s,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,o,e.RENDERBUFFER,t)}else{let t=n.textures;for(let i=0;i<t.length;i++){let s=t[i],o=a.convert(s.format,s.colorSpace),u=a.convert(s.type),c=_(s.internalFormat,o,u,s.colorSpace),d=F(n);r&&!1===k(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,c,n.width,n.height):k(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function O(t){let i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){let e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){let t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!(i.depthTexture&&i.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let a=r.get(i.depthTexture);a.__renderTarget=i,a.__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);let s=a.__webglTexture,o=F(i);if(1026===i.depthTexture.format)k(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else if(1027===i.depthTexture.format)k(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0);else throw Error("Unknown depthTexture format")}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),D(i.__webglDepthbuffer[r],t,!1);else{let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,a)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),D(i.__webglDepthbuffer,t,!1);else{let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}n.bindFramebuffer(e.FRAMEBUFFER,null)}let N=[],U=[];function F(e){return Math.min(i.maxSamples,e.samples)}function k(e){let n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,t){let n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==ex&&""!==n&&(ez.getTransfer(n)===eS?(1023!==r||1009!==i)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function V(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){let e=M;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=T,this.setTexture2DArray=function(t,i){let a=r.get(t);if(t.version>0&&a.__version!==t.version){I(a,t,i);return}n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){let a=r.get(t);if(t.version>0&&a.__version!==t.version){I(a,t,i);return}n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,s){let o=r.get(t);if(t.version>0&&o.__version!==t.version){(function(t,s,o){if(6!==s.image.length)return;let l=R(t,s),u=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);let c=r.get(u);if(u.version!==c.__version||!0===l){let t;n.activeTexture(e.TEXTURE0+o);let r=ez.getPrimaries(ez.workingColorSpace),d=""===s.colorSpace?null:ez.getPrimaries(s.colorSpace),h=""===s.colorSpace||r===d?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);let p=s.isCompressedTexture||s.image[0].isCompressedTexture,f=s.image[0]&&s.image[0].isDataTexture,y=[];for(let e=0;e<6;e++)p||f?y[e]=f?s.image[e].image:s.image[e]:y[e]=m(s.image[e],!0,i.maxCubemapSize),y[e]=B(s,y[e]);let b=y[0],S=a.convert(s.format,s.colorSpace),E=a.convert(s.type),M=_(s.internalFormat,S,E,s.colorSpace),T=!0!==s.isVideoTexture,A=void 0===c.__version||!0===l,w=u.dataReady,C=x(s,b);if(P(e.TEXTURE_CUBE_MAP,s),p){T&&A&&n.texStorage2D(e.TEXTURE_CUBE_MAP,C,M,b.width,b.height);for(let r=0;r<6;r++){t=y[r].mipmaps;for(let i=0;i<t.length;i++){let a=t[i];1023!==s.format?null!==S?T?w&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i,0,0,a.width,a.height,S,a.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i,M,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?w&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i,0,0,a.width,a.height,S,E,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i,M,a.width,a.height,0,S,E,a.data)}}}else{if(t=s.mipmaps,T&&A){t.length>0&&C++;let r=V(y[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,C,M,r.width,r.height)}for(let r=0;r<6;r++)if(f){T?w&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,y[r].width,y[r].height,S,E,y[r].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,M,y[r].width,y[r].height,0,S,E,y[r].data);for(let i=0;i<t.length;i++){let a=t[i].image[r].image;T?w&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,a.width,a.height,S,E,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,M,a.width,a.height,0,S,E,a.data)}}else{T?w&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,S,E,y[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,M,S,E,y[r]);for(let i=0;i<t.length;i++){let a=t[i];T?w&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,S,E,a.image[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,M,S,E,a.image[r])}}}g(s)&&v(e.TEXTURE_CUBE_MAP),c.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version})(o,t,s);return}n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,i){let a=r.get(t);void 0!==n&&L(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&O(t)},this.setupRenderTarget=function(t){let i=t.texture,o=r.get(t),l=r.get(i);t.addEventListener("dispose",S);let u=t.textures,c=!0===t.isWebGLCubeRenderTarget,d=u.length>1;if(!d&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=i.version,s.memory.textures++),c){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(d)for(let t=0,n=u.length;t<n;t++){let n=r.get(u[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===k(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<u.length;n++){let r=u[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);let i=a.convert(r.format,r.colorSpace),s=a.convert(r.type),l=_(r.internalFormat,i,s,r.colorSpace,!0===t.isXRRenderTarget),c=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),D(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),P(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)L(o.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else L(o.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){for(let i=0,a=u.length;i<a;i++){let a=u[i],s=r.get(a);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),P(e.TEXTURE_2D,a),L(o.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D,0),g(a)&&v(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),P(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)L(o.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else L(o.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);g(i)&&v(r),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(t){let i=t.textures;for(let a=0,s=i.length;a<s;a++){let s=i[a];if(g(s)){let i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D,a=r.get(s).__webglTexture;n.bindTexture(i,a),v(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0){if(!1===k(t)){let i=t.textures,a=t.width,s=t.height,o=e.COLOR_BUFFER_BIT,l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=r.get(t),d=i.length>1;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),d){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);let t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),!0===u&&(N.length=0,U.length=0,N.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(N.push(l),U.push(l),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,U)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,N))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,c.__webglColorRenderbuffer[t]);let a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&u){let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=L,this.useMultisampledRTT=k}function sU(e,t){return{convert:function(n,r=""){let i;let a=ez.getTransfer(r);if(1009===n)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(35902===n)return e.UNSIGNED_INT_5_9_9_9_REV;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(1012===n)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(1014===n)return e.UNSIGNED_INT;if(1015===n)return e.FLOAT;if(1016===n)return e.HALF_FLOAT;if(1021===n)return e.ALPHA;if(1022===n)return e.RGB;if(1023===n)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(1026===n)return e.DEPTH_COMPONENT;if(1027===n)return e.DEPTH_STENCIL;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(33776===n||33777===n||33778===n||33779===n){if(a===eS){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(33776===n)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===n)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===n)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===n)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===n)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(35840===n||35841===n||35842===n||35843===n){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===n)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n||37492===n||37496===n){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(36196===n||37492===n)return a===eS?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(37496===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(37808===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return a===eS?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===n||36494===n||36495===n){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(36492===n)return a===eS?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(null===(i=t.get("EXT_texture_compression_rgtc")))return null;if(36492===n)return i.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return 1020===n?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}let sF=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,sk=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class sB{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){let r=new eY;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){let t=e.cameras[0].viewport,n=new nj({vertexShader:sF,fragmentShader:sk,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new nN(new rQ(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class sV extends eM{constructor(e,t){super();let n=this,r=null,i=1,a=null,s="local-floor",o=1,l=null,u=null,c=null,d=null,h=null,p=null,f=new sB,m=t.getContextAttributes(),g=null,v=null,_=[],y=[],x=new eL,b=null,S=new nX;S.viewport=new eK;let E=new nX;E.viewport=new eK;let M=[S,E],T=new i_,A=null,w=null;function C(e){let t=y.indexOf(e.inputSource);if(-1===t)return;let n=_[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function P(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",P),r.removeEventListener("inputsourceschange",R);for(let e=0;e<_.length;e++){let t=y[e];null!==t&&(y[e]=null,_[e].disconnect(t))}A=null,w=null,f.reset(),e.setRenderTarget(g),h=null,d=null,c=null,r=null,v=null,N.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}function R(e){for(let t=0;t<e.removed.length;t++){let n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,_[r].disconnect(n))}for(let t=0;t<e.added.length;t++){let n=e.added[t],r=y.indexOf(n);if(-1===r){for(let e=0;e<_.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}let i=_[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=_[e];return void 0===t&&(t=new nQ,_[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=_[e];return void 0===t&&(t=new nQ,_[e]=t),t.getGripSpace()},this.getHand=function(e){let t=_[e];return void 0===t&&(t=new nQ,_[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(u){if(null!==(r=u)){if(g=e.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",P),r.addEventListener("inputsourceschange",R),!0!==m.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(x),"undefined"!=typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,a=null,s=null;m.depth&&(s=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?1027:1026,a=m.stencil?1020:1014);let o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:i};d=(c=new XRWebGLBinding(r,t)).createProjectionLayer(o),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),v=new eJ(d.textureWidth,d.textureHeight,{format:1023,type:1009,depthTexture:new n9(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===d.ignoreDepthValues})}else{let n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),v=new eJ(h.framebufferWidth,h.framebufferHeight,{format:1023,type:1009,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}v.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await r.requestReferenceSpace(s),N.setContext(r),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};let I=new e3,L=new e3;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==f.texture&&(f.depthNear>0&&(t=f.depthNear),f.depthFar>0&&(n=f.depthFar)),T.near=E.near=S.near=t,T.far=E.far=S.far=n,(A!==T.near||w!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),A=T.near,w=T.far),S.layers.mask=2|e.layers.mask,E.layers.mask=4|e.layers.mask,T.layers.mask=S.layers.mask|E.layers.mask;let i=e.parent,a=T.cameras;D(T,i);for(let e=0;e<a.length;e++)D(a[e],i);2===a.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);let r=I.distanceTo(L),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=r/(-c+d),p=-(h*c);if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(p),e.translateZ(h),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{let t=s+h,n=o+h;e.projectionMatrix.makePerspective(s*c-p,s*d+(r-p),l*o/n*t,u*o/n*t,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(T,S,E):T.projectionMatrix.copy(S.projectionMatrix),null===i?e.matrix.copy(T.matrixWorld):(e.matrix.copy(i.matrixWorld),e.matrix.invert(),e.matrix.multiply(T.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(T.projectionMatrix),e.projectionMatrixInverse.copy(T.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*ew*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(T)};let O=null,N=new iD;N.setAnimationLoop(function(t,i){if(u=i.getViewerPose(l||a),p=i,null!==u){let t=u.views;null!==h&&(e.setRenderTargetFramebuffer(v,h.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==T.cameras.length&&(T.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){let i=t[r],a=null;if(null!==h)a=h.getViewport(i);else{let t=c.getViewSubImage(d,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(v,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let s=M[r];void 0===s&&((s=new nX).layers.enable(r),s.viewport=new eK,M[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&(T.matrix.copy(s.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===n&&T.cameras.push(s)}let i=r.enabledFeatures;if(i&&i.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&c){let n=c.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&f.init(e,n,r.renderState)}}for(let e=0;e<_.length;e++){let t=y[e],n=_[e];null!==t&&void 0!==n&&n.update(t,i,l||a)}O&&O(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null}),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}let sz=new tL,sj=new tS;function sH(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,1===r.side&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),1===r.side&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);let i=t.get(r),a=i.envMap,s=i.envMapRotation;a&&(e.envMap.value=a,sz.copy(s),sz.x*=-1,sz.y*=-1,sz.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(sz.y*=-1,sz.z*=-1),e.envMapRotation.value.setFromMatrix4(sj.makeRotationFromEuler(sz)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,nV(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,s,o){i.isMeshBasicMaterial?r(e,i):i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),i.gradientMap&&(e.gradientMap.value=i.gradientMap)):i.isMeshPhongMaterial?(r(e,i),e.specular.value.copy(i.specular),e.shininess.value=Math.max(i.shininess,1e-4)):i.isMeshStandardMaterial?(r(e,i),e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform)),e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform)),i.envMap&&(e.envMapIntensity.value=i.envMapIntensity),i.isMeshPhysicalMaterial&&(e.ior.value=i.ior,i.sheen>0&&(e.sheenColor.value.copy(i.sheenColor).multiplyScalar(i.sheen),e.sheenRoughness.value=i.sheenRoughness,i.sheenColorMap&&(e.sheenColorMap.value=i.sheenColorMap,n(i.sheenColorMap,e.sheenColorMapTransform)),i.sheenRoughnessMap&&(e.sheenRoughnessMap.value=i.sheenRoughnessMap,n(i.sheenRoughnessMap,e.sheenRoughnessMapTransform))),i.clearcoat>0&&(e.clearcoat.value=i.clearcoat,e.clearcoatRoughness.value=i.clearcoatRoughness,i.clearcoatMap&&(e.clearcoatMap.value=i.clearcoatMap,n(i.clearcoatMap,e.clearcoatMapTransform)),i.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=i.clearcoatRoughnessMap,n(i.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),i.clearcoatNormalMap&&(e.clearcoatNormalMap.value=i.clearcoatNormalMap,n(i.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(i.clearcoatNormalScale),1===i.side&&e.clearcoatNormalScale.value.negate())),i.dispersion>0&&(e.dispersion.value=i.dispersion),i.iridescence>0&&(e.iridescence.value=i.iridescence,e.iridescenceIOR.value=i.iridescenceIOR,e.iridescenceThicknessMinimum.value=i.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=i.iridescenceThicknessRange[1],i.iridescenceMap&&(e.iridescenceMap.value=i.iridescenceMap,n(i.iridescenceMap,e.iridescenceMapTransform)),i.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=i.iridescenceThicknessMap,n(i.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),i.transmission>0&&(e.transmission.value=i.transmission,e.transmissionSamplerMap.value=o.texture,e.transmissionSamplerSize.value.set(o.width,o.height),i.transmissionMap&&(e.transmissionMap.value=i.transmissionMap,n(i.transmissionMap,e.transmissionMapTransform)),e.thickness.value=i.thickness,i.thicknessMap&&(e.thicknessMap.value=i.thicknessMap,n(i.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=i.attenuationDistance,e.attenuationColor.value.copy(i.attenuationColor)),i.anisotropy>0&&(e.anisotropyVector.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation)),i.anisotropyMap&&(e.anisotropyMap.value=i.anisotropyMap,n(i.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=i.specularIntensity,e.specularColor.value.copy(i.specularColor),i.specularColorMap&&(e.specularColorMap.value=i.specularColorMap,n(i.specularColorMap,e.specularColorMapTransform)),i.specularIntensityMap&&(e.specularIntensityMap.value=i.specularIntensityMap,n(i.specularIntensityMap,e.specularIntensityMapTransform)))):i.isMeshMatcapMaterial?(r(e,i),i.matcap&&(e.matcap.value=i.matcap)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){let r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.isLineDashedMaterial&&(e.dashSize.value=i.dashSize,e.totalSize.value=i.dashSize+i.gapSize,e.scale.value=i.scale)):i.isPointsMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,e.size.value=i.size*a,e.scale.value=.5*s,i.map&&(e.map.value=i.map,n(i.map,e.uvTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest)):i.isSpriteMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,e.rotation.value=i.rotation,i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest)):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function sG(e,t,n,r){let i={},a={},s=[],o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e){let t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){let n=t.target;n.removeEventListener("dispose",u);let r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){let n=t.program;r.uniformBlockBinding(e,n)},update:function(n,c){let d=i[n.id];void 0===d&&(function(e){let t=e.uniforms,n=0;for(let e=0,r=t.length;e<r;e++){let r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){let t=r[e],i=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=i.length;e<r;e++){let r=l(i[e]),a=n%16,s=a%r.boundary,o=a+s;n+=s,0!==o&&16-o<r.storage&&(n+=16-o),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}let r=n%16;r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),d=function(t){let n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;let r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));let h=c.program;r.updateUBOMapping(n,h);let p=t.render.frame;a[n.id]!==p&&(function(t){let n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){let n=Array.isArray(r[t])?r[t]:[r[t]];for(let r=0,i=n.length;r<i;r++){let i=n[r];if(!0===function(e,t,n,r){let i=e.value,a=t+"_"+n;if(void 0===r[a])return"number"==typeof i||"boolean"==typeof i?r[a]=i:r[a]=i.clone(),!0;{let e=r[a];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}(i,t,r,a)){let t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value],r=0;for(let a=0;a<n.length;a++){let s=n[a],o=l(s);"number"==typeof s||"boolean"==typeof s?(i.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=0,i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=0,i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=0):(s.toArray(i.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(let t in i)e.deleteBuffer(i[t]);s=[],i={},a={}}}}class sW{constructor(e={}){let t,n,r,i,a,s,o,l,u,c,d,h,p,f,m,g,v,_,y,x,b,S,E,M,T;let{canvas:A=function(){let e=eU("canvas");return e.style.display="block",e}(),context:w=null,depth:C=!0,stencil:P=!1,alpha:R=!1,antialias:I=!1,premultipliedAlpha:L=!0,preserveDrawingBuffer:D=!1,powerPreference:O="default",failIfMajorPerformanceCaveat:N=!1,reverseDepthBuffer:U=!1}=e;if(this.isWebGLRenderer=!0,null!==w){if("undefined"!=typeof WebGLRenderingContext&&w instanceof WebGLRenderingContext)throw Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");t=w.getContextAttributes().alpha}else t=R;let F=new Uint32Array(4),k=new Int32Array(4),B=null,V=null,z=[],j=[];this.domElement=A,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ey,this.toneMapping=0,this.toneMappingExposure=1;let H=this,G=!1,W=0,q=0,X=null,$=-1,Y=null,K=new eK,Z=new eK,J=null,Q=new ni(0),ee=0,et=A.width,en=A.height,er=1,ei=null,ea=null,es=new eK(0,0,et,en),eo=new eK(0,0,et,en),el=!1,eu=new n5,ec=!1,ed=!1;this.transmissionResolutionScale=1;let eh=new tS,ep=new tS,ef=new e3,em=new eK,eg={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ev=!1;function e_(){return null===X?er:1}let eb=w;function eS(e,t){return A.getContext(e,t)}try{if("setAttribute"in A&&A.setAttribute("data-engine","three.js r173"),A.addEventListener("webglcontextlost",eT,!1),A.addEventListener("webglcontextrestored",eA,!1),A.addEventListener("webglcontextcreationerror",ew,!1),null===eb){let e="webgl2";if(eb=eS(e,{alpha:!0,depth:C,stencil:P,antialias:I,premultipliedAlpha:L,preserveDrawingBuffer:D,powerPreference:O,failIfMajorPerformanceCaveat:N}),null===eb){if(eS(e))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function eE(){(n=new ae(eb)).init(),E=new sU(eb,n),r=new iG(eb,n,e,E),i=new sO(eb,n),r.reverseDepthBuffer&&U&&i.buffers.depth.setReversed(!0),a=new ar(eb),s=new sb,o=new sN(eb,n,i,s,r,E,a),l=new iq(H),u=new i9(H),c=new iO(eb),M=new ij(eb,c),d=new at(eb,c,a,M),h=new aa(eb,d,c,a),x=new ai(eb,r,o),v=new iW(s),p=new sx(H,l,u,n,r,M,v),f=new sH(H,s),m=new sT,g=new sI(n),y=new iz(H,l,u,i,h,t,L),_=new sL(H,h,r),T=new sG(eb,a,r,i),b=new iH(eb,n,a),S=new an(eb,n,a),a.programs=p.programs,H.capabilities=r,H.extensions=n,H.properties=s,H.renderLists=m,H.shadowMap=_,H.state=i,H.info=a}eE();let eM=new sV(H,eb);function eT(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),G=!0}function eA(){console.log("THREE.WebGLRenderer: Context Restored."),G=!1;let e=a.autoReset,t=_.enabled,n=_.autoUpdate,r=_.needsUpdate,i=_.type;eE(),a.autoReset=e,_.enabled=t,_.autoUpdate=n,_.needsUpdate=r,_.type=i}function ew(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eC(e){let t=e.target;t.removeEventListener("dispose",eC),function(e){let t=s.get(e).programs;void 0!==t&&(t.forEach(function(e){p.releaseProgram(e)}),e.isShaderMaterial&&p.releaseShaderCache(e))}(t),s.remove(t)}function eP(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,ej(e,t,n),e.side=0,e.needsUpdate=!0,ej(e,t,n),e.side=2):ej(e,t,n)}this.xr=eM,this.getContext=function(){return eb},this.getContextAttributes=function(){return eb.getContextAttributes()},this.forceContextLoss=function(){let e=n.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=n.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return er},this.setPixelRatio=function(e){void 0!==e&&(er=e,this.setSize(et,en,!1))},this.getSize=function(e){return e.set(et,en)},this.setSize=function(e,t,n=!0){if(eM.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}et=e,en=t,A.width=Math.floor(e*er),A.height=Math.floor(t*er),!0===n&&(A.style.width=e+"px",A.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return e.set(et*er,en*er).floor()},this.setDrawingBufferSize=function(e,t,n){et=e,en=t,er=n,A.width=Math.floor(e*n),A.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(K)},this.getViewport=function(e){return e.copy(es)},this.setViewport=function(e,t,n,r){e.isVector4?es.set(e.x,e.y,e.z,e.w):es.set(e,t,n,r),i.viewport(K.copy(es).multiplyScalar(er).round())},this.getScissor=function(e){return e.copy(eo)},this.setScissor=function(e,t,n,r){e.isVector4?eo.set(e.x,e.y,e.z,e.w):eo.set(e,t,n,r),i.scissor(Z.copy(eo).multiplyScalar(er).round())},this.getScissorTest=function(){return el},this.setScissorTest=function(e){i.setScissorTest(el=e)},this.setOpaqueSort=function(e){ei=e},this.setTransparentSort=function(e){ea=e},this.getClearColor=function(e){return e.copy(y.getClearColor())},this.setClearColor=function(){y.setClearColor.apply(y,arguments)},this.getClearAlpha=function(){return y.getClearAlpha()},this.setClearAlpha=function(){y.setClearAlpha.apply(y,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==X){let t=X.texture.format;e=1033===t||1031===t||1029===t}if(e){let e=X.texture.type,t=y.getClearColor(),n=y.getClearAlpha(),r=t.r,i=t.g,a=t.b;1009===e||1014===e||1012===e||1020===e||1017===e||1018===e?(F[0]=r,F[1]=i,F[2]=a,F[3]=n,eb.clearBufferuiv(eb.COLOR,0,F)):(k[0]=r,k[1]=i,k[2]=a,k[3]=n,eb.clearBufferiv(eb.COLOR,0,k))}else r|=eb.COLOR_BUFFER_BIT}t&&(r|=eb.DEPTH_BUFFER_BIT),n&&(r|=eb.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),eb.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){A.removeEventListener("webglcontextlost",eT,!1),A.removeEventListener("webglcontextrestored",eA,!1),A.removeEventListener("webglcontextcreationerror",ew,!1),y.dispose(),m.dispose(),g.dispose(),s.dispose(),l.dispose(),u.dispose(),h.dispose(),M.dispose(),T.dispose(),p.dispose(),eM.dispose(),eM.removeEventListener("sessionstart",eI),eM.removeEventListener("sessionend",eL),eD.stop()},this.renderBufferDirect=function(e,t,a,h,p,m){let g;null===t&&(t=eg);let _=p.isMesh&&0>p.matrixWorld.determinant(),y=function(e,t,n,a,c){var d;!0!==t.isScene&&(t=eg),o.resetTextureUnits();let h=t.fog,p=a.isMeshStandardMaterial?t.environment:null,m=null===X?H.outputColorSpace:!0===X.isXRRenderTarget?X.texture.colorSpace:ex,g=(a.isMeshStandardMaterial?u:l).get(a.envMap||p),_=!0===a.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,y=!!n.attributes.tangent&&(!!a.normalMap||a.anisotropy>0),b=!!n.morphAttributes.position,S=!!n.morphAttributes.normal,E=!!n.morphAttributes.color,M=0;a.toneMapped&&(null===X||!0===X.isXRRenderTarget)&&(M=H.toneMapping);let A=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,w=void 0!==A?A.length:0,C=s.get(a),P=V.state.lights;if(!0===ec&&(!0===ed||e!==Y)){let t=e===Y&&a.id===$;v.setState(a,e,t)}let R=!1;a.version===C.__version?C.needsLights&&C.lightsStateVersion!==P.state.version?R=!0:C.outputColorSpace!==m?R=!0:c.isBatchedMesh&&!1===C.batching?R=!0:c.isBatchedMesh||!0!==C.batching?c.isBatchedMesh&&!0===C.batchingColor&&null===c.colorTexture?R=!0:c.isBatchedMesh&&!1===C.batchingColor&&null!==c.colorTexture?R=!0:c.isInstancedMesh&&!1===C.instancing?R=!0:c.isInstancedMesh||!0!==C.instancing?c.isSkinnedMesh&&!1===C.skinning?R=!0:c.isSkinnedMesh||!0!==C.skinning?c.isInstancedMesh&&!0===C.instancingColor&&null===c.instanceColor?R=!0:c.isInstancedMesh&&!1===C.instancingColor&&null!==c.instanceColor?R=!0:c.isInstancedMesh&&!0===C.instancingMorph&&null===c.morphTexture?R=!0:c.isInstancedMesh&&!1===C.instancingMorph&&null!==c.morphTexture?R=!0:C.envMap!==g?R=!0:!0===a.fog&&C.fog!==h?R=!0:void 0!==C.numClippingPlanes&&(C.numClippingPlanes!==v.numPlanes||C.numIntersection!==v.numIntersection)?R=!0:C.vertexAlphas!==_?R=!0:C.vertexTangents!==y?R=!0:C.morphTargets!==b?R=!0:C.morphNormals!==S?R=!0:C.morphColors!==E?R=!0:C.toneMapping!==M?R=!0:C.morphTargetsCount!==w&&(R=!0):R=!0:R=!0:R=!0:(R=!0,C.__version=a.version);let I=C.currentProgram;!0===R&&(I=ej(a,t,c));let L=!1,D=!1,O=!1,N=I.getUniforms(),U=C.uniforms;if(i.useProgram(I.program)&&(L=!0,D=!0,O=!0),a.id!==$&&($=a.id,D=!0),L||Y!==e){i.buffers.depth.getReversed()?(eh.copy(e.projectionMatrix),function(e){let t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(eh),function(e){let t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}(eh),N.setValue(eb,"projectionMatrix",eh)):N.setValue(eb,"projectionMatrix",e.projectionMatrix),N.setValue(eb,"viewMatrix",e.matrixWorldInverse);let t=N.map.cameraPosition;void 0!==t&&t.setValue(eb,ef.setFromMatrixPosition(e.matrixWorld)),r.logarithmicDepthBuffer&&N.setValue(eb,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(a.isMeshPhongMaterial||a.isMeshToonMaterial||a.isMeshLambertMaterial||a.isMeshBasicMaterial||a.isMeshStandardMaterial||a.isShaderMaterial)&&N.setValue(eb,"isOrthographic",!0===e.isOrthographicCamera),Y!==e&&(Y=e,D=!0,O=!0)}if(c.isSkinnedMesh){N.setOptional(eb,c,"bindMatrix"),N.setOptional(eb,c,"bindMatrixInverse");let e=c.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),N.setValue(eb,"boneTexture",e.boneTexture,o))}c.isBatchedMesh&&(N.setOptional(eb,c,"batchingTexture"),N.setValue(eb,"batchingTexture",c._matricesTexture,o),N.setOptional(eb,c,"batchingIdTexture"),N.setValue(eb,"batchingIdTexture",c._indirectTexture,o),N.setOptional(eb,c,"batchingColorTexture"),null!==c._colorsTexture&&N.setValue(eb,"batchingColorTexture",c._colorsTexture,o));let F=n.morphAttributes;if((void 0!==F.position||void 0!==F.normal||void 0!==F.color)&&x.update(c,n,I),(D||C.receiveShadow!==c.receiveShadow)&&(C.receiveShadow=c.receiveShadow,N.setValue(eb,"receiveShadow",c.receiveShadow)),a.isMeshGouraudMaterial&&null!==a.envMap&&(U.envMap.value=g,U.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1),a.isMeshStandardMaterial&&null===a.envMap&&null!==t.environment&&(U.envMapIntensity.value=t.environmentIntensity),D&&(N.setValue(eb,"toneMappingExposure",H.toneMappingExposure),C.needsLights&&(d=O,U.ambientLightColor.needsUpdate=d,U.lightProbe.needsUpdate=d,U.directionalLights.needsUpdate=d,U.directionalLightShadows.needsUpdate=d,U.pointLights.needsUpdate=d,U.pointLightShadows.needsUpdate=d,U.spotLights.needsUpdate=d,U.spotLightShadows.needsUpdate=d,U.rectAreaLights.needsUpdate=d,U.hemisphereLights.needsUpdate=d),h&&!0===a.fog&&f.refreshFogUniforms(U,h),f.refreshMaterialUniforms(U,a,er,en,V.state.transmissionRenderTarget[e.id]),a9.upload(eb,eH(C),U,o)),a.isShaderMaterial&&!0===a.uniformsNeedUpdate&&(a9.upload(eb,eH(C),U,o),a.uniformsNeedUpdate=!1),a.isSpriteMaterial&&N.setValue(eb,"center",c.center),N.setValue(eb,"modelViewMatrix",c.modelViewMatrix),N.setValue(eb,"normalMatrix",c.normalMatrix),N.setValue(eb,"modelMatrix",c.matrixWorld),a.isShaderMaterial||a.isRawShaderMaterial){let e=a.uniformsGroups;for(let t=0,n=e.length;t<n;t++){let n=e[t];T.update(n,I),T.bind(n,I)}}return I}(e,t,a,h,p);i.setMaterial(h,_);let E=a.index,A=1;if(!0===h.wireframe){if(void 0===(E=d.getWireframeAttribute(a)))return;A=2}let w=a.drawRange,C=a.attributes.position,P=w.start*A,R=(w.start+w.count)*A;null!==m&&(P=Math.max(P,m.start*A),R=Math.min(R,(m.start+m.count)*A)),null!==E?(P=Math.max(P,0),R=Math.min(R,E.count)):null!=C&&(P=Math.max(P,0),R=Math.min(R,C.count));let I=R-P;if(I<0||I===1/0)return;M.setup(p,h,y,a,E);let L=b;if(null!==E&&(g=c.get(E),(L=S).setIndex(g)),p.isMesh)!0===h.wireframe?(i.setLineWidth(h.wireframeLinewidth*e_()),L.setMode(eb.LINES)):L.setMode(eb.TRIANGLES);else if(p.isLine){let e=h.linewidth;void 0===e&&(e=1),i.setLineWidth(e*e_()),p.isLineSegments?L.setMode(eb.LINES):p.isLineLoop?L.setMode(eb.LINE_LOOP):L.setMode(eb.LINE_STRIP)}else p.isPoints?L.setMode(eb.POINTS):p.isSprite&&L.setMode(eb.TRIANGLES);if(p.isBatchedMesh){if(null!==p._multiDrawInstances)L.renderMultiDrawInstances(p._multiDrawStarts,p._multiDrawCounts,p._multiDrawCount,p._multiDrawInstances);else if(n.get("WEBGL_multi_draw"))L.renderMultiDraw(p._multiDrawStarts,p._multiDrawCounts,p._multiDrawCount);else{let e=p._multiDrawStarts,t=p._multiDrawCounts,n=p._multiDrawCount,r=E?c.get(E).bytesPerElement:1,i=s.get(h).currentProgram.getUniforms();for(let a=0;a<n;a++)i.setValue(eb,"_gl_DrawID",a),L.render(e[a]/r,t[a])}}else if(p.isInstancedMesh)L.renderInstances(P,I,p.count);else if(a.isInstancedBufferGeometry){let e=void 0!==a._maxInstanceCount?a._maxInstanceCount:1/0,t=Math.min(a.instanceCount,e);L.renderInstances(P,I,t)}else L.render(P,I)},this.compile=function(e,t,n=null){null===n&&(n=e),(V=g.get(n)).init(t),j.push(V),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(V.pushLight(e),e.castShadow&&V.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(V.pushLight(e),e.castShadow&&V.pushShadow(e))}),V.setupLights();let r=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;let t=e.material;if(t){if(Array.isArray(t))for(let i=0;i<t.length;i++){let a=t[i];eP(a,n,e),r.add(a)}else eP(t,n,e),r.add(t)}}),j.pop(),V=null,r},this.compileAsync=function(e,t,r=null){let i=this.compile(e,t,r);return new Promise(t=>{function r(){if(i.forEach(function(e){s.get(e).currentProgram.isReady()&&i.delete(e)}),0===i.size){t(e);return}setTimeout(r,10)}null!==n.get("KHR_parallel_shader_compile")?r():setTimeout(r,10)})};let eR=null;function eI(){eD.stop()}function eL(){eD.start()}let eD=new iD;function eO(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)V.pushLight(e),e.castShadow&&V.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||eu.intersectsSprite(e)){r&&em.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ep);let t=h.update(e),i=e.material;i.visible&&B.push(e,t,i,n,em.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||eu.intersectsObject(e))){let t=h.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),em.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),em.copy(t.boundingSphere.center)),em.applyMatrix4(e.matrixWorld).applyMatrix4(ep)),Array.isArray(i)){let r=t.groups;for(let a=0,s=r.length;a<s;a++){let s=r[a],o=i[s.materialIndex];o&&o.visible&&B.push(e,t,o,n,em.z,s)}}else i.visible&&B.push(e,t,i,n,em.z,null)}}let i=e.children;for(let e=0,a=i.length;e<a;e++)eO(i[e],t,n,r)}function eN(e,t,n,r){let a=e.opaque,s=e.transmissive,o=e.transparent;V.setupLightsView(n),!0===ec&&v.setGlobalState(H.clippingPlanes,n),r&&i.viewport(K.copy(r)),a.length>0&&eB(a,t,n),s.length>0&&eB(s,t,n),o.length>0&&eB(o,t,n),i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),i.setPolygonOffset(!1)}function eF(e,t,r,i){if(null!==(!0===r.isScene?r.overrideMaterial:null))return;void 0===V.state.transmissionRenderTarget[i.id]&&(V.state.transmissionRenderTarget[i.id]=new eJ(1,1,{generateMipmaps:!0,type:n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float")?1016:1009,minFilter:1008,samples:4,stencilBuffer:P,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ez.workingColorSpace}));let a=V.state.transmissionRenderTarget[i.id],s=i.viewport||K;a.setSize(s.z*H.transmissionResolutionScale,s.w*H.transmissionResolutionScale);let l=H.getRenderTarget();H.setRenderTarget(a),H.getClearColor(Q),(ee=H.getClearAlpha())<1&&H.setClearColor(0xffffff,.5),H.clear(),ev&&y.render(r);let u=H.toneMapping;H.toneMapping=0;let c=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),V.setupLightsView(i),!0===ec&&v.setGlobalState(H.clippingPlanes,i),eB(e,r,i),o.updateMultisampleRenderTarget(a),o.updateRenderTargetMipmap(a),!1===n.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let n=0,a=t.length;n<a;n++){let a=t[n],s=a.object,o=a.geometry,l=a.material,u=a.group;if(2===l.side&&s.layers.test(i.layers)){let t=l.side;l.side=1,l.needsUpdate=!0,eV(s,r,i,o,l,u),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(o.updateMultisampleRenderTarget(a),o.updateRenderTargetMipmap(a))}H.setRenderTarget(l),H.setClearColor(Q,ee),void 0!==c&&(i.viewport=c),H.toneMapping=u}function eB(e,t,n){let r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){let a=e[i],s=a.object,o=a.geometry,l=null===r?a.material:r,u=a.group;s.layers.test(n.layers)&&eV(s,t,n,o,l,u)}}function eV(e,t,n,r,i,a){e.onBeforeRender(H,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(H,t,n,r,e,a),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,i.needsUpdate=!0,H.renderBufferDirect(n,t,r,i,e,a),i.side=0,i.needsUpdate=!0,H.renderBufferDirect(n,t,r,i,e,a),i.side=2):H.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(H,t,n,r,i,a)}function ej(e,t,n){!0!==t.isScene&&(t=eg);let r=s.get(e),i=V.state.lights,a=V.state.shadowsArray,o=i.state.version,c=p.getParameters(e,i.state,a,t,n),d=p.getProgramCacheKey(c),h=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?u:l).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===h&&(e.addEventListener("dispose",eC),h=new Map,r.programs=h);let f=h.get(d);if(void 0!==f){if(r.currentProgram===f&&r.lightsStateVersion===o)return eG(e,c),f}else c.uniforms=p.getUniforms(e),e.onBeforeCompile(c,H),f=p.acquireProgram(c,d),h.set(d,f),r.uniforms=c.uniforms;let m=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(m.clippingPlanes=v.uniform),eG(e,c),r.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,r.lightsStateVersion=o,r.needsLights&&(m.ambientLightColor.value=i.state.ambient,m.lightProbe.value=i.state.probe,m.directionalLights.value=i.state.directional,m.directionalLightShadows.value=i.state.directionalShadow,m.spotLights.value=i.state.spot,m.spotLightShadows.value=i.state.spotShadow,m.rectAreaLights.value=i.state.rectArea,m.ltc_1.value=i.state.rectAreaLTC1,m.ltc_2.value=i.state.rectAreaLTC2,m.pointLights.value=i.state.point,m.pointLightShadows.value=i.state.pointShadow,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotLightMatrix.value=i.state.spotLightMatrix,m.spotLightMap.value=i.state.spotLightMap,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=f,r.uniformsList=null,f}function eH(e){if(null===e.uniformsList){let t=e.currentProgram.getUniforms();e.uniformsList=a9.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function eG(e,t){let n=s.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}eD.setAnimationLoop(function(e){eR&&eR(e)}),"undefined"!=typeof self&&eD.setContext(self),this.setAnimationLoop=function(e){eR=e,eM.setAnimationLoop(e),null===e?eD.stop():eD.start()},eM.addEventListener("sessionstart",eI),eM.addEventListener("sessionend",eL),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!0===G)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===eM.enabled&&!0===eM.isPresenting&&(!0===eM.cameraAutoUpdate&&eM.updateCamera(t),t=eM.getCamera()),!0===e.isScene&&e.onBeforeRender(H,e,t,X),(V=g.get(e,j.length)).init(t),j.push(V),ep.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),eu.setFromProjectionMatrix(ep),ed=this.localClippingEnabled,ec=v.init(this.clippingPlanes,ed),(B=m.get(e,z.length)).init(),z.push(B),!0===eM.enabled&&!0===eM.isPresenting){let e=H.xr.getDepthSensingMesh();null!==e&&eO(e,t,-1/0,H.sortObjects)}eO(e,t,0,H.sortObjects),B.finish(),!0===H.sortObjects&&B.sort(ei,ea),(ev=!1===eM.enabled||!1===eM.isPresenting||!1===eM.hasDepthSensing())&&y.addToRenderList(B,e),this.info.render.frame++,!0===ec&&v.beginShadows();let n=V.state.shadowsArray;_.render(n,e,t),!0===ec&&v.endShadows(),!0===this.info.autoReset&&this.info.reset();let r=B.opaque,i=B.transmissive;if(V.setupLights(),t.isArrayCamera){let n=t.cameras;if(i.length>0)for(let t=0,a=n.length;t<a;t++)eF(r,i,e,n[t]);ev&&y.render(e);for(let t=0,r=n.length;t<r;t++){let r=n[t];eN(B,e,r,r.viewport)}}else i.length>0&&eF(r,i,e,t),ev&&y.render(e),eN(B,e,t);null!==X&&0===q&&(o.updateMultisampleRenderTarget(X),o.updateRenderTargetMipmap(X)),!0===e.isScene&&e.onAfterRender(H,e,t),M.resetDefaultState(),$=-1,Y=null,j.pop(),j.length>0?(V=j[j.length-1],!0===ec&&v.setGlobalState(H.clippingPlanes,V.state.camera)):V=null,z.pop(),B=z.length>0?z[z.length-1]:null},this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return X},this.setRenderTargetTextures=function(e,t,r){s.get(e.texture).__webglTexture=t,s.get(e.depthTexture).__webglTexture=r;let i=s.get(e);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===r,i.__autoAllocateDepthBuffer||!0!==n.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){let n=s.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};let eW=eb.createFramebuffer();this.setRenderTarget=function(e,t=0,n=0){X=e,W=t,q=n;let r=!0,a=null,l=!1,u=!1;if(e){let c=s.get(e);if(void 0!==c.__useDefaultFramebuffer)i.bindFramebuffer(eb.FRAMEBUFFER,null),r=!1;else if(void 0===c.__webglFramebuffer)o.setupRenderTarget(e);else if(c.__hasExternalTextures)o.rebindTextures(e,s.get(e.texture).__webglTexture,s.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){let t=e.depthTexture;if(c.__boundDepthTexture!==t){if(null!==t&&s.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");o.setupDepthRenderbuffer(e)}}let d=e.texture;(d.isData3DTexture||d.isDataArrayTexture||d.isCompressedArrayTexture)&&(u=!0);let h=s.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=Array.isArray(h[t])?h[t][n]:h[t],l=!0):a=e.samples>0&&!1===o.useMultisampledRTT(e)?s.get(e).__webglMultisampledFramebuffer:Array.isArray(h)?h[n]:h,K.copy(e.viewport),Z.copy(e.scissor),J=e.scissorTest}else K.copy(es).multiplyScalar(er).floor(),Z.copy(eo).multiplyScalar(er).floor(),J=el;if(0!==n&&(a=eW),i.bindFramebuffer(eb.FRAMEBUFFER,a)&&r&&i.drawBuffers(e,a),i.viewport(K),i.scissor(Z),i.setScissorTest(J),l){let r=s.get(e.texture);eb.framebufferTexture2D(eb.FRAMEBUFFER,eb.COLOR_ATTACHMENT0,eb.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(u){let r=s.get(e.texture);eb.framebufferTextureLayer(eb.FRAMEBUFFER,eb.COLOR_ATTACHMENT0,r.__webglTexture,n,t)}else if(null!==e&&0!==n){let t=s.get(e.texture);eb.framebufferTexture2D(eb.FRAMEBUFFER,eb.COLOR_ATTACHMENT0,eb.TEXTURE_2D,t.__webglTexture,n)}$=-1},this.readRenderTargetPixels=function(e,t,n,a,o,l,u){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let c=s.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==u&&(c=c[u]),c){i.bindFramebuffer(eb.FRAMEBUFFER,c);try{let i=e.texture,s=i.format,u=i.type;if(!r.textureFormatReadable(s)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!r.textureTypeReadable(u)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}t>=0&&t<=e.width-a&&n>=0&&n<=e.height-o&&eb.readPixels(t,n,a,o,E.convert(s),E.convert(u),l)}finally{let e=null!==X?s.get(X).__webglFramebuffer:null;i.bindFramebuffer(eb.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,a,o,l,u){if(!(e&&e.isWebGLRenderTarget))throw Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let c=s.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==u&&(c=c[u]),c){let u=e.texture,h=u.format,p=u.type;if(!r.textureFormatReadable(h))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!r.textureTypeReadable(p))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-a&&n>=0&&n<=e.height-o){var d;i.bindFramebuffer(eb.FRAMEBUFFER,c);let e=eb.createBuffer();eb.bindBuffer(eb.PIXEL_PACK_BUFFER,e),eb.bufferData(eb.PIXEL_PACK_BUFFER,l.byteLength,eb.STREAM_READ),eb.readPixels(t,n,a,o,E.convert(h),E.convert(p),0);let r=null!==X?s.get(X).__webglFramebuffer:null;i.bindFramebuffer(eb.FRAMEBUFFER,r);let u=eb.fenceSync(eb.SYNC_GPU_COMMANDS_COMPLETE,0);return eb.flush(),await (d=eb,new Promise(function(e,t){setTimeout(function n(){switch(d.clientWaitSync(u,d.SYNC_FLUSH_COMMANDS_BIT,0)){case d.WAIT_FAILED:t();break;case d.TIMEOUT_EXPIRED:setTimeout(n,4);break;default:e()}},4)})),eb.bindBuffer(eb.PIXEL_PACK_BUFFER,e),eb.getBufferSubData(eb.PIXEL_PACK_BUFFER,0,l),eb.deleteBuffer(e),eb.deleteSync(u),l}throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){!0!==e.isTexture&&(ek("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);let r=Math.pow(2,-n),a=Math.floor(e.image.width*r),s=Math.floor(e.image.height*r),l=null!==t?t.x:0,u=null!==t?t.y:0;o.setTexture2D(e,0),eb.copyTexSubImage2D(eb.TEXTURE_2D,n,0,0,l,u,a,s),i.unbindTexture()};let eq=eb.createFramebuffer(),eX=eb.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,r=null,a=0,l=null){let u,c,d,h,p,f,m,g,v,_;!0!==e.isTexture&&(ek("WebGLRenderer: copyTextureToTexture function signature has changed."),r=arguments[0]||null,e=arguments[1],t=arguments[2],l=arguments[3]||0,n=null),null===l&&(0!==a?(ek("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),l=a,a=0):l=0);let y=e.isCompressedTexture?e.mipmaps[l]:e.image;if(null!==n)u=n.max.x-n.min.x,c=n.max.y-n.min.y,d=n.isBox3?n.max.z-n.min.z:1,h=n.min.x,p=n.min.y,f=n.isBox3?n.min.z:0;else{let t=Math.pow(2,-a);u=Math.floor(y.width*t),c=Math.floor(y.height*t),d=e.isDataArrayTexture?y.depth:e.isData3DTexture?Math.floor(y.depth*t):1,h=0,p=0,f=0}null!==r?(m=r.x,g=r.y,v=r.z):(m=0,g=0,v=0);let x=E.convert(t.format),b=E.convert(t.type);t.isData3DTexture?(o.setTexture3D(t,0),_=eb.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(o.setTexture2DArray(t,0),_=eb.TEXTURE_2D_ARRAY):(o.setTexture2D(t,0),_=eb.TEXTURE_2D),eb.pixelStorei(eb.UNPACK_FLIP_Y_WEBGL,t.flipY),eb.pixelStorei(eb.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),eb.pixelStorei(eb.UNPACK_ALIGNMENT,t.unpackAlignment);let S=eb.getParameter(eb.UNPACK_ROW_LENGTH),M=eb.getParameter(eb.UNPACK_IMAGE_HEIGHT),T=eb.getParameter(eb.UNPACK_SKIP_PIXELS),A=eb.getParameter(eb.UNPACK_SKIP_ROWS),w=eb.getParameter(eb.UNPACK_SKIP_IMAGES);eb.pixelStorei(eb.UNPACK_ROW_LENGTH,y.width),eb.pixelStorei(eb.UNPACK_IMAGE_HEIGHT,y.height),eb.pixelStorei(eb.UNPACK_SKIP_PIXELS,h),eb.pixelStorei(eb.UNPACK_SKIP_ROWS,p),eb.pixelStorei(eb.UNPACK_SKIP_IMAGES,f);let C=e.isDataArrayTexture||e.isData3DTexture,P=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){let n=s.get(e),r=s.get(t),o=s.get(n.__renderTarget),_=s.get(r.__renderTarget);i.bindFramebuffer(eb.READ_FRAMEBUFFER,o.__webglFramebuffer),i.bindFramebuffer(eb.DRAW_FRAMEBUFFER,_.__webglFramebuffer);for(let n=0;n<d;n++)C&&(eb.framebufferTextureLayer(eb.READ_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,s.get(e).__webglTexture,a,f+n),eb.framebufferTextureLayer(eb.DRAW_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,s.get(t).__webglTexture,l,v+n)),eb.blitFramebuffer(h,p,u,c,m,g,u,c,eb.DEPTH_BUFFER_BIT,eb.NEAREST);i.bindFramebuffer(eb.READ_FRAMEBUFFER,null),i.bindFramebuffer(eb.DRAW_FRAMEBUFFER,null)}else if(0!==a||e.isRenderTargetTexture||s.has(e)){let n=s.get(e),r=s.get(t);i.bindFramebuffer(eb.READ_FRAMEBUFFER,eq),i.bindFramebuffer(eb.DRAW_FRAMEBUFFER,eX);for(let e=0;e<d;e++)C?eb.framebufferTextureLayer(eb.READ_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,n.__webglTexture,a,f+e):eb.framebufferTexture2D(eb.READ_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,eb.TEXTURE_2D,n.__webglTexture,a),P?eb.framebufferTextureLayer(eb.DRAW_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,r.__webglTexture,l,v+e):eb.framebufferTexture2D(eb.DRAW_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,eb.TEXTURE_2D,r.__webglTexture,l),0!==a?eb.blitFramebuffer(h,p,u,c,m,g,u,c,eb.COLOR_BUFFER_BIT,eb.NEAREST):P?eb.copyTexSubImage3D(_,l,m,g,v+e,h,p,u,c):eb.copyTexSubImage2D(_,l,m,g,h,p,u,c);i.bindFramebuffer(eb.READ_FRAMEBUFFER,null),i.bindFramebuffer(eb.DRAW_FRAMEBUFFER,null)}else P?e.isDataTexture||e.isData3DTexture?eb.texSubImage3D(_,l,m,g,v,u,c,d,x,b,y.data):t.isCompressedArrayTexture?eb.compressedTexSubImage3D(_,l,m,g,v,u,c,d,x,y.data):eb.texSubImage3D(_,l,m,g,v,u,c,d,x,b,y):e.isDataTexture?eb.texSubImage2D(eb.TEXTURE_2D,l,m,g,u,c,x,b,y.data):e.isCompressedTexture?eb.compressedTexSubImage2D(eb.TEXTURE_2D,l,m,g,y.width,y.height,x,y.data):eb.texSubImage2D(eb.TEXTURE_2D,l,m,g,u,c,x,b,y);eb.pixelStorei(eb.UNPACK_ROW_LENGTH,S),eb.pixelStorei(eb.UNPACK_IMAGE_HEIGHT,M),eb.pixelStorei(eb.UNPACK_SKIP_PIXELS,T),eb.pixelStorei(eb.UNPACK_SKIP_ROWS,A),eb.pixelStorei(eb.UNPACK_SKIP_IMAGES,w),0===l&&t.generateMipmaps&&eb.generateMipmap(_),i.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n=null,r=null,i=0){return!0!==e.isTexture&&(ek("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,r=arguments[1]||null,e=arguments[2],t=arguments[3],i=arguments[4]||0),ek('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,r,i)},this.initRenderTarget=function(e){void 0===s.get(e).__webglFramebuffer&&o.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?o.setTextureCube(e,0):e.isData3DTexture?o.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?o.setTexture2DArray(e,0):o.setTexture2D(e,0),i.unbindTexture()},this.resetState=function(){W=0,q=0,X=null,i.reset(),M.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2e3}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=ez._getDrawingBufferColorSpace(e),t.unpackColorSpace=ez._getUnpackColorSpace()}}var sq=n(20707),sX=n(81312),s$=n(12408);let sY=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var sK=n(46820);let sZ=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a};var sJ=n(20951);let sQ=function(e,t,n){t=(0,s$.A)(t,e),r=e;var r,i,a=null==(e=(i=t).length<2?r:(0,sK.A)(r,sZ(i,0,-1)))?e:e[(0,sJ.A)(sY(t))];return null==a?void 0:(0,sq.A)(a,e,n)};var s0=n(57383),s1=n(71984),s3=(0,s0.A)(function(e,t,n){var r=-1,i="function"==typeof t,a=(0,s1.A)(e)?Array(e.length):[];return(0,sX.A)(e,function(e){a[++r]=i?(0,sq.A)(t,e,n):sQ(e,t,n)}),a}),s2=n(59136),s6=n(80887);let s7=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw TypeError("Expected a function");return(0,s6.A)(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),(0,s2.A)(e,t,{leading:r,maxWait:t,trailing:i})};var s4=n(96571),s5=n.n(s4),s8=n(91270),s9=n(68967);let oe=function(e,t,n){var r,i,a;return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=(0,s9.A)(n))==n?n:0),void 0!==t&&(t=(t=(0,s9.A)(t))==t?t:0),r=(0,s9.A)(e),i=t,a=n,r==r&&(void 0!==a&&(r=r<=a?r:a),void 0!==i&&(r=r>=i?r:i)),r};var ot=n(18298),on=n(50760),or=n(84192);let oi={wrap:(e,t,n)=>{let r=n-t,i=Math.floor((e-t)/r);return e-i*r},clamp:(e,t,n)=>Math.min(n,Math.max(t,e))};var oa=n(88114);let os=e=>{let t="nativeEvent"in e?e.nativeEvent:e;return{deltaX:t.deltaX||0,deltaY:t.deltaY||0,deltaZ:t.deltaZ||0,timeStamp:t.timeStamp}},oo=e=>[e.deltaX,e.deltaY,e.deltaZ],ol=e=>Math.max(...oo(e).map(Math.abs));!function(e){e.ALL_OTHER_CHECKS_FAILED="ALL_OTHER_CHECKS_FAILED",e.NO_PREVIOUS_EVENT_TO_COMPARE="NO_PREVIOUS_EVENT_TO_COMPARE",e.PAST_TIMESTAMP_EVENT="PAST_TIMESTAMP_EVENT",e.ENOUGH_TIME_PASSED="ENOUGH_TIME_PASSED",e.NON_DECREASING_DELTAS_OF_KNOWN_HUMAN="NON_DECREASING_DELTAS_OF_KNOWN_HUMAN",e.DELTA_MODULE_HAS_BEEN_INCREASING="DELTA_MODULE_HAS_BEEN_INCREASING"}(i||(i={}));class ou{sensitivity;delay;increasingDeltasThreshold;previousEvents;constructor({sensitivity:e=2,delay:t=100,increasingDeltasThreshold:n=3}={}){this.sensitivity=Math.max(1,e),this.delay=Math.max(1,t),this.increasingDeltasThreshold=Math.max(2,n),this.previousEvents=[]}check(e){if(!(("nativeEvent"in e?e.nativeEvent:e)instanceof Event))throw Error(`"${e}" is not a valid event`);let t=os(e);if(ol(t)<this.sensitivity)return!1;let{isHuman:n}=this.isHuman(t);return n?this.previousEvents=[t]:t.timeStamp>(this.previousEvents.at(-1)?.timeStamp||0)&&this.previousEvents.push(t),n}isHuman(e){let t=this.previousEvents.at(-1);if(!t)return{isHuman:!0,reason:i.NO_PREVIOUS_EVENT_TO_COMPARE};if(e.timeStamp<t.timeStamp)return{isHuman:!1,reason:i.PAST_TIMESTAMP_EVENT};if(e.timeStamp>t.timeStamp+this.delay)return{isHuman:!0,reason:i.ENOUGH_TIME_PASSED};if(ol(e)>=ol(t)){if(1===this.previousEvents.length)return{isHuman:!0,reason:i.NON_DECREASING_DELTAS_OF_KNOWN_HUMAN};if(this.increasingDeltasThreshold<=2||this.previousEvents.length>=this.increasingDeltasThreshold&&this.previousEvents.slice(-this.increasingDeltasThreshold).map(ol).every((e,t,n)=>0===t||e>n[t-1]))return{isHuman:!0,reason:i.DELTA_MODULE_HAS_BEEN_INCREASING}}return{isHuman:!1,reason:i.ALL_OTHER_CHECKS_FAILED}}}class oc{add(e){this._list.push(e),this._timeout||this.execute()}constructor(e){(0,e_._)(this,"_delay",void 0),(0,e_._)(this,"_list",void 0),(0,e_._)(this,"_timeout",null),(0,e_._)(this,"execute",()=>{let e=this._list.shift();e?(e(),this._timeout=window.setTimeout(this.execute,this._delay)):this._timeout=null}),this._delay=e,this._list=[]}}var od=n(65290);let oh={},op={},of=new oc(30);class om extends nN{initialized(){var e,t;!this._disposed&&((null===(t=this.data)||void 0===t?void 0:null===(e=t.videos)||void 0===e?void 0:e.main)?this.createVideoTexture(this.data.videos.main):this.data.image&&("string"==typeof this.data.image?this.createImageTexture(this.data.image):this.data.image.asset&&this.createImageTexture(this.data.image.asset.url)))}createVideoTexture(e){var t;let n=e+this.data.id;this.video=oh[n],this.video||(this.video=document.createElement("video"),this.video.src=e,this.video.loop=!0,this.video.muted=!0,this.video.crossOrigin="anonymous",this.video.playsInline=!0,oh[n]=this.video),this.video.addEventListener("playing",this.onLoadedMetadata),this.video.addEventListener("ended",this.onVideoEnded),this.visible&&(null===(t=this.video.play())||void 0===t||t.catch(()=>{}))}createImageTexture(e){let t=new Image;t.onload=this.onImageLoaded,t.src=(0,od.Qp)(e,800),t.crossOrigin="anonymous",this.texture=new eY(t),this.material.uniforms.uTexture.value=this.texture}createMaterial(){this.material=new nj({uniforms:{uTexture:{value:this.texture},uOpacity:{value:1},uGlobalOpacity:{value:1},uRollOpacity:{value:1},uLoading:{value:0},uBlur:{value:0},uResolution:{value:[1,1]},uTime:{value:10*Math.random()}},transparent:!0,vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vPosition;\n\nvoid main() {\n  vUv = uv.xy;\n  vPosition = position;\n\n  vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);\n  gl_Position = projectionMatrix * modelViewPosition;\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\nuniform sampler2D uTexture;\nuniform float uLoading;\nuniform float uGlobalOpacity;\nuniform float uRollOpacity;\nuniform float uOpacity;\nuniform float uBlur;\nuniform float uTime;\nuniform vec2 uResolution;\nuniform vec3 vPosition;\nvarying vec2 vUv;\n\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.411764705882353) * direction;\n  vec2 off2 = vec2(3.2941176470588234) * direction;\n  vec2 off3 = vec2(5.176470588235294) * direction;\n  color += texture2D(image, uv) * 0.1964825501511404;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\n  color += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\n  color += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\n  return color;\n}\n\n#define similarity 0.41\n#define smoothness 0.1\n#define spill 0.1\n\nvec2 RGBtoUV(vec3 color) {\n  return vec2(\n    color.r * -0.169 + color.g * -0.331 + color.b * 0.5 + 0.5,\n    color.r *  0.5   + color.g * -0.419 + color.b * -0.081 + 0.5\n  );\n}\n\nvec4 processChromaKey(vec4 color) {\n  vec4 keyColor  = vec4(0. ,1. ,0. ,1.);\n  float chromaDist = distance(RGBtoUV(color.rgb), RGBtoUV(keyColor.rgb));\n\n  float baseMask = chromaDist - similarity;\n  float fullMask = pow(clamp(baseMask / smoothness, 0., 1.), 1.5);\n  color.a = fullMask;\n\n  float spillVal = pow(clamp(baseMask / spill, 0., 1.), 1.5);\n  float desat = clamp(color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722, 0., 1.);\n  color.rgb = mix(vec3(desat, desat, desat), color.rgb, spillVal);\n\n  return color;\n}\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nfloat exponentialOut(float t) {\n  return t == 1.0 ? t : 1.0 - pow(2.0, -10.0 * t);\n}\n\n// ease in function\nfloat easeIn(float x) {\n  return x * x;\n}\nfloat easeOut(float x) {\n  return x * (2.0 - x);\n}\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\n\nfloat grad(float x) {\n    float g = 1.0 - abs(2.0 * x - 1.0);\n    return smoothstep(-0.1, 1.0, g);\n}\n\nvoid main() {\n  vec2 _vUv = vUv;\n\n  if (mod(uTime, 2.0) > 1.95)\n    	_vUv += 1.0 / 256.0 * (2.0 * vec2(random(floor(vUv * 102.0) + vec2(32.05,236.0)), random(floor(vUv.y * 32.0) + vec2(-62.05,-36.0))) - 1.0);\n\n  vec4 map = texture2D(uTexture, _vUv);\n  vec2 effectUv = _vUv;\n\n  float xIntensity = .01 / (vUv.x / 1.0);\n  float yIntensity = 100.5;\n  float randomIntensity = 0.01;\n\n  float y = gl_FragCoord.y;\n  if (mod(uTime, 2.0) > 1.95)\n    xIntensity = 0.1;\n\n  float horizontalVariation = snoise(vec2( y*yIntensity)) * (snoise(vec2((uTime*0.0005)* y*yIntensity))) * xIntensity;\n  effectUv.x *= 1. +  horizontalVariation;\n\n  vec4 effectMap = texture2D(uTexture, effectUv);\n  vec4 maskedColor = processChromaKey(map);\n  vec4 effectMaskedColor = processChromaKey(effectMap);\n\n  // add grain on maskedColor\n  float rand = random(vec2(uTime));\n  float grain = random(vec2(gl_FragCoord.x + rand, gl_FragCoord.y + rand)) * 1.;\n  // Convert #F5F5F5 to normalized color space (245/255 = ~0.9608)\n  vec3 excludeColor = vec3(0.9608, 0.9608, 0.9608);\n  float threshold = 0.01; // Tolerance for color comparison\n\n  // Create a mask based on how different the color is from the exclude color\n  float colorDiff = length(maskedColor.rgb - excludeColor);\n  float grainMask = smoothstep(threshold, threshold * 2.0, colorDiff);\n\n  // Apply grain with variable intensity based on the mask\n  maskedColor.rgb += (grain - 0.5) * 0.1 * grainMask;\n\n  float mask = grad(vUv.x - 0.05) * 0.8;\n\n  vec4 color =  mix(effectMaskedColor, maskedColor, mask);\n  color.a = color.a * uOpacity * uLoading * uGlobalOpacity * uRollOpacity * map.a;\n\n  gl_FragColor = color;\n\n}\n\n"})}onContextRestored(){this.texture=new n8(this.video),this.material.uniforms.uTexture.value=this.texture}zoomed(){this.active(!0),this._zoomed=!0}unzoomed(){this._zoomed=!1}loaded(){this.updateGeometry(),this.texture.needsUpdate=!0,(0,F.i)(this.material.uniforms.uLoading,{value:[0,1]},{duration:.25,ease:B.A.sineEaseOut})}updateGeometry(){this.geometry&&this.geometry.dispose(),this.geometry=new rQ(1*this.ratio,1)}click(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{setLastLook:t,state:n,emitter:r}=(0,ea.eR)();if(this.isCurrent()&&e){var i;(null===(i=this.data.products)||void 0===i?void 0:i.length)>=1&&(this.data.products[0],t({...this.data,collection:{slug:{current:n.id||""}}}),null==r||r.emit("product-click",this.data))}else this.navigate()}navigate(){(0,o.cI)().push(this.data.href,void 0,{shallow:!0})}resize(e,t){this.material.uniforms.uResolution.value=[t*this.ratio,t]}set opacity(e){var t,n,r;this.material.uniforms.uOpacity.value=e,this.visible=e>0,this.visible?null===(n=this.video)||void 0===n||null===(t=n.play())||void 0===t||t.catch(()=>{}):null===(r=this.video)||void 0===r||r.pause()}get opacity(){return this.material.uniforms.uOpacity.value}set rollOpacity(e){this.material.uniforms.uRollOpacity.value=e,this.visible=e>0}get rollOpacity(){return this.material.uniforms.uRollOpacity.value}set blur(e){this.material.uniforms.uBlur.value=e}get blur(){return this.material.uniforms.uBlur.value}set globalOpacity(e){this.material.uniforms.uGlobalOpacity.value=e}get globalOpacity(){return this.material.uniforms.uGlobalOpacity.value}inactive(){.4===this.rollOpacity||this._zoomed||(0,F.i)(this,{rollOpacity:.4},{duration:0,ease:B.A.linear})}active(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.rollOpacity||this._zoomed)return;let t=e?{duration:.8,ease:B.A.linear}:{duration:.1,ease:B.A.linear};(0,F.i)(this,{rollOpacity:1},t)}isCurrent(){return(0,ea.eR)().state.current===this.data.id}dispose(){var e,t;this.video&&(this.video.removeEventListener("playing",this.onLoadedMetadata),this.video.removeEventListener("ended",this.onVideoEnded),this.video.pause()),null===(e=this.texture)||void 0===e||e.dispose(),null===(t=this.geometry)||void 0===t||t.dispose(),this._disposed=!0}constructor(e){super(),(0,e_._)(this,"ratio",1),(0,e_._)(this,"_disposed",!1),(0,e_._)(this,"_zoomed",!1),(0,e_._)(this,"onVideoEnded",()=>{}),(0,e_._)(this,"onImageLoaded",()=>{this.texture.needsUpdate=!0,this.ratio=this.texture.image.width/this.texture.image.height,this.loaded()}),(0,e_._)(this,"onLoadedMetadata",e=>{let t=this.video.src+this.data.id;this.texture=op[t],this.texture||(this.texture=new n8(this.video),op[t]=this.texture),this.material.uniforms.uTexture.value=this.texture,this.video.removeEventListener("playing",this.onLoadedMetadata),this.ratio=9/16,this.loaded()}),(0,e_._)(this,"update",(e,t)=>{let n=(0,ea.eR)();this.isCurrent()&&this.video&&n.videoProgress.set(this.video.currentTime/this.video.duration),this.material.uniforms.uTime.value+=.01}),this.data=e,this.createMaterial(),this.material.uniforms.uLoading.value=0,this.video||this.texture?this.initialized():setTimeout(()=>of.add(()=>this.initialized()),5*Math.random())}}let og=new ou({}),ov=(0,ot.A)(0,.17,1,1),o_=e=>1-ov(1-e);class oy extends tY{createItems(e){this.items=e.map(e=>{let t=new om(e);return this.add(t),t})}set opacity(e){this.items.forEach(t=>{t.globalOpacity=e})}get opacity(){var e;return(null===(e=this.items[0])||void 0===e?void 0:e.globalOpacity)||1}set focus(e){this.targetFocus=e,this.currentFocus=e,this.wheelFocus.set(e)}get focus(){return this.currentFocus}update(e,t){let n=this.targetFocus-this.currentFocus;if(Math.abs(n)>.001){let e=(0,en.IS)()?.09:.05;this.currentFocus+=n*e,this.askForUpdate()}this.animationNeedsUpdate&&this.renderAnimation(),s3(this.children,"update",e,t)}resize(e,t){this.screenWidth=e/t,this.askForUpdate(),s3(this.children,"resize",e,t)}dispose(){this.items.forEach(e=>{e.dispose()})}constructor(e,t,n){var r;super(),r=this,(0,e_._)(this,"zoomed",0),(0,e_._)(this,"targetZoomed",0),(0,e_._)(this,"currentFocus",0),(0,e_._)(this,"targetFocus",0),(0,e_._)(this,"hoveredItem",null),(0,e_._)(this,"isHovering",!1),(0,e_._)(this,"screenWidth",1),(0,e_._)(this,"animationNeedsUpdate",!1),(0,e_._)(this,"scene",void 0),(0,e_._)(this,"data",void 0),(0,e_._)(this,"isLooks",()=>this.data.some(e=>{var t;return null===(t=e.videos)||void 0===t?void 0:t.listing})),(0,e_._)(this,"goToCollection",function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=r.items)||void 0===e||e.forEach(e=>e.unzoomed());let n=(0,en.IS)();if(r.targetZoomed=0,t){r.zoomed=0,r.focus=0,r.askForUpdate();return}(0,F.i)(r,{zoomed:0},{duration:n?.8:40/60,ease:n?B.A.quintEaseInOut:B.A.linear,onUpdate:r.askForUpdate})}),(0,e_._)(this,"goTo",e=>{var t;this.goToLook(null===(t=this.items[oe(Math.round(this.currentFocus)+e,0,this.items.length-1)])||void 0===t?void 0:t.data.id)}),(0,e_._)(this,"goToLook",function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=r.items.findIndex(t=>t.data.id===e),a=(0,en.IS)();if(!~i)return;let s=r.items.length,o=i/r.items.length*s;if(null===(t=r.items)||void 0===t||t.forEach(e=>e.zoomed()),n){r.targetZoomed=1,r.zoomed=1,r.focus=o,r.askForUpdate();return}let l=0===r.zoomed?o:r.focus;1!==r.zoomed&&(r.targetZoomed=1,(0,F.i)(r,{zoomed:1},{duration:a?.8:80/60,ease:a?B.A.quintEaseInOut:B.A.linear,onUpdate:r.askForUpdate})),r.targetFocus!==o&&(0,F.i)(r,{focus:[l,o]},{duration:.8,ease:B.A.quintEaseOut,onUpdate:r.askForUpdate})}),(0,e_._)(this,"getCarouselTransform",(e,t,n)=>{let r=(e-n)/(((0,en.IS)()?3:this.isLooks()?5.2:4)-1),i=1-Math.abs(r),a=(0,on.p)(i,[0,1],[.2,(0,en.IS)()?.7:1],{ease:B.A.cubicEaseIn}),s=r*(.8+.55*a)*this.screenWidth,o=(0,on.p)(i,[-.2,1],[0,1],{ease:B.A.expoEaseIn}),l=(0,on.p)(i,[.5,1],[1,0],{ease:B.A.expoEaseIn});return{position:new eL(s,0),scale:a,opacity:o,blur:l}}),(0,e_._)(this,"getLineTransform",(e,t)=>{let n=.75*this.screenWidth,r=.75/t*this.screenWidth*(16/9)*1;return{position:new eL((e/(t-1)-.5)*n,0),scale:r,opacity:1,blur:0}}),(0,e_._)(this,"getCircleTransform",(e,t)=>{let n=e/t*Math.PI*2+Math.PI/2,r=Math.PI/2,i=(0,on.p)(oi.wrap(n,0,2*Math.PI),[0,r,2*r,3*r,4*r],[0,r,2*r,3*r,4*r],{ease:[ov,o_,ov,o_]}),a=.4*this.screenWidth;return{position:new eL(Math.cos(i)*a,Math.sin(i)*a*.8),scale:.1,opacity:1,blur:0}}),(0,e_._)(this,"renderAnimation",()=>{let e=this.zoomed,t=this.items.length,n=!!this.scene.state.get().current,r=Math.max(Math.abs(t-1-this.focus),Math.abs(this.focus)),i={ease:n?B.A.quintEaseInOut:B.A.custom};this.items.forEach((a,s)=>{let o=(0,en.IS)()&&t>5,l=o?this.getCircleTransform(s,t):this.getLineTransform(s,t),u=this.getCarouselTransform(s,t,this.focus),c=Math.abs(s-this.focus),d=n?.2/r:B.A.expoEaseIn(c/r*.05),h=n?0:d*(r-c),p=n?1-d*(r-c):1;if(o){let n=this.getCarouselTransform(s,t,t/2),r=new eL((0,on.p)(e,[0,1],[l.position.x,n.position.x]),l.position.y),i=new rg(l.position,r,u.position).getPointAt(e);a.position.x=i.x,a.position.y=i.y}else a.position.x=(0,on.p)(e,[h,p],[l.position.x,u.position.x],i),a.position.y=(0,on.p)(e,[h,p],[l.position.y,u.position.y],i);let f=(0,on.p)(e,[h,p],[l.scale,u.scale],i),m=(0,on.p)(e,[h,p],[l.opacity,u.opacity],i),g=(0,on.p)(e,[h,p],[l.blur,u.blur],i);a.scale.setScalar(f),a.position.z=-(1-f),a.opacity=m,a.blur=g}),this.animationNeedsUpdate=!1}),(0,e_._)(this,"wheelFocus",new or.KG(0)),(0,e_._)(this,"wheelDrifting",!1),(0,e_._)(this,"wheel",e=>{var t;if(null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollTop)return;let n=og.check(e);e.preventDefault();let r=e.deltaY+e.deltaX,i=oi.clamp(this.wheelFocus.get()+.0015*r,0,this.items.length-1);this.wheelFocus.set(i);let a=Math.abs(this.wheelFocus.getVelocity())>5;if(n&&(this.wheelDrifting=a),this.wheelDrifting){let e=this.wheelFocus.get(),t=this.wheelFocus.getVelocity();for(;Math.abs(t)>.1;)t*=.93,e+=.016*t;this.targetFocus=oi.clamp(Math.round(e),0,this.items.length-1)}else this.targetFocus=i;this.askForUpdate(),this.debounceMagnetism()}),(0,e_._)(this,"move",function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.targetFocus=oi.clamp(e,0,r.items.length-1),r.wheelFocus.set(r.targetFocus),t&&r.debounceMagnetism()}),(0,e_._)(this,"debounceMagnetism",(0,s2.A)(()=>{this.magnetism()},100)),(0,e_._)(this,"magnetism",()=>{var e;let t=Math.round(this.targetFocus);this.targetFocus=t,this.wheelFocus.set(this.targetFocus),this.wheelDrifting=!1,null===(e=this.items[t])||void 0===e||e.click()}),(0,e_._)(this,"hide",e=>new Promise(t=>{if(e===oa.i.none)(0,F.i)(this.position,{y:.2},{duration:.6,ease:B.A.quintEaseInOut}),(0,F.i)(this.scale,{x:.75,y:.75,z:.75},{duration:.6,ease:B.A.quintEaseInOut}),(0,F.i)(this,{opacity:[1,0]},{duration:.6,ease:B.A.quintEaseInOut,onComplete:t});else{let n=e===oa.i.rightToLeft?-1:1;(0,F.i)(this.position,{x:n*this.screenWidth*1.5},{duration:.75,ease:B.A.quintEaseInOut,onComplete:t})}})),(0,e_._)(this,"show",e=>new Promise(t=>{if(e===oa.i.none)(0,F.i)(this.position,{y:[.1,0]},{duration:.6,ease:B.A.quintEaseInOut}),(0,F.i)(this.scale,{x:[.75,1],y:[.75,1],z:[.75,1]},{duration:.6,ease:B.A.quintEaseInOut}),(0,F.i)(this,{opacity:[0,1]},{duration:.25,ease:B.A.quintEaseInOut,onComplete:t});else{let n=e===oa.i.rightToLeft?1:-1;(0,F.i)(this.position,{x:[n*this.screenWidth*1.5,0]},{duration:.75,ease:B.A.quintEaseInOut,onComplete:t})}})),(0,e_._)(this,"askForUpdate",()=>{this.animationNeedsUpdate=!0}),this.backgroundId=e,this.scene=n,this.data=t,this.createItems(t),this.askForUpdate()}}class ox{buildStats(){this.stats=new(s5()),this.stats.showPanel(0),document.body.appendChild(this.stats.dom),this.stats.dom.style.left="initial",this.stats.dom.style.right="0",s8.A.mobile?(this.stats.dom.style.top="75px",this.stats.dom.style.pointerEvents="none"):(this.stats.dom.style.bottom="0",this.stats.dom.style.top="initial")}buildScene(){this.raycaster=new iP}bindEvents(){var e,t,n,r,i,a,s,o,l,u,c;let d=!(arguments.length>0)||void 0===arguments[0]||arguments[0],h=d?"addEventListener":"removeEventListener";null===(e=this.canvas)||void 0===e||e[h]("click",this.onClick),s8.A.mobile?(null===(a=this.canvas)||void 0===a||a[h]("touchstart",this.onTouchStart,{passive:!1}),null===(s=this.canvas)||void 0===s||s[h]("touchmove",this.onTouchMove,{passive:!1}),null===(o=this.canvas)||void 0===o||o[h]("touchend",this.onTouchEnd),null===(l=this.canvas)||void 0===l||l[h]("touch",this.onClick)):(null===(r=this.canvas)||void 0===r||r[h]("mousemove",this.onMouseMove),null===(i=this.canvas)||void 0===i||i[h]("wheel",this.onMouseWheel)),window[h]("visibilitychange",this.onVisibilityChange),null===(t=this.canvas)||void 0===t||t[h]("webglcontextlost",this.onContextLost),null===(n=this.canvas)||void 0===n||n[h]("webglcontextrestored",this.onContextRestored),window[h]("keydown",this.onKeyDown),d?(null===(u=this.state)||void 0===u||u.on("change",this.updateCarousel),this.updateCarousel(),this.updateZoom()):null===(c=this.state)||void 0===c||c.clearListeners()}raycast(e){if(!this.clickables)return[];let t=new eL(this.pixelRatio*e.pageX/this.canvas.width*2-1,-this.pixelRatio*e.pageY/this.canvas.height*2+1);return this.raycaster.setFromCamera(t,this.camera),this.raycaster.intersectObjects(this.clickables,!1)}touchRaycast(e){if(!this.clickables||!e.changedTouches.length)return[];let t=e.changedTouches[0],n=new eL(this.pixelRatio*t.pageX/this.canvas.width*2-1,-this.pixelRatio*t.pageY/this.canvas.height*2+1);return this.raycaster.setFromCamera(n,this.camera),this.raycaster.intersectObjects(this.clickables,!1)}update(){s3(this.scene.children,"update",this.renderer,this.time)}render(){var e,t;let n=performance.now(),r=Math.ceil(n-this.lastTime);null===(e=this.stats)||void 0===e||e.begin(),this.update(),this.renderer.setClearColor(0xf5f5f5),this.renderer.render(this.scene,this.camera),null===(t=this.stats)||void 0===t||t.end(),this.time+=r/1e3,this.lastTime=n,this.raf=window.requestAnimationFrame(()=>this.render())}resize(e,t){var n;this.renderer.setSize(e,t);let r=e/t;this.ratio=r,this.camera.left=-r/2,this.camera.right=r/2,this.camera.top=.5,this.camera.bottom=-.5,this.camera.updateProjectionMatrix(),null===this||void 0===this||null===(n=this.carousel)||void 0===n||n.resize(e,t)}dispose(){var e;this.bindEvents(!1),null===(e=this.carousel)||void 0===e||e.dispose(),this.renderer.dispose(),this.stop(),this.stats&&this.stats.dom.remove()}constructor(e,t){var n=this;(0,e_._)(this,"onContextLost",()=>{this.stop()}),(0,e_._)(this,"onContextRestored",()=>{this.start()}),(0,e_._)(this,"updateZoom",function(){var e,t,r;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{current:a,id:s}=n.state.get();n.carousel&&s!==(null===(e=n.carousel)||void 0===e?void 0:e.backgroundId)||(a?null===(t=n.carousel)||void 0===t||t.goToLook(a,i):null===(r=n.carousel)||void 0===r||r.goToCollection(i))}),(0,e_._)(this,"onMouseWheel",e=>{var t;this.state.get().current&&(null===this||void 0===this||null===(t=this.carousel)||void 0===t||t.wheel(e))}),(0,e_._)(this,"onKeyDown",e=>{var t,n;"ArrowLeft"===e.key&&(null===(t=this.carousel)||void 0===t||t.goTo(-1)),"ArrowRight"===e.key&&(null===(n=this.carousel)||void 0===n||n.goTo(1))}),(0,e_._)(this,"onHidden",function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return()=>{t&&!n.carousel&&n.stop(),n.scene.remove(e),e.dispose()}}),(0,e_._)(this,"updateCarousel",()=>{var e;let{id:t,items:n,transition:r}=this.state.get(),i=this.carousel;if(!t)return i?(s8.A.mobile&&this.stop(),null==i||i.hide(r).then(this.onHidden(i,!0)),void(this.carousel=void 0)):this.stop();this.running()||this.start();let a=!!(t&&t!==(null===(e=this.carousel)||void 0===e?void 0:e.backgroundId));a&&(null==i||i.hide(r).then(this.onHidden(i)),this.carousel=new oy(t,n,this),this.clickables=this.carousel.items.slice(0),this.scene.add(this.carousel),this.carousel.show(r)),this.updateZoom(a)}),(0,e_._)(this,"onClick",e=>{var t,n;if(!this.clickables)return;let[r]=this.raycast(e);null==r||null===(n=r.object)||void 0===n||null===(t=n.click)||void 0===t||t.call(n,!0)}),(0,e_._)(this,"onMouseMove",s7(e=>{var t,n;if(!this.running())return;let r=e&&this.raycast(e);this.canvas.style.cursor=(null==r?void 0:r.length)?"pointer":"default";let i=null==r?void 0:null===(t=r[0])||void 0===t?void 0:t.object;null===this||void 0===this||null===(n=this.clickables)||void 0===n||n.forEach(e=>{var t,n;e===i||!i||this.state.get().current?null===(t=e.active)||void 0===t||t.call(e):null===(n=e.inactive)||void 0===n||n.call(e)})},50)),(0,e_._)(this,"onTouchStart",e=>{var t;this.running()&&this.state.get().current&&(null==e||e.preventDefault(),this.touchStart={start:(null===(t=this.carousel)||void 0===t?void 0:t.focus)||0,x:e.touches[0].clientX,time:performance.now()},this.onTouchMove(e))}),(0,e_._)(this,"onTouchMove",e=>{var t;if(!this.running()||!this.touchStart)return;let n=e.touches[0].clientX-this.touchStart.x,r=this.touchStart.start-.01*n;null===(t=this.carousel)||void 0===t||t.move(r)}),(0,e_._)(this,"onTouchEnd",e=>{if(this.touchStart){var t,n,r;let i=performance.now()-this.touchStart.time,a=Math.abs(this.touchStart.x-e.changedTouches[0].clientX);if(i<200&&a<30){let[t]=this.touchRaycast(e);null==t||null===(r=t.object)||void 0===r||null===(n=r.click)||void 0===n||n.call(r,!0)}null===(t=this.carousel)||void 0===t||t.magnetism()}this.touchStart=void 0}),(0,e_._)(this,"onVisibilityChange",()=>{var e,t;"visible"===document.visibilityState?(this.stop(),this.renderer.getContext().isContextLost()&&this.renderer.forceContextRestore(),this.start(),null===(e=this.carousel)||void 0===e||e.items.forEach(e=>{var t;null===(t=e.video)||void 0===t||t.play().then(()=>{e.loaded()}),e.video||e.loaded()})):(this.stop(),null===(t=this.carousel)||void 0===t||t.items.forEach(e=>{var t;null===(t=e.video)||void 0===t||t.pause(),e.material.uniforms.uLoading.value=0}))}),(0,e_._)(this,"running",()=>!!this.raf),(0,e_._)(this,"start",()=>{this.lastTime=performance.now(),this.render()}),(0,e_._)(this,"stop",()=>{this.raf&&(window.cancelAnimationFrame(this.raf),this.renderer.clear(),this.raf=void 0)}),this.time=0,this.scene=new n0,this.canvas=e,this.camera=new iv(-1,1,1,-1,-1,1e3),this.renderer=new sW({canvas:e,antialias:!1,alpha:!1,preserveDrawingBuffer:!0,precision:"highp"}),this.pixelRatio=Math.min(window.devicePixelRatio,s8.A.mobile?2:1.5),this.renderer.setPixelRatio(this.pixelRatio),this.renderer.setClearColor(0xf5f5f5),this.state=t,this.lastHoveredObject=null,this.maxFps=(s8.A.mobile,60),this.buildScene(),this.bindEvents()}}var ob=n(35825),oS=n.n(ob);let oE=s.memo(e=>{let{className:t,...n}=e,r=(0,s.useRef)(null),i=(0,s.useRef)(null),o=(0,s.useRef)(),{sizes:l}=(0,en.tS)(),{motionState:c}=(0,ea.r0)();return(0,s.useEffect)(()=>{if(i.current)return o.current=new ox(i.current,c),()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.dispose()}},[]),(0,N.w)(r,()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.resize(null==l?void 0:l.width.get(),null==l?void 0:l.height.get())}),(0,a.jsx)("div",{className:oS().wrapper,ref:r,children:(0,a.jsx)("canvas",{className:u()(oS().canvas,t),...n,ref:i})})});var oM=n(50569),oT=n.n(oM);let oA=s.memo(e=>{let{className:t,...n}=e,{mq:r}=(0,en.tS)();return(0,a.jsxs)(a.Fragment,{children:[!r.tabletPortrait&&(0,a.jsx)(H,{className:u()(oT().bar,oT().topRight,t),...n,children:(0,a.jsx)(et.AA,{id:"top-right-bar",component:eu,mode:"wait",initial:!1})}),(0,a.jsx)(H,{className:u()(oT().bar,oT().bottomLeft,t),...n,children:(0,a.jsx)(et.AA,{id:"bottom-left-bar",component:eu,mode:"wait",initial:!1})})]})});var ow=n(71843),oC=n(60919),oP=n.n(oC),oR=n(14100),oI=n(61849);let oL=s.memo(e=>{let{className:t,...n}=e;return(0,a.jsxs)(H,{className:u()(oP().wrapper,t),...n,vertical:!0,children:[(0,a.jsx)("div",{className:oP().subtitle,children:(0,a.jsx)(et.AA,{id:"subtitle",initial:!1,component:oI.A,custom:{delay:.1,reverse:!0}})}),(0,a.jsx)("div",{className:oP().title,children:(0,a.jsx)(et.AA,{id:"title",initial:!1,component:oR.A,custom:{delay:.1,reverse:!0}})})]})});var oD=n(75010),oO=n.n(oD);let oN=e=>{let{className:t,hasBar:n=!1,...r}=e,{mq:i}=(0,en.tS)();return(0,a.jsx)(k.P.div,{...G.q3,...r,className:u()(oO().content,t,{[oO().hasBar]:n}),...(0,G.CW)(.1,i.tabletPortrait?0:n?.2:.4),children:r.children})},oU=s.memo(e=>{var t,n;let{className:r,...i}=e,o=(0,et.hs)("page-info"),l=null===(n=(0,et.H3)().get("page-info"))||void 0===n?void 0:null===(t=n.context)||void 0===t?void 0:t.textColor,d=(0,et.NX)("page-info"),h=(0,et.hs)("page-info-bar"),p=(0,et.hs)("bottom-left-bar"),f=null==d?void 0:d.version,[m,g]=(0,s.useState)(!1),{mq:v}=(0,en.tS)(),_=(0,w.fZ)(),y=()=>g(!1),x=(0,c.useRouter)();(0,s.useEffect)(()=>{g(!1)},[x.asPath]),(0,s.useEffect)(()=>{y()},[f]);let b=(0,s.useMemo)(()=>m?"black":l,[l,m]),S=(0,et.NX)("page-info");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(es.N,{children:m&&(0,a.jsx)(ei.A,{className:oO().overlay,onClick:y})}),(0,a.jsx)("div",{className:u()(oO().outer,r,{[oO().hasDetail]:o,[oO().viewDetails]:m,[oO().hasBottomLeftBar]:p}),...i,children:(0,a.jsxs)("div",{className:oO().wrapper,children:[(0,a.jsxs)("div",{className:oO().top,children:[(0,a.jsx)(oL,{className:oO().headings}),v.tabletPortrait&&o&&(0,a.jsx)("button",{className:u()(oO().detailsButton,oO()[b||"black"]),onClick:()=>g(e=>!e),children:_(m?"common.close_details":"common.view_details")})]}),(0,a.jsx)("div",{className:u()(oO().bar,{[oO().empty]:!h}),children:(0,a.jsx)(H,{className:u()(oO().innerBar),children:(0,a.jsx)(et.AA,{id:"page-info-bar",initial:!1,mode:"wait",component:eu})})}),(0,a.jsx)(k.P.div,{className:u()(oO().inner,{[oO().hidden]:v.tabletPortrait&&!m&&S}),...G.q3,children:(0,a.jsx)(et.AA,{id:"page-info",initial:!1,component:oN,componentProps:{hasBar:h,...v.tabletPortrait?{initial:"initial",animate:m?"animate":"initial"}:{}}})})]})})]})}),oF=e=>{let t=(0,s.useRef)(e),{stories:n}=(0,er.fK)();return(0,s.useMemo)(()=>{let r=t.current;if(t.current=e,(null==e?void 0:e.background)&&(null==r?void 0:r.background))return oa.i.none;if(e.story&&(null==r?void 0:r.story))return n.findIndex(e=>e._id===r.story._id)<n.findIndex(t=>t._id===e.story._id)?oa.i.leftToRight:oa.i.rightToLeft;if((null==e?void 0:e.pageType)==="product"&&(null==r?void 0:r.pageType)==="product"&&((null==e?void 0:e.siblings)||(null==r?void 0:r.siblings))){let t=(null==e?void 0:e.siblings)||(null==r?void 0:r.siblings),n=t.findIndex(e=>{var t;return e.store.slug.current===(null==r?void 0:null===(t=r.product)||void 0===t?void 0:t.handle)});return t.findIndex(t=>{var n;return t.store.slug.current===(null==e?void 0:null===(n=e.product)||void 0===n?void 0:n.handle)})<n?oa.i.rightToLeft:oa.i.leftToRight}return(null==e?void 0:e.pageType)==="index"&&(null==r?void 0:r.pageType)==="index"&&(null==e?void 0:e.indexView)&&(null==r?void 0:r.indexView)?"collections"===e.indexView?oa.i.leftToRight:oa.i.rightToLeft:(null==r?void 0:r.pageType)==="index"?oa.i.topOverlayExit:(null==e?void 0:e.pageType)==="index"?oa.i.topOverlayEnter:(null==e?void 0:e.background)?oa.i.bottomOverlayExit:oa.i.bottomOverlayEnter},[e])},ok=()=>{let e=(0,s.useRef)(),t=(0,s.useRef)(d().asPath);return(0,s.useEffect)(()=>{let n=(n,r)=>{var i;null===(i=e.current)||void 0===i||i.call(e);let{shallow:a}=r||{};if(a)return;if(n===t.current){t.current=null;return}let s=[...Array.from(document.head.querySelectorAll("link[rel=stylesheet]")).slice(1),...Array.from(document.head.querySelectorAll("style:not([media=x])"))].map(e=>{let t;if("LINK"===e.tagName)try{(t=document.createElement("style")).innerHTML=Array.from(e.sheet.rules).map(e=>e.cssText).join("\n")}catch(n){t=e.cloneNode(!0)}else t=e.cloneNode(!0);return t.removeAttribute("data-n-p"),t.removeAttribute("data-n-href"),document.head.appendChild(t),t});e.current=()=>{var n;for(let r of(e.current=null,t.current=null,s))null===(n=r.parentNode)||void 0===n||n.removeChild(r)}};return d().events.on("beforeHistoryChange",n),()=>{var t;d().events.off("beforeHistoryChange",n),null===(t=e.current)||void 0===t||t.call(e)}},[]),(0,s.useCallback)(()=>{requestAnimationFrame(()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.call(e)})},[])};var oB=n(23897),oV=n(71755),oz=n.n(oV);let oj=e=>{let{children:t}=e;return(0,a.jsx)(k.P.div,{...G.q3,className:oz().panel,children:t})},oH=s.memo(()=>{var e,t,n;let r=(0,et.NX)("panel"),{lockScroll:i}=(0,oB.C4)(),s={"--z-index":null==r?void 0:null===(e=r.context)||void 0===e?void 0:e.zIndex,"--panel-z-index":null==r?void 0:null===(t=r.context)||void 0===t?void 0:t.panelZIndex,"--bottom-offset":(null==r?void 0:null===(n=r.context)||void 0===n?void 0:n.bottomOffsetBar)?"calc(var(--bar-height) + 10rem + var(--viewport-inset)":"10rem"};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:oz().container,style:s,children:[(0,a.jsx)(H,{vertical:!0,className:oz().wrapper,children:(0,a.jsx)(et.AA,{id:"panel",component:oj,mode:"wait"})}),(0,a.jsx)(es.N,{initial:!1,children:(null==r?void 0:r.children)&&(0,a.jsx)(ei.A,{onClick:()=>{var e,t;null==r||null===(t=r.context)||void 0===t||null===(e=t.close)||void 0===e||e.call(t),i(!1)},className:oz().overlay,style:s})})]})})});var oG=n(69549),oW=n(62768),oq=n(56335),oX=n(28988),o$=1/0;let oY=function(e){var t,n=(t=e)?(t=(0,s9.A)(t))===o$||t===-o$?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0,r=n%1;return n==n?r?n-r:n:0},oK=function(e,t){if("function"!=typeof t)throw TypeError("Expected a function");return e=oY(e),function(){if(--e<1)return t.apply(this,arguments)}};var oZ=n(16303),oJ=n(26520),oQ=n.n(oJ);let o0=s.memo(e=>{let{className:t,...n}=e,[r,i]=(0,s.useState)(!1),o="geo:".concat(48.861663,",").concat(2.369389),l="https://www.google.com/maps/search/?api=1&query=".concat(48.861663,",").concat(2.369389),c="https://maps.apple.com/?q=".concat(48.861663,",").concat(2.369389);return(0,a.jsxs)("div",{className:u()(oQ().wrapper,t),...n,children:[(0,a.jsx)(ei.A,{className:oQ().overlay}),(0,a.jsx)("div",{className:oQ().logoWrapper,children:(0,a.jsx)(b,{className:oQ().logo})}),(0,a.jsxs)("div",{className:oQ().content,children:[(0,a.jsx)("span",{className:oQ().date,children:"2025/10/08"}),(0,a.jsx)("h1",{className:oQ().title,children:"Coming Soon"}),(0,a.jsx)(M(),{href:o,onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},onClick:e=>{e.preventDefault(),navigator.userAgent.includes("iPhone")||navigator.userAgent.includes("iPad")?window.open(c,"_blank"):window.open(l,"_blank")},children:(0,a.jsx)(W.A,{shuffle:r,children:"48\xb051'41.9976\"N, 2\xb022'9.804\"E"})})]})]})});var o1=n(76805),o3=n.n(o1);let o2=(e,t,n)=>(null==e?void 0:e.pageKey)||(null==t?void 0:t.pageKey)||n.asPath,o6=e=>(0,a.jsx)("div",{className:u()(o3().sticky,e.className),children:(0,a.jsx)("div",{className:o3().stickyContent,children:e.children})}),o7=s.memo(e=>{let{Component:t,pageProps:n}=e,r=(0,c.useRouter)(),{isPreview:i}=(0,c.useRouter)(),{loading:l,cartLoading:d,client:h}=(0,o.SF)(),{sizes:p}=(0,en.tS)(),{sendPageView:g}=(0,oG.K)(),v=(0,s.useRef)(null),{scrollY:y}=(0,ep.L)(),x=(0,U.d)(0),b=(0,ow.G)([y,x,p.height],()=>(0,on.p)(y.get(),[x.get()-p.height.get(),x.get()],[0,1]));(0,N.w)(v,()=>v.current&&x.set(v.current.offsetHeight));let S=ok();(0,s.useEffect)(()=>{var e;let t="/"===r.pathname?oW.I5.home:(null==n?void 0:n.product)?oW.I5.product:(null==n?void 0:n.collection)?oW.I5.collection:(null==n?void 0:n.pageType)==="index"?oW.I5.listCollections:(null==n?void 0:n.pageType)==="text-page"?oW.I5.policy:oW.I5.page,i=(null==n?void 0:n.product)?[n.product]:(null==n?void 0:n.collection)?(null===(e=n.collection)||void 0===e?void 0:e.looks).flatMap(e=>e.products):(null==n?void 0:n.collections)?"collections"===n.indexView?n.collections.flatMap(e=>e.looks).flatMap(e=>e.products):n.collections.flatMap(e=>(0,oq.D)(e.products)):void 0;g({pageType:t,resourceId:(null==n?void 0:n.product)?n.product.id:void 0,products:i?(0,oX.A)(i,"id"):void 0})},[r.pathname]);let E={type:oF(n)},M=o2(t,n,r),T=(0,s.useRef)(null),A=(0,s.useMemo)(()=>{T.current&&clearTimeout(T.current);let e=oK(2,S);return T.current=setTimeout(e,400),e},[M,S]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("main",{className:u()(o3().wrapper,{loading:l||d,ready:h,dark:null==n?void 0:n.darkMode}),children:[(0,a.jsx)(m.A,{}),!(0,oZ.l)()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh,{}),(0,a.jsx)(oH,{}),(0,a.jsx)(k.P.div,{className:o3().inner,style:{"--height":x,"--overlay":b},ref:v,children:(0,a.jsx)(es.N,{custom:E,onExitComplete:A,children:(0,a.jsx)(k.P.div,{...G.q3,children:(0,a.jsx)(t,{...n})},o2(t,n,r))})}),(0,a.jsx)(o6,{className:o3().bars,children:(0,a.jsx)(oA,{})}),(0,a.jsx)(o6,{className:o3().pageInfo,children:(0,a.jsx)(oU,{})})]}),(0,oZ.l)()&&(0,a.jsx)(o0,{}),(0,a.jsx)(oE,{}),!(0,oZ.l)()&&(0,a.jsx)(ev,{...n}),(0,a.jsx)(_,{}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{zIndex:1e3}),(0,a.jsx)("a",{href:"/api/disable-draft",className:o3().preview,children:"[X] Preview"})]}),(0,a.jsx)(et.AA,{id:"root"})]})})});n(43164),n(96327),n(25317);let o4=e=>((0,s.useEffect)(()=>{(0,s8.E)()},[]),(0,a.jsx)(o.D2,{pageProps:e.pageProps,children:(0,a.jsx)(o7,{...e})}))},39969:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});let r=e=>window.storeData},29852:(e,t,n)=>{"use strict";let r,i;n.d(t,{_u:()=>g,eR:()=>_,r0:()=>v});var a=n(74848),s=n(96540),o=n(88114),l=n(43890),u=n(68572);let c=(e,t)=>{if(!e||!e.collection)return r=e,{id:void 0,items:[],current:void 0,transition:o.i.none};let{collection:n,item:i}=e,{collections:a}=(0,u.Gt)(),s=a.findIndex(e=>{var t;return e.slug.current===(null==r?void 0:null===(t=r.collection)||void 0===t?void 0:t.slug.current)}),c=a.findIndex(e=>e.slug.current===n.slug.current),d=(null==r?void 0:r.collection)?c>s?o.i.rightToLeft:o.i.leftToRight:o.i.none,h={items:n.looks.map(e=>{var t,r;return{id:null===(t=e.slug)||void 0===t?void 0:t.current,...e,href:l.A.look(n.slug.current,null===(r=e.slug)||void 0===r?void 0:r.current)}}),id:n.slug.current,current:t||i||null,transition:d};return r=e,h};var d=n(86715),h=n(46004);let p=new(n(51504)).TinyEmitter,f=()=>p,m=(0,s.createContext)({}),g=e=>{var t,n,r;let{pageProps:o,children:l}=e,u=null===(t=(0,d.useRouter)().query.looksParams)||void 0===t?void 0:t[1],p=(0,h.d)(0),g=(0,s.useMemo)(()=>c(o,u),[null==o?void 0:null===(r=o.collection)||void 0===r?void 0:null===(n=r.slug)||void 0===n?void 0:n.current,null==o?void 0:o.item,u]),v=(0,h.d)(g),[_,y]=(0,s.useState)(null),[x,b]=(0,s.useState)(null);return(0,s.useEffect)(()=>v.set(g),[g]),i={state:g,motionState:v,videoProgress:p,lastLook:_,setLastLook:y,lastCollection:x,setLastCollection:b,emitter:f()},(0,a.jsx)(m.Provider,{value:i,children:l})},v=()=>{let e=(0,s.useContext)(m);if(!e)throw Error("useBackgroundContext must be used inside a `BackgroundProvider`");return e},_=()=>{if(!i)throw Error("getGlobalContext can't be used server-side");return i}},68572:(e,t,n)=>{"use strict";let r;n.d(t,{Gt:()=>d,M9:()=>u,fK:()=>c});var i=n(74848),a=n(96540),s=n(86715),o=n(39969);let l=(0,a.createContext)({}),u=e=>{let{children:t}=e,n=(0,s.useRouter)();return r=(0,a.useMemo)(()=>(0,o.i)(n.locale),[n.locale]),(0,i.jsx)(l.Provider,{value:r,children:t})},c=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useDataContext must be used inside a `DataProvider`");return e},d=()=>{if(!r)throw Error("getDataContext can't be used server-side");return r}},73010:(e,t,n)=>{"use strict";let r;n.d(t,{D2:()=>x,cI:()=>E,SF:()=>b});var i=n(74848),a=n(96540),s=n(86715),o=n(68385),l=n(23897),u=n(68572),c=n(60331),d=n(48322),h=n(40068),p=n(94922),f=n(19791);let m=e=>{let{children:t}=e,n=(0,h._$)(),{setCartLoading:r}=b();return(0,a.useEffect)(()=>{r("updating"===n.status)},[n.status]),t},g=e=>{let{locale:t}=(0,u.fK)(),{setCartAdded:n}=b(),{shop:r}=(0,u.fK)();return(0,i.jsx)(p.ug,{languageIsoCode:null==t?void 0:t.toLocaleUpperCase(),countryIsoCode:"FR",storefrontId:r.id,storeDomain:r.primaryDomain.host,storefrontToken:"".concat("81e2a5e6c9fbebb105581c2fd8b67a1b"),storefrontApiVersion:"2025-01",children:(0,i.jsx)(h.ez,{onLineAddComplete:()=>{n(!0),setTimeout(()=>{n(!1)},2e3)},cartFragment:f.qw,children:(0,i.jsx)(m,{...e})})})};var v=n(29852);let _=(0,a.createContext)(null),y=(0,a.lazy)(()=>Promise.all([n.e(891),n.e(308),n.e(458)]).then(n.bind(n,11458))),x=e=>{let{pageProps:t,children:n}=e,h=(0,s.useRouter)(),[p,f]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!0),[b,S]=(0,a.useState)(!1),[E,M]=(0,a.useState)(!1),[T,A]=(0,a.useState)(null),[w,C]=(0,a.useState)(!1),[P,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f(!0),x(!1),h.events.on("routeChangeStart",(e,t)=>{M(!1),C(!1),(null==t?void 0:t.shallow)||x(!0)}),h.events.on("routeChangeError",()=>x(!1)),h.events.on("routeChangeComplete",()=>x(!1))},[]);let I=[u.M9,g,d.Ay,o.k6,l.N2,c.JK,v._u];return t.previewToken&&I.push(y),r={loading:m,setLoading:x,cartLoading:b,setCartLoading:S,client:p,menuOpened:E,setMenuOpened:M,panel:T,setPanel:A,cartOpened:w,setCartOpened:C,router:h,cartAdded:P,setCartAdded:R},(0,i.jsx)(_.Provider,{value:r,children:I.reverse().reduce((e,n)=>(0,i.jsx)(n,{pageProps:t,children:e}),n)})},b=()=>{let e=(0,a.useContext)(_);if(!e)throw Error("useGlobalContext must be used inside a `GlobalProvider`");return e},S=()=>{if(!r)throw Error("getGlobalContext can't be used server-side");return r},E=()=>S().router},60331:(e,t,n)=>{"use strict";n.d(t,{JK:()=>d,fZ:()=>h});var r=n(74848),i=n(96540),a=n(52618),s=n(51474),o=n(39969),l=n(86715);let u=(0,i.createContext)({}),c=e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,a.A)(e,t,!!r&&"\uD83D\uDEA8 "+t);return n&&(0,s.A)(n,(e,t)=>{i=i.replace("%".concat(t,"%"),e)}),i},d=e=>{let{children:t}=e,n=(0,l.useRouter)(),a=(0,i.useMemo)(()=>(0,o.i)(n.locale),[n.locale]),s=(0,i.useCallback)(c(a.translations),[n.locale]);return(0,r.jsx)(u.Provider,{value:s,children:t})},h=()=>{let e=(0,i.useContext)(u);if(!e)throw Error("useDataContext must be used inside a `DataProvider`");return e}},23897:(e,t,n)=>{"use strict";n.d(t,{N2:()=>p,C4:()=>f});var r=n(74848),i=n(96540),a=n(13097),s=n(5483),o=n(86715),l=n.n(o),u=n(13667);n(542),n(15086),Object.prototype.hasOwnProperty;let c={defer:()=>{let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}};var d=n(68385);let h=(0,i.createContext)({}),p=e=>{let{children:t}=e,{scrollY:n,scrollYProgress:p}=(0,a.L)(),[f,m]=(0,i.useState)(n),[g,v]=(0,i.useState)(p),[_,y,x]=(0,u.A)(!1),{offsetTop:b}=(0,d.tS)();(0,i.useEffect)(()=>{var e;let t=e=>{let t=e.target.closest(".scrolling-wrapper");x.current&&!t&&e.preventDefault()};null===(e=document.scrollingElement)||void 0===e||e.classList.add("scrolling-element"),"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.addEventListener("touchmove",t,{passive:!1}),window.addEventListener("mousewheel",t,{passive:!1}),window.addEventListener("wheel",t,{passive:!1}),window.addEventListener("DOMMouseScroll",t,{passive:!1}),l().beforePopState(e=>(e.options.scroll=!1,!0))},[]);let S=(0,o.useRouter)();return(0,i.useEffect)(()=>{x.current&&y(!1)},[S.asPath]),(0,r.jsx)(h.Provider,{value:{scrollLocked:_,lockScroll:y,scroll:f,setScroll:m,scrollProgress:g,setScrollProgress:v,scrollTo:function(e){let{duration:t=.5,ease:n="easeOut",...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!(i=i||document.scrollingElement))return;let a="number"==typeof e?e:e.getBoundingClientRect().top+i.scrollTop,o=c.defer();return{...(0,s.i)(i.scrollTop,a,{duration:t,ease:n,...r,onUpdate:e=>{i.scrollTop=e},onComplete:o.resolve}),finished:o.promise}},resetScroll:()=>{if(!document.scrollingElement)return;let e=Math.min(document.scrollingElement.scrollTop,b.height.get());document.scrollingElement.scrollTop=e}},children:t})},f=()=>{let e=(0,i.useContext)(h);if(!e)throw Error("useScrollContext must be used inside a `ScrollContext`");return e}},48322:(e,t,n)=>{"use strict";n.d(t,{AA:()=>g,Ay:()=>v,H3:()=>c,NX:()=>d,Vg:()=>p,dJ:()=>f,hs:()=>h});var r=n(74848),i=n(96540),a=n(11973),s=n(54660),o=n(6586),l=n(30478);let u=(0,i.createContext)({}),c=()=>{let e=(0,i.useContext)(u);if(!e)throw Error("useTunnelContext must be used inside a `TunnelProvider`");return e},d=e=>c().get(e),h=e=>{var t,n;let r=d(e),i=Array.isArray(null==r?void 0:r.children)&&((null==r?void 0:r.children.length)===0||(null==r?void 0:null===(n=r.children)||void 0===n?void 0:null===(t=n.every)||void 0===t?void 0:t.call(n,e=>!e)));return!!(null==r?void 0:r.children)&&!i},p=e=>{let{children:t,id:n,version:s,context:l,fallback:u="div"}=e,d=c(),h=(0,i.useMemo)(()=>s||(0,o.A)(),[s]),p=(0,i.useMemo)(()=>Date.now(),[h]),f=(0,a.tF)();return(0,i.useEffect)(()=>{f&&d.register(n,{children:t,version:h,time:p,context:l})},[n,t,h,l,p]),(0,i.useEffect)(()=>()=>{d.unregister(n,{children:t,version:h,time:p,context:l})},[n,t,h,l,p]),d.init?null:(0,r.jsx)(u,{style:{opacity:0,visibility:"hidden"},children:t})},f=i.memo(e=>{let{id:t,renderer:n,rendererProps:i={}}=e,a=d(t);return n?(0,r.jsx)(n,{...a,...i},t):null==a?void 0:a.children}),m=e=>{let{children:t,version:n,component:a,componentProps:o,...l}=e,u=t&&(a?(0,r.jsx)(a,{custom:l.custom,...o,children:t},n):i.isValidElement(t)?i.cloneElement(t,{key:n,...o}):t);return(0,r.jsx)(s.N,{...l,children:u})},g=e=>{let{id:t,...n}=e;return(0,r.jsx)(f,{id:t,renderer:m,rendererProps:n})},v=e=>{let{children:t}=e,[n,a]=(0,i.useState)({}),s=(0,l.A)(n),[o,c]=(0,i.useState)(!1),d=(0,i.useMemo)(()=>({register:(e,t)=>{a(n=>{let r=n[e];return(null==r?void 0:r.version)!==t.version&&(null==r?void 0:r.time)>t.time?n:{...n,[e]:t}})},unregister:(e,t)=>{a(n=>{let r={...n},i=n[e];return(null==i?void 0:i.version)===(null==t?void 0:t.version)&&(null==i?void 0:i.time)===(null==t?void 0:t.time)&&delete r[e],r})},get:e=>{var t;return(null==s?void 0:null===(t=s.current)||void 0===t?void 0:t[e])||null}}),[]);return(0,i.useEffect)(()=>{c(!0)},[]),(0,r.jsx)(u.Provider,{value:{...d,init:o},children:t})}},68385:(e,t,n)=>{"use strict";n.d(t,{k6:()=>w,IS:()=>R,tS:()=>C});var r=n(74848),i=n(96540);let a=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n};var s=n(81312),o=n(72312);let l=function(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n};var u=n(54871),c=n(59136),d=n(51474),h=n(85870),p=n(13097),f=n(46004),m=n(71843),g=n(48731),v=n(91270),_=n(13667),y=n(2928);let x=function(e){let t=(0,i.useMemo)(()=>(0,y.A)(e)?e():e,[]),n=(0,h.A)(t,e=>(0,f.d)(e));return{...n,set:e=>{(0,d.A)(n,(t,n)=>{t.set(e[n])})},get:()=>(0,h.A)(n,e=>e.get())}};var b=n(30308),S=n(47448),E=n.n(S);let M=(0,i.createContext)(null),T=null,A=function(e,t,n){var r=(0,u.A)(e)?a:l,i=arguments.length<3;return r(e,(0,o.A)(t,4),n,i,s.A)}(E(),(e,t,n)=>(e[n.replace("MaxWidth","")]=parseInt(t),e),{}),w=e=>{let{children:t}=e,[n,a,s]=(0,_.A)(null),o=x({width:1440,height:720,innerHeight:720,ratio:2,headerHeight:60,placeholder:!0,footerHeight:0}),l=()=>{o.placeholder.set(!1);let e=Math.min(window.screen.availHeight,window.innerHeight),t=s.current?s.current.offsetWidth:document.body.offsetWidth,n=v.A.iphone&&220>Math.abs(e-o.innerHeight.get())&&t===o.width.get();o.height.set(e),o.width.set(t),o.ratio.set(t/e),n||o.innerHeight.set(e)};(0,i.useEffect)(()=>{let e=(0,c.A)(l,200);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{l(),setTimeout(l,1e3)},[n]),(0,i.useMemo)(()=>{document.documentElement.style.setProperty("--vw",document.body.offsetWidth+"px")},[]);let{scrollY:u}=(0,p.L)(),y=(0,f.d)(0),S={height:y,scroll:(0,m.G)([y,u],e=>{let[t,n]=e;return Math.max(0,t-Math.max(0,n))})},E={"--vh":o.height,"--vw":o.width,"--ivh":o.innerHeight,"--offset-top":S.scroll,"--offset-height":S.height,"--header-height":o.headerHeight,"--footer-height":o.footerHeight};return(0,d.A)(E,(e,t)=>{(0,g.L)(e,"change",e=>{e&&document.documentElement.style.setProperty(t,e+"px")})}),T={mq:(0,b.A)(o.width,e=>(0,h.A)(A,t=>e<t),!0),sizes:o,setViewportReference:a,offsetTop:S},(0,r.jsx)(M.Provider,{value:T,children:t})},C=()=>{let e=(0,i.useContext)(M);if(!e)throw Error("useViewportContext must be used inside a `ViewportContext`");return e},P=()=>T,R=()=>{var e;return!!(null===(e=P())||void 0===e?void 0:e.mq.tabletPortrait)}},25317:()=>{},96327:()=>{},43164:()=>{},95882:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"AdaptableWrapper_wrapper__bToAF",vertical:"AdaptableWrapper_vertical__vg4Zq",inner:"AdaptableWrapper_inner__3Z2hJ",enabled:"AdaptableWrapper_enabled__4cyJp"}},35825:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"Background_wrapper__A7j5c",canvas:"Background_canvas___WfAP"}},50569:e=>{e.exports={groupBar:"GroupBar_wrapper__BPid0",hasOverlay:"ProductGallery_hasOverlay__oRyCE",widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",bar:"Bars_bar__fFw9F",topRight:"Bars_topRight__K7ovG",bottomLeft:"Bars_bottomLeft__i5k_z"}},52427:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"GroupBar_wrapper__BPid0"}},54525:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"Button_wrapper__7fAqP",spaceBetween:"Button_spaceBetween__K7n22",suffix:"Button_suffix___u0DX"}},7965:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"Cart_wrapper__LE0Bw",opened:"Cart_opened__ElAoO",checkout:"Cart_checkout__Dkx_I",checkoutCost:"Cart_checkoutCost__fDe43",list:"Cart_list__Ak0ZH",empty:"Cart_empty__cQ1o7"}},32935:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"CartLine_wrapper__Y1PIT",image:"CartLine_image__RaY_G",content:"CartLine_content__Mai5s",top:"CartLine_top__yZB1V",bottom:"CartLine_bottom__rP94p",size:"CartLine_size__pMxTD",remove:"CartLine_remove__1tw2l"}},26520:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",title:"ComingSoon_title__1N38G",wrapper:"ComingSoon_wrapper__Mr2uT",overlay:"ComingSoon_overlay__ojlu_",logoWrapper:"ComingSoon_logoWrapper__B88cD",content:"ComingSoon_content__w2V2K",logo:"ComingSoon_logo__rUsOm"}},40191:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"Footer_wrapper__yxAOD",manifesto:"Footer_manifesto__zyM5V composition_heading__SmUUC",fixed:"Footer_fixed__Iw06y",bars:"Footer_bars__O9FLM",bar:"Footer_bar__C_a1j",left:"Footer_left__U8YjQ",button:"Footer_button__6TX0R",right:"Footer_right__HN4fv",email:"Footer_email__1D59l composition_extended__RXr64"}},33974:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",gridHelper:"GridHelper_gridHelper__zwJl_",gridHelperCol:"GridHelper_gridHelperCol__90nQe",visible:"GridHelper_visible__ZVuNR"}},40495:e=>{e.exports={groupBar:"GroupBar_wrapper__BPid0",widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"Header_wrapper__SKB6q",hasTunnel:"Header_hasTunnel__pD__i",line:"Header_line__t9nAr",menuOpened:"Header_menuOpened__IwA9G",menuButton:"Header_menuButton__IWoYC",cartOpened:"Header_cartOpened__GNfNx",cartButton:"Header_cartButton__a8L7R",loader:"Header_loader__zgn5f",logo:"Header_logo__e4CTy",inner:"Header_inner__t5u43",logoLink:"Header_logoLink__PrpvB",shine:"Header_shine__UHnJg",menu:"Header_menu__w3kGA",buttons:"Header_buttons__17fhY",menuLine:"Header_menuLine__6MY1X",button:"Header_button__GGQGX",top:"Header_top__3rYty",spacer:"Header_spacer__LxN_D",bar:"Header_bar__vsqrk",bottomBar:"Header_bottomBar__Tt30D Header_bar__vsqrk",cart:"Header_cart__v5W2l",overlay:"Header_overlay__QIqjM"}},60919:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",title:"Headings_title__JWnpi",subtitle:"Headings_subtitle__XELi0",wrapper:"Headings_wrapper__75B9v"}},50394:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"PageTitle_wrapper__tZqEr composition_heading__SmUUC"}},1422:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"Subtitle_wrapper__JMILT composition_base__XQo6f"}},5191:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px"}},13467:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",overlay:"Overlay_overlay__rJSOR"}},75010:e=>{e.exports={itemBar:"ItemBar_outer__jsffw",itemBarWrapper:"ItemBar_wrapper__mjCTr",groupBar:"GroupBar_wrapper__BPid0",headingTitle:"Headings_title__JWnpi",headingSubtitle:"Headings_subtitle__XELi0",widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",outer:"PageInfo_outer__nntOE",top:"PageInfo_top__fCCae",headings:"PageInfo_headings__cvUvj",innerBar:"PageInfo_innerBar__x30Wq",adaptable:"PageInfo_adaptable__CRbc5",inner:"PageInfo_inner__EjNFq",bar:"PageInfo_bar__0AqVI",hidden:"PageInfo_hidden__5Kive",content:"PageInfo_content__z6erx",detailsButton:"PageInfo_detailsButton__oBg6r",white:"PageInfo_white__SxHR6",black:"PageInfo_black__ozyo5",hasBar:"PageInfo_hasBar__YTsQz",hasBottomLeftBar:"PageInfo_hasBottomLeftBar__BR4gE",wrapper:"PageInfo_wrapper__cUoPG",empty:"PageInfo_empty__Q0Iyx"}},71755:e=>{e.exports={awInner:"AdaptableWrapper_inner__3Z2hJ",awWrapper:"AdaptableWrapper_wrapper__bToAF",widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",overlay:"Panel_overlay___x0Pz",panel:"Panel_panel__aFR5e",wrapper:"Panel_wrapper__V15ne"}},17815:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"Price_wrapper__1o9pN"}},23408:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"ProductPrice_wrapper__Lyaqi",previous:"ProductPrice_previous__7WRXR"}},552:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",image:"ResponsiveImage_image__qQ74F"}},76805:e=>{e.exports={hasOverlay:"ProductGallery_hasOverlay__oRyCE",bottomLeft:"Bars_bottomLeft__i5k_z",topRight:"Bars_topRight__K7ovG",widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"Root_wrapper__7t_4w composition_base__XQo6f",sticky:"Root_sticky__DdJew",stickyContent:"Root_stickyContent__HSyVP",inner:"Root_inner__cxF2x",bars:"Root_bars__7_Wyo",pageInfo:"Root_pageInfo__8FIkA"}},85930:e=>{e.exports={widthReference:"1440",widthReferenceM:"393",tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px",wrapper:"TextShuffle_wrapper__TsMdF",shuffling:"TextShuffle_shuffling__andDQ"}},47448:e=>{e.exports={tabletMaxWidth:"1024px",tabletPortraitMaxWidth:"900px",phoneMaxWidth:"740px",phonePortraitMaxWidth:"420px"}},78837:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return o}});let r=n(90958),i=n(28431),a=n(87643),s=n(88228),o=e=>(0,r.isDynamicServerError)(e)||(0,i.isBailoutToCSRError)(e)||(0,a.isNextRouterError)(e)||(0,s.isDynamicPostpone)(e)},78126:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{METADATA_BOUNDARY_NAME:function(){return n},OUTLET_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return r}});let n="__next_metadata_boundary__",r="__next_viewport_boundary__",i="__next_outlet_boundary__"},21913:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"actionAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,n(98626).createAsyncLocalStorage)()},47860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"actionAsyncStorage",{enumerable:!0,get:function(){return r.actionAsyncStorageInstance}});let r=n(21913)},98626:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{bindSnapshot:function(){return s},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return o}});let n=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class r{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}static bind(e){return e}}let i="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return i?new i:new r}function s(e){return i?i.bind(e):r.bind(e)}function o(){return i?i.snapshot():function(e,...t){return e(...t)}}},88228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{Postpone:function(){return E},abortAndThrowOnSynchronousRequestDataAccess:function(){return b},abortOnSynchronousPlatformIOAccess:function(){return y},accessedDynamicData:function(){return I},annotateDynamicAccess:function(){return U},consumeDynamicAccess:function(){return L},createDynamicTrackingState:function(){return d},createDynamicValidationState:function(){return h},createPostponedAbortSignal:function(){return N},formatDynamicAPIAccesses:function(){return D},getFirstDynamicReason:function(){return p},isDynamicPostpone:function(){return A},isPrerenderInterruptedError:function(){return R},markCurrentScopeAsDynamic:function(){return f},postponeWithTracking:function(){return M},throwIfDisallowedDynamic:function(){return H},throwToInterruptStaticGeneration:function(){return g},trackAllowedDynamicAccess:function(){return j},trackDynamicDataInDynamicRender:function(){return v},trackFallbackParamAccessed:function(){return m},trackSynchronousPlatformIOAccessInDev:function(){return x},trackSynchronousRequestDataAccessInDev:function(){return S},useDynamicRouteParams:function(){return F}});let r=function(e){return e&&e.__esModule?e:{default:e}}(n(96540)),i=n(90958),a=n(61480),s=n(53074),o=n(27305),l=n(52249),u=n(78126),c="function"==typeof r.default.unstable_postpone;function d(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicExpression:void 0,syncDynamicErrorWithStack:null}}function h(){return{hasSuspendedDynamic:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasSyncDynamicErrors:!1,dynamicErrors:[]}}function p(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function f(e,t,n){if((!t||"cache"!==t.type&&"unstable-cache"!==t.type)&&!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw new a.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${n}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(t){if("prerender-ppr"===t.type)M(e.route,n,t.dynamicTracking);else if("prerender-legacy"===t.type){t.revalidate=0;let r=new i.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${n}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=n,e.dynamicUsageStack=r.stack,r}}}}function m(e,t){let n=s.workUnitAsyncStorage.getStore();n&&"prerender-ppr"===n.type&&M(e.route,t,n.dynamicTracking)}function g(e,t,n){let r=new i.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw n.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=r.stack,r}function v(e,t){t&&"cache"!==t.type&&"unstable-cache"!==t.type&&("prerender"===t.type||"prerender-legacy"===t.type)&&(t.revalidate=0)}function _(e,t,n){let r=P(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);n.controller.abort(r);let i=n.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function y(e,t,n,r){let i=r.dynamicTracking;return i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=n),_(e,t,r)}function x(e){e.prerenderPhase=!1}function b(e,t,n,r){let i=r.dynamicTracking;throw i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=n,!0===r.validating&&(i.syncDynamicLogged=!0)),_(e,t,r),P(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}let S=x;function E({reason:e,route:t}){let n=s.workUnitAsyncStorage.getStore();M(t,e,n&&"prerender-ppr"===n.type?n.dynamicTracking:null)}function M(e,t,n){O(),n&&n.dynamicAccesses.push({stack:n.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),r.default.unstable_postpone(T(e,t))}function T(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function A(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&w(e.message)}function w(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===w(T("%%%","^^^")))throw Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js");let C="NEXT_PRERENDER_INTERRUPTED";function P(e){let t=Error(e);return t.digest=C,t}function R(e){return"object"==typeof e&&null!==e&&e.digest===C&&"name"in e&&"message"in e&&e instanceof Error}function I(e){return e.length>0}function L(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function D(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function O(){if(!c)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")}function N(e){O();let t=new AbortController;try{r.default.unstable_postpone(e)}catch(e){t.abort(e)}return t.signal}function U(e,t){let n=t.dynamicTracking;n&&n.dynamicAccesses.push({stack:n.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function F(e){if("undefined"==typeof window){let t=o.workAsyncStorage.getStore();if(t&&t.isStaticGeneration&&t.fallbackRouteParams&&t.fallbackRouteParams.size>0){let n=s.workUnitAsyncStorage.getStore();n&&("prerender"===n.type?r.default.use((0,l.makeHangingPromise)(n.renderSignal,e)):"prerender-ppr"===n.type?M(t.route,e,n.dynamicTracking):"prerender-legacy"===n.type&&g(e,t,n))}}}let k=/\n\s+at Suspense \(<anonymous>\)/,B=RegExp(`\\n\\s+at ${u.METADATA_BOUNDARY_NAME}[\\n\\s]`),V=RegExp(`\\n\\s+at ${u.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),z=RegExp(`\\n\\s+at ${u.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function j(e,t,n,r,i){if(!z.test(t)){if(B.test(t)){n.hasDynamicMetadata=!0;return}if(V.test(t)){n.hasDynamicViewport=!0;return}if(k.test(t)){n.hasSuspendedDynamic=!0;return}if(r.syncDynamicErrorWithStack||i.syncDynamicErrorWithStack){n.hasSyncDynamicErrors=!0;return}else{let r=function(e,t){let n=Error(e);return n.stack="Error: "+e+t,n}(`Route "${e}": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a "use cache" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`,t);n.dynamicErrors.push(r);return}}}function H(e,t,n,r){let i,s,o;if(n.syncDynamicErrorWithStack?(i=n.syncDynamicErrorWithStack,s=n.syncDynamicExpression,o=!0===n.syncDynamicLogged):r.syncDynamicErrorWithStack?(i=r.syncDynamicErrorWithStack,s=r.syncDynamicExpression,o=!0===r.syncDynamicLogged):(i=null,s=void 0,o=!1),t.hasSyncDynamicErrors&&i)throw o||console.error(i),new a.StaticGenBailoutError;let l=t.dynamicErrors;if(l.length){for(let e=0;e<l.length;e++)console.error(l[e]);throw new a.StaticGenBailoutError}if(!t.hasSuspendedDynamic){if(t.hasDynamicMetadata){if(i)throw console.error(i),new a.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that could not finish rendering before ${s} was used. Follow the instructions in the error for this expression to resolve.`);throw new a.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateMetadata\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`)}if(t.hasDynamicViewport){if(i)throw console.error(i),new a.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that could not finish rendering before ${s} was used. Follow the instructions in the error for this expression to resolve.`);throw new a.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateViewport\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`)}}}},72528:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,n(98626).createAsyncLocalStorage)()},27305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=n(72528)},38379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workUnitAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,n(98626).createAsyncLocalStorage)()},53074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{getExpectedRequestStore:function(){return i},getPrerenderResumeDataCache:function(){return a},getRenderResumeDataCache:function(){return s},workUnitAsyncStorage:function(){return r.workUnitAsyncStorageInstance}});let r=n(38379);function i(e){let t=r.workUnitAsyncStorageInstance.getStore();if(t){if("request"===t.type)return t;if("prerender"===t.type||"prerender-ppr"===t.type||"prerender-legacy"===t.type)throw Error(`\`${e}\` cannot be called inside a prerender. This is a bug in Next.js.`);if("cache"===t.type)throw Error(`\`${e}\` cannot be called inside "use cache". Call it outside and pass an argument instead. Read more: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===t.type)throw Error(`\`${e}\` cannot be called inside unstable_cache. Call it outside and pass an argument instead. Read more: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`)}throw Error(`\`${e}\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`)}function a(e){return"prerender"===e.type||"prerender-ppr"===e.type?e.prerenderResumeDataCache:null}function s(e){return"prerender-legacy"!==e.type&&"cache"!==e.type&&"unstable-cache"!==e.type?"request"===e.type?e.renderResumeDataCache:e.prerenderResumeDataCache:null}},52249:(e,t)=>{"use strict";function n(e,t){let n=new Promise((n,r)=>{e.addEventListener("abort",()=>{r(Error(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context.`))},{once:!0})});return n.catch(r),n}function r(){}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"makeHangingPromise",{enumerable:!0,get:function(){return n}})},89222:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return r}});let n=Symbol.for("react.postpone");function r(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}},13368:(e,t,n)=>{e.exports=n(86085)},91106:(e,t,n)=>{e.exports=n(6397)},76424:(e,t,n)=>{e.exports=n(63750)},86715:(e,t,n)=>{e.exports=n(88440)},96571:function(e){var t;t=function(){var e=function(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),n(++r%i.children.length)},!1);var a=(performance||Date).now(),s=a,o=0,l=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(u.update(e-a,200),e>s+1e3&&(l.update(1e3*o/(e-s),100),s=e,o=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:i,setMode:n}};return e.Panel=function(e,t,n){var r=1/0,i=0,a=Math.round,s=a(window.devicePixelRatio||1),o=80*s,l=48*s,u=3*s,c=2*s,d=3*s,h=15*s,p=74*s,f=30*s,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,o,l),g.fillStyle=t,g.fillText(e,u,c),g.fillRect(d,h,p,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d,h,p,f),{dom:m,update:function(l,v){r=Math.min(r,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,o,h),g.fillStyle=t,g.fillText(a(l)+" "+e+" ("+a(r)+"-"+a(i)+")",u,c),g.drawImage(m,d+s,h,p-s,f,d,h,p-s,f),g.fillRect(d+p-s,h,s,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(d+p-s,h,s,a((1-l/v)*f))}}},e},e.exports=t()},51504:e=>{function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var a=0,s=r.length;a<s;a++)r[a].fn!==t&&r[a].fn._!==t&&i.push(r[a]);return i.length?n[e]=i:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t},46942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}(n)))}return e}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0!==(n=(function(){return i}).apply(t,[]))&&(e.exports=n)}()},40068:(e,t,n)=>{"use strict";n.d(t,{ez:()=>Z,_$:()=>K});var r,i,a,s,o=n(74848),l=n(96540);function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return s}!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(r||(r={}));var c={type:"xstate.init"};function d(e){return void 0===e?[]:[].concat(e)}function h(e){return{type:"xstate.assign",assignment:e}}function p(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function f(e){return function(t){return e===t}}function m(e){return"string"==typeof e?{type:e}:e}function g(e,t){return{value:e,context:t,actions:[],changed:!1,matches:f(e)}}function v(e,t,n){var r=t,i=!1;return[e.filter(function(e){if("xstate.assign"===e.type){i=!0;var t=Object.assign({},r);return"function"==typeof e.assignment?t=e.assignment(r,n):Object.keys(e.assignment).forEach(function(i){t[i]="function"==typeof e.assignment[i]?e.assignment[i](r,n):e.assignment[i]}),r=t,!1}return!0}),r,i]}function _(e,t){void 0===t&&(t={});var n=u(v(d(e.states[e.initial].entry).map(function(e){return p(e,t.actions)}),e.context,c),2),r=n[0],i=n[1],a={config:e,_options:t,initialState:{value:e.initial,actions:r,context:i,matches:f(e.initial)},transition:function(t,n){var r,i,s="string"==typeof t?{value:t,context:e.context}:t,o=s.value,l=s.context,c=m(n),h=e.states[o];if(h.on){var _=d(h.on[c.type]);try{for(var y=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(_),x=y.next();!x.done;x=y.next()){var b=x.value;if(void 0===b)return g(o,l);var S="string"==typeof b?{target:b}:b,E=S.target,M=S.actions,T=void 0===M?[]:M,A=S.cond,w=void 0===A?function(){return!0}:A,C=void 0===E,P=null!=E?E:o,R=e.states[P];if(w(l,c)){var I=u(v((C?d(T):[].concat(h.exit,T,R.entry).filter(function(e){return e})).map(function(e){return p(e,a._options.actions)}),l,c),3),L=I[0],D=I[1],O=I[2],N=null!=E?E:o;return{value:N,context:D,actions:L,changed:E!==o||L.length>0||O,matches:f(N)}}}}catch(e){r={error:e}}finally{try{x&&!x.done&&(i=y.return)&&i.call(y)}finally{if(r)throw r.error}}}return g(o,l)}};return a}var y=function(e,t){return e.actions.forEach(function(n){var r=n.exec;return r&&r(e.context,t)})},x=l.useLayoutEffect,b={exports:{}},S={},E={exports:{}},M={};b.exports=function(){if(s)return S;s=1;var e=(a||(a=1,E.exports=function(){if(i)return M;i=1;var e="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},t=l.useState,n=l.useEffect,r=l.useLayoutEffect,a=l.useDebugValue;function s(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!e(t,r)}catch(e){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,i){var o=i(),l=t({inst:{value:o,getSnapshot:i}}),u=l[0].inst,c=l[1];return r(function(){u.value=o,u.getSnapshot=i,s(u)&&c({inst:u})},[e,o,i]),n(function(){return s(u)&&c({inst:u}),e(function(){s(u)&&c({inst:u})})},[e]),a(o),o};return M.useSyncExternalStore=void 0!==l.useSyncExternalStore?l.useSyncExternalStore:o,M}()),E.exports),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useSyncExternalStore,r=l.useRef,o=l.useEffect,u=l.useMemo,c=l.useDebugValue;return S.useSyncExternalStoreWithSelector=function(e,i,a,s,l){var d=r(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var p=n(e,(d=u(function(){function e(e){if(!o){if(o=!0,n=e,e=s(e),void 0!==l&&h.hasValue){var i=h.value;if(l(i,e))return r=i}return r=e}if(i=r,t(n,e))return i;var a=s(e);return void 0!==l&&l(i,a)?i:(n=e,r=a)}var n,r,o=!1,u=void 0===a?null:a;return[function(){return e(i())},null===u?void 0:function(){return e(u())}]},[i,a,s,l]))[0],d[1]);return o(function(){h.hasValue=!0,h.value=p},[p]),c(p),p},S}();var T=b.exports,A=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return s};function w(e){return e}var C=function(e){var t;return e.subscribe(function(e){t=e}).unsubscribe(),t},P=function(e,t){return!1===t.changed},R=n(56335);let I=e=>`
  mutation CartLineAdd(
    $cartId: ID!
    $lines: [CartLineInput!]!
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartLinesAdd(cartId: $cartId, lines: $lines) {
      cart {
        ...CartFragment
      }
    }
  }

  ${e}
`,L=e=>`
  mutation CartCreate(
    $input: CartInput!
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartCreate(input: $input) {
      cart {
        ...CartFragment
      }
    }
  }

  ${e}
`,D=e=>`
  mutation CartLineRemove(
    $cartId: ID!
    $lines: [ID!]!
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartLinesRemove(cartId: $cartId, lineIds: $lines) {
      cart {
        ...CartFragment
      }
    }
  }

  ${e}
`,O=e=>`
  mutation CartLineUpdate(
    $cartId: ID!
    $lines: [CartLineUpdateInput!]!
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartLinesUpdate(cartId: $cartId, lines: $lines) {
      cart {
        ...CartFragment
      }
    }
  }

  ${e}
`,N=e=>`
  mutation CartNoteUpdate(
    $cartId: ID!
    $note: String!
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartNoteUpdate(cartId: $cartId, note: $note) {
      cart {
        ...CartFragment
      }
    }
  }

  ${e}
`,U=e=>`
  mutation CartBuyerIdentityUpdate(
    $cartId: ID!
    $buyerIdentity: CartBuyerIdentityInput!
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartBuyerIdentityUpdate(cartId: $cartId, buyerIdentity: $buyerIdentity) {
      cart {
        ...CartFragment
      }
    }
  }

  ${e}
`,F=e=>`
  mutation CartAttributesUpdate(
    $attributes: [AttributeInput!]!
    $cartId: ID!
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartAttributesUpdate(attributes: $attributes, cartId: $cartId) {
      cart {
        ...CartFragment
      }
    }
  }

  ${e}
`,k=e=>`
  mutation CartDiscountCodesUpdate(
    $cartId: ID!
    $discountCodes: [String!]
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cartDiscountCodesUpdate(cartId: $cartId, discountCodes: $discountCodes) {
      cart {
        ...CartFragment
      }
    }
  }

  ${e}
`,B=e=>`
  query CartQuery(
    $id: ID!
    $numCartLines: Int = 250
    $country: CountryCode = ZZ
    $language: LanguageCode
  ) @inContext(country: $country, language: $language) {
    cart(id: $id) {
      ...CartFragment
    }
  }

  ${e}
`,V=`
  fragment CartFragment on Cart {
    id
    checkoutUrl
    totalQuantity
    buyerIdentity {
      countryCode
      customer {
        id
        email
        firstName
        lastName
        displayName
      }
      email
      phone
    }
    lines(first: $numCartLines) {
      edges {
        node {
          id
          quantity
          attributes {
            key
            value
          }
          cost {
            totalAmount {
              amount
              currencyCode
            }
            compareAtAmountPerQuantity {
              amount
              currencyCode
            }
          }
          merchandise {
            ... on ProductVariant {
              id
              availableForSale
              compareAtPrice {
                ...MoneyFragment
              }
              price {
                ...MoneyFragment
              }
              requiresShipping
              title
              image {
                ...ImageFragment
              }
              product {
                handle
                title
                id
              }
              selectedOptions {
                name
                value
              }
            }
          }
        }
      }
    }
    cost {
      subtotalAmount {
        ...MoneyFragment
      }
      totalAmount {
        ...MoneyFragment
      }
      totalDutyAmount {
        ...MoneyFragment
      }
      totalTaxAmount {
        ...MoneyFragment
      }
    }
    note
    attributes {
      key
      value
    }
    discountCodes {
      code
      applicable
    }
  }

  fragment MoneyFragment on MoneyV2 {
    currencyCode
    amount
  }
  fragment ImageFragment on Image {
    id
    url
    altText
    width
    height
  }
`;var z=n(94922),j=n(71222),H=n(68029);function G(e,t){return{entry:[...(null==t?void 0:t.entryActions)||[],h({lastValidCart:e=>null==e?void 0:e.cart}),"onCartActionEntry","onCartActionOptimisticUI",e],on:{RESOLVE:{target:(null==t?void 0:t.resolveTarget)||"idle",actions:[h({prevCart:e=>null==e?void 0:e.lastValidCart,cart:(e,t)=>{var n;return null==(n=null==t?void 0:t.payload)?void 0:n.cart},rawCartResult:(e,t)=>{var n;return null==(n=null==t?void 0:t.payload)?void 0:n.rawCartResult},errors:e=>void 0})]},ERROR:{target:(null==t?void 0:t.errorTarget)||"error",actions:[h({prevCart:e=>null==e?void 0:e.lastValidCart,cart:e=>null==e?void 0:e.lastValidCart,errors:(e,t)=>{var n;return null==(n=null==t?void 0:t.payload)?void 0:n.errors}})]},CART_COMPLETED:{target:"cartCompleted",actions:h({prevCart:e=>void 0,cart:e=>void 0,lastValidCart:e=>void 0,rawCartResult:e=>void 0,errors:e=>void 0})}},exit:["onCartActionComplete",...(null==t?void 0:t.exitActions)||[]]}}let W={CART_FETCH:{target:"cartFetching"},CART_CREATE:{target:"cartCreating"},CART_SET:{target:"idle",actions:[h({rawCartResult:(e,t)=>t.payload.cart,cart:(e,t)=>X(t.payload.cart)})]}},q={CARTLINE_ADD:{target:"cartLineAdding"},CARTLINE_UPDATE:{target:"cartLineUpdating"},CARTLINE_REMOVE:{target:"cartLineRemoving"},NOTE_UPDATE:{target:"noteUpdating"},BUYER_IDENTITY_UPDATE:{target:"buyerIdentityUpdating"},CART_ATTRIBUTES_UPDATE:{target:"cartAttributesUpdating"},DISCOUNT_CODES_UPDATE:{target:"discountCodesUpdating"}};function X(e){return{...e,lines:(0,R.D)(null==e?void 0:e.lines),note:e.note??void 0}}function $(e,t,n){return n?{type:"ERROR",payload:{errors:n,cartActionEvent:e}}:t?{type:"RESOLVE",payload:{cart:X(t),rawCartResult:t,cartActionEvent:e}}:{type:"CART_COMPLETED",payload:{cartActionEvent:e}}}let Y=(0,l.createContext)(null);function K(){let e=(0,l.useContext)(Y);if(!e)throw Error("Expected a Cart Context, but no Cart Context was found");return e}function Z({children:e,numCartLines:t,onCreate:n,onLineAdd:i,onLineRemove:a,onLineUpdate:s,onNoteUpdate:u,onBuyerIdentityUpdate:d,onAttributesUpdate:p,onDiscountCodesUpdate:g,onCreateComplete:v,onLineAddComplete:b,onLineRemoveComplete:S,onLineUpdateComplete:E,onNoteUpdateComplete:M,onBuyerIdentityUpdateComplete:R,onAttributesUpdateComplete:K,onDiscountCodesUpdateComplete:Z,data:Q,cartFragment:ee=V,customerAccessToken:et,countryCode:en,languageCode:er}){var ei,ea,es,eo,el,eu,ec;let ed=(0,z.qu)();if(!ed)throw Error("<CartProvider> needs to be a descendant of <ShopifyProvider>");en=(en??ed.countryIsoCode??"US").toUpperCase(),er=(er??ed.languageIsoCode??"EN").toUpperCase(),en&&(en=en.toUpperCase());let[eh,ep]=(0,l.useState)(en),[ef,em]=(0,l.useState)(et),eg=(0,l.useRef)(!1);(eh!==en||ef!==et)&&(ep(en),em(et),eg.current=!1);let[ev,e_]=function({numCartLines:e,onCartActionEntry:t,onCartActionOptimisticUI:n,onCartActionComplete:i,data:a,cartFragment:s,countryCode:o,languageCode:u}){var d,p,g,v,b,S,E,M,R,V,Y;let{cartFetch:K,cartCreate:Z,cartLineAdd:J,cartLineUpdate:Q,cartLineRemove:ee,noteUpdate:et,buyerIdentityUpdate:en,cartAttributesUpdate:er,discountCodesUpdate:ei}=function({numCartLines:e,cartFragment:t,countryCode:n="US",languageCode:r="EN"}){let i=function(){let{storefrontId:e,getPublicTokenHeaders:t,getStorefrontApiUrl:n}=(0,z.qu)();return(0,l.useCallback)(({query:r,variables:i})=>{let a=t({contentType:"json"});e&&(a[j.c0]=e);let s=(0,H.Wb)(document.cookie);return a[j.E6]=s[j.l4],a[j.aI]=s[j.lP],fetch(n(),{method:"POST",headers:a,body:JSON.stringify({query:r.toString(),variables:i})}).then(e=>e.json()).catch(e=>({data:void 0,errors:null==e?void 0:e.toString()}))},[t,e,n])}(),a=(0,l.useCallback)(a=>i({query:B(t),variables:{id:a,numCartLines:e,country:n,language:r}}),[i,t,e,n,r]),s=(0,l.useCallback)(a=>i({query:L(t),variables:{input:a,numCartLines:e,country:n,language:r}}),[t,n,i,e,r]),o=(0,l.useCallback)((a,s)=>i({query:I(t),variables:{cartId:a,lines:s,numCartLines:e,country:n,language:r}}),[t,n,i,e,r]),u=(0,l.useCallback)((a,s)=>i({query:O(t),variables:{cartId:a,lines:s,numCartLines:e,country:n,language:r}}),[t,n,i,e,r]),c=(0,l.useCallback)((a,s)=>i({query:D(t),variables:{cartId:a,lines:s,numCartLines:e,country:n,language:r}}),[t,n,i,e,r]),d=(0,l.useCallback)((a,s)=>i({query:N(t),variables:{cartId:a,note:s,numCartLines:e,country:n,language:r}}),[i,t,e,n,r]),h=(0,l.useCallback)((a,s)=>i({query:U(t),variables:{cartId:a,buyerIdentity:s,numCartLines:e,country:n,language:r}}),[t,n,i,e,r]),p=(0,l.useCallback)((a,s)=>i({query:F(t),variables:{cartId:a,attributes:s,numCartLines:e,country:n,language:r}}),[t,n,i,e,r]),f=(0,l.useCallback)((a,s)=>i({query:k(t),variables:{cartId:a,discountCodes:s,numCartLines:e,country:n,language:r}}),[t,n,i,e,r]);return(0,l.useMemo)(()=>({cartFetch:a,cartCreate:s,cartLineAdd:o,cartLineUpdate:u,cartLineRemove:c,noteUpdate:d,buyerIdentityUpdate:h,cartAttributesUpdate:p,discountCodesUpdate:f,cartFragment:t}),[a,s,o,u,c,d,h,p,f,t])}({numCartLines:e,cartFragment:s,countryCode:o,languageCode:u}),[ea,es,eo]=(d=(0,l.useMemo)(()=>_({id:"Cart",initial:a?"idle":"uninitialized",context:{cart:a&&X(a)},states:{uninitialized:{on:W},cartCompleted:{on:W},initializationError:{on:W},idle:{on:{...W,...q}},error:{on:{...W,...q}},cartFetching:G("cartFetchAction",{errorTarget:"initializationError"}),cartCreating:G("cartCreateAction",{errorTarget:"initializationError"}),cartLineRemoving:G("cartLineRemoveAction"),cartLineUpdating:G("cartLineUpdateAction"),cartLineAdding:G("cartLineAddAction"),noteUpdating:G("noteUpdateAction"),buyerIdentityUpdating:G("buyerIdentityUpdateAction"),cartAttributesUpdating:G("cartAttributesUpdateAction"),discountCodesUpdating:G("discountCodesUpdateAction")}}),[a]),p={actions:{cartFetchAction:async(e,t)=>{var n;if("CART_FETCH"!==t.type)return;let{data:r,errors:i}=await K(null==(n=null==t?void 0:t.payload)?void 0:n.cartId);es($(t,null==r?void 0:r.cart,i))},cartCreateAction:async(e,t)=>{var n;if("CART_CREATE"!==t.type)return;let{data:r,errors:i}=await Z(null==t?void 0:t.payload);es($(t,null==(n=null==r?void 0:r.cartCreate)?void 0:n.cart,i))},cartLineAddAction:async(e,t)=>{var n,r;if("CARTLINE_ADD"!==t.type||!(null==(n=null==e?void 0:e.cart)?void 0:n.id))return;let{data:i,errors:a}=await J(e.cart.id,t.payload.lines);es($(t,null==(r=null==i?void 0:i.cartLinesAdd)?void 0:r.cart,a))},cartLineUpdateAction:async(e,t)=>{var n,r;if("CARTLINE_UPDATE"!==t.type||!(null==(n=null==e?void 0:e.cart)?void 0:n.id))return;let{data:i,errors:a}=await Q(e.cart.id,t.payload.lines);es($(t,null==(r=null==i?void 0:i.cartLinesUpdate)?void 0:r.cart,a))},cartLineRemoveAction:async(e,t)=>{var n,r;if("CARTLINE_REMOVE"!==t.type||!(null==(n=null==e?void 0:e.cart)?void 0:n.id))return;let{data:i,errors:a}=await ee(e.cart.id,t.payload.lines);es($(t,null==(r=null==i?void 0:i.cartLinesRemove)?void 0:r.cart,a))},noteUpdateAction:async(e,t)=>{var n,r;if("NOTE_UPDATE"!==t.type||!(null==(n=null==e?void 0:e.cart)?void 0:n.id))return;let{data:i,errors:a}=await et(e.cart.id,t.payload.note);es($(t,null==(r=null==i?void 0:i.cartNoteUpdate)?void 0:r.cart,a))},buyerIdentityUpdateAction:async(e,t)=>{var n,r;if("BUYER_IDENTITY_UPDATE"!==t.type||!(null==(n=null==e?void 0:e.cart)?void 0:n.id))return;let{data:i,errors:a}=await en(e.cart.id,t.payload.buyerIdentity);es($(t,null==(r=null==i?void 0:i.cartBuyerIdentityUpdate)?void 0:r.cart,a))},cartAttributesUpdateAction:async(e,t)=>{var n,r;if("CART_ATTRIBUTES_UPDATE"!==t.type||!(null==(n=null==e?void 0:e.cart)?void 0:n.id))return;let{data:i,errors:a}=await er(e.cart.id,t.payload.attributes);es($(t,null==(r=null==i?void 0:i.cartAttributesUpdate)?void 0:r.cart,a))},discountCodesUpdateAction:async(e,t)=>{var n,r;if("DISCOUNT_CODES_UPDATE"!==t.type||!(null==(n=null==e?void 0:e.cart)?void 0:n.id))return;let{data:i,errors:a}=await ei(e.cart.id,t.payload.discountCodes);es($(t,null==(r=null==i?void 0:i.cartDiscountCodesUpdate)?void 0:r.cart,a))},...t&&{onCartActionEntry:(e,n)=>{("CART_CREATE"===n.type||"CARTLINE_ADD"===n.type||"CARTLINE_UPDATE"===n.type||"CARTLINE_REMOVE"===n.type||"NOTE_UPDATE"===n.type||"BUYER_IDENTITY_UPDATE"===n.type||"CART_ATTRIBUTES_UPDATE"===n.type||"DISCOUNT_CODES_UPDATE"===n.type)&&t(e,n)}},...n&&{onCartActionOptimisticUI:h((e,t)=>n(e,t))},...i&&{onCartActionComplete:(e,t)=>{("RESOLVE"===t.type||"ERROR"===t.type||"CART_COMPLETED"===t.type)&&i(e,t)}}}},g=(0,l.useRef)(),E=(S=A((v=function(){var e,t,n,i,a,s=[],o=(t=(e=_(d.config,p||d._options)).initialState,n=r.NotStarted,i=new Set,a={_machine:e,send:function(a){n===r.Running&&(y(t=e.transition(t,a),m(a)),i.forEach(function(e){return e(t)}))},subscribe:function(e){return i.add(e),e(t),{unsubscribe:function(){return i.delete(e)}}},start:function(i){if(i){var s="object"==typeof i?i:{context:e.config.context,value:i};t={value:s.value,actions:[],context:s.context,matches:f(s.value)}}else t=e.initialState;return n=r.Running,y(t,c),a},stop:function(){return n=r.Stopped,i.clear(),a},get state(){return t},get status(){return n}}),l=o.send;return o.send=function(e){if(o.status===r.NotStarted){s.push(e);return}l(e),g.current=o.state},[o,s]},(b=l.useRef()).current||(b.current={v:v()}),b.current.v),2))[0],M=S[1],x(function(){p&&(E._machine._options=p)}),V=(0,l.useCallback)(function(){return C(E)},[E]),Y=(0,l.useCallback)(function(e){return E.subscribe(e).unsubscribe},[E]),R=[T.useSyncExternalStoreWithSelector(Y,V,V,w,P),E.send,E],(0,l.useEffect)(function(){return E.start(g.current),M.forEach(E.send),g.current=E.state,function(){E.stop()}},[]),R);return(0,l.useMemo)(()=>[ea,es,eo],[ea,es,eo])}({numCartLines:t,data:Q,cartFragment:ee,countryCode:en,languageCode:er,onCartActionEntry(e,t){try{switch(t.type){case"CART_CREATE":return null==n?void 0:n();case"CARTLINE_ADD":return null==i?void 0:i();case"CARTLINE_REMOVE":return null==a?void 0:a();case"CARTLINE_UPDATE":return null==s?void 0:s();case"NOTE_UPDATE":return null==u?void 0:u();case"BUYER_IDENTITY_UPDATE":return null==d?void 0:d();case"CART_ATTRIBUTES_UPDATE":return null==p?void 0:p();case"DISCOUNT_CODES_UPDATE":return null==g?void 0:g()}}catch(e){console.error("Cart entry action failed",e)}},onCartActionOptimisticUI(e,t){var n,r,i,a;if(!e.cart)return{...e};switch(t.type){case"CARTLINE_REMOVE":return{...e,cart:{...e.cart,lines:null==(r=null==(n=null==e?void 0:e.cart)?void 0:n.lines)?void 0:r.filter(e=>(null==e?void 0:e.id)&&!t.payload.lines.includes(null==e?void 0:e.id))}};case"CARTLINE_UPDATE":return{...e,cart:{...e.cart,lines:null==(a=null==(i=null==e?void 0:e.cart)?void 0:i.lines)?void 0:a.map(e=>{let n=t.payload.lines.find(({id:t})=>t===(null==e?void 0:e.id));return n&&n.quantity?{...e,quantity:n.quantity}:e})}}}return{...e}},onCartActionComplete(e,t){let n=t.payload.cartActionEvent;try{if("RESOLVE"===t.type)switch(n.type){case"CART_CREATE":return null==v?void 0:v();case"CARTLINE_ADD":return null==b?void 0:b();case"CARTLINE_REMOVE":return null==S?void 0:S();case"CARTLINE_UPDATE":return null==E?void 0:E();case"NOTE_UPDATE":return null==M?void 0:M();case"BUYER_IDENTITY_UPDATE":var r,i;return n.payload.buyerIdentity.countryCode&&(null==(i=null==(r=e.cart)?void 0:r.buyerIdentity)?void 0:i.countryCode)!==n.payload.buyerIdentity.countryCode&&(eg.current=!0),null==R?void 0:R();case"CART_ATTRIBUTES_UPDATE":return null==K?void 0:K();case"DISCOUNT_CODES_UPDATE":return null==Z?void 0:Z()}}catch(e){console.error("onCartActionComplete failed",e)}}}),ey=(0,l.useRef)(!1),[ex,eb]=(0,l.useState)(!1),eS=ev.matches("cartCompleted"),eE=("idle"===ev.value||"error"===ev.value||"cartCompleted"===ev.value)&&en!==(null==(es=null==(ea=null==(ei=null==ev?void 0:ev.context)?void 0:ei.cart)?void 0:ea.buyerIdentity)?void 0:es.countryCode)&&!ev.context.errors,eM=(0,l.useRef)(!1);(0,l.useEffect)(()=>{if(!ey.current&&!eM.current){if(!Q&&J("localStorage")){eM.current=!0;try{let e=window.localStorage.getItem(j.be);e&&e_({type:"CART_FETCH",payload:{cartId:e}})}catch(e){console.warn("error fetching cartId"),console.warn(e)}}ey.current=!0,eb(!0)}},[Q,ey,e_]),(0,l.useEffect)(()=>{eE&&!eg.current&&e_({type:"BUYER_IDENTITY_UPDATE",payload:{buyerIdentity:{countryCode:en,customerAccessToken:et}}})},[en,et,eE,eg,e_]);let eT=(0,l.useCallback)(e=>{if(!ey.current)return console.warn("Cart isn't ready yet");e_(e)},[e_]);(0,l.useEffect)(()=>{var e,t,n;if((null==(t=null==(e=null==ev?void 0:ev.context)?void 0:e.cart)?void 0:t.id)&&J("localStorage"))try{window.localStorage.setItem(j.be,null==(n=ev.context.cart)?void 0:n.id)}catch(e){console.warn("Failed to save cartId to localStorage",e)}},[null==(el=null==(eo=null==ev?void 0:ev.context)?void 0:eo.cart)?void 0:el.id]),(0,l.useEffect)(()=>{if(eS&&J("localStorage"))try{window.localStorage.removeItem(j.be)}catch(e){console.warn("Failed to delete cartId from localStorage",e)}},[eS]);let eA=(0,l.useCallback)(e=>{var t,n;!en||(null==(t=e.buyerIdentity)?void 0:t.countryCode)||(null==e.buyerIdentity&&(e.buyerIdentity={}),e.buyerIdentity.countryCode=en),!et||(null==(n=e.buyerIdentity)?void 0:n.customerAccessToken)||(null==e.buyerIdentity&&(e.buyerIdentity={}),e.buyerIdentity.customerAccessToken=et),eT({type:"CART_CREATE",payload:e})},[en,et,eT]),ew=function(e){let[t,n]=(0,l.useTransition)(),[r,i]=(0,l.useState)(e),a=(0,l.useRef)(!1);t&&(a.current=!0);let s=(0,l.useRef)(!1);return!t&&a.current&&(s.current=!0),(0,l.useEffect)(()=>{n(()=>{s.current||i(e)})},[e]),s.current?e:r}(ev),eC=(0,l.useMemo)(()=>{var e,t,n,r;return{...(null==(e=null==ew?void 0:ew.context)?void 0:e.cart)??{lines:[],attributes:[]},status:function(e){switch(e){case"uninitialized":case"initializationError":return"uninitialized";case"idle":case"cartCompleted":case"error":return"idle";case"cartFetching":return"fetching";case"cartCreating":return"creating";case"cartLineAdding":case"cartLineRemoving":case"cartLineUpdating":case"noteUpdating":case"buyerIdentityUpdating":case"cartAttributesUpdating":case"discountCodesUpdating":return"updating"}}(ew.value),error:null==(t=null==ew?void 0:ew.context)?void 0:t.errors,totalQuantity:(null==(r=null==(n=null==ew?void 0:ew.context)?void 0:n.cart)?void 0:r.totalQuantity)??0,cartCreate:eA,cartReady:ex,linesAdd(e){var t,n;(null==(n=null==(t=null==ew?void 0:ew.context)?void 0:t.cart)?void 0:n.id)?eT({type:"CARTLINE_ADD",payload:{lines:e}}):eA({lines:e})},linesRemove(e){eT({type:"CARTLINE_REMOVE",payload:{lines:e}})},linesUpdate(e){eT({type:"CARTLINE_UPDATE",payload:{lines:e}})},noteUpdate(e){eT({type:"NOTE_UPDATE",payload:{note:e}})},buyerIdentityUpdate(e){eT({type:"BUYER_IDENTITY_UPDATE",payload:{buyerIdentity:e}})},cartAttributesUpdate(e){eT({type:"CART_ATTRIBUTES_UPDATE",payload:{attributes:e}})},discountCodesUpdate(e){eT({type:"DISCOUNT_CODES_UPDATE",payload:{discountCodes:e}})},cartFragment:ee}},[eA,ex,null==(eu=null==ew?void 0:ew.context)?void 0:eu.cart,null==(ec=null==ew?void 0:ew.context)?void 0:ec.errors,ew.value,ee,eT]);return(0,o.jsx)(Y.Provider,{value:eC,children:e})}function J(e){let t;try{t=window[e];let n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!!(e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length)}}},94922:(e,t,n)=>{"use strict";n.d(t,{ug:()=>o,qu:()=>l});var r=n(74848),i=n(96540);let a="2025-01",s=(0,i.createContext)({storeDomain:"test",storefrontToken:"abc123",storefrontApiVersion:a,countryIsoCode:"US",languageIsoCode:"EN",getStorefrontApiUrl:()=>"",getPublicTokenHeaders:()=>({}),getShopifyDomain:()=>""});function o({children:e,...t}){if(!t.countryIsoCode||!t.languageIsoCode||!t.storeDomain||!t.storefrontToken||!t.storefrontApiVersion)throw Error("Please provide the necessary props to '<ShopifyProvider/>'");t.storefrontApiVersion!==a&&console.warn(`<ShopifyProvider/>: This version of Hydrogen React is built for Shopify's Storefront API version ${a}, but it looks like you're using version ${t.storefrontApiVersion}. There may be issues or bugs if you use a mismatched version of Hydrogen React and the Storefront API.`);let n=(0,i.useMemo)(()=>{function e(e){let n=(null==e?void 0:e.storeDomain)??t.storeDomain;return n.includes("://")?n:`https://${n}`}return{...t,getPublicTokenHeaders:e=>{var n;return n=e.contentType,{"content-type":"graphql"===n?"application/graphql":"application/json","X-SDK-Variant":"hydrogen-react","X-SDK-Variant-Source":"react","X-SDK-Version":t.storefrontApiVersion,"X-Shopify-Storefront-Access-Token":e.storefrontToken??t.storefrontToken}},getShopifyDomain:e,getStorefrontApiUrl(n){let r=e({storeDomain:(null==n?void 0:n.storeDomain)??t.storeDomain});return`${r}${r.endsWith("/")?"":"/"}api/${(null==n?void 0:n.storefrontApiVersion)??t.storefrontApiVersion}/graphql.json`}}},[t]);return(0,r.jsx)(s.Provider,{value:n,children:e})}function l(){let e=(0,i.useContext)(s);if(!e)throw Error("'useShop()' must be a descendent of <ShopifyProvider/>");return e}},62768:(e,t,n)=>{"use strict";n.d(t,{As:()=>a,I5:()=>i,pe:()=>s,sE:()=>r});let r={PAGE_VIEW:"PAGE_VIEW",ADD_TO_CART:"ADD_TO_CART",PAGE_VIEW_2:"PAGE_VIEW_2",COLLECTION_VIEW:"COLLECTION_VIEW",PRODUCT_VIEW:"PRODUCT_VIEW",SEARCH_VIEW:"SEARCH_VIEW"},i={article:"article",blog:"blog",captcha:"captcha",cart:"cart",collection:"collection",customersAccount:"customers/account",customersActivateAccount:"customers/activate_account",customersAddresses:"customers/addresses",customersLogin:"customers/login",customersOrder:"customers/order",customersRegister:"customers/register",customersResetPassword:"customers/reset_password",giftCard:"gift_card",home:"index",listCollections:"list-collections",forbidden:"403",notFound:"404",page:"page",password:"password",product:"product",policy:"policy",search:"search"},a={hydrogen:"hydrogen",headless:"headless"},s={hydrogen:"6167201",headless:"12875497473"}},71222:(e,t,n)=>{"use strict";n.d(t,{E6:()=>a,aI:()=>s,be:()=>r,c0:()=>i,l4:()=>o,lP:()=>l});let r="shopifyCartId",i="Shopify-Storefront-Id",a="Shopify-Storefront-Y",s="Shopify-Storefront-S",o="_shopify_y",l="_shopify_s"},68029:(e,t,n)=>{"use strict";n.d(t,{Wb:()=>o,Yv:()=>s});var r=n(52218),i=n(71222);let a="xxxx-4xxx-xxxx-xxxxxxxxxxxx";function s(){let e="";try{let t=window.crypto,n=new Uint16Array(31);t.getRandomValues(n);let r=0;e=a.replace(/[x]/g,e=>{let t=n[r]%16;return r++,("x"===e?t:3&t|8).toString(16)}).toUpperCase()}catch(t){e=a.replace(/[x]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}).toUpperCase()}return`${function(){let e=0,t=0;e=new Date().getTime()>>>0;try{t=performance.now()>>>0}catch(e){t=0}return Math.abs(e+t).toString(16).toLowerCase().padStart(8,"0")}()}-${e}`}function o(e){let t=(0,r.q)(e);return{[i.l4]:t[i.l4]||"",[i.lP]:t[i.lP]||""}}},56335:(e,t,n)=>{"use strict";function r(e){return e?"nodes"in e?e.nodes:"edges"in e&&Array.isArray(e.edges)?e.edges.map(e=>{if(!(null==e?void 0:e.node))throw Error("flattenConnection(): Connection edges must contain nodes");return e.node}):[]:(console.error(`flattenConnection(): needs a 'connection' to flatten, but received '${e??""}' instead. Returning an empty array`),[])}n.d(t,{D:()=>r})},50467:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{_:()=>r})},5483:(e,t,n)=>{"use strict";n.d(t,{i:()=>B});var r=n(39684),i=n(17199),a=n(91597),s=n(4509),o=n(22444),l=n(75605),u=n(68347);let c=(e,t,n)=>{let r=t-e;return((n-e)%r+r)%r+e};var d=n(9392);function h(e,t){return(0,d.h)(e)?e[c(0,e.length,t)]:e}var p=n(21790),f=n(91124),m=n(35649),g=n(23497);function v(e){return"object"==typeof e&&!Array.isArray(e)}function _(e,t,n,r){return"string"==typeof e&&v(t)?(0,g.K)(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function y(e,t,n,r){var i;return"number"==typeof t?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):"<"===t?n:null!==(i=r.get(t))&&void 0!==i?i:e}var x=n(95383),b=n(55994);function S(e,t){return e.at!==t.at?e.at-t.at:null===e.value?1:null===t.value?-1:0}function E(e,t){return t.has(e)||t.set(e,{}),t.get(e)}function M(e,t){return t[e]||(t[e]=[]),t[e]}let T=e=>"number"==typeof e,A=e=>e.every(T);var w=n(544),C=n(47769),P=n(80482),R=n(24302),I=n(78406),L=n(92541),D=n(99434);class O extends D.B{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(t in e){let n=e[t];if("string"==typeof n||"number"==typeof n)return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return(0,L.ge)()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function N(e){let t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=(0,P.x)(e)?new R.l(t):new I.M(t);n.mount(e),w.C.set(e,n)}function U(e){let t=new O({presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}});t.mount(e),w.C.set(e,t)}var F=n(34451);function k(e,t,n,r){let i=[];if((0,m.S)(e)||"number"==typeof e||"string"==typeof e&&!v(t))i.push((0,F.z)(e,v(t)&&t.default||t,n&&n.default||n));else{let s=_(e,t,r),o=s.length;(0,a.V)(!!o,"No valid elements provided.");for(let e=0;e<o;e++){let r=s[e],a=r instanceof Element?N:U;w.C.has(r)||a(r);let l=w.C.get(r),u={...n};"delay"in u&&"function"==typeof u.delay&&(u.delay=u.delay(e,o)),i.push(...(0,C.$)(l,{...t,transition:u},{}))}}return i}let B=function(e){return function(e,t,n){let c=[];c=Array.isArray(e)&&e.some(Array.isArray)?function(e,t,n){let r=[];return(function(e,{defaultTransition:t={},...n}={},r,i){let c=t.duration||.3,d=new Map,g=new Map,v={},T=new Map,w=0,C=0,P=0;for(let n=0;n<e.length;n++){let s=e[n];if("string"==typeof s){T.set(s,C);continue}if(!Array.isArray(s)){T.set(s.name,y(C,s.at,w,T));continue}let[d,S,R={}]=s;void 0!==R.at&&(C=y(C,R.at,w,T));let I=0,L=(e,n,r,s=0,d=0)=>{let m=Array.isArray(e)?e:[e],{delay:g=0,times:v=(0,p.Z)(m),type:_="keyframes",repeat:y,repeatType:S,repeatDelay:E=0,...M}=n,{ease:T=t.ease||"easeOut",duration:w}=n,R="function"==typeof g?g(s,d):g,L=m.length,D=(0,u.W)(_)?_:null==i?void 0:i[_];if(L<=2&&D){let e=100;2===L&&A(m)&&(e=Math.abs(m[1]-m[0]));let t={...M};void 0!==w&&(t.duration=(0,o.f)(w));let n=function(e,t=100,n){let r=n({...e,keyframes:[0,t]}),i=Math.min((0,l.t)(r),l.Y);return{type:"keyframes",ease:e=>r.next(i*e).value/t,duration:(0,o.X)(i)}}(t,e,D);T=n.ease,w=n.duration}null!=w||(w=c);let O=C+R;1===v.length&&0===v[0]&&(v[1]=1);let N=v.length-m.length;if(N>0&&(0,f.f)(v,N),1===m.length&&m.unshift(null),y){(0,a.V)(y<20,"Repeat count too high, must be less than 20"),w*=y+1;let e=[...m],t=[...v],n=[...T=Array.isArray(T)?[...T]:[T]];for(let r=0;r<y;r++){m.push(...e);for(let i=0;i<e.length;i++)v.push(t[i]+(r+1)),T.push(0===i?"linear":h(n,i-1))}!function(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}(v,y)}let U=O+w;(function(e,t,n,r,i,a){!function(e,t,n){for(let r=0;r<e.length;r++){let i=e[r];i.at>t&&i.at<n&&((0,x.Ai)(e,i),r--)}}(e,i,a);for(let s=0;s<t.length;s++)e.push({value:t[s],at:(0,b.k)(i,a,r[s]),easing:h(n,s)})})(r,m,T,v,O,U),I=Math.max(R+w,I),P=Math.max(U,P)};if((0,m.S)(d))L(S,R,M("default",E(d,g)));else{let e=_(d,S,r,v),t=e.length;for(let n=0;n<t;n++){let r=E(e[n],g);for(let e in S)L(S[e],R&&R[e]?{...R,...R[e]}:{...R},M(e,r),n,t)}}w=C,C+=I}return g.forEach((e,r)=>{for(let i in e){let a=e[i];a.sort(S);let o=[],l=[],u=[];for(let e=0;e<a.length;e++){let{at:t,value:n,easing:r}=a[e];o.push(n),l.push((0,s.q)(0,P,t)),u.push(r||"easeOut")}0!==l[0]&&(l.unshift(0),o.unshift(o[0]),u.unshift("easeInOut")),1!==l[l.length-1]&&(l.push(1),o.push(null)),d.has(r)||d.set(r,{keyframes:{},transition:{}});let c=d.get(r);c.keyframes[i]=o,c.transition[i]={...t,duration:P,ease:u,times:l,...n}}}),d})(e,t,n,{spring:i.o}).forEach(({keyframes:e,transition:t},n)=>{r.push(...k(n,e,t))}),r}(e,t,void 0):k(e,t,n,void 0);let d=new r.P(c);return d}}()},34451:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(84192),i=n(35649),a=n(42989);function s(e,t,n){let s=(0,i.S)(e)?e:(0,r.OQ)(e);return s.start((0,a.f)("",s,t,n)),s.animation}},17199:(e,t,n)=>{"use strict";n.d(t,{o:()=>f});var r=n(22444),i=n(75605),a=n(32170),s=n(21701),o=n(49947);let l={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1};var u=n(91597);function c(e,t){return e*Math.sqrt(1-t*t)}let d=["duration","bounce"],h=["stiffness","damping","mass"];function p(e,t){return t.some(t=>void 0!==e[t])}function f(e=l.visualDuration,t=l.bounce){let n;let m="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:g,restDelta:v}=m,_=m.keyframes[0],y=m.keyframes[m.keyframes.length-1],x={done:!1,value:_},{stiffness:b,damping:S,mass:E,duration:M,velocity:T,isResolvedFromDuration:A}=function(e){let t={velocity:l.velocity,stiffness:l.stiffness,damping:l.damping,mass:l.mass,isResolvedFromDuration:!1,...e};if(!p(e,h)&&p(e,d)){if(e.visualDuration){let n=2*Math.PI/(1.2*e.visualDuration),r=n*n,i=2*(0,s.q)(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:l.mass,stiffness:r,damping:i}}else{let n=function({duration:e=l.duration,bounce:t=l.bounce,velocity:n=l.velocity,mass:i=l.mass}){let a,o;(0,u.$)(e<=(0,r.f)(l.maxDuration),"Spring duration must be 10 seconds or less");let d=1-t;d=(0,s.q)(l.minDamping,l.maxDamping,d),e=(0,s.q)(l.minDuration,l.maxDuration,(0,r.X)(e)),d<1?(a=t=>{let r=t*d,i=r*e;return .001-(r-n)/c(t,d)*Math.exp(-i)},o=t=>{let r=t*d*e,i=Math.pow(d,2)*Math.pow(t,2)*e,s=Math.exp(-r),o=c(Math.pow(t,2),d);return(r*n+n-i)*s*(-a(t)+.001>0?-1:1)/o}):(a=t=>-.001+Math.exp(-t*e)*((t-n)*e+1),o=t=>e*e*(n-t)*Math.exp(-t*e));let h=function(e,t,n){let r=n;for(let n=1;n<12;n++)r-=e(r)/t(r);return r}(a,o,5/e);if(e=(0,r.f)(e),isNaN(h))return{stiffness:l.stiffness,damping:l.damping,duration:e};{let t=Math.pow(h,2)*i;return{stiffness:t,damping:2*d*Math.sqrt(i*t),duration:e}}}(e);(t={...t,...n,mass:l.mass}).isResolvedFromDuration=!0}}return t}({...m,velocity:-(0,r.X)(m.velocity||0)}),w=T||0,C=S/(2*Math.sqrt(b*E)),P=y-_,R=(0,r.X)(Math.sqrt(b/E)),I=5>Math.abs(P);if(g||(g=I?l.restSpeed.granular:l.restSpeed.default),v||(v=I?l.restDelta.granular:l.restDelta.default),C<1){let e=c(R,C);n=t=>y-Math.exp(-C*R*t)*((w+C*R*P)/e*Math.sin(e*t)+P*Math.cos(e*t))}else if(1===C)n=e=>y-Math.exp(-R*e)*(P+(w+R*P)*e);else{let e=R*Math.sqrt(C*C-1);n=t=>{let n=Math.exp(-C*R*t),r=Math.min(e*t,300);return y-n*((w+C*R*P)*Math.sinh(r)+e*P*Math.cosh(r))/e}}let L={calculatedDuration:A&&M||null,next:e=>{let t=n(e);if(A)x.done=e>=M;else{let i=0;C<1&&(i=0===e?(0,r.f)(w):(0,o.Y)(n,e,t));let a=Math.abs(i)<=g,s=Math.abs(y-t)<=v;x.done=a&&s}return x.value=x.done?y:t,x},toString:()=>{let e=Math.min((0,i.t)(L),i.Y),t=(0,a.K)(t=>L.next(e*t).value,e,30);return e+"ms "+t}};return L}},49947:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});var r=n(77052);function i(e,t,n){let i=Math.max(t-5,0);return(0,r.f)(n-e(i),t-i)}},42989:(e,t,n)=>{"use strict";n.d(t,{f:()=>es});var r=n(39684),i=n(55838),a=n(22444),s=n(87697),o=n(73627);let l={current:!1};var u=n(20200),c=n(68347);function d(e,t){e.timeline=t,e.onfinish=null}var h=n(27373),p=n(14346);let f={linearEasing:void 0},m=function(e,t){let n=(0,p.p)(e);return()=>{var e;return null!==(e=f[t])&&void 0!==e?e:n()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing");var g=n(32170);let v=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:v([0,.65,.55,1]),circOut:v([.55,0,1,.45]),backIn:v([.31,.01,.66,-.59]),backOut:v([.33,1.53,.69,.99])};var y=n(97200),x=n(88445),b=n(27001),S=n(64702),E=n(85487),M=n(3532),T=n(91597),A=n(93912);let w=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(A.f.test(e)||"0"===e)&&!e.startsWith("url(")),C=e=>null!==e;function P(e,{repeat:t,repeatType:n="loop"},r){let i=e.filter(C),a=t&&"loop"!==n&&t%2==1?0:i.length-1;return a&&void 0!==r?r:i[a]}class R{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=E.k.now(),this.options={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:a,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(0,M.q)(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=E.k.now(),this.hasAttemptedResolve=!0;let{name:n,type:r,velocity:i,delay:a,onComplete:s,onUpdate:o,isGenerator:u}=this.options;if(!u&&!function(e,t,n,r){let i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;let a=e[e.length-1],s=w(i,t),o=w(a,t);return(0,T.$)(s===o,`You are trying to animate ${t} from "${i}" to "${a}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${a} via the \`style\` property.`),!!s&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||(0,c.W)(n))&&r)}(e,n,r,i)){if(l.current||!a){o&&o(P(e,this.options,t)),s&&s(),this.resolveFinishedPromise();return}this.options.duration=0}let d=this.initPlayback(e,t);!1!==d&&(this._resolved={keyframes:e,finalKeyframe:t,...d},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}var I=n(75605),L=n(88054),D=n(21701),O=n(94560),N=n(24876),U=n(17199),F=n(49947);function k({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){let d,h;let p=e[0],f={done:!1,value:p},m=e=>void 0!==o&&e<o||void 0!==l&&e>l,g=e=>void 0===o?l:void 0===l?o:Math.abs(o-e)<Math.abs(l-e)?o:l,v=n*t,_=p+v,y=void 0===s?_:s(_);y!==_&&(v=y-p);let x=e=>-v*Math.exp(-e/r),b=e=>y+x(e),S=e=>{let t=x(e),n=b(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n},E=e=>{m(f.value)&&(d=e,h=(0,U.o)({keyframes:[f.value,g(f.value)],velocity:(0,F.Y)(b,e,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return(h||void 0!==d||(t=!0,S(e),E(e)),void 0!==d&&e>=d)?h.next(e-d):(t||S(e),f)}}}var B=n(28094),V=n(9392),z=n(48532),j=n(60885),H=n(21790);function G({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){let i=(0,V.h)(r)?r.map(z.K):(0,z.K)(r),a={done:!1,value:t[0]},s=(n&&n.length===t.length?n:(0,H.Z)(t)).map(t=>t*e),o=(0,j.G)(s,t,{ease:Array.isArray(i)?i:t.map(()=>i||B.am).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}let W=e=>{let t=({timestamp:t})=>e(t);return{start:()=>s.Gt.update(t,!0),stop:()=>(0,s.WG)(t),now:()=>s.uv.isProcessing?s.uv.timestamp:E.k.now()}},q={decay:k,inertia:k,tween:G,keyframes:G,spring:U.o},X=e=>e/100;class $ extends R{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();let{onStop:e}=this.options;e&&e()};let{name:t,motionValue:n,element:r,keyframes:i}=this.options,a=(null==r?void 0:r.KeyframeResolver)||M.h;this.resolver=new a(i,(e,t)=>this.onKeyframesResolved(e,t),t,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){let t,n;let{type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s,velocity:o=0}=this.options,l=(0,c.W)(r)?r:q[r]||G;l!==G&&"number"!=typeof e[0]&&(t=(0,N.F)(X,(0,O.j)(e[0],e[1])),e=[0,100]);let u=l({...this.options,keyframes:e});"mirror"===s&&(n=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),null===u.calculatedDuration&&(u.calculatedDuration=(0,I.t)(u));let{calculatedDuration:d}=u,h=d+a;return{generator:u,mirroredGenerator:n,mapPercentToKeyframes:t,calculatedDuration:d,resolvedDuration:h,totalDuration:h*(i+1)-a}}onPostResolved(){let{autoplay:e=!0}=this.options;L.q.mainThread++,this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){let{resolved:n}=this;if(!n){let{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}let{finalKeyframe:r,generator:i,mirroredGenerator:a,mapPercentToKeyframes:s,keyframes:o,calculatedDuration:l,totalDuration:u,resolvedDuration:c}=n;if(null===this.startTime)return i.next(0);let{delay:d,repeat:h,repeatType:p,repeatDelay:f,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;let g=this.currentTime-d*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=u);let _=this.currentTime,y=i;if(h){let e=Math.min(this.currentTime,u)/c,t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,(t=Math.min(t,h+1))%2&&("reverse"===p?(n=1-n,f&&(n-=f/c)):"mirror"===p&&(y=a)),_=(0,D.q)(0,1,n)*c}let x=v?{done:!1,value:o[0]}:y.next(_);s&&(x.value=s(x.value));let{done:b}=x;v||null===l||(b=this.speed>=0?this.currentTime>=u:this.currentTime<=0);let S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return S&&void 0!==r&&(x.value=P(o,this.options,r)),m&&m(x.value),S&&this.finish(),x}get duration(){let{resolved:e}=this;return e?(0,a.X)(e.calculatedDuration):0}get time(){return(0,a.X)(this.currentTime)}set time(e){e=(0,a.f)(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=(0,a.X)(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:e=W,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();let r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel(),L.q.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}let Y=new Set(["opacity","clipPath","filter","transform"]);var K=n(85776);let Z=(0,p.p)(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),J={anticipate:y.b,backInOut:x.ZZ,circInOut:b.tn};class Q extends R{constructor(e){super(e);let{name:t,motionValue:n,element:r,keyframes:i}=this.options;this.resolver=new S.K(i,(e,t)=>this.onKeyframesResolved(e,t),t,n,r),this.resolver.scheduleResolve()}initPlayback(e,t){var n;let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if("string"==typeof a&&m()&&a in J&&(a=J[a]),n=this.options,(0,c.W)(n.type)||"spring"===n.type||!function e(t){return!!("function"==typeof t&&m()||!t||"string"==typeof t&&(t in _||m())||(0,h.D)(t)||Array.isArray(t)&&t.every(e))}(n.ease)){let{onComplete:t,onUpdate:n,motionValue:o,element:l,...u}=this.options,c=function(e,t){let n=new $({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0}),r={done:!1,value:e[0]},i=[],a=0;for(;!r.done&&a<2e4;)i.push((r=n.sample(a)).value),a+=10;return{times:void 0,keyframes:i,duration:a-10,ease:"linear"}}(e,u);1===(e=c.keyframes).length&&(e[1]=e[0]),r=c.duration,i=c.times,a=c.ease,s="keyframes"}let p=function(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){let u={[t]:n};l&&(u.offset=l);let c=function e(t,n){if(t)return"function"==typeof t&&m()?(0,g.K)(t,n):(0,h.D)(t)?v(t):Array.isArray(t)?t.map(t=>e(t,n)||_.easeOut):_[t]}(o,i);Array.isArray(c)&&(u.easing=c),K.Q.value&&L.q.waapi++;let d=e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:a+1,direction:"reverse"===s?"alternate":"normal"});return K.Q.value&&d.finished.finally(()=>{L.q.waapi--}),d}(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:a});return p.startTime=null!=u?u:this.calcStartTime(),this.pendingTimeline?(d(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{let{onComplete:n}=this.options;o.set(P(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:r,times:i,type:s,ease:a,keyframes:e}}get duration(){let{resolved:e}=this;if(!e)return 0;let{duration:t}=e;return(0,a.X)(t)}get time(){let{resolved:e}=this;if(!e)return 0;let{animation:t}=e;return(0,a.X)(t.currentTime||0)}set time(e){let{resolved:t}=this;if(!t)return;let{animation:n}=t;n.currentTime=(0,a.f)(e)}get speed(){let{resolved:e}=this;if(!e)return 1;let{animation:t}=e;return t.playbackRate}set speed(e){let{resolved:t}=this;if(!t)return;let{animation:n}=t;n.playbackRate=e}get state(){let{resolved:e}=this;if(!e)return"idle";let{animation:t}=e;return t.playState}get startTime(){let{resolved:e}=this;if(!e)return null;let{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){let{resolved:t}=this;if(!t)return u.l;let{animation:n}=t;d(n,e)}else this.pendingTimeline=e;return u.l}play(){if(this.isStopped)return;let{resolved:e}=this;if(!e)return;let{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){let{resolved:e}=this;if(!e)return;let{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:e}=this;if(!e)return;let{animation:t,keyframes:n,duration:r,type:i,ease:s,times:o}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){let{motionValue:e,onUpdate:t,onComplete:l,element:u,...c}=this.options,d=new $({...c,keyframes:n,duration:r,type:i,ease:s,times:o,isGenerator:!0}),h=(0,a.f)(this.time);e.setWithVelocity(d.sample(h-10).value,d.sample(h).value,10)}let{onStop:l}=this.options;l&&l(),this.cancel()}complete(){let{resolved:e}=this;e&&e.animation.finish()}cancel(){let{resolved:e}=this;e&&e.animation.cancel()}static supports(e){let{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Z()&&n&&Y.has(n)&&!o&&!l&&!r&&"mirror"!==i&&0!==a&&"inertia"!==s}}var ee=n(892);let et={type:"spring",stiffness:500,damping:25,restSpeed:10},en=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),er={type:"keyframes",duration:.8},ei={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ea=(e,{keyframes:t})=>t.length>2?er:ee.f.has(e)?e.startsWith("scale")?en(t[1]):et:ei,es=(e,t,n,u={},c,d)=>h=>{let p=(0,i.r)(u,e)||{},f=p.delay||u.delay||0,{elapsed:m=0}=u;m-=(0,a.f)(f);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...p,delay:-m,onUpdate:e=>{t.set(e),p.onUpdate&&p.onUpdate(e)},onComplete:()=>{h(),p.onComplete&&p.onComplete()},name:e,motionValue:t,element:d?void 0:c};!function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}(p)&&(g={...g,...ea(e,g)}),g.duration&&(g.duration=(0,a.f)(g.duration)),g.repeatDelay&&(g.repeatDelay=(0,a.f)(g.repeatDelay)),void 0!==g.from&&(g.keyframes[0]=g.from);let v=!1;if(!1!==g.type&&(0!==g.duration||g.repeatDelay)||(g.duration=0,0!==g.delay||(v=!0)),(l.current||o.W.skipAnimations)&&(v=!0,g.duration=0,g.delay=0),v&&!d&&void 0!==t.get()){let e=P(g.keyframes,p);if(void 0!==e)return s.Gt.update(()=>{g.onUpdate(e),g.onComplete()}),new r.P([])}return!d&&Q.supports(g)?new Q(g):new $(g)}},47769:(e,t,n)=>{"use strict";n.d(t,{$:()=>h});var r=n(55838),i=n(70237),a=n(48608),s=n(84192),o=n(29156),l=n(15333),u=n(52261),c=n(42989),d=n(87697);function h(e,t,{delay:n=0,transitionOverride:p,type:f}={}){var m;let{transition:g=e.getDefaultTransition(),transitionEnd:v,..._}=t;p&&(g=p);let y=[],x=f&&e.animationState&&e.animationState.getState()[f];for(let t in _){let a=e.getValue(t,null!==(m=e.latestValues[t])&&void 0!==m?m:null),s=_[t];if(void 0===s||x&&function({protectedKeys:e,needsAnimating:t},n){let r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}(x,t))continue;let o={delay:n,...(0,r.r)(g||{},t)},h=!1;if(window.MotionHandoffAnimation){let n=(0,u.P)(e);if(n){let e=window.MotionHandoffAnimation(n,t,d.Gt);null!==e&&(o.startTime=e,h=!0)}}(0,l.g)(e,t),a.start((0,c.f)(t,a,s,e.shouldReduceMotion&&i.$.has(t)?{type:!1}:o,e,h));let p=a.animation;p&&y.push(p)}return v&&Promise.all(y).then(()=>{d.Gt.update(()=>{v&&function(e,t){let{transitionEnd:n={},transition:r={},...i}=(0,o.K)(e,t)||{};for(let t in i={...i,...n}){let n=(0,a.K)(i[t]);e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,(0,s.OQ)(n))}}(e,v)})}),y}},56475:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});let r="data-"+(0,n(20285).I)("framerAppearId")},52261:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});var r=n(56475);function i(e){return e.props[r.n]}},21039:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}n.d(t,{N:()=>r})},96397:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});let r=e=>Array.isArray(e)},54660:(e,t,n)=>{"use strict";n.d(t,{N:()=>v});var r=n(74848),i=n(96540),a=n(83006),s=n(49474),o=n(14394),l=n(60987);class u extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c({children:e,isPresent:t,anchorX:n}){let a=(0,i.useId)(),s=(0,i.useRef)(null),o=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,i.useContext)(l.Q);return(0,i.useInsertionEffect)(()=>{let{width:e,height:r,top:i,left:l,right:u}=o.current;if(t||!s.current||!e||!r)return;let d="left"===n?`left: ${l}`:`right: ${u}`;s.current.dataset.motionPopId=a;let h=document.createElement("style");return c&&(h.nonce=c),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${r}px !important;
            ${d}px !important;
            top: ${i}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),(0,r.jsx)(u,{isPresent:t,childRef:s,sizeRef:o,children:i.cloneElement(e,{ref:s})})}let d=({children:e,initial:t,isPresent:n,onExitComplete:a,custom:l,presenceAffectsLayout:u,mode:d,anchorX:p})=>{let f=(0,s.M)(h),m=(0,i.useId)(),g=(0,i.useCallback)(e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;a&&a()},[f,a]),v=(0,i.useMemo)(()=>({id:m,initial:t,isPresent:n,custom:l,onExitComplete:g,register:e=>(f.set(e,!1),()=>f.delete(e))}),u?[Math.random(),g]:[n,g]);return(0,i.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[n]),i.useEffect(()=>{n||f.size||!a||a()},[n]),"popLayout"===d&&(e=(0,r.jsx)(c,{isPresent:n,anchorX:p,children:e})),(0,r.jsx)(o.t.Provider,{value:v,children:e})};function h(){return new Map}var p=n(11973);let f=e=>e.key||"";function m(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}var g=n(63797);let v=({children:e,custom:t,initial:n=!0,onExitComplete:o,presenceAffectsLayout:l=!0,mode:u="sync",propagate:c=!1,anchorX:h="left"})=>{let[v,_]=(0,p.xQ)(c),y=(0,i.useMemo)(()=>m(e),[e]),x=c&&!v?[]:y.map(f),b=(0,i.useRef)(!0),S=(0,i.useRef)(y),E=(0,s.M)(()=>new Map),[M,T]=(0,i.useState)(y),[A,w]=(0,i.useState)(y);(0,g.E)(()=>{b.current=!1,S.current=y;for(let e=0;e<A.length;e++){let t=f(A[e]);x.includes(t)?E.delete(t):!0!==E.get(t)&&E.set(t,!1)}},[A,x.length,x.join("-")]);let C=[];if(y!==M){let e=[...y];for(let t=0;t<A.length;t++){let n=A[t],r=f(n);x.includes(r)||(e.splice(t,0,n),C.push(n))}return"wait"===u&&C.length&&(e=C),w(m(e)),T(y),null}let{forceRender:P}=(0,i.useContext)(a.L);return(0,r.jsx)(r.Fragment,{children:A.map(e=>{let i=f(e),a=(!c||!!v)&&(y===A||x.includes(i));return(0,r.jsx)(d,{isPresent:a,initial:(!b.current||!!n)&&void 0,custom:t,presenceAffectsLayout:l,mode:u,onExitComplete:a?void 0:()=>{if(!E.has(i))return;E.set(i,!0);let e=!0;E.forEach(t=>{t||(e=!1)}),e&&(null==P||P(),w(S.current),c&&(null==_||_()),o&&o())},anchorX:h,children:e},i)})})}},11973:(e,t,n)=>{"use strict";n.d(t,{tF:()=>s,xQ:()=>a});var r=n(96540),i=n(14394);function a(e=!0){let t=(0,r.useContext)(i.t);if(null===t)return[!0,null];let{isPresent:n,onExitComplete:s,register:o}=t,l=(0,r.useId)();(0,r.useEffect)(()=>{e&&o(l)},[e]);let u=(0,r.useCallback)(()=>e&&s&&s(l),[l,s,e]);return!n&&s?[!1,u]:[!0]}function s(){var e;return null===(e=(0,r.useContext)(i.t))||e.isPresent}},83006:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});let r=(0,n(96540).createContext)({})},60987:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});let r=(0,n(96540).createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"})},14394:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});let r=(0,n(96540).createContext)(null)},97200:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(88445);let i=e=>(e*=2)<1?.5*(0,r.dg)(e):.5*(2-Math.pow(2,-10*(e-1)))},88445:(e,t,n)=>{"use strict";n.d(t,{Sz:()=>s,ZZ:()=>l,dg:()=>o});var r=n(18298),i=n(76876),a=n(72325);let s=(0,r.A)(.33,1.53,.69,.99),o=(0,a.G)(s),l=(0,i.V)(o)},27001:(e,t,n)=>{"use strict";n.d(t,{po:()=>a,tn:()=>o,yT:()=>s});var r=n(76876),i=n(72325);let a=e=>1-Math.sin(Math.acos(e)),s=(0,i.G)(a),o=(0,r.V)(a)},18298:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(20200);let i=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function a(e,t,n,a){if(e===t&&n===a)return r.l;let s=t=>(function(e,t,n,r,a){let s,o;let l=0;do(s=i(o=t+(n-t)/2,r,a)-e)>0?n=o:t=o;while(Math.abs(s)>1e-7&&++l<12);return o})(t,0,1,e,n);return e=>0===e||1===e?e:i(s(e),t,a)}},28094:(e,t,n)=>{"use strict";n.d(t,{a6:()=>i,am:()=>s,vT:()=>a});var r=n(18298);let i=(0,r.A)(.42,0,1,1),a=(0,r.A)(0,0,.58,1),s=(0,r.A)(.42,0,.58,1)},76876:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});let r=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2},72325:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});let r=e=>t=>1-e(1-t)},9392:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});let r=e=>Array.isArray(e)&&"number"!=typeof e[0]},48532:(e,t,n)=>{"use strict";n.d(t,{K:()=>h});var r=n(91597),i=n(20200),a=n(27373),s=n(97200),o=n(88445),l=n(27001),u=n(18298),c=n(28094);let d={linear:i.l,easeIn:c.a6,easeInOut:c.am,easeOut:c.vT,circIn:l.po,circInOut:l.tn,circOut:l.yT,backIn:o.dg,backInOut:o.ZZ,backOut:o.Sz,anticipate:s.b},h=e=>{if((0,a.D)(e)){(0,r.V)(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,n,i,a]=e;return(0,u.A)(t,n,i,a)}return"string"==typeof e?((0,r.V)(void 0!==d[e],`Invalid easing type '${e}'`),d[e]):e}},28384:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var r=n(73627);let i=["read","resolveKeyframes","update","preRender","render","postRender"];var a=n(85776);function s(e,t){let n=!1,s=!0,o={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,u=i.reduce((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,i=!1,s=!1,o=new WeakSet,l={delta:0,timestamp:0,isProcessing:!1},u=0;function c(t){o.has(t)&&(d.schedule(t),e()),u++,t(l)}let d={schedule:(e,t=!1,a=!1)=>{let s=a&&i?n:r;return t&&o.add(e),s.has(e)||s.add(e),e},cancel:e=>{r.delete(e),o.delete(e)},process:e=>{if(l=e,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),t&&a.Q.value&&a.Q.value.frameloop[t].push(u),u=0,n.clear(),i=!1,s&&(s=!1,d.process(e))}};return d}(l,t?n:void 0),e),{}),{read:c,resolveKeyframes:d,update:h,preRender:p,render:f,postRender:m}=u,g=()=>{let i=r.W.useManualTiming?o.timestamp:performance.now();n=!1,r.W.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(i-o.timestamp,40),1)),o.timestamp=i,o.isProcessing=!0,c.process(o),d.process(o),h.process(o),p.process(o),f.process(o),m.process(o),o.isProcessing=!1,n&&t&&(s=!1,e(g))},v=()=>{n=!0,s=!0,o.isProcessing||e(g)};return{schedule:i.reduce((e,t)=>{let r=u[t];return e[t]=(e,t=!1,i=!1)=>(n||v(),r.schedule(e,t,i)),e},{}),cancel:e=>{for(let t=0;t<i.length;t++)u[i[t]].cancel(e)},state:o,steps:u}}},87697:(e,t,n)=>{"use strict";n.d(t,{Gt:()=>i,PP:()=>o,WG:()=>a,uv:()=>s});var r=n(20200);let{schedule:i,cancel:a,state:s,steps:o}=(0,n(28384).I)("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:r.l,!0)},85487:(e,t,n)=>{"use strict";let r;n.d(t,{k:()=>o});var i=n(73627),a=n(87697);function s(){r=void 0}let o={now:()=>(void 0===r&&o.set(a.uv.isProcessing||i.W.useManualTiming?a.uv.timestamp:performance.now()),r),set:e=>{r=e,queueMicrotask(s)}}},10225:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});let r={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},i={};for(let e in r)i[e]={isEnabled:t=>r[e].some(e=>!!t[e])}},98708:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var r=n(86086),i=n(892);function a(e,{layout:t,layoutId:n}){return i.f.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!r.H[e]||"opacity"===e)}},90583:(e,t,n)=>{"use strict";function r({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function i({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function a(e,t){if(!t)return e;let n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}n.d(t,{FY:()=>r,bS:()=>a,pA:()=>i})},54576:(e,t,n)=>{"use strict";n.d(t,{OU:()=>u,Ql:()=>c,Ww:()=>h,hq:()=>a,o4:()=>l});var r=n(55994),i=n(40877);function a(e,t,n){return n+t*(e-n)}function s(e,t,n,r,i){return void 0!==i&&(e=r+i*(e-r)),r+n*(e-r)+t}function o(e,t=0,n=1,r,i){e.min=s(e.min,t,n,r,i),e.max=s(e.max,t,n,r,i)}function l(e,{x:t,y:n}){o(e.x,t.translate,t.scale,t.originPoint),o(e.y,n.translate,n.scale,n.originPoint)}function u(e,t,n,r=!1){let a,s;let o=n.length;if(o){t.x=t.y=1;for(let u=0;u<o;u++){s=(a=n[u]).projectionDelta;let{visualElement:o}=a.options;(!o||!o.props.style||"contents"!==o.props.style.display)&&(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&h(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,l(e,s)),r&&(0,i.HD)(a.latestValues)&&h(e,a.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}function c(e,t){e.min=e.min+t,e.max=e.max+t}function d(e,t,n,i,a=.5){let s=(0,r.k)(e.min,e.max,a);o(e,t,n,s,i)}function h(e,t){d(e.x,t.x,t.scaleX,t.scale,t.originX),d(e.y,t.y,t.scaleY,t.scale,t.originY)}},92541:(e,t,n)=>{"use strict";n.d(t,{ge:()=>s,xU:()=>i});let r=()=>({translate:0,scale:1,origin:0,originPoint:0}),i=()=>({x:r(),y:r()}),a=()=>({min:0,max:0}),s=()=>({x:a(),y:a()})},86086:(e,t,n)=>{"use strict";n.d(t,{$:()=>a,H:()=>i});var r=n(36639);let i={};function a(e){for(let t in e)i[t]=e[t],(0,r.j)(t)&&(i[t].isCSSVariable=!0)}},40877:(e,t,n)=>{"use strict";function r(e){return void 0===e||1===e}function i({scale:e,scaleX:t,scaleY:n}){return!r(e)||!r(t)||!r(n)}function a(e){return i(e)||s(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function s(e){var t,n;return(t=e.x)&&"0%"!==t||(n=e.y)&&"0%"!==n}n.d(t,{HD:()=>a,vF:()=>s,vk:()=>i})},2950:(e,t,n)=>{"use strict";n.d(t,{L:()=>s,m:()=>a});var r=n(90583),i=n(54576);function a(e,t){return(0,r.FY)((0,r.bS)(e.getBoundingClientRect(),t))}function s(e,t,n){let r=a(e,n),{scroll:s}=t;return s&&((0,i.Ql)(r.x,s.offset.x),(0,i.Ql)(r.y,s.offset.y)),r}},99434:(e,t,n)=>{"use strict";n.d(t,{B:()=>C});var r=n(85487),i=n(10225),a=n(92541),s=n(28657),o=n(68299),l=n(46559);let u={current:null},c={current:!1};var d=n(68713),h=n(84192),p=n(93912),f=n(35649),m=n(55563),g=n(20578),v=n(51174),_=n(83284);let y=[...v.T,g.y,p.f],x=e=>y.find((0,_.w)(e));var b=n(892),S=n(544),E=n(90210),M=n(3532),T=n(29328),A=n(87697);let w=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class C{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=M.h,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=r.k.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,A.Gt.render(this.render,!1,!0))};let{latestValues:l,renderState:u,onUpdate:c}=s;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=(0,E.e)(t),this.isVariantNode=(0,E.O)(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:d,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in h){let t=h[e];void 0!==l[e]&&(0,f.S)(t)&&t.set(l[e],!1)}}mount(e){this.current=e,S.C.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),c.current||function(){if(c.current=!0,l.B){if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>u.current=e.matches;e.addListener(t),t()}else u.current=!1}}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||u.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),(0,A.WG)(this.notifyUpdate),(0,A.WG)(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){let n;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let r=b.f.has(e);r&&this.onBindTransform&&this.onBindTransform();let i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&A.Gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in i.B){let t=i.B[e];if(!t)continue;let{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):(0,a.ge)()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<w.length;t++){let n=w[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let r=e["on"+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=function(e,t,n){for(let r in t){let i=t[r],a=n[r];if((0,f.S)(i))e.addValue(r,i);else if((0,f.S)(a))e.addValue(r,(0,h.OQ)(i,{owner:e}));else if(a!==i){if(e.hasValue(r)){let t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(r);e.addValue(r,(0,h.OQ)(void 0!==t?t:i,{owner:e}))}}}for(let r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=(0,h.OQ)(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=r&&("string"==typeof r&&((0,s.i)(r)||(0,o.$)(r))?r=parseFloat(r):!x(r)&&p.f.test(t)&&(r=(0,m.J)(e,t)),this.setBaseTarget(e,(0,f.S)(r)?r.get():r)),(0,f.S)(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let n;let{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let i=(0,T.a)(this.props,r,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);i&&(n=i[e])}if(r&&void 0!==n)return n;let i=this.getBaseTargetFromProps(this.props,e);return void 0===i||(0,f.S)(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new d.v),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}},71522:(e,t,n)=>{"use strict";n.d(t,{P:()=>nP});var r,i,a=n(21039),s=n(29156),o=n(47769);function l(e,t,n={}){var r;let i=(0,s.K)(e,t,"exit"===n.type?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0),{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);let c=i?()=>Promise.all((0,o.$)(e,i,n)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(r=0)=>{let{delayChildren:i=0,staggerChildren:s,staggerDirection:o}=a;return function(e,t,n=0,r=0,i=1,a){let s=[],o=(e.variantChildren.size-1)*r,c=1===i?(e=0)=>e*r:(e=0)=>o-e*r;return Array.from(e.variantChildren).sort(u).forEach((e,r)=>{e.notify("AnimationStart",t),s.push(l(e,t,{...a,delay:n+c(r)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(s)}(e,t,i+r,s,o,n)}:()=>Promise.resolve(),{when:h}=a;if(!h)return Promise.all([c(),d(n.delay)]);{let[e,t]="beforeChildren"===h?[c,d]:[d,c];return e().then(()=>t())}}function u(e,t){return e.sortNodePosition(t)}var c=n(96397);function d(e,t){if(!Array.isArray(t))return!1;let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var h=n(11806),p=n(83031);let f=p._.length,m=[...p.U].reverse(),g=p.U.length;function v(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _(){return{animate:v(!0),whileInView:v(),whileHover:v(),whileTap:v(),whileDrag:v(),whileFocus:v(),exit:v()}}class y{constructor(e){this.isMounted=!1,this.node=e}update(){}}class x extends y{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:n})=>(function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t))r=Promise.all(t.map(t=>l(e,t,n)));else if("string"==typeof t)r=l(e,t,n);else{let i="function"==typeof t?(0,s.K)(e,t,n.custom):t;r=Promise.all((0,o.$)(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})})(e,t,n))),n=_(),r=!0,i=t=>(n,r)=>{var i;let a=(0,s.K)(e,r,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(a){let{transition:e,transitionEnd:t,...r}=a;n={...n,...r,...t}}return n};function u(o){let{props:l}=e,u=function e(t){if(!t)return;if(!t.isControllingVariants){let n=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(n.initial=t.props.initial),n}let n={};for(let e=0;e<f;e++){let r=p._[e],i=t.props[r];((0,h.w)(i)||!1===i)&&(n[r]=i)}return n}(e.parent)||{},v=[],_=new Set,y={},x=1/0;for(let t=0;t<g;t++){var b;let s=m[t],p=n[s],f=void 0!==l[s]?l[s]:u[s],g=(0,h.w)(f),S=s===o?p.isActive:null;!1===S&&(x=t);let E=f===u[s]&&f!==l[s]&&g;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),p.protectedKeys={...y},!p.isActive&&null===S||!f&&!p.prevProp||(0,a.N)(f)||"boolean"==typeof f)continue;let M=(b=p.prevProp,"string"==typeof f?f!==b:!!Array.isArray(f)&&!d(f,b)),T=M||s===o&&p.isActive&&!E&&g||t>x&&g,A=!1,w=Array.isArray(f)?f:[f],C=w.reduce(i(s),{});!1===S&&(C={});let{prevResolvedValues:P={}}=p,R={...P,...C},I=t=>{T=!0,_.has(t)&&(A=!0,_.delete(t)),p.needsAnimating[t]=!0;let n=e.getValue(t);n&&(n.liveStyle=!1)};for(let e in R){let t=C[e],n=P[e];if(!y.hasOwnProperty(e))((0,c.p)(t)&&(0,c.p)(n)?d(t,n):t===n)?void 0!==t&&_.has(e)?I(e):p.protectedKeys[e]=!0:null!=t?I(e):_.add(e)}p.prevProp=f,p.prevResolvedValues=C,p.isActive&&(y={...y,...C}),r&&e.blockInitialAnimation&&(T=!1);let L=!(E&&M)||A;T&&L&&v.push(...w.map(e=>({animation:e,options:{type:s}})))}if(_.size){let t={};if("boolean"!=typeof l.initial){let n=(0,s.K)(e,Array.isArray(l.initial)?l.initial[0]:l.initial);n&&n.transition&&(t.transition=n.transition)}_.forEach(n=>{let r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!=r?r:null}),v.push({animation:t})}let S=!!v.length;return r&&(!1===l.initial||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(v):Promise.resolve()}return{animateChanges:u,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;let a=u(t);for(let e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=_(),r=!0}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();(0,a.N)(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}let b=0;class S extends y{constructor(){super(...arguments),this.id=b++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}var E=n(20200),M=n(91597);let T={x:!1,y:!1};var A=n(22444);let w=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function C(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function P(e){return{point:{x:e.pageX,y:e.pageY}}}let R=e=>t=>w(t)&&e(t,P(t));function I(e,t,n,r){return C(e,t,R(n),r)}let L=(e,t)=>Math.abs(e-t);var D=n(24876),O=n(87697);class N{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=k(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){return Math.sqrt(L(e.x,t.x)**2+L(e.y,t.y)**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;let{point:r}=e,{timestamp:i}=O.uv;this.history.push({...r,timestamp:i});let{onStart:a,onMove:s}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=U(t,this.transformPagePoint),O.Gt.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let a=k("pointercancel"===e.type?this.lastMoveEventInfo:U(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!w(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;let a=U(P(e),this.transformPagePoint),{point:s}=a,{timestamp:o}=O.uv;this.history=[{...s,timestamp:o}];let{onSessionStart:l}=t;l&&l(e,k(a,this.history)),this.removeListeners=(0,D.F)(I(this.contextWindow,"pointermove",this.handlePointerMove),I(this.contextWindow,"pointerup",this.handlePointerUp),I(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),(0,O.WG)(this.updatePoint)}}function U(e,t){return t?{point:t(e.point)}:e}function F(e,t){return{x:e.x-t.x,y:e.y-t.y}}function k({point:e},t){return{point:e,delta:F(e,B(t)),offset:F(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null,i=B(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>(0,A.f)(.1)));)n--;if(!r)return{x:0,y:0};let a=(0,A.X)(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};let s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}(t,0)}}function B(e){return e[e.length-1]}function V(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}var z=n(4509),j=n(55994);function H(e){return e.max-e.min}function G(e,t,n,r=.5){e.origin=r,e.originPoint=(0,j.k)(t.min,t.max,e.origin),e.scale=H(n)/H(t),e.translate=(0,j.k)(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function W(e,t,n,r){G(e.x,t.x,n.x,r?r.originX:void 0),G(e.y,t.y,n.y,r?r.originY:void 0)}function q(e,t,n){e.min=n.min+t.min,e.max=e.min+H(t)}function X(e,t,n){e.min=t.min-n.min,e.max=e.min+H(t)}function $(e,t,n){X(e.x,t.x,n.x),X(e.y,t.y,n.y)}var Y=n(21701);function K(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Z(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function J(e,t,n){return{min:Q(e,t),max:Q(e,n)}}function Q(e,t){return"number"==typeof e?e:e[t]||0}var ee=n(92541);function et(e){return[e("x"),e("y")]}var en=n(2950),er=n(90583),ei=n(89636),ea=n(42989);let es=({current:e})=>e?e.ownerDocument.defaultView:null;var eo=n(15333);let el=new WeakMap;class eu{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=(0,ee.ge)(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){let{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;let{dragSnapToOrigin:r}=this.getProps();this.panSession=new N(e,{onSessionStart:e=>{let{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(P(e).point)},onStart:(e,t)=>{let{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===n||"y"===n?T[n]?null:(T[n]=!0,()=>{T[n]=!1}):T.x||T.y?null:(T.x=T.y=!0,()=>{T.x=T.y=!1}),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),et(e=>{let t=this.getAxisMotionValue(e).get()||0;if(ei.KN.test(t)){let{projection:n}=this.visualElement;if(n&&n.layout){let r=n.layout.layoutBox[e];r&&(t=H(r)*(parseFloat(t)/100))}}this.originPoint[e]=t}),i&&O.Gt.postRender(()=>i(e,t)),(0,eo.g)(this.visualElement,"transform");let{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{let{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;let{offset:s}=t;if(r&&null===this.currentDirection){this.currentDirection=function(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(s),null!==this.currentDirection&&i&&i(this.currentDirection);return}this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>et(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:es(this.visualElement)})}stop(e,t){let n=this.isDragging;if(this.cancel(),!n)return;let{velocity:r}=t;this.startAnimation(r);let{onDragEnd:i}=this.getProps();i&&O.Gt.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){let{drag:r}=this.getProps();if(!n||!ec(e,r,this.currentDirection))return;let i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?(0,j.k)(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?(0,j.k)(n,e,r.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&V(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=function(e,{top:t,left:n,bottom:r,right:i}){return{x:K(e.x,n,i),y:K(e.y,t,r)}}(r.layoutBox,t):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:J(e,"left","right"),y:J(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&et(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){let n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!V(t))return!1;let r=t.current;(0,M.V)(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:i}=this.visualElement;if(!i||!i.layout)return!1;let a=(0,en.L)(r,i.root,this.visualElement.getTransformPagePoint()),s={x:Z((e=i.layout.layoutBox).x,a.x),y:Z(e.y,a.y)};if(n){let e=n((0,er.pA)(s));this.hasMutatedConstraints=!!e,e&&(s=(0,er.FY)(e))}return s}startAnimation(e){let{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),o=this.constraints||{};return Promise.all(et(s=>{if(!ec(s,t,this.currentDirection))return;let l=o&&o[s]||{};a&&(l={min:0,max:0});let u={type:"inertia",velocity:n?e[s]:0,bounceStiffness:r?200:1e6,bounceDamping:r?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(s,u)})).then(s)}startAxisValueAnimation(e,t){let n=this.getAxisMotionValue(e);return(0,eo.g)(this.visualElement,e),n.start((0,ea.f)(e,n,0,t,this.visualElement,!1))}stopAnimation(){et(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){et(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){et(t=>{let{drag:n}=this.getProps();if(!ec(t,n,this.currentDirection))return;let{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){let{min:n,max:a}=r.layout.layoutBox[t];i.set(e[t]-(0,j.k)(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!V(t)||!n||!this.constraints)return;this.stopAnimation();let r={x:0,y:0};et(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){let n=t.get();r[e]=function(e,t){let n=.5,r=H(e),i=H(t);return i>r?n=(0,z.q)(t.min,t.max-r,e.min):r>i&&(n=(0,z.q)(e.min,e.max-i,t.min)),(0,Y.q)(0,1,n)}({min:n,max:n},this.constraints[e])}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),et(t=>{if(!ec(t,e,null))return;let n=this.getAxisMotionValue(t),{min:i,max:a}=this.constraints[t];n.set((0,j.k)(i,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;el.set(this.visualElement,this);let e=I(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();V(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),O.Gt.read(t);let i=C(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(et(t=>{let n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),a&&a()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=.35,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:s}}}function ec(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}class ed extends y{constructor(e){super(e),this.removeGroupControls=E.l,this.removeListeners=E.l,this.controls=new eu(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||E.l}unmount(){this.removeGroupControls(),this.removeListeners()}}let eh=e=>(t,n)=>{e&&O.Gt.postRender(()=>e(t,n))};class ep extends y{constructor(){super(...arguments),this.removePointerDownListener=E.l}onPointerDown(e){this.session=new N(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:es(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:eh(e),onStart:eh(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&O.Gt.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=I(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}var ef=n(74848),em=n(96540),eg=n(11973),ev=n(83006);let e_=(0,em.createContext)({}),ey={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ex(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let eb={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!ei.px.test(e))return e;e=parseFloat(e)}let n=ex(e,t.target.x),r=ex(e,t.target.y);return`${n}% ${r}%`}};var eS=n(93912),eE=n(86086);let{schedule:eM,cancel:eT}=(0,n(28384).I)(queueMicrotask,!1);class eA extends em.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;(0,eE.$)(eC),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ey.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,a=n.projection;return a&&(a.isPresent=i,r||e.layoutDependency!==t||void 0===t?a.willUpdate():this.safeToRemove(),e.isPresent===i||(i?a.promote():a.relegate()||O.Gt.postRender(()=>{let e=a.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),eM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ew(e){let[t,n]=(0,eg.xQ)(),r=(0,em.useContext)(ev.L);return(0,ef.jsx)(eA,{...e,layoutGroup:r,switchLayoutGroup:(0,em.useContext)(e_),isPresent:t,safeToRemove:n})}let eC={borderRadius:{...eb,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:eb,borderTopRightRadius:eb,borderBottomLeftRadius:eb,borderBottomRightRadius:eb,boxShadow:{correct:(e,{treeScale:t,projectionDelta:n})=>{let r=eS.f.parse(e);if(r.length>5)return e;let i=eS.f.createTransformer(e),a="number"!=typeof r[0]?1:0,s=n.x.scale*t.x,o=n.y.scale*t.y;r[0+a]/=s,r[1+a]/=o;let l=(0,j.k)(s,o,.5);return"number"==typeof r[2+a]&&(r[2+a]/=l),"number"==typeof r[3+a]&&(r[3+a]/=l),i(r)}}};var eP=n(55838),eR=n(34451),eI=n(52261),eL=n(85487),eD=n(80482),eO=n(95383);let eN=(e,t)=>e.depth-t.depth;class eU{constructor(){this.children=[],this.isDirty=!1}add(e){(0,eO.Kq)(this.children,e),this.isDirty=!0}remove(e){(0,eO.Ai)(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eN),this.isDirty=!1,this.children.forEach(e)}}var eF=n(88054),ek=n(85776),eB=n(68713),eV=n(48608),ez=n(35649);function ej(e){let t=(0,ez.S)(e)?e.get():e;return(0,eV.B)(t)?t.toValue():t}var eH=n(27001);let eG=["TopLeft","TopRight","BottomLeft","BottomRight"],eW=eG.length,eq=e=>"string"==typeof e?parseFloat(e):e,eX=e=>"number"==typeof e||ei.px.test(e);function e$(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let eY=eZ(0,.5,eH.yT),eK=eZ(.5,.95,E.l);function eZ(e,t,n){return r=>r<e?0:r>t?1:n((0,z.q)(e,t,r))}function eJ(e,t){e.min=t.min,e.max=t.max}function eQ(e,t){eJ(e.x,t.x),eJ(e.y,t.y)}function e0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}var e1=n(54576);function e3(e,t,n,r,i){return e-=t,e=(0,e1.hq)(e,1/n,r),void 0!==i&&(e=(0,e1.hq)(e,1/i,r)),e}function e2(e,t,[n,r,i],a,s){!function(e,t=0,n=1,r=.5,i,a=e,s=e){if(ei.KN.test(t)&&(t=parseFloat(t),t=(0,j.k)(s.min,s.max,t/100)-s.min),"number"!=typeof t)return;let o=(0,j.k)(a.min,a.max,r);e===a&&(o-=t),e.min=e3(e.min,t,n,o,i),e.max=e3(e.max,t,n,o,i)}(e,t[n],t[r],t[i],t.scale,a,s)}let e6=["x","scaleX","originX"],e7=["y","scaleY","originY"];function e4(e,t,n,r){e2(e.x,t,e6,n?n.x:void 0,r?r.x:void 0),e2(e.y,t,e7,n?n.y:void 0,r?r.y:void 0)}function e5(e){return 0===e.translate&&1===e.scale}function e8(e){return e5(e.x)&&e5(e.y)}function e9(e,t){return e.min===t.min&&e.max===t.max}function te(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function tt(e,t){return te(e.x,t.x)&&te(e.y,t.y)}function tn(e){return H(e.x)/H(e.y)}function tr(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class ti{constructor(){this.members=[]}add(e){(0,eO.Kq)(this.members,e),e.scheduleRender()}remove(e){if((0,eO.Ai)(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t;let n=this.members.findIndex(t=>e===t);if(0===n)return!1;for(let e=n;e>=0;e--){let n=this.members[e];if(!1!==n.isPresent){t=n;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}var ta=n(40877);let ts={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},to=["","X","Y","Z"],tl={visibility:"hidden"},tu=0;function tc(e,t,n,r){let{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function td({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=null==t?void 0:t()){this.id=tu++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ek.Q.value&&(ts.nodes=ts.calculatedTargetDeltas=ts.calculatedProjections=0),this.nodes.forEach(tf),this.nodes.forEach(tb),this.nodes.forEach(tS),this.nodes.forEach(tm),ek.Q.addProjectionMetrics&&ek.Q.addProjectionMetrics(ts)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new eU)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new eB.v),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,n=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=(0,eD.x)(t),this.instance=t;let{layoutId:r,layout:i,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(i||r)&&(this.isLayoutDirty=!0),e){let n;let r=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){let n=eL.k.now(),r=({timestamp:t})=>{let i=t-n;i>=250&&((0,O.WG)(r),e(i-250))};return O.Gt.read(r,!0),()=>(0,O.WG)(r)}(r,250),ey.hasAnimatedSinceResize&&(ey.hasAnimatedSinceResize=!1,this.nodes.forEach(tx))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&a&&(r||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let i=this.options.transition||a.getDefaultTransition()||tC,{onLayoutAnimationStart:s,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!tt(this.targetLayout,r),u=!t&&n;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,u);let t={...(0,eP.r)(i,"layout"),onPlay:s,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||tx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,(0,O.WG)(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tE),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:n}=t.options;if(!n)return;let r=(0,eI.P)(n);if(window.MotionHasOptimisedAnimation(r,"transform")){let{layout:e,layoutId:n}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",O.Gt,!(e||n))}let{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&e(i)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;let r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tv);return}this.isUpdating||this.nodes.forEach(t_),this.isUpdating=!1,this.nodes.forEach(ty),this.nodes.forEach(th),this.nodes.forEach(tp),this.clearAllSnapshots();let e=eL.k.now();O.uv.delta=(0,Y.q)(0,1e3/60,e-O.uv.timestamp),O.uv.timestamp=e,O.uv.isProcessing=!0,O.PP.update.process(O.uv),O.PP.preRender.process(O.uv),O.PP.render.process(O.uv),O.uv.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,eM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tg),this.sharedNodes.forEach(tM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,O.Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){O.Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),!this.snapshot||H(this.snapshot.measuredBox.x)||H(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=(0,ee.ge)(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){let t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!e8(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&(t||(0,ta.HD)(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let n=this.measurePageBox(),r=this.removeElementScroll(n);return e&&(r=this.removeTransform(r)),tI((t=r).x),tI(t.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;let{visualElement:t}=this.options;if(!t)return(0,ee.ge)();let n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(tD))){let{scroll:e}=this.root;e&&((0,e1.Ql)(n.x,e.offset.x),(0,e1.Ql)(n.y,e.offset.y))}return n}removeElementScroll(e){var t;let n=(0,ee.ge)();if(eQ(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let t=0;t<this.path.length;t++){let r=this.path[t],{scroll:i,options:a}=r;r!==this.root&&i&&a.layoutScroll&&(i.wasRoot&&eQ(n,e),(0,e1.Ql)(n.x,i.offset.x),(0,e1.Ql)(n.y,i.offset.y))}return n}applyTransform(e,t=!1){let n=(0,ee.ge)();eQ(n,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&(0,e1.Ww)(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),(0,ta.HD)(r.latestValues)&&(0,e1.Ww)(n,r.latestValues)}return(0,ta.HD)(this.latestValues)&&(0,e1.Ww)(n,this.latestValues),n}removeTransform(e){let t=(0,ee.ge)();eQ(t,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];if(!n.instance||!(0,ta.HD)(n.latestValues))continue;(0,ta.vk)(n.latestValues)&&n.updateSnapshot();let r=(0,ee.ge)();eQ(r,n.measurePageBox()),e4(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,r)}return(0,ta.HD)(this.latestValues)&&e4(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==O.uv.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t,n,r,i;let a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);let s=!!this.resumingFrom||this!==a;if(!(e||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:o,layoutId:l}=this.options;if(this.layout&&(o||l)){if(this.resolvedRelativeTargetAt=O.uv.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=(0,ee.ge)(),this.relativeTargetOrigin=(0,ee.ge)(),$(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),eQ(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=(0,ee.ge)(),this.targetWithTransforms=(0,ee.ge)()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),n=this.target,r=this.relativeTarget,i=this.relativeParent.target,q(n.x,r.x,i.x),q(n.y,r.y,i.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):eQ(this.target,this.layout.layoutBox),(0,e1.o4)(this.target,this.targetDelta)):eQ(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=(0,ee.ge)(),this.relativeTargetOrigin=(0,ee.ge)(),$(this.relativeTargetOrigin,this.target,e.target),eQ(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ek.Q.value&&ts.calculatedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||(0,ta.vk)(this.parent.latestValues)||(0,ta.vF)(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),n=!!this.resumingFrom||this!==t,r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===O.uv.timestamp&&(r=!1),r)return;let{layout:i,layoutId:a}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(i||a))return;eQ(this.layoutCorrected,this.layout.layoutBox);let s=this.treeScale.x,o=this.treeScale.y;(0,e1.OU)(this.layoutCorrected,this.treeScale,this.path,n),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=(0,ee.ge)());let{target:l}=t;if(!l){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(e0(this.prevProjectionDelta.x,this.projectionDelta.x),e0(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),W(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===s&&this.treeScale.y===o&&tr(this.projectionDelta.x,this.prevProjectionDelta.x)&&tr(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),ek.Q.value&&ts.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=(0,ee.xU)(),this.projectionDelta=(0,ee.xU)(),this.projectionDeltaWithTransform=(0,ee.xU)()}setAnimationOrigin(e,t=!1){let n;let r=this.snapshot,i=r?r.latestValues:{},a={...this.latestValues},s=(0,ee.xU)();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=(0,ee.ge)(),l=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),c=!u||u.members.length<=1,d=!!(l&&!c&&!0===this.options.crossfade&&!this.path.some(tw));this.animationProgress=0,this.mixTargetDelta=t=>{let r=t/1e3;if(tT(s.x,e.x,r),tT(s.y,e.y,r),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,h,p,f;$(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,tA(p.x,f.x,o.x,r),tA(p.y,f.y,o.y,r),n&&(u=this.relativeTarget,h=n,e9(u.x,h.x)&&e9(u.y,h.y))&&(this.isProjectionDirty=!1),n||(n=(0,ee.ge)()),eQ(n,this.relativeTarget)}l&&(this.animationValues=a,function(e,t,n,r,i,a){i?(e.opacity=(0,j.k)(0,void 0!==n.opacity?n.opacity:1,eY(r)),e.opacityExit=(0,j.k)(void 0!==t.opacity?t.opacity:1,0,eK(r))):a&&(e.opacity=(0,j.k)(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let i=0;i<eW;i++){let a=`border${eG[i]}Radius`,s=e$(t,a),o=e$(n,a);(void 0!==s||void 0!==o)&&(s||(s=0),o||(o=0),0===s||0===o||eX(s)===eX(o)?(e[a]=Math.max((0,j.k)(eq(s),eq(o),r),0),(ei.KN.test(o)||ei.KN.test(s))&&(e[a]+="%")):e[a]=o)}(t.rotate||n.rotate)&&(e.rotate=(0,j.k)(t.rotate||0,n.rotate||0,r))}(a,i,this.latestValues,r,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&((0,O.WG)(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=O.Gt.update(()=>{ey.hasAnimatedSinceResize=!0,eF.q.layout++,this.currentAnimation=(0,eR.z)(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{eF.q.layout--},onComplete:()=>{eF.q.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&tL(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||(0,ee.ge)();let t=H(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;let r=H(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}eQ(t,n),(0,e1.Ww)(t,i),W(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new ti),this.sharedNodes.get(e).add(t);let n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){let r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;let r={};n.z&&tc("z",e,r,this.animationValues);for(let t=0;t<to.length;t++)tc(`rotate${to[t]}`,e,r,this.animationValues),tc(`skew${to[t]}`,e,r,this.animationValues);for(let t in e.render(),r)e.setStaticValue(t,r[t]),this.animationValues&&(this.animationValues[t]=r[t]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return tl;let r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=ej(null==e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;let a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){let t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=ej(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!(0,ta.HD)(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}let s=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=function(e,t,n){let r="",i=e.x.translate/t.x,a=e.y.translate/t.y,s=(null==n?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(1!==t.x||1!==t.y)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){let{transformPerspective:e,rotate:t,rotateX:i,rotateY:a,skewX:s,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),a&&(r+=`rotateY(${a}deg) `),s&&(r+=`skewX(${s}deg) `),o&&(r+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),i&&(r.transform=i(s,r.transform));let{x:o,y:l}=this.projectionDelta;for(let e in r.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,a.animationValues?r.opacity=a===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:r.opacity=a===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,eE.H){if(void 0===s[e])continue;let{correct:t,applyTo:n,isCSSVariable:i}=eE.H[e],o="none"===r.transform?s[e]:t(s[e],a);if(n){let e=n.length;for(let t=0;t<e;t++)r[n[t]]=o}else i?this.options.visualElement.renderState.vars[e]=o:r[e]=o}return this.options.layoutId&&(r.pointerEvents=a===this?ej(null==e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(tv),this.root.sharedNodes.clear()}}}function th(e){e.updateLayout()}function tp(e){var t;let n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;"size"===i?et(e=>{let r=a?n.measuredBox[e]:n.layoutBox[e],i=H(r);r.min=t[e].min,r.max=r.min+i}):tL(i,n.layoutBox,t)&&et(r=>{let i=a?n.measuredBox[r]:n.layoutBox[r],s=H(t[r]);i.max=i.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)});let s=(0,ee.xU)();W(s,t,n.layoutBox);let o=(0,ee.xU)();a?W(o,e.applyTransform(r,!0),n.measuredBox):W(o,t,n.layoutBox);let l=!e8(s),u=!1;if(!e.resumeFrom){let r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){let{snapshot:i,layout:a}=r;if(i&&a){let s=(0,ee.ge)();$(s,n.layoutBox,i.layoutBox);let o=(0,ee.ge)();$(o,t,a.layoutBox),tt(s,o)||(u=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function tf(e){ek.Q.value&&ts.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tm(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tg(e){e.clearSnapshot()}function tv(e){e.clearMeasurements()}function t_(e){e.isLayoutDirty=!1}function ty(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function tx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function tb(e){e.resolveTargetDelta()}function tS(e){e.calcProjection()}function tE(e){e.resetSkewAndRotation()}function tM(e){e.removeLeadSnapshot()}function tT(e,t,n){e.translate=(0,j.k)(t.translate,0,n),e.scale=(0,j.k)(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function tA(e,t,n,r){e.min=(0,j.k)(t.min,n.min,r),e.max=(0,j.k)(t.max,n.max,r)}function tw(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let tC={duration:.45,ease:[.4,0,.1,1]},tP=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),tR=tP("applewebkit/")&&!tP("chrome/")?Math.round:E.l;function tI(e){e.min=tR(e.min),e.max=tR(e.max)}function tL(e,t,n){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(tn(t)-tn(n)))}function tD(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}let tO=td({attachResizeListener:(e,t)=>C(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tN={current:void 0},tU=td({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!tN.current){let e=new tO({});e.mount(window),e.setOptions({layoutScroll:!0}),tN.current=e}return tN.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});var tF=n(23497);function tk(e,t){let n=(0,tF.K)(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function tB(e){return!("touch"===e.pointerType||T.x||T.y)}function tV(e,t,n){let{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);let i=r["onHover"+n];i&&O.Gt.postRender(()=>i(t,P(t)))}class tz extends y{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){let[r,i,a]=tk(e,n),s=e=>{if(!tB(e))return;let{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;let a=e=>{tB(e)&&(r(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,i)};return r.forEach(e=>{e.addEventListener("pointerenter",s,i)}),a}(e,(e,t)=>(tV(this.node,t,"Start"),e=>tV(this.node,e,"End"))))}unmount(){}}class tj extends y{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=(0,D.F)(C(this.node.current,"focus",()=>this.onFocus()),C(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}let tH=(e,t)=>!!t&&(e===t||tH(e,t.parentElement)),tG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]),tW=new WeakSet;function tq(e){return t=>{"Enter"===t.key&&e(t)}}function tX(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}let t$=(e,t)=>{let n=e.currentTarget;if(!n)return;let r=tq(()=>{if(tW.has(n))return;tX(n,"down");let e=tq(()=>{tX(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>tX(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function tY(e){return w(e)&&!(T.x||T.y)}function tK(e,t,n){let{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);let i=r["onTap"+("End"===n?"":n)];i&&O.Gt.postRender(()=>i(t,P(t)))}class tZ extends y{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){let[r,i,a]=tk(e,n),s=e=>{let r=e.currentTarget;if(!tY(e)||tW.has(r))return;tW.add(r);let a=t(r,e),s=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),tY(e)&&tW.has(r)&&(tW.delete(r),"function"==typeof a&&a(e,{success:t}))},o=e=>{s(e,n.useGlobalTarget||tH(r,e.target))},l=e=>{s(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{tG.has(e.tagName)||-1!==e.tabIndex||null!==e.getAttribute("tabindex")||(e.tabIndex=0),(n.useGlobalTarget?window:e).addEventListener("pointerdown",s,i),e.addEventListener("focus",e=>t$(e,i),i)}),a}(e,(e,t)=>(tK(this.node,t,"Start"),(e,{success:t})=>tK(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}let tJ=new WeakMap,tQ=new WeakMap,t0=e=>{let t=tJ.get(e.target);t&&t(e)},t1=e=>{e.forEach(t0)},t3={some:0,all:1};class t2 extends y{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:t3[r]};return function(e,t,n){let r=function({root:e,...t}){let n=e||document;tQ.has(n)||tQ.set(n,{});let r=tQ.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(t1,{root:e,...t})),r[i]}(t);return tJ.set(e,n),r.observe(e),()=>{tJ.delete(e),r.unobserve(e)}}(this.node.current,a,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,i&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}let t6=(0,em.createContext)({strict:!1});var t7=n(60987);let t4=(0,em.createContext)({});var t5=n(90210);function t8(e){return Array.isArray(e)?e.join(" "):e}var t9=n(46559),ne=n(10225);let nt=Symbol.for("motionComponentSymbol");var nn=n(14394),nr=n(63797),ni=n(56475),na=n(98708),ns=n(55437);let no=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nl(e,t,n){for(let r in t)(0,ez.S)(t[r])||(0,na.z)(r,n)||(e[r]=t[r])}let nu=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nc(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||nu.has(e)}let nd=e=>!nc(e);try{!function(e){e&&(nd=t=>t.startsWith("on")?!nc(t):e(t))}(require("@emotion/is-prop-valid").default)}catch(e){}let nh=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function np(e){if("string"!=typeof e||e.includes("-"));else if(nh.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}var nf=n(34113);let nm=()=>({...no(),attrs:{}});var ng=n(64844),nv=n(29328),n_=n(49474);let ny=e=>(t,n)=>{let r=(0,em.useContext)(t4),i=(0,em.useContext)(nn.t),s=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,i,s){let o={latestValues:function(e,t,n,r){let i={},s=r(e,{});for(let e in s)i[e]=ej(s[e]);let{initial:o,animate:l}=e,u=(0,t5.e)(e),c=(0,t5.O)(e);t&&c&&!u&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===l&&(l=t.animate));let d=!!n&&!1===n.initial,h=(d=d||!1===o)?l:o;if(h&&"boolean"!=typeof h&&!(0,a.N)(h)){let t=Array.isArray(h)?h:[h];for(let n=0;n<t.length;n++){let r=(0,nv.a)(e,t[n]);if(r){let{transitionEnd:e,transition:t,...n}=r;for(let e in n){let t=n[e];if(Array.isArray(t)){let e=d?t.length-1:0;t=t[e]}null!==t&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}(r,i,s,e),renderState:t()};return n&&(o.onMount=e=>n({props:r,current:e,...o}),o.onUpdate=e=>n(e)),o})(e,t,r,i);return n?s():(0,n_.M)(s)},nx={useVisualState:ny({scrapeMotionValuesFromProps:n(90657).x,createRenderState:no})};var nb=n(892),nS=n(86210),nE=n(14138),nM=n(58784);let nT=["x","y","width","height","cx","cy","r"],nA={useVisualState:ny({scrapeMotionValuesFromProps:nM.x,createRenderState:nm,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!e.drag;if(!a){for(let e in i)if(nb.f.has(e)){a=!0;break}}if(!a)return;let s=!t;if(t)for(let n=0;n<nT.length;n++){let r=nT[n];e[r]!==t[r]&&(s=!0)}s&&O.Gt.read(()=>{(0,nS.H)(n,r),O.Gt.render(()=>{(0,nf.B)(r,i,(0,ng.n)(n.tagName),e.transformTemplate),(0,nE.d)(n,r)})})}})};var nw=n(78406),nC=n(24302);let nP=function(e){if("undefined"==typeof Proxy)return e;let t=new Map;return new Proxy((...t)=>e(...t),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}((r={animation:{Feature:x},exit:{Feature:S},inView:{Feature:t2},tap:{Feature:tZ},focus:{Feature:tj},hover:{Feature:tz},pan:{Feature:ep},drag:{Feature:ed,ProjectionNode:tU,MeasureLayout:ew},layout:{ProjectionNode:tU,MeasureLayout:ew}},i=(e,t)=>np(e)?new nC.l(t):new nw.M(t,{allowProjection:e!==em.Fragment}),function(e,{forwardMotionProps:t}={forwardMotionProps:!1}){return function({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){var a,s;function o(e,a){var s;let o;let l={...(0,em.useContext)(t7.Q),...e,layoutId:function({layoutId:e}){let t=(0,em.useContext)(ev.L).id;return t&&void 0!==e?t+"-"+e:e}(e)},{isStatic:u}=l,c=function(e){let{initial:t,animate:n}=function(e,t){if((0,t5.e)(e)){let{initial:t,animate:n}=e;return{initial:!1===t||(0,h.w)(t)?t:void 0,animate:(0,h.w)(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,em.useContext)(t4));return(0,em.useMemo)(()=>({initial:t,animate:n}),[t8(t),t8(n)])}(e),d=r(e,u);if(!u&&t9.B){(0,em.useContext)(t6).strict;let e=function(e){let{drag:t,layout:n}=ne.B;if(!t&&!n)return{};let r={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);o=e.MeasureLayout,c.visualElement=function(e,t,n,r,i){var a,s;let{visualElement:o}=(0,em.useContext)(t4),l=(0,em.useContext)(t6),u=(0,em.useContext)(nn.t),c=(0,em.useContext)(t7.Q).reducedMotion,d=(0,em.useRef)(null);r=r||l.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:c}));let h=d.current,p=(0,em.useContext)(e_);h&&!h.projection&&i&&("html"===h.type||"svg"===h.type)&&function(e,t,n,r){let{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&V(o),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}(d.current,n,i,p);let f=(0,em.useRef)(!1);(0,em.useInsertionEffect)(()=>{h&&f.current&&h.update(n,u)});let m=n[ni.n],g=(0,em.useRef)(!!m&&!(null===(a=window.MotionHandoffIsComplete)||void 0===a?void 0:a.call(window,m))&&(null===(s=window.MotionHasOptimisedAnimation)||void 0===s?void 0:s.call(window,m)));return(0,nr.E)(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),eM.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),(0,em.useEffect)(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,m)}),g.current=!1))}),h}(i,d,l,t,e.ProjectionNode)}return(0,ef.jsxs)(t4.Provider,{value:c,children:[o&&c.visualElement?(0,ef.jsx)(o,{visualElement:c.visualElement,...l}):null,n(i,e,(s=c.visualElement,(0,em.useCallback)(e=>{e&&d.onMount&&d.onMount(e),s&&(e?s.mount(e):s.unmount()),a&&("function"==typeof a?a(e):V(a)&&(a.current=e))},[s])),d,u,c.visualElement)]})}e&&function(e){for(let t in e)ne.B[t]={...ne.B[t],...e[t]}}(e),o.displayName=`motion.${"string"==typeof i?i:`create(${null!==(s=null!==(a=i.displayName)&&void 0!==a?a:i.name)&&void 0!==s?s:""})`}`;let l=(0,em.forwardRef)(o);return l[nt]=i,l}({...np(e)?nA:nx,preloadedFeatures:r,useRender:function(e=!1){return(t,n,r,{latestValues:i},a)=>{let s=(np(t)?function(e,t,n,r){let i=(0,em.useMemo)(()=>{let n=nm();return(0,nf.B)(n,t,(0,ng.n)(r),e.transformTemplate),{...n.attrs,style:{...n.style}}},[t]);if(e.style){let t={};nl(t,e.style,e),i.style={...t,...i.style}}return i}:function(e,t){let n={},r=function(e,t){let n=e.style||{},r={};return nl(r,n,e),Object.assign(r,function({transformTemplate:e},t){return(0,em.useMemo)(()=>{let n=no();return(0,ns.O)(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),r}(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n})(n,i,a,t),o=function(e,t,n){let r={};for(let i in e)("values"!==i||"object"!=typeof e.values)&&(nd(i)||!0===n&&nc(i)||!t&&!nc(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"==typeof t,e),l=t!==em.Fragment?{...o,...s,ref:r}:{},{children:u}=n,c=(0,em.useMemo)(()=>(0,ez.S)(u)?u.get():u,[u]);return(0,em.createElement)(t,{...l,children:c})}}(t),createVisualElement:i,Component:e})}))},64702:(e,t,n)=>{"use strict";n.d(t,{K:()=>m});var r=n(68299),i=n(70237),a=n(93912),s=n(55563);let o=new Set(["auto","none","0"]);var l=n(3532),u=n(91597),c=n(28657),d=n(36639);let h=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;var p=n(54387),f=n(51174);class m extends l.h{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let n=0;n<e.length;n++){let r=e[n];if("string"==typeof r&&(r=r.trim(),(0,d.p)(r))){let i=function e(t,n,r=1){(0,u.V)(r<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`);let[i,a]=function(e){let t=h.exec(e);if(!t)return[,];let[,n,r,i]=t;return[`--${null!=n?n:r}`,i]}(t);if(!i)return;let s=window.getComputedStyle(n).getPropertyValue(i);if(s){let e=s.trim();return(0,c.i)(e)?parseFloat(e):e}return(0,d.p)(a)?e(a,n,r+1):a}(r,t.current);void 0!==i&&(e[n]=i),n===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!i.$.has(n)||2!==e.length)return;let[r,a]=e,s=(0,f.n)(r),o=(0,f.n)(a);if(s!==o){if((0,p.E4)(s)&&(0,p.E4)(o))for(let t=0;t<e.length;t++){let n=e[t];"string"==typeof n&&(e[t]=parseFloat(n))}else this.needsMeasurement=!0}}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,n=[];for(let t=0;t<e.length;t++){var i;("number"==typeof(i=e[t])?0===i:null===i||"none"===i||"0"===i||(0,r.$)(i))&&n.push(t)}n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){let t=e[i];"string"==typeof t&&!o.has(t)&&(0,a.V)(t).values.length&&(r=e[i]),i++}if(r&&n)for(let i of t)e[i]=(0,s.J)(n,r)}(e,n,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=p.Hr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;let{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;let i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);let a=r.length-1,s=r[a];r[a]=p.Hr[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}},77078:(e,t,n)=>{"use strict";n.d(t,{b:()=>s});var r=n(99434),i=n(64702),a=n(35649);class s extends r.B{constructor(){super(...arguments),this.KeyframeResolver=i.K}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;(0,a.S)(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}},20285:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});let r=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase()},36639:(e,t,n)=>{"use strict";n.d(t,{j:()=>i,p:()=>s});let r=e=>t=>"string"==typeof t&&t.startsWith(e),i=r("--"),a=r("var(--"),s=e=>!!a(e)&&o.test(e.split("/*")[0].trim()),o=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu},80482:(e,t,n)=>{"use strict";function r(e){return e instanceof SVGElement&&"svg"!==e.tagName}n.d(t,{x:()=>r})},54387:(e,t,n)=>{"use strict";n.d(t,{E4:()=>s,Hr:()=>h,W9:()=>d});var r=n(55453),i=n(89636),a=n(892);let s=e=>e===r.ai||e===i.px,o=(e,t)=>parseFloat(e.split(", ")[t]),l=(e,t)=>(n,{transform:r})=>{if("none"===r||!r)return 0;let i=r.match(/^matrix3d\((.+)\)$/u);if(i)return o(i[1],t);{let t=r.match(/^matrix\((.+)\)$/u);return t?o(t[1],e):0}},u=new Set(["x","y","z"]),c=a.U.filter(e=>!u.has(e));function d(e){let t=[];return c.forEach(n=>{let r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}let h={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:l(4,13),y:l(5,14)};h.translateX=h.x,h.translateY=h.y},55563:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(93912),i=n(89543),a=n(6022);function s(e,t){let n=(0,a.D)(e);return n!==i.p&&(n=r.f),n.getAnimatableNone?n.getAnimatableNone(t):void 0}},6022:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var r=n(20578),i=n(89543);let a={...n(90984).W,color:r.y,backgroundColor:r.y,outlineColor:r.y,fill:r.y,stroke:r.y,borderColor:r.y,borderTopColor:r.y,borderRightColor:r.y,borderBottomColor:r.y,borderLeftColor:r.y,filter:i.p,WebkitFilter:i.p},s=e=>a[e]},51174:(e,t,n)=>{"use strict";n.d(t,{T:()=>s,n:()=>o});var r=n(55453),i=n(89636),a=n(83284);let s=[r.ai,i.px,i.KN,i.uj,i.vw,i.vh,{test:e=>"auto"===e,parse:e=>e}],o=e=>s.find((0,a.w)(e))},90984:(e,t,n)=>{"use strict";n.d(t,{W:()=>l});var r=n(55453),i=n(89636);let a={borderWidth:i.px,borderTopWidth:i.px,borderRightWidth:i.px,borderBottomWidth:i.px,borderLeftWidth:i.px,borderRadius:i.px,radius:i.px,borderTopLeftRadius:i.px,borderTopRightRadius:i.px,borderBottomRightRadius:i.px,borderBottomLeftRadius:i.px,width:i.px,maxWidth:i.px,height:i.px,maxHeight:i.px,top:i.px,right:i.px,bottom:i.px,left:i.px,padding:i.px,paddingTop:i.px,paddingRight:i.px,paddingBottom:i.px,paddingLeft:i.px,margin:i.px,marginTop:i.px,marginRight:i.px,marginBottom:i.px,marginLeft:i.px,backgroundPositionX:i.px,backgroundPositionY:i.px},s={rotate:i.uj,rotateX:i.uj,rotateY:i.uj,rotateZ:i.uj,scale:r.hs,scaleX:r.hs,scaleY:r.hs,scaleZ:r.hs,skew:i.uj,skewX:i.uj,skewY:i.uj,distance:i.px,translateX:i.px,translateY:i.px,translateZ:i.px,x:i.px,y:i.px,z:i.px,perspective:i.px,transformPerspective:i.px,opacity:r.X4,originX:i.gQ,originY:i.gQ,originZ:i.px},o={...r.ai,transform:Math.round},l={...a,...s,zIndex:o,size:i.px,fillOpacity:r.X4,strokeOpacity:r.X4,numOctaves:o}},83284:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});let r=e=>t=>t.test(e)},78406:(e,t,n)=>{"use strict";n.d(t,{M:()=>d});var r=n(2950),i=n(77078),a=n(36639),s=n(6022),o=n(55437),l=n(892),u=n(36207),c=n(90657);class d extends i.b{constructor(){super(...arguments),this.type="html",this.renderInstance=u.e}readValueFromInstance(e,t){if(l.f.has(t)){let e=(0,s.D)(t);return e&&e.default||0}{let n=window.getComputedStyle(e),r=((0,a.j)(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return(0,r.m)(e,t)}build(e,t,n){(0,o.O)(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return(0,c.x)(e,t,n)}}},55437:(e,t,n)=>{"use strict";n.d(t,{O:()=>u});var r=n(36639);let i=(e,t)=>t&&"number"==typeof e?t.transform(e):e;var a=n(90984),s=n(892);let o={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},l=s.U.length;function u(e,t,n){let{style:u,vars:c,transformOrigin:d}=e,h=!1,p=!1;for(let e in t){let n=t[e];if(s.f.has(e)){h=!0;continue}if((0,r.j)(e)){c[e]=n;continue}{let t=i(n,a.W[e]);e.startsWith("origin")?(p=!0,d[e]=t):u[e]=t}}if(!t.transform&&(h||n?u.transform=function(e,t,n){let r="",u=!0;for(let c=0;c<l;c++){let l=s.U[c],d=e[l];if(void 0===d)continue;let h=!0;if(!(h="number"==typeof d?d===(l.startsWith("scale")?1:0):0===parseFloat(d))||n){let e=i(d,a.W[l]);if(!h){u=!1;let t=o[l]||l;r+=`${t}(${e}) `}n&&(t[l]=e)}}return r=r.trim(),n?r=n(t,u?"":r):u&&(r="none"),r}(t,e.transform,n):u.transform&&(u.transform="none")),p){let{originX:e="50%",originY:t="50%",originZ:n=0}=d;u.transformOrigin=`${e} ${t} ${n}`}}},70237:(e,t,n)=>{"use strict";n.d(t,{$:()=>r});let r=new Set(["width","height","top","left","right","bottom",...n(892).U])},892:(e,t,n)=>{"use strict";n.d(t,{U:()=>r,f:()=>i});let r=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],i=new Set(r)},36207:(e,t,n)=>{"use strict";function r(e,{style:t,vars:n},r,i){for(let a in Object.assign(e.style,t,i&&i.getProjectionStyles(r)),n)e.style.setProperty(a,n[a])}n.d(t,{e:()=>r})},90657:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});var r=n(98708),i=n(35649);function a(e,t,n){var a;let{style:s}=e,o={};for(let l in s)((0,i.S)(s[l])||t.style&&(0,i.S)(t.style[l])||(0,r.z)(l,e)||(null===(a=null==n?void 0:n.getValue(l))||void 0===a?void 0:a.liveStyle)!==void 0)&&(o[l]=s[l]);return o}},544:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});let r=new WeakMap},24302:(e,t,n)=>{"use strict";n.d(t,{l:()=>m});var r=n(87697),i=n(92541),a=n(77078),s=n(20285),o=n(6022),l=n(892),u=n(34113),c=n(89202),d=n(64844),h=n(86210),p=n(14138),f=n(58784);class m extends a.b{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=i.ge,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&(0,h.H)(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(l.f.has(t)){let e=(0,o.D)(t);return e&&e.default||0}return t=c.e.has(t)?t:(0,s.I)(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return(0,f.x)(e,t,n)}onBindTransform(){this.current&&!this.renderState.dimensions&&r.Gt.postRender(this.updateDimensions)}build(e,t,n){(0,u.B)(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){(0,p.d)(e,t,n,r)}mount(e){this.isSVGTag=(0,d.n)(e.tagName),super.mount(e)}}},34113:(e,t,n)=>{"use strict";n.d(t,{B:()=>l});var r=n(55437),i=n(89636);let a={offset:"stroke-dashoffset",array:"stroke-dasharray"},s={offset:"strokeDashoffset",array:"strokeDasharray"};function o(e,t,n){return"string"==typeof e?e:i.px.transform(t+n*e)}function l(e,{attrX:t,attrY:n,attrScale:l,originX:u,originY:c,pathLength:d,pathSpacing:h=1,pathOffset:p=0,...f},m,g){if((0,r.O)(e,f,g),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:v,style:_,dimensions:y}=e;v.transform&&(y&&(_.transform=v.transform),delete v.transform),y&&(void 0!==u||void 0!==c||_.transform)&&(_.transformOrigin=function(e,t,n){let r=o(t,e.x,e.width),i=o(n,e.y,e.height);return`${r} ${i}`}(y,void 0!==u?u:.5,void 0!==c?c:.5)),void 0!==t&&(v.x=t),void 0!==n&&(v.y=n),void 0!==l&&(v.scale=l),void 0!==d&&function(e,t,n=1,r=0,o=!0){e.pathLength=1;let l=o?a:s;e[l.offset]=i.px.transform(-r);let u=i.px.transform(t),c=i.px.transform(n);e[l.array]=`${u} ${c}`}(v,d,h,p,!1)}},89202:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});let r=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"])},64844:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});let r=e=>"string"==typeof e&&"svg"===e.toLowerCase()},86210:(e,t,n)=>{"use strict";function r(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(e){t.dimensions={x:0,y:0,width:0,height:0}}}n.d(t,{H:()=>r})},14138:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var r=n(20285),i=n(36207),a=n(89202);function s(e,t,n,s){for(let n in(0,i.e)(e,t,void 0,s),t.attrs)e.setAttribute(a.e.has(n)?n:(0,r.I)(n),t.attrs[n])}},58784:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(35649),i=n(892),a=n(90657);function s(e,t,n){let s=(0,a.x)(e,t,n);for(let n in e)((0,r.S)(e[n])||(0,r.S)(t[n]))&&(s[-1!==i.U.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]);return s}},3532:(e,t,n)=>{"use strict";n.d(t,{h:()=>d,q:()=>c});var r=n(54387),i=n(87697);let a=new Set,s=!1,o=!1;function l(){if(o){let e=Array.from(a).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{let t=(0,r.W9)(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=n.get(e);t&&t.forEach(([t,n])=>{var r;null===(r=e.getValue(t))||void 0===r||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}o=!1,s=!1,a.forEach(e=>e.complete()),a.clear()}function u(){a.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(o=!0)})}function c(){u(),l()}class d{constructor(e,t,n,r,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(a.add(this),s||(s=!0,i.Gt.read(u),i.Gt.resolveKeyframes(l))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;for(let i=0;i<e.length;i++)if(null===e[i]){if(0===i){let i=null==r?void 0:r.get(),a=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){let r=n.readValue(t,a);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===i&&r.set(e[0])}else e[i]=e[i-1]}}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),a.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,a.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}},90210:(e,t,n)=>{"use strict";n.d(t,{O:()=>o,e:()=>s});var r=n(21039),i=n(11806),a=n(83031);function s(e){return(0,r.N)(e.animate)||a._.some(t=>(0,i.w)(e[t]))}function o(e){return!!(s(e)||e.variants)}},11806:(e,t,n)=>{"use strict";function r(e){return"string"==typeof e||Array.isArray(e)}n.d(t,{w:()=>r})},29156:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(29328);function i(e,t,n){let i=e.getProps();return(0,r.a)(i,t,void 0!==n?n:i.custom,e)}},29328:(e,t,n)=>{"use strict";function r(e,t,n,r){if("function"==typeof t||("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t)){let[i,a]=function(e){let t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}(r);t=t(void 0!==n?n:e.custom,i,a)}return t}n.d(t,{a:()=>r})},83031:(e,t,n)=>{"use strict";n.d(t,{U:()=>r,_:()=>i});let r=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],i=["initial",...r]},88054:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});let r={layout:0,mainThread:0,waapi:0}},85776:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});let r={value:null,addProjectionMetrics:null}},73627:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});let r={skipAnimations:!1,useManualTiming:!1}},95383:(e,t,n)=>{"use strict";function r(e,t){-1===e.indexOf(t)&&e.push(t)}function i(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}n.d(t,{Ai:()=>i,Kq:()=>r})},21701:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});let r=(e,t,n)=>n>t?t:n<e?e:n},60885:(e,t,n)=>{"use strict";n.d(t,{G:()=>u});var r=n(91597),i=n(20200),a=n(4509),s=n(21701),o=n(94560),l=n(24876);function u(e,t,{clamp:n=!0,ease:c,mixer:d}={}){let h=e.length;if((0,r.V)(h===t.length,"Both input and output ranges must be the same length"),1===h)return()=>t[0];if(2===h&&t[0]===t[1])return()=>t[1];let p=e[0]===e[1];e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());let f=function(e,t,n){let r=[],a=n||o.j,s=e.length-1;for(let n=0;n<s;n++){let s=a(e[n],e[n+1]);if(t){let e=Array.isArray(t)?t[n]||i.l:t;s=(0,l.F)(e,s)}r.push(s)}return r}(t,c,d),m=f.length,g=n=>{if(p&&n<e[0])return t[0];let r=0;if(m>1)for(;r<e.length-2&&!(n<e[r+1]);r++);let i=(0,a.q)(e[r],e[r+1],n);return f[r](i)};return n?t=>g((0,s.q)(e[0],e[h-1],t)):g}},46559:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});let r="undefined"!=typeof window},28657:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});let r=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)},68299:(e,t,n)=>{"use strict";n.d(t,{$:()=>r});let r=e=>/^0[^.\s]+$/u.test(e)},94560:(e,t,n)=>{"use strict";n.d(t,{j:()=>T});var r=n(55994),i=n(91597);function a(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var s=n(71785),o=n(75116),l=n(27392);function u(e,t){return n=>n>0?t:e}let c=(e,t,n)=>{let r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},d=[s.u,o.B,l.V],h=e=>d.find(t=>t.test(e));function p(e){let t=h(e);if((0,i.$)(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`),!t)return!1;let n=t.parse(e);return t===l.V&&(n=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,s=0,o=0;if(t/=100){let r=n<.5?n*(1+t):n+t-n*t,l=2*n-r;i=a(l,r,e+1/3),s=a(l,r,e),o=a(l,r,e-1/3)}else i=s=o=n;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*o),alpha:r}}(n)),n}let f=(e,t)=>{let n=p(e),i=p(t);if(!n||!i)return u(e,t);let a={...n};return e=>(a.red=c(n.red,i.red,e),a.green=c(n.green,i.green,e),a.blue=c(n.blue,i.blue,e),a.alpha=(0,r.k)(n.alpha,i.alpha,e),o.B.transform(a))};var m=n(24876),g=n(20578),v=n(93912),_=n(36639);let y=new Set(["none","hidden"]);function x(e,t){return n=>(0,r.k)(e,t,n)}function b(e){return"number"==typeof e?x:"string"==typeof e?(0,_.p)(e)?u:g.y.test(e)?f:M:Array.isArray(e)?S:"object"==typeof e?g.y.test(e)?f:E:u}function S(e,t){let n=[...e],r=n.length,i=e.map((e,n)=>b(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function E(e,t){let n={...e,...t},r={};for(let i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=b(e[i])(e[i],t[i]));return e=>{for(let t in r)n[t]=r[t](e);return n}}let M=(e,t)=>{let n=v.f.createTransformer(t),r=(0,v.V)(e),a=(0,v.V)(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?y.has(e)&&!a.values.length||y.has(t)&&!r.values.length?function(e,t){return y.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):(0,m.F)(S(function(e,t){var n;let r=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){let s=t.types[a],o=e.indexes[s][i[s]],l=null!==(n=e.values[o])&&void 0!==n?n:0;r[a]=l,i[s]++}return r}(r,a),a.values),n):((0,i.$)(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),u(e,t))};function T(e,t,n){return"number"==typeof e&&"number"==typeof t&&"number"==typeof n?(0,r.k)(e,t,n):b(e)(e,t)}},55994:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});let r=(e,t,n)=>e+(t-e)*n},21790:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(91124);function i(e){let t=[0];return(0,r.f)(t,e.length-1),t}},91124:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var r=n(4509),i=n(55994);function a(e,t){let n=e[e.length-1];for(let a=1;a<=t;a++){let s=(0,r.q)(0,t,a);e.push((0,i.k)(n,1,s))}}},24876:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});let r=(e,t)=>n=>t(e(n)),i=(...e)=>e.reduce(r)},48608:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,K:()=>a});var r=n(96397);let i=e=>!!(e&&"object"==typeof e&&e.mix&&e.toValue),a=e=>(0,r.p)(e)?e[e.length-1]||0:e},68713:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(95383);class i{constructor(){this.subscriptions=[]}add(e){return(0,r.Kq)(this.subscriptions,e),()=>(0,r.Ai)(this.subscriptions,e)}notify(e,t,n){let r=this.subscriptions.length;if(r){if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){let r=this.subscriptions[i];r&&r(e,t,n)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}},50760:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});var r=n(60885);let i=e=>e&&"object"==typeof e&&e.mix,a=e=>i(e)?e.mix:void 0;function s(...e){let t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],o=e[1+n],l=e[2+n],u=e[3+n],c=(0,r.G)(o,l,{mixer:a(l[0]),...u});return t?c(i):c}},49474:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var r=n(96540);function i(e){let t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}},63797:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var r=n(96540);let i=n(46559).B?r.useLayoutEffect:r.useEffect},48731:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(96540);function i(e,t,n){(0,r.useInsertionEffect)(()=>e.on(t,n),[e,t,n])}},77052:(e,t,n)=>{"use strict";function r(e,t){return t?1e3/t*e:0}n.d(t,{f:()=>r})},84192:(e,t,n)=>{"use strict";n.d(t,{KG:()=>u,OQ:()=>c,bt:()=>l});var r=n(85487),i=n(68713),a=n(77052),s=n(87697);let o=e=>!isNaN(parseFloat(e)),l={current:void 0};class u{constructor(e,t={}){this.version="12.4.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{let n=r.k.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=r.k.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=o(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new i.v);let n=this.events[e].add(t);return"change"===e?()=>{n(),s.Gt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return l.current&&l.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){let e=r.k.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;let t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return(0,a.f)(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function c(e,t){return new u(e,t)}},71785:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(75116);let i={test:(0,n(97118).$)("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:r.B.transform}},27392:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(55453),i=n(89636),a=n(29525),s=n(97118);let o={test:(0,s.$)("hsl","hue"),parse:(0,s.q)("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+i.KN.transform((0,a.a)(t))+", "+i.KN.transform((0,a.a)(n))+", "+(0,a.a)(r.X4.transform(s))+")"}},20578:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var r=n(71785),i=n(27392),a=n(75116);let s={test:e=>a.B.test(e)||r.u.test(e)||i.V.test(e),parse:e=>a.B.test(e)?a.B.parse(e):i.V.test(e)?i.V.parse(e):r.u.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?a.B.transform(e):i.V.transform(e)}},75116:(e,t,n)=>{"use strict";n.d(t,{B:()=>u});var r=n(21701),i=n(55453),a=n(29525),s=n(97118);let o=e=>(0,r.q)(0,255,e),l={...i.ai,transform:e=>Math.round(o(e))},u={test:(0,s.$)("rgb","red"),parse:(0,s.q)("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+l.transform(e)+", "+l.transform(t)+", "+l.transform(n)+", "+(0,a.a)(i.X4.transform(r))+")"}},97118:(e,t,n)=>{"use strict";n.d(t,{$:()=>a,q:()=>s});var r=n(29624);let i=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a=(e,t)=>n=>!!("string"==typeof n&&i.test(n)&&n.startsWith(e)||t&&null!=n&&Object.prototype.hasOwnProperty.call(n,t)),s=(e,t,n)=>i=>{if("string"!=typeof i)return i;let[a,s,o,l]=i.match(r.S);return{[e]:parseFloat(a),[t]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==l?parseFloat(l):1}}},89543:(e,t,n)=>{"use strict";n.d(t,{p:()=>l});var r=n(93912),i=n(29624);let a=new Set(["brightness","contrast","saturate","opacity"]);function s(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[r]=n.match(i.S)||[];if(!r)return e;let s=n.replace(r,""),o=a.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+s+")"}let o=/\b([a-z-]*)\(.*?\)/gu,l={...r.f,getAnimatableNone:e=>{let t=e.match(o);return t?t.map(s).join(" "):e}}},93912:(e,t,n)=>{"use strict";n.d(t,{V:()=>c,f:()=>f});var r=n(20578);let i=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;var a=n(29624),s=n(29525);let o="number",l="color",u=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function c(e){let t=e.toString(),n=[],i={color:[],number:[],var:[]},a=[],s=0,c=t.replace(u,e=>(r.y.test(e)?(i.color.push(s),a.push(l),n.push(r.y.parse(e))):e.startsWith("var(")?(i.var.push(s),a.push("var"),n.push(e)):(i.number.push(s),a.push(o),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:c,indexes:i,types:a}}function d(e){return c(e).values}function h(e){let{split:t,types:n}=c(e),i=t.length;return e=>{let a="";for(let u=0;u<i;u++)if(a+=t[u],void 0!==e[u]){let t=n[u];t===o?a+=(0,s.a)(e[u]):t===l?a+=r.y.transform(e[u]):a+=e[u]}return a}}let p=e=>"number"==typeof e?0:e,f={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(a.S))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(i))||void 0===n?void 0:n.length)||0)>0},parse:d,createTransformer:h,getAnimatableNone:function(e){let t=d(e);return h(e)(t.map(p))}}},55453:(e,t,n)=>{"use strict";n.d(t,{X4:()=>a,ai:()=>i,hs:()=>s});var r=n(21701);let i={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},a={...i,transform:e=>(0,r.q)(0,1,e)},s={...i,default:1}},89636:(e,t,n)=>{"use strict";n.d(t,{KN:()=>a,gQ:()=>u,px:()=>s,uj:()=>i,vh:()=>o,vw:()=>l});let r=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),i=r("deg"),a=r("%"),s=r("px"),o=r("vh"),l=r("vw"),u={...a,parse:e=>a.parse(e)/100,transform:e=>a.transform(100*e)}},29624:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});let r=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu},29525:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});let r=e=>Math.round(1e5*e)/1e5},46004:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var r=n(96540),i=n(84192),a=n(60987),s=n(49474);function o(e){let t=(0,s.M)(()=>(0,i.OQ)(e)),{isStatic:n}=(0,r.useContext)(a.Q);if(n){let[,n]=(0,r.useState)(e);(0,r.useEffect)(()=>t.on("change",n),[])}return t}},13097:(e,t,n)=>{"use strict";let r,i;n.d(t,{L:()=>H});var a=n(84192),s=n(49474),o=n(96540),l=n(91597),u=n(60215),c=n(20200),d=n(87697);function h(e,t){let n;let r=()=>{let{currentTime:r}=t,i=(null===r?0:r.value)/100;n!==i&&e(i),n=i};return d.Gt.update(r,!0),()=>(0,d.WG)(r)}var p=n(23497);let f=new WeakMap;function m({target:e,contentRect:t,borderBoxSize:n}){var r;null===(r=f.get(e))||void 0===r||r.forEach(r=>{r({target:e,contentSize:t,get size(){return function(e,t){if(t){let{inlineSize:e,blockSize:n}=t[0];return{width:e,height:n}}return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}(e,n)}})})}function g(e){e.forEach(m)}let v=new Set;var _=n(4509),y=n(77052);let x=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),b=()=>({time:0,x:x(),y:x()}),S={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function E(e,t,n,r){let i=n[t],{length:a,position:s}=S[t],o=i.current,l=n.time;i.current=e[`scroll${s}`],i.scrollLength=e[`scroll${a}`]-e[`client${a}`],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=(0,_.q)(0,i.scrollLength,i.current);let u=r-l;i.velocity=u>50?0:(0,y.f)(i.current-o,u)}var M=n(21701),T=n(60885),A=n(21790);let w={start:0,center:.5,end:1};function C(e,t,n=0){let r=0;if(e in w&&(e=w[e]),"string"==typeof e){let t=parseFloat(e);e.endsWith("px")?r=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?r=t/100*document.documentElement.clientWidth:e.endsWith("vh")?r=t/100*document.documentElement.clientHeight:e=t}return"number"==typeof e&&(r=t*e),n+r}let P=[0,0],R={All:[[0,0],[1,1]]},I={x:0,y:0},L=new WeakMap,D=new WeakMap,O=new WeakMap,N=e=>e===document.documentElement?window:e;function U(e,{container:t=document.documentElement,...n}={}){let a=O.get(t);a||(a=new Set,O.set(t,a));let s=function(e,t,n,r={}){return{measure:()=>(function(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight})(e,r.target,n),update:t=>{E(e,"x",n,t),E(e,"y",n,t),n.time=t,(r.offset||r.target)&&function(e,t,n){let{offset:r=R.All}=n,{target:i=e,axis:a="y"}=n,s="y"===a?"height":"width",o=i!==e?function(e,t){let n={x:0,y:0},r=e;for(;r&&r!==t;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if("svg"===r.tagName){let e=r.getBoundingClientRect(),t=(r=r.parentElement).getBoundingClientRect();n.x+=e.left-t.left,n.y+=e.top-t.top}else if(r instanceof SVGGraphicsElement){let{x:e,y:t}=r.getBBox();n.x+=e,n.y+=t;let i=null,a=r.parentNode;for(;!i;)"svg"===a.tagName&&(i=a),a=r.parentNode;r=i}else break;return n}(i,e):I,l=i===e?{width:e.scrollWidth,height:e.scrollHeight}:"getBBox"in i&&"svg"!==i.tagName?i.getBBox():{width:i.clientWidth,height:i.clientHeight},u={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let c=!t[a].interpolate,d=r.length;for(let e=0;e<d;e++){let n=function(e,t,n,r){let i=Array.isArray(e)?e:P,a=0;return"number"==typeof e?i=[e,e]:"string"==typeof e&&(i=(e=e.trim()).includes(" ")?e.split(" "):[e,w[e]?e:"0"]),C(i[0],n,r)-C(i[1],t)}(r[e],u[s],l[s],o[a]);c||n===t[a].interpolatorOffsets[e]||(c=!0),t[a].offset[e]=n}c&&(t[a].interpolate=(0,T.G)(t[a].offset,(0,A.Z)(r),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=(0,M.q)(0,1,t[a].interpolate(t[a].current))}(e,n,r)},notify:()=>t(n)}}(t,e,b(),n);if(a.add(s),!L.has(t)){let e=()=>{for(let e of a)e.measure()},n=()=>{for(let e of a)e.update(d.uv.timestamp)},s=()=>{for(let e of a)e.notify()},o=()=>{d.Gt.read(e,!1,!0),d.Gt.read(n,!1,!0),d.Gt.update(s,!1,!0)};L.set(t,o);let l=N(t);window.addEventListener("resize",o,{passive:!0}),t!==document.documentElement&&D.set(t,"function"==typeof t?(v.add(t),i||(i=()=>{let e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};v.forEach(e=>e(t))},window.addEventListener("resize",i)),()=>{v.delete(t),!v.size&&i&&(i=void 0)}):function(e,t){r||"undefined"==typeof ResizeObserver||(r=new ResizeObserver(g));let n=(0,p.K)(e);return n.forEach(e=>{let n=f.get(e);n||(n=new Set,f.set(e,n)),n.add(t),null==r||r.observe(e)}),()=>{n.forEach(e=>{let n=f.get(e);null==n||n.delete(t),(null==n?void 0:n.size)||null==r||r.unobserve(e)})}}(t,o)),l.addEventListener("scroll",o,{passive:!0})}let o=L.get(t);return d.Gt.read(o,!1,!0),()=>{var e;(0,d.WG)(o);let n=O.get(t);if(!n||(n.delete(s),n.size))return;let r=L.get(t);L.delete(t),r&&(N(t).removeEventListener("scroll",r),null===(e=D.get(t))||void 0===e||e(),window.removeEventListener("resize",r))}}let F=new Map;function k({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),F.has(t)||F.set(t,{});let r=F.get(t);return r[n]||(r[n]=(0,u.J)()?new ScrollTimeline({source:t,axis:n}):function({source:e,container:t,axis:n="y"}){e&&(t=e);let r={value:0},i=U(e=>{r.value=100*e[n].progress},{container:t,axis:n});return{currentTime:r,cancel:i}}({source:t,axis:n})),r[n]}function B(e){return e&&(e.target||e.offset)}var V=n(63797);function z(e,t){(0,l.$)(!!(!t||t.current),`You have defined a ${e} options but the provided ref is not yet hydrated, probably because it's defined higher up the tree. Try calling useScroll() in the same component as the ref, or setting its \`layoutEffect: false\` option.`)}let j=()=>({scrollX:(0,a.OQ)(0),scrollY:(0,a.OQ)(0),scrollXProgress:(0,a.OQ)(0),scrollYProgress:(0,a.OQ)(0)});function H({container:e,target:t,layoutEffect:n=!0,...r}={}){let i=(0,s.M)(j);return(n?V.E:o.useEffect)(()=>(z("target",t),z("container",e),function(e,{axis:t="y",...n}={}){let r={axis:t,...n};return"function"==typeof e?2===e.length||B(r)?U(t=>{e(t[r.axis].progress,t)},r):h(e,k(r)):function(e,t){if(e.flatten(),B(t))return e.pause(),U(n=>{e.time=e.duration*n[t.axis].progress},t);{let n=k(t);return e.attachTimeline?e.attachTimeline(n,e=>(e.pause(),h(t=>{e.time=e.duration*t},n))):c.l}}(e,r)}((e,{x:t,y:n})=>{i.scrollX.set(t.current),i.scrollXProgress.set(t.progress),i.scrollY.set(n.current),i.scrollYProgress.set(n.progress)},{...r,container:(null==e?void 0:e.current)||void 0,target:(null==t?void 0:t.current)||void 0})),[e,t,JSON.stringify(r.offset)]),i}},71843:(e,t,n)=>{"use strict";n.d(t,{G:()=>c});var r=n(50760),i=n(46004),a=n(63797),s=n(87697);function o(e,t){let n=(0,i.d)(t()),r=()=>n.set(t());return r(),(0,a.E)(()=>{let t=()=>s.Gt.preRender(r,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),(0,s.WG)(r)}}),n}var l=n(49474),u=n(84192);function c(e,t,n,i){if("function"==typeof e)return function(e){u.bt.current=[],e();let t=o(u.bt.current,e);return u.bt.current=void 0,t}(e);let a="function"==typeof t?t:(0,r.p)(t,n,i);return Array.isArray(e)?d(e,a):d([e],([e])=>a(e))}function d(e,t){let n=(0,l.M)(()=>[]);return o(e,()=>{n.length=0;let r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)})}},15333:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var r=n(35649);function i(e,t){let n=e.getValue("willChange");if((0,r.S)(n)&&n.add)return n.add(t)}},35649:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});let r=e=>!!(e&&e.getVelocity)},39684:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var r=n(60215);class i{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){let n=this.animations.map(n=>(0,r.J)()&&n.attachTimeline?n.attachTimeline(e):"function"==typeof t?t(n):void 0);return()=>{n.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class a extends i{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}},75605:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r,t:()=>i});let r=2e4;function i(e){let t=0,n=e.next(t);for(;!n.done&&t<r;)t+=50,n=e.next(t);return t>=r?1/0:t}},68347:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{W:()=>r})},55838:(e,t,n)=>{"use strict";function r(e,t){return e?e[t]||e.default||e:void 0}n.d(t,{r:()=>r})},32170:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(4509);let i=(e,t,n=10)=>{let i="",a=Math.max(Math.round(t/n),2);for(let t=0;t<a;t++)i+=e((0,r.q)(0,a-1,t))+", ";return`linear(${i.substring(0,i.length-2)})`}},27373:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});let r=e=>Array.isArray(e)&&"number"==typeof e[0]},23497:(e,t,n)=>{"use strict";function r(e,t,n){var r;if(e instanceof Element)return[e];if("string"==typeof e){let i=document;t&&(i=t.current);let a=null!==(r=null==n?void 0:n[e])&&void 0!==r?r:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}n.d(t,{K:()=>r})},60215:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});let r=(0,n(14346).p)(()=>void 0!==window.ScrollTimeline)},91597:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,V:()=>a});var r=n(20200);let i=r.l,a=r.l},14346:(e,t,n)=>{"use strict";function r(e){let t;return()=>(void 0===t&&(t=e()),t)}n.d(t,{p:()=>r})},20200:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});let r=e=>e},4509:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});let r=(e,t,n)=>{let r=t-e;return 0===r?1:(n-e)/r}},22444:(e,t,n)=>{"use strict";n.d(t,{X:()=>i,f:()=>r});let r=e=>1e3*e,i=e=>e/1e3},1146:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(15086);let i=function(e,t){for(var n=e.length;n--;)if((0,r.A)(e[n][0],t))return n;return -1};var a=Array.prototype.splice;function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=function(){this.__data__=[],this.size=0},s.prototype.delete=function(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)},s.prototype.get=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]},s.prototype.has=function(e){return i(this.__data__,e)>-1},s.prototype.set=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};let o=s},45945:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(74129),i=n(19943);let a=(0,r.A)(i.A,"Map")},52683:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=(0,n(74129).A)(Object,"create"),i=Object.prototype.hasOwnProperty,a=Object.prototype.hasOwnProperty;function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=function(){this.__data__=r?r(null):{},this.size=0},s.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},s.prototype.get=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0},s.prototype.has=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)},s.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this};var o=n(1146),l=n(45945);let u=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},c=function(e,t){var n=e.__data__;return u(t)?n["string"==typeof t?"string":"hash"]:n.map};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=function(){this.size=0,this.__data__={hash:new s,map:new(l.A||o.A),string:new s}},d.prototype.delete=function(e){var t=c(this,e).delete(e);return this.size-=t?1:0,t},d.prototype.get=function(e){return c(this,e).get(e)},d.prototype.has=function(e){return c(this,e).has(e)},d.prototype.set=function(e,t){var n=c(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};let h=d},38719:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(74129),i=n(19943);let a=(0,r.A)(i.A,"Set")},28619:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(52683);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r.A;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},i.prototype.has=function(e){return this.__data__.has(e)};let a=i},58415:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1146),i=n(45945),a=n(52683);function s(e){var t=this.__data__=new r.A(e);this.size=t.size}s.prototype.clear=function(){this.__data__=new r.A,this.size=0},s.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},s.prototype.get=function(e){return this.__data__.get(e)},s.prototype.has=function(e){return this.__data__.has(e)},s.prototype.set=function(e,t){var n=this.__data__;if(n instanceof r.A){var s=n.__data__;if(!i.A||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new a.A(s)}return n.set(e,t),this.size=n.size,this};let o=s},66395:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(19943).A.Symbol},20707:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},90622:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},542:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6781);let i=function(e,t,n){"__proto__"==t&&r.A?(0,r.A)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},81312:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r,i=n(84404),a=n(71984);let s=(r=i.A,function(e,t){if(null==e)return e;if(!(0,a.A)(e))return r(e,t);for(var n=e.length,i=-1,s=Object(e);++i<n&&!1!==t(s[i],i,s););return e})},84404:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let r=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),s=a.length;s--;){var o=a[++r];if(!1===t(i[o],o,i))break}return e};var i=n(71477);let a=function(e,t){return e&&r(e,t,i.A)}},46820:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(12408),i=n(20951);let a=function(e,t){t=(0,r.A)(t,e);for(var n=0,a=t.length;null!=e&&n<a;)e=e[(0,i.A)(t[n++])];return n&&n==a?e:void 0}},2466:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(66395),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=r.A?r.A.toStringTag:void 0;let l=function(e){var t=a.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[o]=n:delete e[o]),i};var u=Object.prototype.toString,c=r.A?r.A.toStringTag:void 0;let d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?l(e):u.call(e)}},1994:(e,t,n)=>{"use strict";n.d(t,{A:()=>en});var r=n(58415),i=n(28619);let a=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var s=n(30869);let o=function(e,t,n,r,o,l){var u=1&n,c=e.length,d=t.length;if(c!=d&&!(u&&d>c))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var f=-1,m=!0,g=2&n?new i.A:void 0;for(l.set(e,t),l.set(t,e);++f<c;){var v=e[f],_=t[f];if(r)var y=u?r(_,v,f,t,e,l):r(v,_,f,e,t,l);if(void 0!==y){if(y)continue;m=!1;break}if(g){if(!a(t,function(e,t){if(!(0,s.A)(g,t)&&(v===e||o(v,e,n,r,l)))return g.push(t)})){m=!1;break}}else if(!(v===_||o(v,_,n,r,l))){m=!1;break}}return l.delete(e),l.delete(t),m};var l=n(66395),u=n(19943),c=u.A.Uint8Array,d=n(15086);let h=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n};var p=n(34493),f=l.A?l.A.prototype:void 0,m=f?f.valueOf:void 0;let g=function(e,t,n,r,i,a,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!a(new c(e),new c(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,d.A)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=h;case"[object Set]":var u=1&r;if(l||(l=p.A),e.size!=t.size&&!u)break;var f=s.get(e);if(f)return f==t;r|=2,s.set(e,t);var g=o(l(e),l(t),r,i,a,s);return s.delete(e),g;case"[object Symbol]":if(m)return m.call(e)==m.call(t)}return!1};var v=n(90622),_=n(54871);let y=function(e,t,n){var r=t(e);return(0,_.A)(e)?r:(0,v.A)(r,n(e))},x=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a};var b=Object.prototype.propertyIsEnumerable,S=Object.getOwnPropertySymbols,E=S?function(e){return null==e?[]:x(S(e=Object(e)),function(t){return b.call(e,t)})}:function(){return[]},M=n(71477);let T=function(e){return y(e,M.A,E)};var A=Object.prototype.hasOwnProperty;let w=function(e,t,n,r,i,a){var s=1&n,o=T(e),l=o.length;if(l!=T(t).length&&!s)return!1;for(var u=l;u--;){var c=o[u];if(!(s?c in t:A.call(t,c)))return!1}var d=a.get(e),h=a.get(t);if(d&&h)return d==t&&h==e;var p=!0;a.set(e,t),a.set(t,e);for(var f=s;++u<l;){var m=e[c=o[u]],g=t[c];if(r)var v=s?r(g,m,c,t,e,a):r(m,g,c,e,t,a);if(!(void 0===v?m===g||i(m,g,n,r,a):v)){p=!1;break}f||(f="constructor"==c)}if(p&&!f){var _=e.constructor,y=t.constructor;_!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p};var C=n(74129),P=(0,C.A)(u.A,"DataView"),R=n(45945),I=(0,C.A)(u.A,"Promise"),L=n(38719),D=(0,C.A)(u.A,"WeakMap"),O=n(2466),N=n(46187),U="[object Map]",F="[object Promise]",k="[object Set]",B="[object WeakMap]",V="[object DataView]",z=(0,N.A)(P),j=(0,N.A)(R.A),H=(0,N.A)(I),G=(0,N.A)(L.A),W=(0,N.A)(D),q=O.A;(P&&q(new P(new ArrayBuffer(1)))!=V||R.A&&q(new R.A)!=U||I&&q(I.resolve())!=F||L.A&&q(new L.A)!=k||D&&q(new D)!=B)&&(q=function(e){var t=(0,O.A)(e),n="[object Object]"==t?e.constructor:void 0,r=n?(0,N.A)(n):"";if(r)switch(r){case z:return V;case j:return U;case H:return F;case G:return k;case W:return B}return t});let X=q;var $=n(10578),Y=n(82158),K="[object Arguments]",Z="[object Array]",J="[object Object]",Q=Object.prototype.hasOwnProperty;let ee=function(e,t,n,i,a,s){var l=(0,_.A)(e),u=(0,_.A)(t),c=l?Z:X(e),d=u?Z:X(t);c=c==K?J:c,d=d==K?J:d;var h=c==J,p=d==J,f=c==d;if(f&&(0,$.A)(e)){if(!(0,$.A)(t))return!1;l=!0,h=!1}if(f&&!h)return s||(s=new r.A),l||(0,Y.A)(e)?o(e,t,n,i,a,s):g(e,t,c,n,i,a,s);if(!(1&n)){var m=h&&Q.call(e,"__wrapped__"),v=p&&Q.call(t,"__wrapped__");if(m||v){var y=m?e.value():e,x=v?t.value():t;return s||(s=new r.A),a(y,x,n,i,s)}}return!!f&&(s||(s=new r.A),w(e,t,n,i,a,s))};var et=n(92464);let en=function e(t,n,r,i,a){return t===n||(null!=t&&null!=n&&((0,et.A)(t)||(0,et.A)(n))?ee(t,n,r,i,e,a):t!=t&&n!=n)}},72312:(e,t,n)=>{"use strict";n.d(t,{A:()=>T});var r=n(58415),i=n(1994);let a=function(e,t,n,a){var s=n.length,o=s,l=!a;if(null==e)return!o;for(e=Object(e);s--;){var u=n[s];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++s<o;){var c=(u=n[s])[0],d=e[c],h=u[1];if(l&&u[2]){if(void 0===d&&!(c in e))return!1}else{var p=new r.A;if(a)var f=a(d,h,c,e,t,p);if(!(void 0===f?(0,i.A)(h,d,3,a,p):f))return!1}}return!0};var s=n(80887);let o=function(e){return e==e&&!(0,s.A)(e)};var l=n(71477);let u=function(e){for(var t=(0,l.A)(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,o(i)]}return t},c=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},d=function(e){var t=u(e);return 1==t.length&&t[0][2]?c(t[0][0],t[0][1]):function(n){return n===e||a(n,e,t)}};var h=n(52618);let p=function(e,t){return null!=e&&t in Object(e)};var f=n(12408),m=n(94077),g=n(54871),v=n(28643),_=n(84400),y=n(20951);let x=function(e,t,n){t=(0,f.A)(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var s=(0,y.A)(t[r]);if(!(a=null!=e&&n(e,s)))break;e=e[s]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&(0,_.A)(i)&&(0,v.A)(s,i)&&((0,g.A)(e)||(0,m.A)(e))};var b=n(78492),S=n(79402),E=n(46820);let M=function(e){var t;return(0,b.A)(e)?(t=(0,y.A)(e),function(e){return null==e?void 0:e[t]}):function(t){return(0,E.A)(t,e)}},T=function(e){if("function"==typeof e)return e;if(null==e)return S.A;if("object"==typeof e){var t,n;return(0,g.A)(e)?(t=e[0],n=e[1],(0,b.A)(t)&&o(n)?c((0,y.A)(t),n):function(e){var r=(0,h.A)(e,t);return void 0===r&&r===n?null!=e&&x(e,t,p):(0,i.A)(n,r,3)}):d(e)}return M(e)}},57383:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(79402),i=n(20707),a=Math.max,s=n(6781),o=s.A?function(e,t){return(0,s.A)(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:r.A,l=Date.now,u=function(e){var t=0,n=0;return function(){var r=l(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(o);let c=function(e,t){var n,s;return u((n=t,s=r.A,n=a(void 0===n?e.length-1:n,0),function(){for(var t=arguments,r=-1,o=a(t.length-n,0),l=Array(o);++r<o;)l[r]=t[n+r];r=-1;for(var u=Array(n+1);++r<n;)u[r]=t[r];return u[n]=s(l),(0,i.A)(e,this,u)}),e+"")}},79041:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(28619);let i=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return -1},a=function(e){return e!=e},s=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return -1},o=function(e,t){return!!(null==e?0:e.length)&&(t==t?s(e,t,0):i(e,a,0))>-1},l=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var u=n(30869),c=n(38719),d=n(34493),h=c.A&&1/(0,d.A)(new c.A([,-0]))[1]==1/0?function(e){return new c.A(e)}:function(){};let p=function(e,t,n){var i=-1,a=o,s=e.length,c=!0,p=[],f=p;if(n)c=!1,a=l;else if(s>=200){var m=t?null:h(e);if(m)return(0,d.A)(m);c=!1,a=u.A,f=new r.A}else f=t?[]:p;i:for(;++i<s;){var g=e[i],v=t?t(g):g;if(g=n||0!==g?g:0,c&&v==v){for(var _=f.length;_--;)if(f[_]===v)continue i;t&&f.push(v),p.push(g)}else a(f,v,n)||(f!==p&&f.push(v),p.push(g))}return p}},30869:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e,t){return e.has(t)}},12408:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(54871),i=n(78492),a=n(52683);function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(s.Cache||a.A),n}s.Cache=a.A;var o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,u=function(e){var t=s(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,n,r,i){t.push(r?i.replace(l,"$1"):n||e)}),t}),c=n(21550);let d=function(e,t){return(0,r.A)(e)?e:(0,i.A)(e,t)?[e]:u((0,c.A)(e))}},6781:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(74129);let i=function(){try{var e=(0,r.A)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},54738:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r="object"==typeof global&&global&&global.Object===Object&&global},74129:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(2928),i=n(19943).A["__core-js_shared__"],a=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),s=n(80887),o=n(46187),l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let p=function(e,t){var n,i=null==e?void 0:e[t];return(n=i,(0,s.A)(n)&&(!a||!(a in n))&&((0,r.A)(n)?h:l).test((0,o.A)(n)))?i:void 0}},28643:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=/^(?:0|[1-9]\d*)$/;let i=function(e,t){var n=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},78492:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(54871),i=n(47880),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;let o=function(e,t){if((0,r.A)(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||(0,i.A)(e))||s.test(e)||!a.test(e)||null!=t&&e in Object(t)}},19943:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(54738),i="object"==typeof self&&self&&self.Object===Object&&self;let a=r.A||i||Function("return this")()},34493:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},20951:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(47880),i=1/0;let a=function(e){if("string"==typeof e||(0,r.A)(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},46187:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=Function.prototype.toString;let i=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},59136:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(80887),i=n(19943);let a=function(){return i.A.Date.now()};var s=n(68967),o=Math.max,l=Math.min;let u=function(e,t,n){var i,u,c,d,h,p,f=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function _(t){var n=i,r=u;return i=u=void 0,f=t,d=e.apply(r,n)}function y(e){var n=e-p,r=e-f;return void 0===p||n>=t||n<0||g&&r>=c}function x(){var e,n,r,i=a();if(y(i))return b(i);h=setTimeout(x,(e=i-p,n=i-f,r=t-e,g?l(r,c-n):r))}function b(e){return(h=void 0,v&&i)?_(e):(i=u=void 0,d)}function S(){var e,n=a(),r=y(n);if(i=arguments,u=this,p=n,r){if(void 0===h)return f=e=p,h=setTimeout(x,t),m?_(e):d;if(g)return clearTimeout(h),h=setTimeout(x,t),_(p)}return void 0===h&&(h=setTimeout(x,t)),d}return t=(0,s.A)(t)||0,(0,r.A)(n)&&(m=!!n.leading,c=(g="maxWait"in n)?o((0,s.A)(n.maxWait)||0,t):c,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==h&&clearTimeout(h),f=0,i=p=u=h=void 0},S.flush=function(){return void 0===h?d:b(a())},S}},15086:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e,t){return e===t||e!=e&&t!=t}},51474:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});let r=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var i=n(81312),a=n(79402),s=n(54871);let o=function(e,t){return((0,s.A)(e)?r:i.A)(e,"function"==typeof t?t:a.A)}},52618:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(46820);let i=function(e,t,n){var i=null==e?void 0:(0,r.A)(e,t);return void 0===i?n:i}},79402:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e){return e}},94077:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(2466),i=n(92464);let a=function(e){return(0,i.A)(e)&&"[object Arguments]"==(0,r.A)(e)};var s=Object.prototype,o=s.hasOwnProperty,l=s.propertyIsEnumerable;let u=a(function(){return arguments}())?a:function(e){return(0,i.A)(e)&&o.call(e,"callee")&&!l.call(e,"callee")}},54871:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=Array.isArray},71984:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2928),i=n(84400);let a=function(e){return null!=e&&(0,i.A)(e.length)&&!(0,r.A)(e)}},10578:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(19943),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof module&&module&&!module.nodeType&&module,s=a&&a.exports===i?r.A.Buffer:void 0;let o=(s?s.isBuffer:void 0)||function(){return!1}},2928:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2466),i=n(80887);let a=function(e){if(!(0,i.A)(e))return!1;var t=(0,r.A)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},84400:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},80887:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},92464:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e){return null!=e&&"object"==typeof e}},47880:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2466),i=n(92464);let a=function(e){return"symbol"==typeof e||(0,i.A)(e)&&"[object Symbol]"==(0,r.A)(e)}},82158:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(2466),i=n(84400),a=n(92464),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var o=n(54738),l="object"==typeof exports&&exports&&!exports.nodeType&&exports,u=l&&"object"==typeof module&&module&&!module.nodeType&&module,c=u&&u.exports===l&&o.A.process,d=function(){try{var e=u&&u.require&&u.require("util").types;if(e)return e;return c&&c.binding&&c.binding("util")}catch(e){}}(),h=d&&d.isTypedArray;let p=h?function(e){return h(e)}:function(e){return(0,a.A)(e)&&(0,i.A)(e.length)&&!!s[(0,r.A)(e)]}},71477:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});let r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var i,a,s=n(94077),o=n(54871),l=n(10578),u=n(28643),c=n(82158),d=Object.prototype.hasOwnProperty;let h=function(e,t){var n=(0,o.A)(e),i=!n&&(0,s.A)(e),a=!n&&!i&&(0,l.A)(e),h=!n&&!i&&!a&&(0,c.A)(e),p=n||i||a||h,f=p?r(e.length,String):[],m=f.length;for(var g in e)(t||d.call(e,g))&&!(p&&("length"==g||a&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,u.A)(g,m)))&&f.push(g);return f};var p=Object.prototype;let f=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||p)};var m=(i=Object.keys,a=Object,function(e){return i(a(e))}),g=Object.prototype.hasOwnProperty;let v=function(e){if(!f(e))return m(e);var t=[];for(var n in Object(e))g.call(e,n)&&"constructor"!=n&&t.push(n);return t};var _=n(71984);let y=function(e){return(0,_.A)(e)?h(e):v(e)}},85870:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(542),i=n(84404),a=n(72312);let s=function(e,t){var n={};return t=(0,a.A)(t,3),(0,i.A)(e,function(e,i,a){(0,r.A)(n,i,t(e,i,a))}),n}},68967:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=/\s/;let i=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t};var a=/^\s+/,s=n(80887),o=n(47880),l=0/0,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt;let p=function(e){if("number"==typeof e)return e;if((0,o.A)(e))return l;if((0,s.A)(e)){var t,n="function"==typeof e.valueOf?e.valueOf():e;e=(0,s.A)(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)?t.slice(0,i(t)+1).replace(a,""):t;var r=c.test(e);return r||d.test(e)?h(e.slice(2),r?2:8):u.test(e)?l:+e}},21550:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(66395);let i=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var a=n(54871),s=n(47880),o=1/0,l=r.A?r.A.prototype:void 0,u=l?l.toString:void 0;let c=function e(t){if("string"==typeof t)return t;if((0,a.A)(t))return i(t,e)+"";if((0,s.A)(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-o?"-0":n},d=function(e){return null==e?"":c(e)}},88753:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(79041);let i=function(e){return e&&e.length?(0,r.A)(e):[]}},28988:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(72312),i=n(79041);let a=function(e,t){return e&&e.length?(0,i.A)(e,(0,r.A)(t,2)):[]}},6586:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(21550),i=0;let a=function(e){var t=++i;return(0,r.A)(e)+t}},52218:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,q:()=>i});var r=new Set(["domain","path","max-age","expires","samesite","secure","httponly"]);function i(e){let t={},n,i,a=0,s=e.split(/;\s*/g),o,l;for(;a<s.length;a++)if(~(n=(i=s[a]).indexOf("="))){if(o=i.substring(0,n++).trim(),'"'===(l=i.substring(n).trim())[0]&&(l=l.substring(1,l.length-1)),~l.indexOf("%"))try{l=decodeURIComponent(l)}catch(e){}r.has(i=o.toLowerCase())?"expires"===i?t.expires=new Date(l):"max-age"===i?t.maxage=+l:t[i]=l:t[o]=l}else(o=i.trim().toLowerCase())&&("httponly"===o||"secure"===o)&&(t[o]=!0);return t}function a(e,t,n={}){let r=e+"="+encodeURIComponent(t);return n.expires&&(r+="; Expires="+new Date(n.expires).toUTCString()),null!=n.maxage&&n.maxage>=0&&(r+="; Max-Age="+(0|n.maxage)),n.domain&&(r+="; Domain="+n.domain),n.path&&(r+="; Path="+n.path),n.samesite&&(r+="; SameSite="+n.samesite),(n.secure||"None"===n.samesite)&&(r+="; Secure"),n.httponly&&(r+="; HttpOnly"),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(90781),t(18424),t(88440))),_N_E=e.O()}]);