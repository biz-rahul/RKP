<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Device Information</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    background: #020617;
    color: #e5e7eb;
    font-family: system-ui, Arial, sans-serif;
}
.container {
    max-width: 800px;
    margin: 80px auto;
    padding: 40px;
    background: #020617;
    border-radius: 14px;
    box-shadow: 0 0 30px rgba(0,0,0,0.7);
}
h1 { font-size: 28px; }
p { line-height: 1.7; color: #cbd5f5; }
button {
    margin-top: 30px;
    padding: 14px 26px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: #22c55e;
    color: #022c22;
}
button:hover { background: #16a34a; }
</style>
</head>

<body>

<div class="container">
    <h1>Device Information</h1>

    <p>
        This website is designed for you to know about your device and browser.
        Please wait â€” a <strong>.json</strong> file is being generated and downloaded.
    </p>

    <button onclick="downloadJSON()">Download JSON</button>
</div>

<script>
function detectBrandFromUA(ua) {
    if (/SM-|Samsung/i.test(ua)) return "Samsung";
    if (/Redmi|Mi |Xiaomi/i.test(ua)) return "Xiaomi";
    if (/Vivo/i.test(ua)) return "Vivo";
    if (/OPPO|CPH/i.test(ua)) return "Oppo";
    if (/Realme/i.test(ua)) return "Realme";
    if (/OnePlus/i.test(ua)) return "OnePlus";
    if (/Pixel/i.test(ua)) return "Google Pixel";
    if (/iPhone|iPad/i.test(ua)) return "Apple";
    return "Unknown / Not Exposed";
}

async function downloadJSON() {

    const data = {};

    /* =========================
       USER AGENT
    ========================== */
    const ua = navigator.userAgent;
    data.userAgent = ua;

    /* =========================
       DEVICE INFORMATION
    ========================== */
    let deviceType = "Desktop";
    if (/Mobi|Android/i.test(ua)) deviceType = "Mobile";
    if (/Tablet|iPad/i.test(ua)) deviceType = "Tablet";

    let osName = "Unknown";
    let osVersion = "Unknown";

    if (/Android/i.test(ua)) {
        osName = "Android";
        osVersion = ua.match(/Android\s([\d\.]+)/)?.[1] || "Unknown";
    } else if (/iPhone|iPad|iPod/i.test(ua)) {
        osName = "iOS";
        osVersion = ua.match(/OS\s([\d_]+)/)?.[1]?.replace(/_/g, ".") || "Unknown";
    } else if (/Windows NT/i.test(ua)) {
        osName = "Windows";
        osVersion = ua.match(/Windows NT\s([\d\.]+)/)?.[1] || "Unknown";
    } else if (/Mac OS X/i.test(ua)) {
        osName = "macOS";
        osVersion = ua.match(/Mac OS X\s([\d_]+)/)?.[1]?.replace(/_/g, ".") || "Unknown";
    }

    data.device = {
        deviceType: deviceType,
        brand: detectBrandFromUA(ua),
        operatingSystem: osName,
        osVersion: osVersion
    };

    /* =========================
       BROWSER INFORMATION
    ========================== */
    let browserName = "Unknown";
    let browserVersion = "Unknown";

    if (/Chrome/i.test(ua) && !/Edg/i.test(ua)) {
        browserName = "Google Chrome";
        browserVersion = ua.match(/Chrome\/([\d\.]+)/)?.[1];
    } else if (/Edg/i.test(ua)) {
        browserName = "Microsoft Edge";
        browserVersion = ua.match(/Edg\/([\d\.]+)/)?.[1];
    } else if (/Firefox/i.test(ua)) {
        browserName = "Mozilla Firefox";
        browserVersion = ua.match(/Firefox\/([\d\.]+)/)?.[1];
    } else if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) {
        browserName = "Apple Safari";
        browserVersion = ua.match(/Version\/([\d\.]+)/)?.[1];
    }

    data.browser = {
        name: browserName,
        version: browserVersion,
        language: navigator.language,
        cookiesEnabled: navigator.cookieEnabled
    };

    /* =========================
       BATTERY INFORMATION
    ========================== */
    if (navigator.getBattery) {
        const battery = await navigator.getBattery();
        data.battery = {
            charging: battery.charging,
            levelPercentage: Math.round(battery.level * 100),
            chargingTimeSeconds: battery.chargingTime,
            dischargingTimeSeconds: battery.dischargingTime
        };
    } else {
        data.battery = "Battery API not supported";
    }

    /* =========================
       DOWNLOAD JSON
    ========================== */
    const blob = new Blob(
        [JSON.stringify(data, null, 4)],
        { type: "application/json" }
    );

    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "device_basic_information.json";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}
</script>

</body>
</html>
